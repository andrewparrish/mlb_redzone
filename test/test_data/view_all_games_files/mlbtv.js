/*
Do NOT edit this file!
This file will be deleted with the next Jenkins/Grunt build.
Build Date: Tuesday, May 16th, 2017, 6 : 47 : 27 PM GMT
Version:2.5.0
Questions? contact Paolo Vaca 
*/

define("bam.url/url",[],function(){function a(a){for(var b=["constructor","hash","host","hostname","href","origin","pathname","port","protocol","search"],c={},d=0,e=b.length;e>d;d++)c[b[d]]=a?a[b[d]]:window.location[b[d]];return c.toString=function(){return this.href},c}function b(a){var b;return typeof a===e&&(b=isNaN(a)?a in g?g[a]:a:parseFloat(a)),b}var c={},d=new RegExp("([^&\\?]+?)=([^&]*)","ig"),e="string",f=decodeURIComponent,g={"true":!0,"false":!1,"null":null};return c.Location=function(b){b=a(b);var d=b.search||"",e=c.parseQueryParameters(d);return b.getParam=function(a){return a+""in e?e[a]:null},b.getParams=function(a){return c.parseQueryParameters(d,a)},b.isSecure=function(){return/^https/i.test(b.protocol)},b.getDomain=function(){var a=b.hostname.split(".");return a[a.length-2]},b},c.parseQueryParameters=function(a,c){a=a||window.location.search,c=void 0===c?!1:c;var g,h,i={};return typeof a===e&&f(a).replace(d,function(){g=arguments[1],h=c?b(f(arguments[2])):f(arguments[2]),g in i?Array.isArray(i[g])?i[g].push(h):i[g]=[i[g],h]:i[g]=h}),i},c.parseEncodedQueryParameters=function(a,c){a=a||window.location.search,c=void 0===c?!1:c;var g,h,i={};return typeof a===e&&a.replace(d,function(){g=arguments[1],h=c?b(f(arguments[2])):f(arguments[2]),g in i?Array.isArray(i[g])?i[g].push(h):i[g]=[i[g],h]:i[g]=h}),i},c.parseFragmentIdentifiers=function(a,b){a=a||window.location.hash;var d=a.substring(a.indexOf("#")+1);return c.parseQueryParameters(d,b)},c}),define("console.wrapper/console.wrapper",["require","exports","module"],function(a,b,c){var d,e=function(){},f=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],g=window.console=window.console||{},h=[];c={disable:function(){for(var a=f.length;a--;)d=f[a],g[d]?(h[d]=g[d],g[d]=e):g[d]=e},enable:function(){for(var a=f.length;a--;)d=f[a],g[d]&&(g[d]=h[d])}},$.extend(b,c)}),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a?!0:A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this);var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e),g=function(a){"use strict";function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c,d=a,e={ProgramNode:function(a,c,d,f){var g,h;3===arguments.length?(f=d,d=null):2===arguments.length&&(f=c,c=null),b.call(this,f),this.type="program",this.statements=a,this.strip={},d?(h=d[0],h?(g={first_line:h.firstLine,last_line:h.lastLine,last_column:h.lastColumn,first_column:h.firstColumn},this.inverse=new e.ProgramNode(d,c,g)):this.inverse=new e.ProgramNode(d,c),this.strip.right=c.left):c&&(this.strip.left=c.right)},MustacheNode:function(a,c,d,f,g){if(b.call(this,g),this.type="mustache",this.strip=f,null!=d&&d.charAt){var h=d.charAt(3)||d.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!d;a instanceof e.SexprNode?this.sexpr=a:this.sexpr=new e.SexprNode(a,c),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type="sexpr",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1),g=this.eligibleHelper=e.isSimple;this.isHelper=g&&(f.length||c)},PartialNode:function(a,c,d,e){b.call(this,e),this.type="partial",this.partialName=a,this.context=c,this.strip=d},BlockNode:function(a,c,e,f,g){if(b.call(this,g),a.sexpr.id.original!==f.path.original)throw new d(a.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block",this.mustache=a,this.program=c,this.inverse=e,this.strip={left:a.strip.left,right:f.strip.right},(c||e).strip.left=a.strip.right,(e||c).strip.right=f.strip.left,e&&!c&&(this.isInverse=!0)},ContentNode:function(a,c){b.call(this,c),this.type="content",this.string=a},HashNode:function(a,c){b.call(this,c),this.type="hash",this.pairs=a},IdNode:function(a,c){b.call(this,c),this.type="ID";for(var e="",f=[],g=0,h=0,i=a.length;i>h;h++){var j=a[h].part;if(e+=(a[h].separator||"")+j,".."===j||"."===j||"this"===j){if(f.length>0)throw new d("Invalid path: "+e,this);".."===j?g++:this.isScoped=!0}else f.push(j)}this.original=e,this.parts=f,this.string=f.join("."),this.depth=g,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type="DATA",this.id=a},StringNode:function(a,c){b.call(this,c),this.type="STRING",this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,c){b.call(this,c),this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,c){b.call(this,c),this.type="comment",this.comment=a}};return c=e}(c),h=function(){"use strict";var a,b=function(){function a(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(0)||"~"===b.charAt(1)}}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return new e.ProgramNode(g[i-1],this._$);case 2:return new e.ProgramNode([],this._$);case 3:this.$=new e.ProgramNode([],g[i-1],g[i],this._$);break;case 4:this.$=new e.ProgramNode(g[i-2],g[i-1],g[i],this._$);break;case 5:this.$=new e.ProgramNode(g[i-1],g[i],[],this._$);break;case 6:this.$=new e.ProgramNode(g[i],this._$);break;case 7:this.$=new e.ProgramNode([],this._$);break;case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[g[i]];break;case 10:g[i-1].push(g[i]),this.$=g[i-1];break;case 11:this.$=new e.BlockNode(g[i-2],g[i-1].inverse,g[i-1],g[i],this._$);break;case 12:this.$=new e.BlockNode(g[i-2],g[i-1],g[i-1].inverse,g[i],this._$);break;case 13:this.$=g[i];break;case 14:this.$=g[i];break;case 15:this.$=new e.ContentNode(g[i],this._$);break;case 16:this.$=new e.CommentNode(g[i],this._$);break;case 17:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 18:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 19:this.$={path:g[i-1],strip:a(g[i-2],g[i])};break;case 20:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 21:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 22:this.$=new e.PartialNode(g[i-2],g[i-1],a(g[i-3],g[i]),this._$);break;case 23:this.$=a(g[i-1],g[i]);break;case 24:this.$=new e.SexprNode([g[i-2]].concat(g[i-1]),g[i],this._$);break;case 25:this.$=new e.SexprNode([g[i]],null,this._$);break;case 26:this.$=g[i];break;case 27:this.$=new e.StringNode(g[i],this._$);break;case 28:this.$=new e.IntegerNode(g[i],this._$);break;case 29:this.$=new e.BooleanNode(g[i],this._$);break;case 30:this.$=g[i];break;case 31:g[i-1].isHelper=!0,this.$=g[i-1];break;case 32:this.$=new e.HashNode(g[i],this._$);break;case 33:this.$=[g[i-2],g[i]];break;case 34:this.$=new e.PartialNameNode(g[i],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(g[i],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(g[i],this._$));break;case 37:this.$=new e.DataNode(g[i],this._$);break;case 38:this.$=new e.IdNode(g[i],this._$);break;case 39:g[i-2].push({part:g[i],separator:g[i-1]}),this.$=g[i-2];break;case 40:this.$=[{part:g[i]}];break;case 43:this.$=[];break;case 44:g[i-1].push(g[i]);break;case 47:this.$=[g[i]];break;case 48:g[i-1].push(g[i])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],
15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return e(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return b.yytext=e(1,2).replace(/\\"/g,'"'),32;case 24:return b.yytext=e(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return b.yytext=e(1,2),40;case 31:return"INVALID";case 32:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},a}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}();return a=b}(),i=function(a,b){"use strict";function c(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var d={},e=a,f=b;return d.parser=e,d.parse=c,d}(h,g),j=function(a){"use strict";function b(){}function c(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function d(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=b||{},"data"in b||(b.data=!0);var e;return function(a,b){return e||(e=d()),e.call(this,a,b)}}var e={},f=a;return e.Compiler=b,b.prototype={compiler:b,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;g>f;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode("strip"),b=this[a.type](a),c.right&&this.opcode("strip"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;d>c;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new f("You specified knownHelpersOnly, but used the unknown helper "+e,a);this.opcode("invokeHelper",d.length,e,a.isRoot)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var c=1,d=a.parts.length;d>c;c++)this.opcode("lookup",a.parts[c])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new f("Scoped data references are not supported: "+a.original,a);this.opcode("lookupData");for(var b=a.id.parts,c=0,d=b.length;d>c;c++)this.opcode("lookup",b[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b)):this[b.type](b)},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},e.precompile=c,e.compile=d,e}(c),k=function(a,b){"use strict";function c(a){this.value=a}function d(){}var e,f=a.COMPILER_REVISION,g=a.REVISION_CHANGES,h=a.log,i=b;d.prototype={nameLookup:function(a,b){var c,e;return 0===a.indexOf("depth")&&(c=!0),e=/^[0-9]+$/.test(b)?a+"["+b+"]":d.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']",c?"("+a+" && "+e+")":e},compilerInfo:function(){var a=f,b=g[a];return"this.compilerInfo = ["+a+",'"+b+"'];\n"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},h("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var g=f.length;this.i<g;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new i("Compile completed with content left on stack");return this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;f>e;e++)d.push("depth"+this.environment.depths.list[e]);var g=this.mergeSource();if(this.isChild||(g=this.compilerInfo()+g),a)return d.push(g),Function.apply(this,d);var i="function "+(this.name||"")+"("+d.join(",")+") {\n  "+g+"}";return h("debug",i+"\n\n"),i},mergeSource:function(){for(var a,b="",c=0,d=this.source.length;d>c;c++){var e=this.source[c];e.appendToBuffer?a=a?a+"\n    + "+e.content:e.content:(a&&(b+="buffer += "+a+";\n  ",a=void 0),b+=e+"\n  ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\s+/,"")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var d=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context"),f="helper = "+d.name+" || "+e;d.paramsInit&&(f+=","+d.paramsInit),this.push("("+f+",helper ? helper.call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+"))"),c||this.flushInline()},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();c.paramsInit&&this.pushSource(c.paramsInit),this.pushSource("if (helper = "+d+") { "+f+" = helper.call("+c.callParams+"); }"),this.pushSource("else { helper = "+e+"; "+f+" = typeof helper === functionType ? helper.call("+c.callParams+") : helper; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;g>f;f++)b=d[f],1===b?e.push("depth0"):e.push("depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.pushSource(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,d,e,f="",g=this.isInline();if(g){var h=this.popStack(!0);if(h instanceof c)b=h.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+h+"),",b=this.topStack()}}else b=this.topStack();var j=a.call(this,b);return g?(e||this.popStack(),d&&this.stackSlot--,this.push("("+f+j+")")):(/^stack/.test(b)||(b=this.nextStack()),this.pushSource(b+" = ("+f+j+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;d>b;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new i("Invalid stack pop");this.stackSlot--}return d},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,d=b[b.length-1];return!a&&d instanceof c?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[],e=this.setupParams(a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupOptions:function(a,b){var c,d,e,f=[],g=[],h=[];f.push("hash:"+this.popStack()),this.options.stringParams&&(f.push("hashTypes:"+this.popStack()),f.push("hashContexts:"+this.popStack())),d=this.popStack(),e=this.popStack(),(e||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),f.push("inverse:"+d),f.push("fn:"+e));for(var i=0;a>i;i++)c=this.popStack(),b.push(c),this.options.stringParams&&(h.push(this.popStack()),g.push(this.popStack()));return this.options.stringParams&&(f.push("contexts:["+g.join(",")+"]"),f.push("types:["+h.join(",")+"]")),this.options.data&&f.push("data:data"),f},setupParams:function(a,b,c){var d="{"+this.setupOptions(a,b).join(",")+"}";return c?(this.useRegister("options"),b.push("options"),"options="+d):(b.push(d),"")}};for(var j="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),k=d.RESERVED_WORDS={},l=0,m=j.length;m>l;l++)k[j[l]]=!0;return d.isValidJavaScriptVariableName=function(a){return!d.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)?!0:!1},e=d}(d,c),l=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c.parser,j=c.parse,k=d.Compiler,l=d.compile,m=d.precompile,n=e,o=g.create,p=function(){var a=o();return a.compile=function(b,c){return l(b,c,a)},a.precompile=function(b,c){return m(b,c,a)},a.AST=h,a.Compiler=k,a.JavaScriptCompiler=n,a.Parser=i,a.parse=j,a};return g=p(),g.create=p,f=g}(f,g,i,j,k);return l}();define("handlebars",function(){}),function(a,b){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),
this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),define("mlb-tv-app/app/control/Dispatcher",["backbone"],function(a){return _.clone(a.Events)}),define("mlb-tv-app/app/model/StateModel",["backbone"],function(a){var b=a.Model.extend({APP_MODE_FULL:"full",APP_MODE_MINI:"mini",LAYOUT_STATE_STANDARD:"LAYOUT_STATE_STANDARD",LAYOUT_STATE_PIP:"LAYOUT_STATE_PIP",LAYOUT_STATE_DUAL:"LAYOUT_STATE_DUAL",LAYOUT_STATE_QUAD:"LAYOUT_STATE_QUAD",defaults:{appInitialized:!1,initialPlay:!1,view:void 0,mode:"full",isLoggedIn:!1,state:void 0,isMiniModeActive:void 0,env:void 0,date:void 0,dayPickerEnabled:!0,scoreboardState:void 0,liveLookIn:"inactive",highlights:"inactive",gamedaySub:void 0,gameDate:void 0,gameIds:[],videoHidden:!1,selectedGame:void 0,skipNextGamedayUpdate:!0,fatalError:!1,initComplete:!1,gameDataAvail:!1,noVideoMode:!1,selectedMatchup:void 0,noDataAvailable:!1,videoAreaLayoutState:"LAYOUT_STATE_STANDARD",mp5Config:void 0,isEnhancedGame:!1,isEmbed:!1,currentBroadcaster:void 0,isCasting:!1},setGameDate:function(){console.log("StateModel:setGameDate()");var a=this.attributes.gamedaySub,b=a.substr(0,10),c=b.replace(/_/g,"/");this.set("gameDate",new Date(c))},isGamedayActive:function(){var a=!1;return this.attributes.gamedaySub&&(a=!0),a},initialize:function(){this.bind("change:gamedaySub",this.setGameDate)},beginVideoModeInit:function(){this.set("initComplete",!1),this.set("noVideoMode",!1)},completeVideoModeInit:function(){this.set("initComplete",!0),this.set("fatalError",!1)},getEgotdConfig:function(){var a,b=this.get("mp5Config");return a=!b&&window.mp5Config&&window.mp5Config.app&&window.mp5Config.app.enhanced?window.mp5Config.app.enhancedGame:b.app.enhancedGame},isChromecastConnected:function(){return window.VideoPlayerManager&&window.VideoPlayerManager.chromecast&&window.VideoPlayerManager.chromecast.connected&&window.VideoPlayerManager.chromecast.connected()},set:function(b,c){return"isEmbed"===b?c="true"===c.toString():b.hasOwnProperty("isEmbed")&&(b.isEmbed="true"===b.isEmbed.toString()),a.Model.prototype.set.call(this,b,c)}});return new b}),define("mlb-tv-app/app/view/BaseView",["jquery","underscore","backbone"],function(a,b,c){var d=c.View.extend({views:[],bindings:[],enabled:!0,registerView:function(a){if(!(a instanceof d))throw"Only views that extend BaseView can be registered.";this.views.push(a)},removeView:function(a){var b=this.views.indexOf(a);return a.destroy(),b>-1&&this.views.splice(b,1),a},removeAllViews:function(){for(var a=this.views.length-1;a>=0;a--)this.removeView(this.views[a])},addBinding:function(a,b,c){a.on(b,c,this),this.bindings.push({target:a,event:b,callback:c})},removeBinding:function(a,b,c){a.off(b,c);for(var d=this.bindings.length,e=0;d>e;e++){var f=this.bindings[e];if(f.target===a&&f.event===b&&f.callback===c){this.bindings.splice(e,1);break}}},removeAllBindings:function(){b.each(this.bindings,function(a){a.target.off(a.event,a.callback)}),this.bindings.length=0},assign:function(c,d,e){var f;b.isObject(c)?f=c:(f={},f[c]=d),f&&b.each(f,function(b,c){e?b.setElement(a(c)).render():b.setElement(this.$(c)).render()},this)},destroy:function(){return this.undelegateEvents(),this.removeAllBindings(),this.removeAllViews(),this.remove(),this},ensureElement:function(){0===this.$el.length&&this.$el.selector&&this.setElement(this.$el.selector)}});return d}),function(a,b){"function"==typeof define&&define.amd?define("message-service/message-service",[],function(){return b()}):a.MessageService=b()}(this,function(){function a(a){this.name=a.name,this.consumers={},this.consumerCount=0,this.owner=a.owner,this.target=a.target}var b="div",c="Events",d=!0,e=!1,f={bubbles:e,cancelable:e},g=document,h="function"==typeof Event?function(a){return new Event(a,f)}:function(a){var b=g.createEvent(c);return b.initEvent(a,f.bubbles,f.cancelable),b};a.prototype.publish=function(a){var b=h(this.name);return b.data=a,this.target.dispatchEvent(b)},a.prototype.addConsumer=function(a,b,c,f){var g,h=(f||b)+"",i=this,j=this.consumers[h]||[];this.removeConsumer(b,a,h),j.push(g=function(d){return c&&i.owner.off.call(a||i.owner,i.name,b,h),b.call(a,d.data,d)}),g.scope=a,g.originalConsumer=b,this.consumerCount++,this.consumers[h]=j,this.target.addEventListener(this.name,g,e,d)},a.prototype.removeConsumer=function(a,b,c){var f,g=(c||a)+"",h=this.consumers[g],i=this.name;if(h)for(var j=h.length,k=0;j>k;k++)if(f=h[k],f.originalConsumer===a&&(!b||f.scope===b)){this.target.removeEventListener(i,f,e,d),h.splice(k,1),h.length||delete this.consumers[g],this.consumerCount--;break}},a.prototype.removeAllConsumers=function(){var a,b,c,f,g=this.consumers,h=this.target,i=this.name;for(a in g){for(b=g[a],c=0,f=b.length;f>c;c++)h.removeEventListener(i,b[c],e,d);this.consumerCount=0,delete g[a]}};var i=function(c){var e={},f=g.createElement(b);return c.publish=function(a,b){var c=e[a];return c?c.publish(b):void 0},c.on=c.addListener=function(b,d,g){var h=e[b]||(e[b]=new a({name:b,target:f,owner:c}));if(!d)throw new Error("message-service : no listener specified for topic : "+b);h.addConsumer(this,d,g)},c.off=c.removeListener=function(a,b){var c=e[a];c&&b&&(c.removeConsumer(b,this),c.consumerCount<=0&&delete e[a])},c.one=c.once=function(a,b){c.on.call(this,a,b,d)},c.removeAllListeners=function(a){var b;if(a)return b=e[a],b&&b.removeAllConsumers(),void delete e[a];for(b in e)e[b].removeAllConsumers(),delete e[a]},c.getTopics=function(a){return e},c.hasListeners=function(a){var b=e[a];return a&&b?!!b.consumerCount:!1},c};return i({bind:function(a){if(!a)throw new Error("Binding object not specified");return i(a)},create:function(){return i({})}})}),function(a,b){"function"==typeof define&&define.amd?define("bandwagon/bandwagon",["jquery","message-service/message-service"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("message-service/message-service")):a.Bandwagon=b(a.jQuery,null)}(this,function(a,b){"use strict";function c(){g()}var d,e={global:{}},f={},g=function(){};return c.prototype={registerEvents:function(b,c){b?e[b]?a.extend(!0,e[b],c):e[b]=c:a.extend(!0,e.global,c)},deleteEventsByKey:function(a){a&&e[a]?delete e[a]:console.log("bandwagon: specified namespace does not exist in events cache to delete",a)},getRegisteredEvents:function(){return e},getRegisteredEventsByKey:function(a){var b;return a&&e[a]?b=e[a]:console.log("please provide valid event key you want to retrieve from the events cache",a),b},getInstanceByKey:function(a){var c={};return c=a&&!f[a]?f[a]=b.create():f[a]},getInstancesAvailable:function(){return f},deleteInstanceByKey:function(a){a&&f[a]?delete f[a]:console.log("bandwagon: specified key does not exist in cache to delete",a)}},d=d||new c}),define("mlb-tv-app/app/enums/events/MlbtvAppEvents",[],function(){"use strict";return{GET_CLIENT_IP_COMMAND:"service:getClientIPCommand",HANDLE_SLOT_CHANGE:"service:handleSlotChange"}}),define("mlbtv-widget-fantasy/scripts/enums/events/FantasyEvents",[],function(){"use strict";return{ACTIVE_PLAYERS:"fantasy:activePlayers",DISMISS_PLAYERS:"fantasy:dismissPlayers"}}),define("mlb-tv-app/app/enums/events/VideoPlayerEvents",[],function(){"use strict";return{MINIMODE_ENTER:"minimode:enter",MINIMODE_EXIT:"minimode:exit",MINIMODE_UPDATE_PANEL:"minimode:updateMiniModePanel",SET_MINIMODE_TO_EMPTY_SLOT:"setMiniModeToEmptySlot",MEDIAMETRICS_FETCH:"mediametrics:fetch",USER_PREFERENCE_UPDATE:"userpreference:update",USER_PROFILE_UPDATE:"userprofile:update",GAMEDAY_WIDGET_LOADING:"gamedaywidget:loading",GAMEDAY_WIDGET_UPDATE:"gamedaywidget:update",GAMEDAY_DATA_CHANGE:"gameday:datachange",HIGHLIGHT_PLAYING:"highlight:playing",HIGHLIGHTS_UPDATE_SELECTED:"highlights:updateSelectedHighlights",ACTIVE_WIDGET_UPDATE:"widget:active:update",ACTIVE_WIDGET_REMOVE:"widget:active:remove",SCROLLED_WIDGET_UPDATE:"widget:scrolled:update",FREE_GAME_EVAL_COMPLETE:"isFreeGameEvalComplete",TOGGLE_DAY_PICKER:"toggleDayPicker",MESSAGES_CHANGE:"messages:change",APP_STATE_INIT_COMPLETE:"appstate:initComplete",SCOREBOARD_LOAD_COMPLETE:"scoreBoardLoadComplete",FEED_SELECTOR_LOAD:"feedselector:load",FEED_SELECTOR_CREATE:"feedselector:create",FEED_SELECTOR_UPDATE:"feedselector:update",FEED_SELECTOR_LOAD_HIGHLIGHT:"feedselector:loadHighlight"}}),define("mlb-tv-app/app/enums/events/MediaMetricsEvents",[],function(){"use strict";return{UNFORMATTED_SELECTED_GAME_CHANGE:"change:unformattedSelectedGame",SELECTED_SLOT_CHANGE:"change:selectedSlot",SLOTS_CHANGE:"change:slots",SET_GAME_ID_ON_MODELS:"model:setGameIdOnModels"}}),define("mlb-tv-app/app/enums/events/MarketingEvents",[],function(){"use strict";return{MESSAGE_AUTO_CLOSE:"marketingmessaging:autoclose",MESSAGE_BEGIN:"marketingmessaging:begin",MESSAGE_CLOSE:"marketingmessaging:close",MESSAGE_SHOW:"marketingmessaging:show",MESSAGE_TRIGGER:"marketingmessaging:trigger"}}),define("mlb-tv-app/app/control/EventRegistry",["bandwagon/bandwagon","mlb-tv-app/app/enums/events/MlbtvAppEvents","mlbtv-widget-fantasy/scripts/enums/events/FantasyEvents","mlb-tv-app/app/enums/events/VideoPlayerEvents","mlb-tv-app/app/enums/events/MediaMetricsEvents","mlb-tv-app/app/enums/events/MarketingEvents"],function(a,b,c,d,e,f){function g(){a.registerEvents(o,b),a.registerEvents(p,c),a.registerEvents(q,d),a.registerEvents(r,e),a.registerEvents(s,f),k=a.getRegisteredEventsByKey(o),j=a.getRegisteredEventsByKey(p),l=a.getRegisteredEventsByKey(q),m=a.getRegisteredEventsByKey(r),n=a.getRegisteredEventsByKey(s),u()}function h(a){g()}var i,j,k,l,m,n,o="MLBTV_APP_EVENTS",p="FANTASY_EVENTS",q="VIDEO_PLAYER_EVENTS",r="MEDIA_METRICS_EVENTS",s="MARKETING_EVENTS",t={},u=function(){var b=window.mp5Config.videocore.container;t=a.getInstanceByKey(b)};return h.prototype={getMlbtvAppEvents:function(){return k},getFantasyEvents:function(){return j},getDispatcher:function(){return t},getVideoPlayerEvents:function(){return l},getMediaMetricsEvents:function(){return m},getMarketingEvents:function(){return n}},i=i||new h}),define("mlb-tv-app/app/model/WidgetsManifest",["backbone","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/model/StateModel"],function(a,b,c){var d=["gameday-widget","highlights-widget","fantasy-widget"],e=a.Model.extend({defaults:{"gameday-widget":!1,"gameday-widget-title":"Plays & Box Score",gamedayEnabled:!0,"highlights-widget":!1,"highlights-widget-title":"Highlights",highlightsEnabled:!0,"fantasy-widget":!1,"fantasy-widget-title":"Fantasy Tracker",fantasyEnabled:!0,"social-widget":!1,"social-widget-title":"Twitter",socialEnabled:!0,scrolledWidget:null,includeBranding:window.mp5Config.app.components.sponsorship.brandingEnabled,isEnhancedGame:!1,timestampCacheBuster:(new Date).getTime()},calcScrolledWidget:function(){this.set("scrolledWidget",_.find(d,function(a){return this.get(a)}.bind(this)))},setActivate:function(a,b){this.set(a,b),this.calcScrolledWidget()},activate:function(a){this.setActivate(a,!0)},deactivate:function(a){this.setActivate(a,!1)},setEnabledComponents:function(a){var b=c.get("isPSTV");this.set("gamedayEnabled",a.gameday.enabled),this.set("scoreboardEnabled",a.scoreboard.enabled),this.set("socialEnabled",a.social.enabled),this.set("highlightsEnabled",a.highlights.enabled&&!b),this.set("fantasyEnabled",a.fantasy.enabled&&!b)},initialize:function(){this.bind("change",function(a){void 0!==a.changed.scrolledWidget&&b.getDispatcher().publish(b.getVideoPlayerEvents().SCROLLED_WIDGET_UPDATE,this.get("scrolledWidget"))})}});return new e}),define("datasource-manager/lib/extend",["require","exports","module"],function(a,b,c){function d(a,b,c){var e;for(e in b)(b.hasOwnProperty(e)||all)&&(a[e]=b[e]);return c&&d(a,c),a}return d}),define("datasource-manager/env",["require","exports","module"],function(a,b,c){var d="string";return function(){var a=c.config();return typeof a===d&&a||"prod"}}),define("datasource-manager/lib/resolveParams",["require","exports","module"],function(a,b,c){function d(a,b,c,d,i){var k=j[c]||d;return k=k===e?g:k+(i||g),b?b+(k+g).replace(h,(i||g)+f+b):k}var e,f="&",g="",h=/\,/g,i=/(&?\w+\=['"]?)?\{(\w+)(?:\:([^}]+))?\}(['"])?/g,j={};return function(a,b){return j=b||{},a&&a.replace(i,d)||g}}),define("datasource-manager/lib/Datasource",["require","exports","module","../env","./extend","./resolveParams"],function(a,b,c){function d(a,b){var c=this.getEnvString(),d=b.defaults,e=b[a]||{};f(f(this,d,e),this[c]||this[c.toLowerCase()]),this.name=a,this.compiledUrls={},this._dataSource=e}var e=a("../env"),f=a("./extend"),g=a("./resolveParams"),h="env_",i="";return d.prototype={getEnvString:function(){return h+e()},getUrl:function(a){return g(this.getUrlTemplate(),a)},getUrlTemplate:function(){var a=this.getEnvString();return this.compiledUrls[a]=this.compiledUrls[a]||this.urlTemplate||this.domain&&this.domain+this.pathTemplate+(this.fileTemplate||i)||i},getNamespace:function(a){return g(this.namespace,a)},getPostBodyTemplate:function(a){return g(this.postBodyTemplate,a)},transform:function(a,b){return this.transformer(a,this,b.params,b.xhr)}},d}),define("xml-doc/xml-doc",["require","exports","module"],function(a,b,c){function d(a){return!(!a||!(g&&a instanceof g||a.documentElement&&a.xml))}function e(a){return!(!a||a.getElementsByTagName(j).length)}function f(a){return d(a)?a:a&&h&&(new h).parseFromString(a,i)}var g=window.Document||!1,h=window.DOMParser||!1,i="text/xml",j="parsererror";return{parse:function(a){var b=f(a);return b&&e(b)?b:null},isXML:d,isValid:function(a){return!(!d(a)||!e(a))}}}),define("xml-to-json/xml-to-json",["require","exports","module","xml-doc/xml-doc"],function(a,b,c){var d,e=a("xml-doc/xml-doc"),f="",g=!1,h=/\s*/g,i=/^.*:/,j={ns:g},k=[],l=Array.isArray||function(){var a=Object.prototype.toString,b="[object Array]";return function(c){return a.call(c)===b}},m=function(a){return a&&(l(a)?a:[a])||[]},n=function(a,b){return a&&a.documentElement?o(a.documentElement,b):!1},o=function(a,b){if(!a)return"";for(var c=b||{},d={},e="",g={},h=[],i=0,j=!(!a.attributes||!a.attributes.length),k=p(a),l=0,q=a.attributes,u=q.length||0;u>l;l++)s(d,q.item(l));l=0,q=a.childNodes,u=q.length||0;for(var v,w,x;u>l;l++)v=q.item(l),w=v.nodeType,4===w||3===w?e+=t(v.nodeValue||v.text||f):8===w||(x=p(v),g[x]=void 0!==g[x]?g[x]+1:0,h[i++]={name:x,index:g[x]},d=(9===w?n:o)(v,d));return!j&&1>i?d=e:(i&&(h.get=function(a){var b=h[a||0];return m(d[b.name])[b.index]},d._childList=h),e&&(d._text=e)),d._nodeName=k,c[k]=r(c[k],d),c},p=function(a){return g?a.nodeName:a.localName||a.nodeName.replace(i,f)},q=function(a,b){var c;for(c in b)a[c]=r(a[c],b[c]);return a},r=function(a,b){return typeof b!==d&&a?k.concat(a,b):b},s=function(a,b){a[p(b)]=b.nodeValue},t=function(a){return a.replace(h,f)?a:f};return function(a,b){var c=e.parse(a);return b&&(q(j,b),g=j.ns),n(c)}}),define("data-transformers/xml-to-json",["require","exports","module","xml-to-json/xml-to-json"],function(a,b,c){var d=a("xml-to-json/xml-to-json");return function(a,b,c){return a&&d(a.xml||a.responseXML||a.text)||null}}),define("datasource-manager/datasource-manager",["require","exports","module","./lib/extend","./lib/Datasource","data-transformers/xml-to-json"],function(a,b,c){var d=a("./lib/extend"),e=a("./lib/Datasource"),f=a("data-transformers/xml-to-json"),g="object",h={},i={defaults:{namespace:"default",expires:300,timeout:20,retries:1,priority:2,transformer:f,mimetype:"text/xml",method:"GET"}};return{add:function(a,b){return typeof a===g?(d(i,a),!0):i[a]?!1:(i[a]=b||{},!0)},remove:function(a){var b=i[a];return delete i[a],delete h[a],b},update:function(a,b){i[a]&&d(i[a],b),delete h[a]},getAll:function(){return i},get:function(a){return i[a]?h[a]=h[a]||new e(a,i):new e("datasource '"+a+"' not found",i);
},Datasource:e}}),define("extant/extant",["require","exports","module"],function(a,b,c){function d(a,b,c){for(var d=-1!=b.indexOf(j)?b.split(j):[b],e=0,g=a,h=d.length;h>e;e++)if(g=g[d[e]],f(g,c))return!1;return!0}function e(a,b,c){for(var e=typeof b===h?-1!=b.indexOf(i)?b.split(i):[b]:[].concat(b),f=0,g=e.length;g>f;f++)if(!d(a,e[f],c))return!1;return!0}function f(a,b){return typeof a===g||null===a||b&&a===!1}var g="undefined",h="string",i=",",j=".";return function(a,b,c){return c=c===!0,f(a,c)?!1:typeof b!==g?e(a,b,c):!0}}),define("responsive-gameday-core/src/js/GDModel/enums/datasources/Datasources",{PLAYS:"play",PLAYERS:"players",GAME:"game",BOXSCORE:"boxscore",BENCH:"bench",LINESCORE:"linescore",LINEUP:"lineup",SCORES:"scores",HITCHART:"hitchart",MINISCOREBOARD:"miniscoreboard",SCORING_PLAYS:"scores",INNING:"inning",ALL_INNINGS:"all_innings",PLAYER_CARD:"playercard",HOT_COLD_ZONE:"hotcoldzone",DISPLAY_CONFIG:"displayconfig",JINGLES:"jingles",TEMPLATES:"tpl_lib",GAMECENTER:"gamecenter",VIDEO:"video",LIVE_LOOKIN:"liveLookin",GD_CONFIG:"gdConfig",SKIN_CONFIG:"skin_config",TIMECODE:"timecode",STATIC_RESOURCES:"staticresources",MID_INNING_GAMES:"midInningGames",MOUNDBALL:"moundball"}),define("app-console/lib/console",["require","exports","module"],function(a,b,c){var d,e="log,dir,dirxml,info,warn,debug,error,assert,trace,time,timeEnd".split(","),f=function(){},g="undefined";return typeof window!==g&&(window.console||(window.console={isNative:!1}),e.forEach(function(a){window.console[a]=window.console[a]||window.console.log||f})),d=console||window&&window.console||{},d.trueConsole=!!d.group&&!!d.log.apply&&!d.msIsIndependentlyComposed,d}),define("app-console/lib/group",["require","exports","module","./console"],function(a,b,c){var d=a("./console"),e=function(){},f={start:d.trueConsole&&function(a){null!=a&&f.current!==a&&(f.end(),f.current=a,d.group(a))}||e,end:d.trueConsole&&function(a){""!==f.current&&(f.current="",d.groupEnd(a))}||e,current:""};return f}),define("app-console/lib/Trace",["require","exports","module"],function(a,b,c){function d(a,b){this.stack=(b.stack||"").split("\n"),this.message=b.message||a+"Error",this.file=(this.stack[1]||"").replace(e,"$1")}var e=/.*?(\w+:\/\/.*?\d+:\d+).*/;return d.prototype=Object.create(Error.prototype),d}),define("app-console/lib/levels",{none:1e4,global:1e4,error:40,exception:40,warn:30,info:20,dir:10,dirxml:10,debug:10,log:10}),define("app-console/lib/LogMessage",["require","exports","module","./group","./Trace","./levels","./console"],function(a,b,c){function d(a){this.ctx=a}var e=a("./group"),f=a("./Trace"),g=a("./levels"),h=a("./console"),i=String.fromCharCode(9790),j=String.fromCharCode(9789),k="%o, ",l="%s ",m=l+":: ",n=i+"trace"+j,o="error",p="global",q=Array.prototype.slice,r=Function.prototype.apply;return d.prototype={fmt:"%o",ns:null,format:function(a,b){var c,d=this.fmt;return b=q.call(b),h.trueConsole?(c=b.length>1&&!this.ctx.ns?b.shift():this.ctx.ns||null,this.ctx.useAlert?void(c&&b.unshift(c+":: ")):(d=new Array(b.length).join("\n"+k)+d,a===o&&(this.formatStack(c,b),d=k+d,a="error",b.unshift(n)),this.ctx.grouping?e.start(c):null!=c&&(e.end(c),d=d&&"string"==typeof c?m+d:null,b.unshift(c)),d&&b.unshift(d),b)):b},formatStack:function(a,b){for(var c=0,d=b.length;d>c;c++)b[c]instanceof Error&&(b[c]=new f(a,b[c]))},log:function(a,b){this.checkTypeAndLevel(a)&&r.call(h[a]||h.log,h,this.format(a,b))},time:function(a,b){this.checkTypeAndLevel(a)&&h.time(b)},timeEnd:function(a,b){this.checkTypeAndLevel(a)&&h.timeEnd(b)},trace:function(a){this.checkTypeAndLevel(a)&&h.trace()},checkTypeAndLevel:function(a){var b=this.ctx,c=g[b.level]?b.level:p;return c===p&&(c=b.globalConsole&&b.globalConsole.level||"none"),g[a]>=g[c]}},d}),define("app-console/config",["require","exports","module"],function(a,b,c){var d=c&&c.config&&"function"==typeof c.config,e="string";return function(){var a=d&&c.config(),b={};return"object"==typeof a&&(b=a),b.level=b.level||typeof a===e&&a||a.level||"none",b}}),function(a){a("app-console/app-console",["require","module","./lib/console","./lib/LogMessage","./lib/group","./config","./lib/levels"],function(a,b,c,d,e,f,g){function h(a){this.config(a),this.logMessage=new d(this),this.globalConsole=n||this}var i="error",j=!0,k=f(),l=function(a,b,c){var d;c=c===!0;for(d in b)(b.hasOwnProperty(d)||c)&&(a[d]=b[d]);return a},m=function(a){return function(){this.logMessage.log(a,arguments)}};h.prototype={ns:null,level:"global",grouping:!1,assert:function(a,b){"string"!=typeof a&&(arguments[1]=b=a,arguments[0]=a=void 0),b!=j&&(arguments[1]="Assertion failed",this.error.apply(this,arguments))},debug:m("debug"),dir:m("dir"),dirxml:m(c.dirxml?"dirxml":"dir"),error:m(i),info:m("info"),log:m("log"),time:function(a){this.logMessage.time("debug",a)},timeEnd:function(a){this.logMessage.timeEnd("debug",a)},trace:function(){this.logMessage.trace()},warn:m("warn"),isDebugEnabled:function(){return g.debug>=this.level},getLevel:function(){return this.level},setLevel:function(a){this.level=g[a]?a:"none"},config:function(a){l(this,a),(!this.grouping&&e.current||"none"===this.level)&&e.end(e.current)}};var n=l(function(a){return new h(a)},new h(k),!0);return n.logMessage.ctx=n,n})}("undefined"!=typeof require&&"undefined"!=typeof define&&define||function(a,b){if("undefined"!=typeof module&&module.exports){a.shift(),a.shift();var c=require("requirejs"),d=require("path");c.config({nodeIdCompat:!0,baseUrl:d.dirname(module.filename)});var e=a.map(function(a){return c(a+".js")});e.unshift(module),e.unshift(c),module.exports=b.apply(b,e)}}),define("responsive-gameday-core/src/js/GDUtil/window/Logg",["require","exports","module","app-console/app-console"],function(a,b,c){var d=a("app-console/app-console");return new d({ns:"GDC"})}),define("responsive-gameday-core/src/js/GDControl/SubscriptionManager/SubscriptionManager",["require","exports","module","../../GDModel/enums/datasources/Datasources","extant/extant","../../GDUtil/window/Logg"],function(a,b,c){function d(){var a,b,c={},d=g;for(b in d)a=d[b],a.length>0&&(c[a]=0);return c}function e(a,b){if(b&&!h(a)&&k)return void i.log("buckshot style subscription is only available at instantiation...");a=f(a);for(var c,d,e=0,g=a.length;g>e;e++)c=a[e],j.hasOwnProperty(c)&&(d=j[c],j[c]+=b?1:0===d?0:-1);k||(k=!0)}function f(a){var b=[];if(h(a)&&0!==a.length)"string"==typeof a&&a.indexOf(",")>=0&&(a=a.split(","));else{var c=g;a=[];for(var d in c)"string"==typeof c[d]&&a.push(c[d])}if(a.length>0)b=[].concat(a);else if("object"==typeof a)for(var d in a)b.push(a[d]);return b}var g=a("../../GDModel/enums/datasources/Datasources"),h=a("extant/extant"),i=a("../../GDUtil/window/Logg"),j=d(),k=!1;b.subscribe=function(a){e(a,!0)},b.unsubscribe=function(a){e(a,!1)},b.checkSubscription=function(a){return j[a]>0},b.getSubscriptions=function(){var a=[];for(var b in j)j[b]>0&&a.push(b);return a}}),define("responsive-gameday-core/src/js/GDModel/storage/GameItemModelCache",["require","exports","module"],function(a,b,c){function d(a,b){this.gameID=a,this.timestamp=b}return d.prototype={gameID:this.gameID,timestamp:this.timestamp,play:void 0,players:void 0,game:void 0,boxscore:void 0,bench:void 0,linescore:void 0,lineup:void 0,scores:void 0,hitchart:void 0,miniscoreboard:void 0,inning:void 0,all_innings:void 0,playercard:void 0,hotcoldzone:void 0,displayconfig:void 0,jingles:void 0,tpl_lib:void 0,video:void 0,liveLookin:void 0,gdConfig:void 0,skin_config:void 0,timecode:void 0,staticresources:void 0,moundball:void 0},d}),define("responsive-gameday-core/src/js/GDModel/load/execute/AsyncRequest",["require","exports","module","../../../GDControl/GameModelLocator/GameModelLocator"],function(a,b,c){function d(a,b,c,d,f,g,h){return{gid:a,datasource:b,retainVal:c,refresh:h===!0,callback:d,id:f,params:e.getCurrentGame().addGameParams(g||{})}}var e=a("../../../GDControl/GameModelLocator/GameModelLocator");return d}),define("abstract-storage/abstract-storage",["require","exports","module"],function(a,b,c){function d(a,b,c){this.created=(new Date).getTime(),this.expired=0,this.expires=c,this.key=a,this.value=b}var e=function(a){return a&&("-1"==a.expires||1e3*a.expires>(new Date).getTime()-a.created)?a:(g(a),a||f())},f=function(){return{expired:1,created:0}},g=function(a){a&&(a.expired=1)},h=function(a,b,c){return new d(a,b,c)};c.exports={StorageEntry:d,expire:g,get:e,storable:h,getEmpty:f}}),define("mem-storage/mem-storage",["require","exports","module","abstract-storage/abstract-storage"],function(a,b,c){var d=a("abstract-storage/abstract-storage");if(!d)throw new Error("abstract-storage not found.  Please check dependencies.");var e={},f=d;c.exports={put:function(a,b,c,d,g){return(e[a]=e[a]||{})[b]=f.storable(b,c,d,g)},getAll:function(a){return e[a]||{}},get:function(a,b){var c=e[a]&&e[a][b],d=f.get(c);return 0===d.created,d},expire:function(a,b){var c=this.get(a,b);f.expire(c)},clear:function(a,b){var c=e[a];c&&delete c[b]},clearAll:function(a){delete e[a]},peek:function(a){return a&&e[a]||e}}}),define("DataTransferObject/DataTransferObject",["require","exports","module"],function(a,b,c){function d(a){if(!(this instanceof d))return new d(a);var b;for(b in a)b in this&&e.hasOwnProperty(b)&&typeof a[b]===f&&(this[b]=a[b])}var e,f="function";return e=d.prototype={datasource:function(a){},request:function(a){return a},response:function(a){return a},data:function(a){return a}},d}),define("data-fetcher/data-fetcher",["require","exports","module","jquery","mem-storage/mem-storage","datasource-manager/datasource-manager","app-console/app-console","DataTransferObject/DataTransferObject"],function(a,b,c){function d(a,b,c,d){this.text=a,this.xml=b,this.success=c,this.completed=d}function e(a,b,c,d,e){this.startTime=new Date,this.timeout=1e3*b.timeout,this.datasource=b,this.dataSourceName=b.name,this.params=c,this.namespace=b.getNamespace(c),this.requestKey=a,this.callback=d,this.refresh=!!e,this.retryRequested=!1,this.response=null,this.proxy=b.proxy,this.method=b.method||null,b.HTTPHeaders&&(this.headers=b.HTTPHeaders||null,b.HTTPHeaders.SOAPAction&&(this.messageBody=b.getPostBodyTemplate(c)||null))}var f=a("jquery"),g=a("mem-storage/mem-storage"),h=a("datasource-manager/datasource-manager"),i=a("app-console/app-console");a("DataTransferObject/DataTransferObject");e.prototype={requestRetry:function(){this.retryRequested=!0},send:function(){var a,b=this,c=A(),e=H();if(b.url=b.datasource.getUrl(b.params),null!==b.url&&e&&B()){if(e.req=b,b.handler=e,b.xhr=e.xhr=c,c.readyState=0,z(y.request,this),c.open(b.method||"GET",b.proxy?b.proxy+encodeURIComponent(b.url):b.url,!0),b.headers)for(a in b.headers)c.setRequestHeader(a,b.headers[a]);c.onreadystatechange=e,c.onabort=b.abort,b.setTimeout(),c.send(b.messageBody||null)}else b.returned(new d(null,null,!1,!1)),i.log("DataFetcher","resolvedurl is null")},cancel:function(a){return this.handler.inUse=!1,clearTimeout(this.handler.timeout),this.handler.timeout=null,a?void(this.xhr.aborted=!0):void this.returned(new d(null,null,!1,!0))},retry:function(){var a=this.xhr;this.aborted=!1,a.readyState=0,a.open(this.method||"GET",this.url,!0),a.send(this.messageBody||null),this.setTimeout()},setTimeout:function(){var a=this;this.xhr&&(clearTimeout(this.handler.timeout),this.handler.timeout=setTimeout(function(){4!==a.xhr.readyState&&(a.cancel(!0),a.xhr.abort())},this.timeout))},notify:function(){var a=u[this.requestKey];a&&a.notify(this)},returned:function(a){var b,c=this.datasource,d=this,e=this.requestKey,f=u[e],h=d.response={data:null,text:null,dataSourceName:this.dataSourceName,params:this.params,refresh:this.refresh,expired:!1};if(z(y.response,this),a.success&&(null!==a.text||a.xml)){try{h.data=b=c.transform(a,this,this.xhr),h.source=l}catch(j){j.message="parse error from transformer :: "+this.dataSourceName+" :: "+j.message,i.error("DataFetcher","FAILURE",{stack:(j.stack||"").split("\n")},b,this.url),b=D(d),h.expired=!b||!!b.expired,h.data=b=b&&b.value,h.source=k}z(y.data,this),g.put(this.namespace,F(c,this.params),b,c.expires,c.priority),i.log("DataFetcher","SUCCESS",b,this.url)}else{if(b=D(d),h.expired=!b||!!b.expired,h.data=b=b&&b.value,h.source=k,!b&&!a.completed&&(this.notify(),d.retryRequested))return void(this.retryRequested=!1);i.error("DataFetcher","FAILURE",a,b,this.url,this.xhr)}f&&(delete u[e],f[b?m:n](h))}};var j="cache-valid",k="cache-error",l="server",m="resolve",n="reject",o="&",p="=",q=";",r="",s=20,t="function",u={},v=/\{(\w+)(?:\:([^}]+))?\}/g,w=!0,x=[],y={request:[],response:[],data:[]},z=function(a,b){for(var c=0,d=a&&a.length||0;d>c;c++)b=a[c](b)||b;return b},A=window.XMLHttpRequest?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")},B=function(){return navigator.onLine&&w},C=function(a){return h.get(a)},D=function(a){var b=a.params,c=a.dataSourceName,d=C(c),e=g.get(d.getNamespace(b),F(d,b));return e&&e.value?e:null},E=function(a,b,c){return F(a,b)+!!c},F=function(a,b){var c=r;return a.getUrlTemplate().replace(v,function(a,d,e){c+=(o+d+p+b[d]||e||r)+q}),a.name+c},G=function(a){var b=a.xhr,c=a.req;4===b.readyState&&(w=!0,clearTimeout(a.timeout),c.returned(new d(b.responseText,b.responseXML,200===b.status||304===b.status,!b.aborted)),a.inUse=!1,a.timeout=null)},H=function(){for(var a,b=0;s>b;b++)if(a=x[b],!a.inUse)return a.inUse=!0,a;return null};return function(){for(var a=0;s>a;a++)x[a]=function(){G(arguments.callee)}}(),{clearNamespace:function(a){return g.clearAll(a),this},setUrlFilter:function(a){return this},clearDataSource:function(a){var b=C(a.dataSourceName),c=a.params;return g.clear(b.getNamespace(c),F(b,c)),this},expire:function(a){var b=C(a.dataSourceName),c=a.params;return g.expire(b.getNamespace(c),F(b,c)),this},peek:function(){return{reqs:u}},getNow:function(a){var b=D(a);return b&&b.value&&{data:b.value,text:b.value._text,dataSourceName:a.dataSourceName,params:a.params,source:j,refresh:a.refresh===!0,expired:!!b.expired}},get:function(a){var b=!!a.refresh,c=a.params,d=a.dataSourceName,g=C(d),h=E(g,c,b);return(u[h]||f.Deferred(function(f){var i=D(a);!b&&i&&1!==i.expired?f.resolve({data:i.value,text:i.value._text,dataSourceName:d,params:c,source:j,refresh:b,expired:!!i.expired}):(u[h]=f,new e(h,g,c,a.callback,b).send())})).always(a.callback).promise()},put:function(a,b){var c=a.params,f=a.dataSourceName,g=C(f),h=new e(E(g,c,!1),g,c,a.callback,!1),i=new d(b.responseText,b.responseXML,!0,!0);return h.returned(i),this},registerDTO:function(a){var b;if(a instanceof $DTO)for(b in y)a.hasOwnProperty(b)&&typeof a[b]===t&&y[b].push(a[b])},Request:e,Response:d}}),define("responsive-gameday-core/src/js/GDModel/load/execute/FileRequestItem",["require","exports","module"],function(a,b,c){function d(a,b,c,d){return{dataSourceName:a,refresh:b,params:c,callback:d||null}}return d}),define("responsive-gameday-core/src/js/GDModel/load/execute/AsyncFileLoadDelegate",["require","exports","module","data-fetcher/data-fetcher","../../storage/ModelCache","extant/extant","../../../GDUtil/window/Logg","./FileRequestItem"],function(a,b,c){function d(b){var c=a("data-fetcher/data-fetcher"),d=a("../../storage/ModelCache"),e=a("extant/extant"),f=a("../../../GDUtil/window/Logg"),g=a("./FileRequestItem"),h=b.params;f.log("attempting Load for "+b.datasource),c.get(new g(b.datasource,b.refresh,h,function(a){var c;e(a.data)?(f.log("data successfully loaded for "+b.datasource+" from "+a.source,b),c=a.data,d.storeGameData(b.gid,b.datasource,c)):(f.log("AsyncFileLoadDelegate() Error :: "+a.dataSourceName+" :: "+a.source),f.log("returning original data for "+b+"due to some hiccup..."),c=b.retainVal),b.callback(b.gid,b.id,c,b.datasource)}))}return d}),define("responsive-gameday-core/src/js/GDModel/storage/ModelCache",["require","exports","module","../../GDControl/GameModelLocator/GameModelLocator","../../GDControl/SubscriptionManager/SubscriptionManager","extant/extant","../../GDUtil/window/Logg","message-service/message-service","./GameItemModelCache","../load/execute/AsyncRequest","../load/execute/AsyncFileLoadDelegate","../enums/datasources/Datasources"],function(a,b,c){function d(a,b){p[a]={returns:b.length}}function e(a,b,c,d){p[b][d]=c,p[b].returns--,0===p[b].returns&&(i.log("dispatching data for request "+b),setTimeout(function(){j.publish(b,p[b])},50))}var f=a("../../GDControl/GameModelLocator/GameModelLocator"),g=a("../../GDControl/SubscriptionManager/SubscriptionManager"),h=a("extant/extant"),i=a("../../GDUtil/window/Logg"),j=a("message-service/message-service"),k=a("./GameItemModelCache"),l=a("../load/execute/AsyncRequest"),m=a("../load/execute/AsyncFileLoadDelegate"),n=a("../enums/datasources/Datasources"),o={},p={};b.storeGameData=function(a,b,c,d){return h(b)?(h(o[a])||(o[a]=new k(a,d)),i.log("storing "+b+" for game "+a),c.timestamp=(new Date).getTime(),void(o[a][b]=c)):void i.log("you must pass a datasource name type to store it")},b.retrieveGameData=function(a,b){if(!h(o[a])){var c=f.getCurrentGame();if(h(c))return i.log("there does not seem to be a game to get data from..."),null;a=c.gameid}var d,e={};"string"==typeof b&&(b=b.split(",")),b=[].concat(h(b)?b:g.getSubscriptions());for(var j=0,k=b.length;k>j;j++)d=b[j],e[d]=o[a][d];return e},b.getFreshGameData=function(a,b,c,j){if(!h(o[a])){var k=f.getCurrentGame();if(h(k))return void i.log("there does not seem to be a game to get data from...");a=k.gameid}var n,p=o[a];"string"==typeof b&&(b=b.split(",")),b=[].concat(h(b)?b:g.getSubscriptions()),d(c,b);for(var q=0,r=b.length;r>q;q++){n=b[q];var s=this.checkResourceSellby(n,h(p[n],"timestamp")?p[n].timestamp:null);if(s)e(a,c,p[n],n);else{i.log(n+" may be stale, request an update if needed...");var t=new l(a,n,p[n],e,c,j);new m(t)}}},b.checkResourceSellby=function(a,b){switch(a){case n.STATIC_RESOURCES:case n.DISPLAY_CONFIG:case n.SKIN_CONFIG:case n.PLAYS:case n.BOXSCORE:case n.BENCH:case n.INNING:case n.SCORING_PLAYS:return!0;default:return!1}}}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/ValueObjectFactory",["require","exports","module"],function(a,b,c){function d(){}return d.ensureVO=function(a,b){return a instanceof b?a:Object.create(b.prototype)},d.create=function(a,b){var c,e=a.prototype=Object.create(d.prototype);for(c in b)b.hasOwnProperty(c)&&(e[c]=b[c]);return a},d.prototype={updateVO:function(){this.constructor.apply(this,arguments)}},d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Resources/SmpteTimecode",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=f.ensureVO(this,d),c=null,g=null,h=null,i=null,j=!0,k=e(a);b.timecode=k,b.hours=c,b.minutes=g,b.seconds=h,b.frames=i,b.isValidTimecode=j}function e(a){var b=";",c=":",d=null,e=null,f=null,g=null,h=a;if(15===h.length&&-1!==h.indexOf("_")){var h=timecodeStr.split("_")[1];h=h.substr(0,2)+":"+h.substr(2,2)+":"+h.substr(4,2)}else 6===h.length&&(h=h.substr(0,2)+":"+h.substr(2,2)+":"+h.substr(4,2));var i=h.split(c);d=i[0],e=i[1],4==i.length?(f=i[2],g=i[3]):3==i.length?i[2].indexOf(b)>=0?(i=i[2].split(b),f=i[0],g=i[1]):(f=i[2],g="00"):(logg("Error parsing timecode "+h),isValidTimecode=!1);var j=60*parseInt(d)*60+60*parseInt(e)+parseInt(f);return d=Math.floor(j/3600),j-=3600*d,e=Math.floor(j/60),j-=60*e,f=j,d=10>d?"0"+d.toString():d.toString(),e=10>e?"0"+e.toString():e.toString(),f=10>f?"0"+f.toString():f.toString(),h=d+":"+e+":"+f}var f=a("../ValueObjectFactory");return f.create(d,{getFormattedTimeChunk:function(a){var b="0"+String(a);return b.substr(b.length-2,2)},secondsToTimecode:function(a,b){var c=new Date(1970,0,1);c.setTime(1e3*a);var d=this.getFormattedTimeChunk(c.getUTCHours()),e=this.getFormattedTimeChunk(c.getUTCMinutes()),f=this.getFormattedTimeChunk(c.getUTCSeconds()),g=1!=b?SEMICOLON:COLON;return String(d+":"+e+":"+f+g+"00")},addSecondsToTimecode:function(a){var b=this.timecodeToSeconds(timecode)+a;return new GameDayCore.GDModel.SmpteTimecodeVO(this.secondsToTimecode(b))},addMillisToTimecode:function(a){var b=this.timecodeToSeconds(timecode)+a/1e3;return new GameDayCore.GDModel.SmpteTimecodeVO(this.secondsToTimecode(b))},secondsSinceMidnight:function(){return this.timecodeToSeconds(timecode)},getTimecodeRounded:function(){var a=this.timecodeToSeconds(timecode);return a=Math.floor(a/this.ROUND_TO_SECONDS)*this.ROUND_TO_SECONDS,this.secondsToTimecode(a)},getFormattedUrlParam:function(){var a=new GameDayCore.GDModel.SmpteTimecodeVO(this.getTimecodeRounded());return a.hours+a.minutes+a.seconds},toString:function(){return timecode},timecodeToSeconds:function(a){var b=new Date(1970,0,1);return b.setUTCHours(parseFloat(a.substr(0,2))),b.setUTCMinutes(parseFloat(a.substr(3,2))),b.setUTCSeconds(parseFloat(a.substr(6,2))),Math.round(b.getTime()/1e3)}}),d}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("moment/moment",b):a.moment=b()}(this,function(){"use strict";function a(){return Hc.apply(null,arguments)}function b(a){Hc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Jc.length>0)for(c in Jc)d=Jc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Kc===!1&&(Kc=!0,a.updateOffset(this),Kc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Lc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ic._abbr,require("./locale/"+a),w(b)}catch(c){}return Lc[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Ic=c)),Ic._abbr}function x(a,b){return null!==b?(b.abbr=a,Lc[a]=Lc[a]||new s,Lc[a].set(b),w(a),Lc[a]):(delete Lc[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ic;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Mc[c]=Mc[c+"s"]=Mc[b]=a}function A(a){return"string"==typeof a?Mc[a]||Mc[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Qc[a]=e),b&&(Qc[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Qc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Nc);for(b=0,c=d.length;c>b;b++)Qc[d[b]]?d[b]=Qc[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Pc[b]=Pc[b]||J(b),Pc[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oc.lastIndex=0;d>=0&&Oc.test(a);)a=a.replace(Oc,c),Oc.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){dd[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(dd,a)?dd[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)ed[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(ed,a)&&ed[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[gd]<0||c[gd]>11?gd:c[hd]<1||c[hd]>T(c[fd],c[gd])?hd:c[id]<0||c[id]>24||24===c[id]&&(0!==c[jd]||0!==c[kd]||0!==c[ld])?id:c[jd]<0||c[jd]>59?jd:c[kd]<0||c[kd]>59?kd:c[ld]<0||c[ld]>999?ld:-1,j(a)._overflowDayOfYear&&(fd>b||b>hd)&&(b=hd),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){od[a]||(_(b),od[a]=!0)}function ca(a){var b,c,d=a._i,e=pd.exec(d);if(e){for(j(a).iso=!0,b=0,c=qd.length;c>b;b++)if(qd[b][1].exec(d)){a._f=qd[b][0];break}for(b=0,c=rd.length;c>b;b++)if(rd[b][1].exec(d)){a._f+=(e[6]||" ")+rd[b][0];break}d.match(ad)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=sd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[hd]&&null==a._a[gd]&&ua(a),a._dayOfYear&&(e=ra(a._a[fd],d[fd]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[gd]=c.getUTCMonth(),a._a[hd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[id]&&0===a._a[jd]&&0===a._a[kd]&&0===a._a[ld]&&(a._nextDay=!0,a._a[id]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[id]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[fd],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[fd],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[fd]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Nc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Qc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[id]<=12&&b._a[id]>0&&(j(b).bigHour=void 0),b._a[id]=wa(b._locale,b._a[id],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){
return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(ad)||[],c=b[b.length-1]||[],d=(c+"").match(xd)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=yd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[hd])*c,h:q(h[id])*c,m:q(h[jd])*c,s:q(h[kd])*c,ms:q(h[ld])*c}):(h=zd.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[ld]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=Wd(this._milliseconds),this._days=Wd(this._days),this._months=Wd(this._months),a.milliseconds=Wd(a.milliseconds),a.seconds=Wd(a.seconds),a.minutes=Wd(a.minutes),a.hours=Wd(a.hours),a.months=Wd(a.months),a.years=Wd(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=ke(d.as("s")),f=ke(d.as("m")),g=ke(d.as("h")),h=ke(d.as("d")),i=ke(d.as("M")),j=ke(d.as("y")),k=e<le.s&&["s",e]||1===f&&["m"]||f<le.m&&["mm",f]||1===g&&["h"]||g<le.h&&["hh",g]||1===h&&["d"]||h<le.d&&["dd",h]||1===i&&["M"]||i<le.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===le[a]?!1:void 0===b?le[a]:(le[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=me(this._milliseconds)/1e3,e=me(this._days),f=me(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Hc,Ic,Jc=a.momentProperties=[],Kc=!1,Lc={},Mc={},Nc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pc={},Qc={},Rc=/\d/,Sc=/\d\d/,Tc=/\d{3}/,Uc=/\d{4}/,Vc=/[+-]?\d{6}/,Wc=/\d\d?/,Xc=/\d{1,3}/,Yc=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,$c=/\d+/,_c=/[+-]?\d+/,ad=/Z|[+-]\d\d:?\d\d/gi,bd=/[+-]?\d+(\.\d{1,3})?/,cd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,dd={},ed={},fd=0,gd=1,hd=2,id=3,jd=4,kd=5,ld=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",Wc),N("MM",Wc,Sc),N("MMM",cd),N("MMMM",cd),Q(["M","MM"],function(a,b){b[gd]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[gd]=e:j(c).invalidMonth=a});var md="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),od={};a.suppressDeprecationWarnings=!1;var pd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",_c),N("YY",Wc,Sc),N("YYYY",Yc,Uc),N("YYYYY",Zc,Vc),N("YYYYYY",Zc,Vc),Q(["YYYYY","YYYYYY"],fd),Q("YYYY",function(b,c){c[fd]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[fd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var td=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",Wc),N("ww",Wc,Sc),N("W",Wc),N("WW",Wc,Sc),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ud={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",Xc),N("DDDD",Tc),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var vd=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),wd=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",ad),N("ZZ",ad),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var xd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var yd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Ad=ab(1,"add"),Bd=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Cd=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",_c),N("g",_c),N("GG",Wc,Sc),N("gg",Wc,Sc),N("GGGG",Yc,Uc),N("gggg",Yc,Uc),N("GGGGG",Zc,Vc),N("ggggg",Zc,Vc),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Rc),Q("Q",function(a,b){b[gd]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",Wc),N("DD",Wc,Sc),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],hd),Q("Do",function(a,b){b[hd]=q(a.match(Wc)[0],10)});var Dd=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",Wc),N("e",Wc),N("E",Wc),N("dd",cd),N("ddd",cd),N("dddd",cd),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",Wc),N("h",Wc),N("HH",Wc,Sc),N("hh",Wc,Sc),Q(["H","HH"],id),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[id]=q(a),j(c).bigHour=!0});var Hd=/[ap]\.?m?\.?/i,Id=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",Wc),N("mm",Wc,Sc),Q(["m","mm"],jd);var Jd=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",Wc),N("ss",Wc,Sc),Q(["s","ss"],kd);var Kd=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",Xc,Rc),N("SS",Xc,Sc),N("SSS",Xc,Tc);var Ld;for(Ld="SSSS";Ld.length<=9;Ld+="S")N(Ld,$c);for(Ld="S";Ld.length<=9;Ld+="S")Q(Ld,Wb);var Md=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Nd=n.prototype;Nd.add=Ad,Nd.calendar=cb,Nd.clone=db,Nd.diff=ib,Nd.endOf=ub,Nd.format=mb,Nd.from=nb,Nd.fromNow=ob,Nd.to=pb,Nd.toNow=qb,Nd.get=F,Nd.invalidAt=Cb,Nd.isAfter=eb,Nd.isBefore=fb,Nd.isBetween=gb,Nd.isSame=hb,Nd.isValid=Ab,Nd.lang=Cd,Nd.locale=rb,Nd.localeData=sb,Nd.max=wd,Nd.min=vd,Nd.parsingFlags=Bb,Nd.set=F,Nd.startOf=tb,Nd.subtract=Bd,Nd.toArray=yb,Nd.toObject=zb,Nd.toDate=xb,Nd.toISOString=lb,Nd.toJSON=lb,Nd.toString=kb,Nd.unix=wb,Nd.valueOf=vb,Nd.year=td,Nd.isLeapYear=ia,Nd.weekYear=Fb,Nd.isoWeekYear=Gb,Nd.quarter=Nd.quarters=Jb,Nd.month=Y,Nd.daysInMonth=Z,Nd.week=Nd.weeks=na,Nd.isoWeek=Nd.isoWeeks=oa,Nd.weeksInYear=Ib,Nd.isoWeeksInYear=Hb,Nd.date=Dd,Nd.day=Nd.days=Pb,Nd.weekday=Qb,Nd.isoWeekday=Rb,Nd.dayOfYear=qa,Nd.hour=Nd.hours=Id,Nd.minute=Nd.minutes=Jd,Nd.second=Nd.seconds=Kd,Nd.millisecond=Nd.milliseconds=Md,Nd.utcOffset=Na,Nd.utc=Pa,Nd.local=Qa,Nd.parseZone=Ra,Nd.hasAlignedHourOffset=Sa,Nd.isDST=Ta,Nd.isDSTShifted=Ua,Nd.isLocal=Va,Nd.isUtcOffset=Wa,Nd.isUtc=Xa,Nd.isUTC=Xa,Nd.zoneAbbr=Xb,Nd.zoneName=Yb,Nd.dates=aa("dates accessor is deprecated. Use date instead.",Dd),Nd.months=aa("months accessor is deprecated. Use month instead",Y),Nd.years=aa("years accessor is deprecated. Use year instead",td),Nd.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Od=Nd,Pd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Qd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rd="Invalid date",Sd="%d",Td=/\d{1,2}/,Ud={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vd=s.prototype;Vd._calendar=Pd,Vd.calendar=_b,Vd._longDateFormat=Qd,Vd.longDateFormat=ac,Vd._invalidDate=Rd,Vd.invalidDate=bc,Vd._ordinal=Sd,Vd.ordinal=cc,Vd._ordinalParse=Td,Vd.preparse=dc,Vd.postformat=dc,Vd._relativeTime=Ud,Vd.relativeTime=ec,Vd.pastFuture=fc,Vd.set=gc,Vd.months=U,Vd._months=md,Vd.monthsShort=V,Vd._monthsShort=nd,Vd.monthsParse=W,Vd.week=ka,Vd._week=ud,Vd.firstDayOfYear=ma,Vd.firstDayOfWeek=la,Vd.weekdays=Lb,Vd._weekdays=Ed,Vd.weekdaysMin=Nb,Vd._weekdaysMin=Gd,Vd.weekdaysShort=Mb,Vd._weekdaysShort=Fd,Vd.weekdaysParse=Ob,Vd.isPM=Ub,Vd._meridiemParse=Hd,Vd.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var Wd=Math.abs,Xd=yc("ms"),Yd=yc("s"),Zd=yc("m"),$d=yc("h"),_d=yc("d"),ae=yc("w"),be=yc("M"),ce=yc("y"),de=Ac("milliseconds"),ee=Ac("seconds"),fe=Ac("minutes"),ge=Ac("hours"),he=Ac("days"),ie=Ac("months"),je=Ac("years"),ke=Math.round,le={s:45,m:45,h:22,d:26,M:11},me=Math.abs,ne=Ha.prototype;ne.abs=oc,ne.add=qc,ne.subtract=rc,ne.as=wc,ne.asMilliseconds=Xd,ne.asSeconds=Yd,ne.asMinutes=Zd,ne.asHours=$d,ne.asDays=_d,ne.asWeeks=ae,ne.asMonths=be,ne.asYears=ce,ne.valueOf=xc,ne._bubble=tc,ne.get=zc,ne.milliseconds=de,ne.seconds=ee,ne.minutes=fe,ne.hours=ge,ne.days=he,ne.weeks=Bc,ne.months=ie,ne.years=je,ne.humanize=Fc,ne.toISOString=Gc,ne.toString=Gc,ne.toJSON=Gc,ne.locale=rb,ne.localeData=sb,ne.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),ne.lang=Cd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",_c),N("X",bd),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),a.version="2.10.6",b(Da),a.fn=Od,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var oe=a;return oe}),define("moment",["moment/moment"],function(a){return a}),define("responsive-gameday-core/src/js/GDControl/TfsManager/TfsManager",["require","exports","module","../../GDModel/ValueObjects/Resources/SmpteTimecode","datasource-manager/datasource-manager","datasource-manager/env","../GameModelLocator/GameModelLocator","extant/extant","moment/moment"],function(a,b,c){function d(a){for(var b="",c=0;a>c;c++)b=b.concat("0");return b}function e(a){var b=u+""+a.toString();return 6!==b.length&&(b="0"!==b.charAt(0)?b+"0000000":"000000"+b,b="0"!==b.charAt(0)?b.substr(0,6):b.substr(b.length-6)),b}function f(a){var b,c=q.getGameData("linescore"),d=r(c)?parseInt(c.time_zone_hm_lg):-4,e=parseInt(a.substr(0,2));return e-=d,e=23>=e?e:e-24,b="00"+e.toString()+a.substr(2),b.substr(b.length-6)}function g(){var a=parseInt(j.substr(j.length-2))+10;j=j.substr(0,j.length-2)+a.toString(),b.setTimecode(j),w||b.stopSync()}function h(a){var b,c=q.getCurrentGame(),d=q.getGameData("linescore"),e="",f=a.substr(0,2),g=a.substr(2,2),h=r(d,"linescore")?parseInt(d.linescore.time_zone_hm_lg):0;if(r(d,"linescore")){var i=c.gid;b=parseInt(f)+h,e=i.year+"-"+i.month+"-"+i.day;var j=b+":"+g,k=s(e+" "+j,"YYYY-MM-DD HH:mm");parseInt(b)<10&&k.add(1,"days"),k.add(-h,"hours"),e=String("").concat(k.format("YYYYMMDD"),"_")}return e}var i,j,k,l,m,n=a("../../GDModel/ValueObjects/Resources/SmpteTimecode"),o=a("datasource-manager/datasource-manager"),p=a("datasource-manager/env"),q=a("../GameModelLocator/GameModelLocator"),r=a("extant/extant"),s=a("moment/moment"),t=1e4,u="",v=!1,w=!1,x=p().toUpperCase(),y="/gdcross",z="/tfs/tfs?file=";b.init=function(a,c,d){r(a)&&(b.setTimecode(a),t=1e3*c,w=d,this.beginSync(!0))},b.setTimecode=function(a){if(!r(a))return void this.stopSync();var b=a.toString(),c=a.indexOf("et")>=0?"et":"",g=parseInt(b);if(u=d(b.length-g.toString().length),b=e(""===c?b:b.substr(0,b.length-2)),g=parseInt(b),tnumString=e(g.toString()),""!==c&&(b=f(b),g=parseInt(b),tnumString=g.toString()),i=g,j=e(tnumString),0!==j.substr(5,1)||5!==j.substr(5,1)){var h=parseFloat(j.substr(5,1));h=5>h?0:5,j=j.substr(0,5)+h.toString()}l=k,k=new n(j),j=k.timecode.split(":").join("")},b.beginSync=function(a){r(m)&&this.stopSync(),v=!0,a!==!0&&g(),w&&(m=setInterval(g,t))},b.stopSync=function(){r(m)&&(clearInterval(m),m=void 0),v=!1},b.getTfsHost=function(){var a=o.get(x);return a.name===x&&(y=a.gd_flat,z=a.gd_tfs),v?z:y},b.getCurrentTimecode=function(){var a;if(v){a="&timecode=";var b=k.timecode.split(":").join(""),c=h(b);a=a.concat(c,b)}else a="?live";return a},b.syncActive=function(){return v},b.setTimerAdvanceOption=function(a){w=a}}),define("responsive-gameday-core/src/js/GDUtil/resources/ImagePath",["require","exports","module","datasource-manager/lib/Datasource","datasource-manager/lib/extend"],function(a,b,c){var d=a("datasource-manager/lib/Datasource"),e=a("datasource-manager/lib/extend"),f="string",g={},h={mugshot:"http://gdx.mlb.com/images/gameday/mugshots/mlb/{pid:default}.jpg",mugshotDefault:"http://gdx.mlb.com/images/gameday/mugshots/mlb/default.jpg",playerHeader:"http://mlb.mlb.com/images/players/525x330/{pid}.jpg",playerHeaderDefault:"http://wapc.mlb.com/images/apps/summary_photo_default.png",batter:"http://wapc.mlb.com/images/apps/batters_{cut}/{team}-{homeOrAway}-{stand}@2x.png",stadiumTop:"http://ui.bamstatic.com/fedapp/gameday/gdapp/mlb/v1.0.0/assets/img/stadiums/{phase}/{id:default}{density}.jpg",stadiumBottom:"http://ui.bamstatic.com/fedapp/gameday/gdapp/mlb/v1.0.0/assets/img/stadiums/field/GamedayBackdropBottom{density}.jpg"},i=function(a,b){var c=g[a];if(!c){var e={};e[a]={urlTemplate:h[a]},c=g[a]=new d(a,e)}return c.getUrl(b||{})},j=function(a,b){var c,d=a,g={};typeof d===f&&(d={},d[a]=b);for(c in d)g[PRE+c]={urlTemplate:d[c]};e(paths,g)};c.exports={get:i,set:j}}),define("responsive-gameday-core/src/js/GDModel/enums/baseball/PlayerTypes",{BATTER:"batter",PITCHER:"pitcher",B:"b",P:"p",HOME:"home",AWAY:"away",CATCHER:"c",PITCHER_DEFENSE:"p",FIRST_BASE:"b1",SECOND_BASE:"b2",THIRD_BASE:"b3",SHORTSTOP:"ss",LEFT_FIELD:"lf",CENTER_FIELD:"cf",RIGHT_FIELD:"rf",DH:"dh",POS_ARRAY:["p","c","b1","b2","ss","b3","lf","cf","rf"]}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Players/PlayerModel",["require","exports","module","message-service/message-service","../ValueObjectFactory","jquery","../../../GDUtil/window/Logg","extant/extant","../../../GDControl/GameModelLocator/GameModelLocator","../../../GDUtil/resources/ImagePath","../../../GDUtil/window/Logg","../../enums/baseball/PlayerTypes"],function(a,b,c){function d(b,c){var l=j.ensureVO(this,d),p=n.getCurrentGame().getGameData(),q=c,r=e(b,p),s=f(b,c,p),t=p.play,u=p.game,v=a("../../enums/baseball/PlayerTypes"),w=t.findFieldPlayer(b),x=t.findBaseRunner(b),y=r.isHome?"home":"away",z=b==t.pitcher.pid,A=b==t.batter.pid,B=null!==x,C=null!==w,D=q===v.P?g(t,s,z):"--",E=q===v.P?h(t,s,z):"--",F=q===v.P?i(t,F,E,z):"--",G=r.parent_team_abbrev||("home"===y?u.home.abbrev:u.away.abbrev);k.extend(l,{playerModelType:q,player_id:b,pid:b,mugshot:o.get("mugshot",{pid:b}),team_id:m(r,"parent_team_id")?r.parent_team_id:u[y].id,team_abbrev:"home"===y?u.home.abbrev:u.away.abbrev,parent_team_id:r.parent_team_abbrev||"",parent_team_abbrev:r.parent_team_abbrev||"",home_or_away:y,isCurrentPitcher:z,is_live_batter:A,boxnote:s.note||"",isOnBench:!m(s.name),pos:m(s.pos)?s.pos:r.position,stand:m(t,"atbat.stand")?t.atbat.stand:"",b_height:m(t,"atbat.height")?t.atbat.height:"",getBatterImage:function(a){return a=a||"ipad",o.get("batter",{team:G.toUpperCase(),cut:a,homeOrAway:y,stand:m(t,"atbat.stand")&&"L"===t.atbat.stand.toUpperCase()?"LEFT":"RIGHT"})},h:s.h||"",r:s.r||"",hr:s.hr||"",bb:s.bb||"",rbi:s.rbi||"",ab:s.ab||"",avg:s.avg||"",d:s.d||"",e:s.e||"",lob:s.lob||"",fldg:s.fldg||"",bo:s.bo||"",po:s.po||"",so:s.so||"",t:s.t||"",a:s.a||"",out:s.out||"",er:s.er||"",w:s.w||"",l:s.l||"",era:s.era||"",ip:s.ip||"",hrs:s.s_hr||"",rbis:s.s_rbi||"",first:r.first||"",last:r.last||"",boxname:r.boxname||"",name:r.first+" "+r.last,rl:m(r)&&r.rl.length>0?r.rl:"",num:r.num||"",bnum:B?x.bnum:"",note:B?x.note:"",sb:B?x.sb:"",cs:B?x.cs:"",s_hr:s.s_hr||"",s_rbi:s.s_rbi||"",s_po:C?w.s_po:"",s_ass:C?w.s_ass:"",s_err:C?w.s_err:"",s_fldg:C?w.s_fldg:"",pitches:D,strikes:E,balls:F})}function e(a,b){return m(b.players)?b.players.findPlayer(a):(l.log(b),null)}function f(a,b,c){var d=c.boxscore&&c.boxscore.findPlayer(a,b);return m(d)||(d={}),d}function g(a,b,c){var d=0;return c?d=parseInt(a.pitcher.pitches):m(b.np)&&(d=parseInt(b.np)),d}function h(a,b,c){var d=0;return c?d=parseInt(a.pitcher.strikes):m(b.s)&&(d=parseInt(b.s)),d}function i(a,b,c,d){var e=0;return e=d?parseInt(a.pitcher.balls):pitches-c}var j=(a("message-service/message-service"),a("../ValueObjectFactory")),k=a("jquery"),l=a("../../../GDUtil/window/Logg"),m=a("extant/extant"),n=a("../../../GDControl/GameModelLocator/GameModelLocator"),o=a("../../../GDUtil/resources/ImagePath"),l=a("../../../GDUtil/window/Logg");return j.create(d),d}),define("responsive-gameday-core/src/js/GDModel/storage/ResponseCache",["require","exports","module","extant/extant","../../GDUtil/window/Logg"],function(a,b,c){var d=a("extant/extant"),e=a("../../GDUtil/window/Logg"),f={};b.storeResponse=function(a,b){f[a]={text:b,updated:!1}},b.retrieveResponse=function(a){return f[a]},b.responseHasChanged=function(a,b){return d(f[a])?f[a].updated:!1},b.verifyChangeAndStore=function(a,b){return d(f[a])?f[a].text!==b?(e.log("storing new "+a+" cache text"),f[a].text=b,f[a].updated=!0,!0):(f[a].updated=!1,!1):(f[a]={text:b,updated:!0},!0)}}),define("responsive-gameday-core/src/js/GDModel/enums/datasources/DatasourceToEventMap",{all_innings:"ALL_INNINGS",play:"PLAYS",players:"PLAYERS",game:"GAME",boxscore:"BOXSCORE",bench:"BENCH",linescore:"LINESCORE",lineup:"LINEUP",scores:"SCORES",hitchart:"HITCHART",miniscoreboard:"MINISCOREBOARD",inning:"INNING",playercard:"PLAYER_CARD",hotcoldzone:"HOT_COLD_ZONE",displayconfig:"DISPLAY_CONFIG",jingles:"JINGLES",tpl_lib:"TEMPLATES",gamecenter:"GAMECENTER",video:"VIDEO",
liveLookin:"LIVE_LOOKIN",gdConfig:"GD_CONFIG",skin_config:"SKIN_CONFIG",timecode:"TIMECODE",staticresources:"STATIC_RESOURCES",moundball:"MOUNDBALL"}),define("responsive-gameday-core/src/js/GDModel/enums/events/EventTypes",["require","exports","module"],function(a,b,c){return{TFS_TIMER_TICK:"tfs_timer_tick",INIT_DATA_LOADED:"init_data_loaded",GAME_INITIALIZED:"game_data_initialized",PREGAME_UPDATE:"pregame_update",VIEW_READY:"game_view_ready",SCENE_STATE_UPDATE:"scene_state_changed",UPDATE:"abstract_update",PLAYS:"play_update",PLAYERS:"players_update",GAME:"game_update",BOXSCORE:"boxscore_update",BENCH:"bench_update",LINESCORE:"linescore_update",SCORES:"scores_update",HITCHART:"hitchart_update",MINISCOREBOARD:"miniscoreboard_update",SCORING_PLAYS:"scores_update",INNING:"inning_update",ALL_INNINGS:"all_innings_update",PLAYER_CARD:"playercard_update",HOT_COLD_ZONE:"hotcoldzone_update",DISPLAY_CONFIG:"displayconfig_update",JINGLES:"jingles_update",TEMPLATES:"tpl_lib_update",VIDEO:"video_update",LIVE_LOOKIN:"liveLookin_update",GD_CONFIG:"gdConfig_update",SKIN_CONFIG:"skin_config_update",TIMECODE:"timecode_update",STATIC_RESOURCES:"staticresources_update",MOUNDBALL:"moundball_update",BEGIN_COMMERCIAL_BREAK:"beginCommercialBreak",END_COMMERCIAL_BREAK:"endCommercialBreak",COMMERCIAL_COMPANION_RECEIVED:"commercialCompanionReceived",PAGE_VISIBILITY_CHANGED:"page_visibility_changed"}}),define("responsive-gameday-core/src/js/GDModel/enums/baseball/GameStates",{IN_PROGRESS:"In Progress",REPLAY:"Replay",WARMUP:"Warmup",PREVIEW:"Preview",PREGAME:"Pre-Game",FINAL:"Final",GAME_OVER:"Game Over",COMPLETED_EARLY:"Completed Early",DELAYED:"Delayed",DELAYED_START:"Delayed Start",SUSPENDED:"Suspended",POSTPONED:"Postponed",FORFEIT:"Forfeit",CANCELLED:"Cancelled",REVIEW:"Review",CHALLENGE:"Manager Challenge",LIVE:"Live",INSTANT_REPLAY:"Instant Replay",LINEUPS:"Lineups",RE_PREGAME:"Pregame",RE_SUSPENDED:"Suspended",RE_PITCH:"Live",RE_LIVE:"Live",RE_WRAPUP:"Wrapup",ABSTRACT_PREGAME:"abstractPregame",ABSTRACT_LIVE:"abstractLive",ABSTRACT_DELAYED:"abstractDelayed",ABSTRACT_FINAL:"abstractFinal",ABSTRACT_OTHER:"abstractOther"}),define("responsive-gameday-core/src/js/GDUtil/resources/GDConfig",["require","exports","module"],function(a,b,c){return{initProps:null,dataSourceConfig:null,env:"",dictionary:{},supportedVideo:["FLASH_1200K_640X360"],passiveMode:!1}}),define("responsive-gameday-core/src/js/GDModel/enums/baseball/PitchTypes",{FA:"Fastball",FF:"4-Seam Fastball",FT:"2-Seam Fastball",FC:"Cutter",FO:"Forkball",FS:"Splitter",SI:"Sinker",SL:"Slider",CU:"Curveball",KC:"Knuckle Curve",SC:"Screwball",GY:"Gyroball",CH:"Changeup",KN:"Knuckleball",IN:"Int. Ball",PO:"Pitchout",UN:"Unknown",SN:"Unknown",AB:"Auto. Ball",AS:"Auto. Strike",NP:"No Pitch",EP:"Eephus",FA_ES:"Recta",FF_ES:"Recta",FT_ES:"Recta",FC_ES:"Recta cortada",FO_ES:"Tenedor",FS_ES:"Recta de dedos separados",SI_ES:"Sinker",SL_ES:"Slider",CU_ES:"Curva",KC_ES:"Nudillo-Curva",SC_ES:"Tirabuzón",GY_ES:"Gyroball",CH_ES:"Cambio",KN_ES:"Nudillo",IN_ES:"Bola Intencional",PO_ES:"Bola Franca",UN_ES:"Desconocido",SN_ES:"Desconocido",AB_ES:"Bola Automática",AS_ES:"Strike Automático",NP_ES:"No Lanzamiento",EP_ES:"Globito"}),define("responsive-gameday-core/src/js/GDModel/enums/baseball/PitchColors",{pitchColors:{CH:"  0,  85, 254",CU:"  0,  34, 255",FA:"186,   1,   0",FT:"187,   0,  69",FF:"188,   0,  33",FC:"152,   0, 101",FS:"119,   0, 152",FO:" 85,   0, 187",GY:"  0, 153, 171",IN:"135, 136, 154",KC:"153, 171,   0",KN:"  0, 119, 255",NP:"153, 171,   0",SC:"153, 171,   0",SI:" 50,   0, 221",SL:"  0,   0, 254",SN:"153, 171,   0",PO:"135, 136, 154",AB:"153, 171,   0",AS:"153, 171,   0",EP:"153, 171,   0",UN:"50, 50,   50"},pitchBallColors:{S:"170, 21, 11",B:"39, 161, 39",X:"26, 86, 190"}}),define("responsive-gameday-core/src/js/GDUtil/dataMapping/LocalizationUtil",["require","exports","module"],function(a,b,c){b.language="english",b.isEnglish=function(){return!0}}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Plays/Pitch",["require","exports","module","../ValueObjectFactory","../../enums/baseball/PitchTypes","../../enums/baseball/PitchColors","../../../GDUtil/dataMapping/LocalizationUtil"],function(a,b,c){function d(a){var b=j.ensureVO(this,d),c=a;b.name=g(c)||"pitch",b.colorCommentary=c.cc||"",b.id=c.id||"",b.des=h(c),b.type=c.type||"",b.pitchType=c.pitch_type||"",b.pitchDisplayName=i(c),b.isPitch="pitch"===c.name||"p"===c._nodeName,b.isInPlay=c.is_in_play,b.count={balls:c.balls,strikes:c.strikes},b.x=f(c.x)||0,b.y=f(c.y)||0,b.startSpeed=1*f(c.start_speed).toFixed(0)||0,b.endSpeed=1*f(c.end_speed).toFixed(0)||0,b.szTop=f(c.sz_top)||0,b.szBot=f(c.sz_bot)||0,b.pfxX=f(c.pfx_x)||0,b.pfxZ=f(c.pfx_z)||0,b.px=f(c.px)||0,b.pz=f(c.pz)||0,b.x0=f(c.x0)||0,b.y0=f(c.y0)||0,b.z0=f(c.z0)||0,b.vx0=f(c.vx0)||0,b.vy0=f(c.vy0)||0,b.vz0=f(c.vz0)||0,b.ax=f(c.ax)||0,b.ay=f(c.ay)||0,b.az=f(c.az)||0,b.breakX=f(c.break_x)||0,b.breakY=f(c.break_y)||0,b.breakZ=f(c.break_z)||0,b.breakAngle=f(c.break_angle)||0,b.breakLength=f(c.break_length)||0,b.nasty=f(c.nasty)||0,b.sv_id=c.sv_id||"",b.idx=parseInt(c.idx,10)||0,b.tfs_zulu=c.tfs_zulu||"",b.tfs=c.tfs||"",b.resultingBalls=0,b.resultingStrikes=0,b.isPickOff=""==b.type,b.is3DPitch=!!(b.y0&&b.x0&&b.z0)}function e(a){return r[a]=r[a]||o+a+q+n+p}function f(a){return a&&parseFloat(a)||0}function g(a){return"p"==a.name?"pitch":a.name}function h(a){var b="string"==typeof a.des?a.des:"";if(m.isEnglish())return b;var c=a["des_"+m.language()];return b="string"==typeof c?c:b}function i(a){var b="";return b=m.isEnglish()?k[a.pitch_type]||"":k[a.pitch_type+"_ES"]||""}var j=a("../ValueObjectFactory"),k=a("../../enums/baseball/PitchTypes"),l=a("../../enums/baseball/PitchColors"),m=a("../../../GDUtil/dataMapping/LocalizationUtil"),n="1.0",o="rgba(",p=")",q=", ",r={};return j.create(d,{getPitchType:function(a){return a=a||this.pitchType,pitchTypes[a]},getPitchTypes:function(){return k},getPitchColor:function(a){return a=a||this.pitchType,e(l.pitchColors[a||"UN"])},getPitchBallColor:function(a){return a=a||this.type,e(l.pitchBallColors[a])}}),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Plays/AtBat",["require","exports","module","../ValueObjectFactory","../../../GDControl/GameModelLocator/GameModelLocator","extant/extant","../../enums/baseball/PlayerTypes","./Pitch","../../../GDUtil/dataMapping/LocalizationUtil"],function(a,b,c){function d(a,b){var c=j.ensureVO(this,d),k=a,m=b,n=g(k),o=n.slice(0).reverse(),p=[].concat(n),q=e(k),r=k.batter,s=k.pitcher,t=f(k,n);c.homeScore="T"===k.score?k.home_team_runs:"",c.awayScore="T"===k.score?k.away_team_runs:"",c.inning=isNaN(k.inning)||0===parseInt(k.inning,10)?m:parseInt(k.inning,10),c.isComplete="string"==typeof q?q.length>0:!1,c.pitches=n,c.pitchesReverse=o,c.pitchesFull=p,c.numPitches=h(k,n),c.p_throws="string"==typeof k.p_throws?k.p_throws.toUpperCase():null,c.halfInning="",c.abIndex=0,c.runners={},c.b=parseInt(k.b,10)||0,c.s=parseInt(k.s,10)||0,c.o=parseInt(k.o,10)||0,c.batter=r||"",c.stand="",c.batterHeight=k.b_height||"",c.pitcher=s||"",c.highlight=t,c.hasHighlight=l(t),c.type=k._nodeName||"",c.des=q,c.event="string"==typeof k.event?k.event:"",c.brief_event=k.brief_event||"",c.score=k.score||"",c.isScoringPlay="T"===k.score,c.isAction="action"===k._nodeName,c.isPlay="atbat"===k._nodeName,c.num=k.num||"",c.atBatIDWithinHalfInning="",c.startTfs=k.start_tfs||"",c.start_tfs_zulu=k.start_tfs_zulu||"",c.tfs=k.tfs||"",c.tfs_zulu=k.tfs_zulu||"",c.getTimestamp=i}function e(a){var b="string"==typeof a.des?a.des:"";if(!o.isEnglish()){var c=a["des_"+o.language()];b="string"==typeof c?c:b}return b}function f(a,b){for(var c=0,d=b.length;d>c;c++){var e=null;if(l(e))return highlight=e}return null}function g(a){var b,c=[],d=0,e=0,f=0;if("action"!=a._nodeName&&l(a._childList))for(var g=0,h=a._childList.length;h>g;g++)if(b=a._childList.get(g),"runner"==b._nodeName);else{b.name="p"===b._nodeName?"pitch":b._nodeName,"pitch"===b.name&&(d++,b.idx=d,"S"===b.type&&"Foul"!==b.des&&"Foul (Runner Going)"!==b.des||("Foul"===b.des||"Foul (Runner Going)"===b.des)&&2>e?e++:"B"===b.type?f++:"X"===b.type&&(b.isInPlay=!0),b.balls=f,b.strikes=e);var i=new n(b);c.push(i)}return c}function h(a,b){for(var c=0,d=0,e=b.length;e>d;d++)b[d].is_pitch&&c++;return c}function i(a){for(var b="",c=pitchesFull.length-1;c>=0;c--)if("string"==typeof pitchesFull[c].tfs_zulu&&pitchesFull[c].tfs_zulu.length>0){b=pitchesFull[c].tfs_zulu;break}return""===b&&(b="string"==typeof a.tfs_zulu&&a.tfs_zulu.length>0?a.tfs_zulu:a.start_tfs_zulu),b}var j=a("../ValueObjectFactory"),k=a("../../../GDControl/GameModelLocator/GameModelLocator"),l=a("extant/extant"),m=a("../../enums/baseball/PlayerTypes"),n=a("./Pitch"),o=a("../../../GDUtil/dataMapping/LocalizationUtil");return j.create(d,{getBatterModel:function(){return k.getCurrentGame().getPlayerSnapshot(this.batter,m.B)},getPitcherModel:function(){return k.getCurrentGame().getPlayerSnapshot(this.pitcher,m.P)},getBatterImage:function(){var a=this.getBatterModel();return a.getBatterImage.apply(a,arguments)}}),d}),define("responsive-gameday-core/src/js/GDUtil/dataMapping/NumberWithOrdinal",["require","exports","module"],function(a,b,c){return function(a){var b,c=a+"",d=c.substr(-2);if("11"===d||"12"===d||"13"===d)b="th";else switch(~~d.substr(-1)){case 1:b="st";break;case 2:b="nd";break;case 3:b="rd";break;default:b="th"}return a+b}}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Scoreboard/Innings",["require","exports","module","../ValueObjectFactory","extant/extant","../Plays/AtBat","../../../GDUtil/resources/ImagePath","../../../GDUtil/dataMapping/NumberWithOrdinal"],function(a,b,c){function d(a){var b=f.ensureVO(this,d),c=a,g=e(c,"top"),h=e(c,"bottom");b.num=c.num||"",b.numWithOrinal=c.num?j(c.num):"",b.away_team=c.away_team||"",b.home_team=c.home_team||"",b.next=c.next||"",b.top=g.innings,b.bottom=h.innings,b.halves=[{half:"top",home_or_away:"away",pitching:g.pitching,atbats:g.innings},{half:"bottom",home_or_away:"home",pitching:h.pitching,atbats:h.innings}],b.isValid="object"==typeof c}function e(a,b){var c,d,e,f=[],j=1;if("object"==typeof a[b]&&g(a[b]._childList))for(var k=0,l=a[b]._childList.length;l>k;k++){var m=a[b]._childList.get(k);e=new h(m,a.num),("atbat"===e.type||"action"===e.type)&&("atbat"===e.type?(c=c||m.pitcher,j++):1!==j||d||-1===m.event.toLowerCase().indexOf("pitching")||(d=!0)),"atbat"===e.type&&(e.batterMug=i.get("mugshot",{pid:m.batter}),e.pitcherMug=i.get("mugshot",{pid:m.pitcher})),f.push(e)}return{pitching:d||!c?!1:{pitcher:c},innings:f}}var f=a("../ValueObjectFactory"),g=a("extant/extant"),h=a("../Plays/AtBat"),i=a("../../../GDUtil/resources/ImagePath"),j=a("../../../GDUtil/dataMapping/NumberWithOrdinal");return f.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Scoreboard/AllInnings",["require","exports","module","../ValueObjectFactory","../../../GDControl/GameModelLocator/GameModelLocator","./Innings"],function(a,b,c){function d(a,b){var c=e.ensureVO(this,d),h=b===!0?a:new g(a),i="all_innings",j=f.getGameData(i)[i];if(c.innings=j&&j.innings||[],c.innings){var k=0,l=~~h.num,m=c.innings.length;for(c.innings[l-1]=h;m>k;k++)c.innings[k]=c.innings[k]||{num:k+1}}}var e=a("../ValueObjectFactory"),f=a("../../../GDControl/GameModelLocator/GameModelLocator"),g=a("./Innings");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Game/GameId",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a,f=c.split("/").join("_").split("-").join("_").substring(26===c.length?0:4),g=f.split("_"),h=g[0],i=g[1],j=g[2];if(26!=c.length&&30!=c.length)throw new Error("the game id handed over does not seem to be valid length, pardner.");30==c.length&&(c=c.substr(4,30)),b.gid=f,b.gid_path="gid_"+f,b.year=h,b.month=i,b.day=j,b.away_full_code=g[3],b.away_team_code=g[3].substr(0,3),b.away_sport_code=g[3].substr(3,6),b.home_full_code=g[4],b.home_team_code=g[4].substr(0,3),b.home_sport_code=g[4].substr(3,6),b.product_code=g[4].substr(3,6),b.gamenumber=g[5],b.gameDateString=function(){return i+"/"+j+"/"+h}(),b.dateFormat=[this.month,this.day,this.away_full_code,this.home_full_code],b.isValid=function(){return 26!==c.length&&30!==c.length?!1:!(isNaN(parseFloat(this.year))||isNaN(parseFloat(this.month))||isNaN(parseFloat(this.day))||isNaN(parseFloat(g[6])))}()}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/enums/events/HashEvents",{GAME_ID_CHANGED:"gameIdChanged",GAME_STATE_CHANGED:"gameStateChanged",SELECTED_TAB_CHANGED:"selectedTabChanged",TFS_TIME_CHANGED:"tfsTimeChanged",TFS_HOLD_SWITCHED:"tfsHoldSwitched",PLAYER_SELECTED:"playerDisplaySelected"}),define("responsive-gameday-core/src/js/GDUtil/window/UrlHasher",["require","exports","module","extant/extant","message-service/message-service","./Logg","../../GDControl/GameModelLocator/GameModelLocator","../../GDModel/enums/baseball/GameStates","../../GDModel/enums/events/HashEvents"],function(a,b,c){function d(a){i(a,"lock_state")&&"PitchByPitch"===a.lock_state&&(a.lock_state=j.RE_LIVE),i(a,"game_state")&&"PitchByPitch"===a.game_state&&(a.game_state=j.RE_LIVE)}function e(a){for(var b,c=0,e={},f=(a||location.hash).replace("#","").split(","),g=f.length;g>c;c++)b=f[c].split("="),e[b[0]]=b[1];return d(e),$.extend({},l,e)}function f(a){return a.lock_state&&a.game_state!==a.lock_state?(a.game_state=a.lock_state,!0):!1}function g(a){return location.replace((location+"").replace(k,h(a)))}function h(a){var b,c=[];for(b in a)c.push(b+"="+a[b]);return"#"+c.join(",")}var i=a("extant/extant"),j=(a("message-service/message-service"),a("./Logg"),a("../../GDControl/GameModelLocator/GameModelLocator"),a("../../GDModel/enums/baseball/GameStates")),k=/#.*|$/,l={game:null,game_state:null};b.getHashParams=function(a){var b=e(a);return f(b),{}},b.getCachedParams=function(a){return{}},b.removeHashParam=function(a){var b=e();return delete b[a],g(b)},b.setHashParams=function(a){},b.setInitParams=function(a,b){return},b.checkState=function(a){return!1}}),define("responsive-gameday-core/src/js/GDModel/enums/baseball/SimpleStatusCodes",{X:0,C:0,D:0,S:0,P:0,T:50,U:50,M:50,N:100,I:100,O:200,F:200,Q:200,R:200,W:200}),define("responsive-gameday-core/src/js/GDUtil/dataMapping/GameStateUtil",["require","exports","module","../window/UrlHasher","extant/extant","../../GDModel/enums/baseball/GameStates","../../GDModel/enums/baseball/SimpleStatusCodes","../../GDControl/GameModelLocator/GameModelLocator","../../GDModel/enums/datasources/Datasources"],function(a,b,c){var d=a("../window/UrlHasher"),e=a("extant/extant"),f=a("../../GDModel/enums/baseball/GameStates"),g=a("../../GDModel/enums/baseball/SimpleStatusCodes"),h=a("../../GDControl/GameModelLocator/GameModelLocator");a("../../GDModel/enums/datasources/Datasources");b.currentInning=1,b.getGameViewState=function(a){var b=e(a)?{}:h.getGameData().play||h.getGameData().linescore,c=e(a)?a:b.status_ind,d=this.getUsableGameState(c);return d!==f.RE_SUSPENDED?d:f.RE_LIVE},b.getUsableGameState=function(a,b){var c,i=e(a)?{}:h.getGameData().play||h.getGameData().linescore,j=e(a)?a:i.status_ind,k=d.getHashParams().lock_state,l=j.charAt(0),m=g[l];if(k&&b!==!0)return k;if("PW"===j)return f.RE_LIVE;if("RK"===j)return f.RE_PREGAME;switch(!0){case!m:case m<g.T:c=f.RE_PREGAME;break;case m<g.I:c=f.RE_SUSPENDED;break;case m<g.O:c=f.RE_LIVE;break;case m>=g.O:c=f.RE_WRAPUP;break;default:c=d.getHashParams().game_state||d.getCachedParams().game_state||f.RE_PREGAME}return c},b.isValidState=function(a){var b;for(b in f)if(f[b]===a)return!0;return!1},b.setGameState=function(a){a=a&&this.isValidState(a)?a:this.getUsableGameState(),d.setHashParams({game_state:a})},b.getAbstractGamestate=function(a){switch(a){case f.IN_PROGRESS:case f.WARMUP:case f.REPLAY:case f.LIVE:return f.ABSTRACT_LIVE;case f.PREVIEW:case f.PREGAME:case f.LINEUPS:return f.ABSTRACT_PREGAME;case f.DELAYED:case f.DELAYED_START:case f.REVIEW:case f.CHALLENGE:return f.ABSTRACT_DELAYED;case f.FINAL:case f.GAME_OVER:case f.COMPLETED_EARLY:return f.ABSTRACT_FINAL;case f.SUSPENDED:case f.POSTPONED:case f.FORFEIT:case f.CANCELLED:default:return f.ABSTRACT_OTHER}}}),define("responsive-gameday-core/src/js/GDModel/load/manager/HeartbeatItem",["require","exports","module","../../../GDControl/GameModelLocator/GameModelLocator","../../storage/ModelCache","../../storage/ResponseCache","data-fetcher/data-fetcher","../../../GDControl/SubscriptionManager/SubscriptionManager","message-service/message-service","../../enums/datasources/Datasources","../../enums/datasources/DatasourceToEventMap","../../enums/events/EventTypes","../../enums/baseball/GameStates","../../../GDUtil/resources/GDConfig","extant/extant","../../../GDUtil/window/Logg","../execute/FileRequestItem","../../ValueObjects/Scoreboard/AllInnings","../../ValueObjects/Game/GameId","../../../GDUtil/dataMapping/GameStateUtil"],function(a,b,c){function d(b,c){function d(a){if(!O(a.data))return void P.log("well, there's problem out the gate, as an issue arose loading the linescore");y(a);var b=D.getGameData(J.LINESCORE).linescore;C=T.getAbstractGamestate(b.status),e()}function e(){var a=D.getCurrentGame().addGameParams();ea=f(da.length);for(var b=0,c=da.length;c>b;b++)P.log("Loading "+da[b]+" files"),G.get(new Q(da[b],!0,a,z));g()}function f(a){var b=a+1;return H.checkSubscription(J.BOXSCORE)&&b++,H.checkSubscription(J.INNING)&&b++,b}function g(){var a=((new Date).getTime()-W.getTime(),J.PLAYS),b=new S(U),c={yyyy:b.year,mm:b.month,dd:b.day,gid:b.gid_path,sportcode:b.home_sport_code},d=D.getCurrentGame().addGameParams(c);W=new Date,P.log("GET: play"),G.get(new Q(a,!0,d,k))}function h(){var a=((new Date).getTime()-W.getTime(),D.getCurrentGame().addGameParams());P.log("GET: linescore"),W=new Date,G.get(new Q(J.LINESCORE,!0,a,d))}function i(){var a=(new Date).getTime()-W.getTime();a>1e3*N.wait&&(C!==M.ABSTRACT_PREGAME?g():h())}function j(){0===ea&&X&&(P.log("ALL CLEAR!"),X=!1,fa=!0,I.publish(L.INIT_DATA_LOADED))}function k(a){if(!O(a.data))return void P.error("The data call was null, not much to do with that, dude: ",a);B=a.data;var b=D.getCurrentGame().addGameParams({inning:B.inning}),c=B.liveState,d=c===M.RE_WRAPUP;Y||F.responseHasChanged(a.dataSourceName)?(P.log("plays loaded, first run: "+ea),Y&&(ea--,Y=!1),N.wait=parseInt(B.wait),E.storeGameData(U,a.dataSourceName,B,(new Date).getTime()),m()):(d&&v(),P.log("plays file unchanged")),l(b)}function l(a){for(var b=[].concat(H.getSubscriptions()),c=0,d=b.length;d>c;c++)b[c]!==J.PLAYS&&b[c]!==J.ALL_INNINGS&&G.expire({dataSoureName:b[c],params:a})}function m(){O(ba)&&A==B.box&&B.inning==ba.inning?O(B.atbat)&&B.atbat.des.length>0&&B.atbat.des!=ba.atbat.des?(P.log("heartbeat boxscore trigger 2: description has been populated"),n()):O(B.atbat)&&(!O(ba.atbat)||B.atbat.num!=ba.atbat.num&&0==ba.atbat.des.length)?(P.log("heartbeat boxscore trigger 3: missed description trigger"),n()):3!=B.outs||aa?3!=B.outs?(aa=!1,u()):u():(P.log("heartbeat boxscore trigger 3: outs == 3"),aa=!0,n()):(P.log("heartbeat boxscore trigger 1"),n()),x(B,ba)&&t("batter",B.atbat.batter,"zn"),null!==ba&&(B.gamestate!=ba.gamestate||B.liveState===M.RE_WRAPUP)&&v(),ba=B}function n(){P.log("Heartbeat.refreshPlaysDependentFiles"),A=B.box;var a=D.getCurrentGame().addGameParams({inning:B.inning});o(J.BOXSCORE,q,a),o(J.INNING,q,a),p(a),0===ea&&j()}function o(a,b,c){H.checkSubscription(a)&&(P.log("GET: ",a),ca++,G.get(new Q(a,!0,c,b)))}function p(a){H.checkSubscription(J.VIDEO)&&G.get(new Q(J.VIDEO,!0,a,y))}function q(a){var b=D.getCurrentGame().addGameParams();if(O(a.data)){var c=a.dataSourceName,d=c===J.BOXSCORE?L.BOXSCORE:L.INNING;E.storeGameData(U,c,a.data,(new Date).getTime()),s(a),r(c,b),I.publish(d)}else P.log("HeartbeatItem.handleBoxscoreRefresh: Boxscore ERROR: "+a.source);ca--,0===ca&&u(),X&&(P.log("handle Box Load, first run: "+ea),ea--,j())}function r(a,b){var c=a===J.BOXSCORE?J.BENCH:J.SCORING_PLAYS;H.checkSubscription(c)&&(P.log("loading tertiary file: "+c),G.get(new Q(c,!0,b,y)))}function s(a){var b=J.ALL_INNINGS;E.storeGameData(U,b,new R(a.data,!0),(new Date).getTime()),H.checkSubscription(b)&&I.publish(b)}function t(a,b,c){if(O(a)&&O(b)&&O(c)){P.log("Heartbeat.refreshHotColdZone",a,b,c);var d=D.getCurrentGame().addGameParams({id:b,playertype:a,sit:c});G.get(new Q(J.HOT_COLD_ZONE,!0,d,y))}}function u(){P.log("Heartbeat.dispatchUpdateEvent"),I.publish(L.UPDATE)}function v(){Z||"Wrapup"===B.liveState&&setTimeout(w,1e4)}function w(){P.log("FINAL BOX REFRESH - SHUTTING DOWN HEARTBEAT"),ga.stop(),n()}function x(a,b){function c(){return O(b,"atbat.num")&&O(a,"atbat.num")?a.atbat.num!==b.atbat.num:!0}function d(){return a.atbat.isComplete&&b.atbat.des!=b.atbat.des}return O(a.atbat)&&O(a.atbat.batter)?null===b?!0:d()||c():!1}function y(a){var b=a.dataSourceName;if(O(a.data)){E.storeGameData(U,b,a.data,(new Date).getTime());var c=K[b];I.publish(L[c])}else P.error("HeartbeatItem.storeLoaded() error :: "+b+" :: "+a.source)}function z(a){ea--,P.log("storeLoaded() "+a.dataSourceName+", first run: "+ea),y(a),j()}var A,B,C,D=a("../../../GDControl/GameModelLocator/GameModelLocator"),E=a("../../storage/ModelCache"),F=a("../../storage/ResponseCache"),G=a("data-fetcher/data-fetcher"),H=a("../../../GDControl/SubscriptionManager/SubscriptionManager"),I=a("message-service/message-service"),J=a("../../enums/datasources/Datasources"),K=a("../../enums/datasources/DatasourceToEventMap"),L=a("../../enums/events/EventTypes"),M=a("../../enums/baseball/GameStates"),N=a("../../../GDUtil/resources/GDConfig"),O=a("extant/extant"),P=a("../../../GDUtil/window/Logg"),Q=a("../execute/FileRequestItem"),R=a("../../ValueObjects/Scoreboard/AllInnings"),S=a("../../ValueObjects/Game/GameId"),T=a("../../../GDUtil/dataMapping/GameStateUtil"),U=b,V=-1,W=new Date(0),X=!0,Y=!0,Z=!1,$=!1,_=!1,aa=!1,ba=null,ca=0,da=[],ea=X?1:0,fa=!1,ga=this;this.init=function(a,b){fa||(O(N.wait)||(N.wait=10),da=[].concat(a),G.get(new Q(J.LINESCORE,!0,b,d)))},this.start=function(){fa&&(_=!1,$=!0,i(),-1==V&&(V=setInterval(i,1e3)))},this.pause=function(){_=!0,-1!=V&&(clearInterval(V),V=-1)},this.stop=function(){$=!1,_=!0,-1!=V&&(clearInterval(V),V=-1)},this.isActive=function(){return $}}return d.prototype={init:function(){},start:function(){},pause:function(){},stop:function(){},isActive:function(){}},d}),define("responsive-gameday-core/src/js/GDModel/load/manager/PassiveRequest",["require","exports","module","../../../GDControl/GameModelLocator/GameModelLocator","../../../GDControl/SubscriptionManager/SubscriptionManager","message-service/message-service","data-fetcher/data-fetcher","../execute/FileRequestItem","../../storage/ModelCache","extant/extant","../../../GDUtil/window/Logg","../../enums/datasources/Datasources","../../enums/datasources/DatasourceToEventMap","../../enums/events/EventTypes"],function(a,b,c){function d(b){function c(a){this.active=!0,A=p.getSubscriptions().length,n=a||o.getCurrentGame().addGameParams(),p.checkSubscription(w.PLAYS)?r.get(new s(w.PLAYS,!0,n,d)):e()}function d(a){if(!u(a.data))return e(),void v.log("plays file failed to Load, sorry.");var b=a.data;A--,l(a.data,a.dataSourceName),$.extend(n,{inning:b.inning}),e(b.inning)}function e(a){if(this.active){var b=p.checkSubscription(w.BOXSCORE),c=p.checkSubscription(w.inning)&&u(a);p.checkSubscription(w.inning)&&!u(a)&&(v.log("could not Load requested inning file due to no inning number available from plays."),A--),B=0,b&&(B++,r.get(new s(w.BOXSCORE,!0,n,f))),c&&(B++,r.get(new s(w.INNING,!0,n,f))),b||c||g()}}function f(a){B--,A--,u(a.data)&&l(a.data,a.dataSourceName),0===B&&g()}function g(){if(this.active){var a=p.checkSubscription(w.BENCH),b=p.checkSubscription(w.SCORING_PLAYS);B=0,a&&(B++,r.get(new s(w.BENCH,!0,n,h))),b&&(B++,r.get(new s(w.SCORING_PLAYS,!0,n,h))),a||b||i()}}function h(a){B--,A--,u(a.data)&&l(a.data,a.dataSourceName),0===B&&i()}function i(){if(this.active)for(var a=k(p.getSubscriptions()),b=0,c=a.length;c>b;b++)r.get(new s(a[b],!0,n,j))}function j(a){A--,u(a.data)&&l(a.data,a.dataSourceName),0===A&&(C&&(C=!1,m("INIT_DATA_LOADED")),m("UPDATE"))}function k(a){for(var b=[].concat(a),c=0,d=b.length;d>c;c++)switch(b[c]){case w.PLAYS:case w.BOXSCORE:case w.INNING:case w.BENCH:case w.SCORING_PLAYS:b.splice(c,1),c--}return b}function l(a,b){t.storeGameData(z,b,a,(new Date).getTime()),m(x[b])}function m(a){q.publish(y[a])}var n,o=a("../../../GDControl/GameModelLocator/GameModelLocator"),p=a("../../../GDControl/SubscriptionManager/SubscriptionManager"),q=a("message-service/message-service"),r=a("data-fetcher/data-fetcher"),s=a("../execute/FileRequestItem"),t=a("../../storage/ModelCache"),u=a("extant/extant"),v=a("../../../GDUtil/window/Logg"),w=a("../../enums/datasources/Datasources"),x=a("../../enums/datasources/DatasourceToEventMap"),y=a("../../enums/events/EventTypes"),z=b,A=0,B=0,C=!0;this.loadGameData=function(a){c(a)}}return d.prototype={active:!1,loadGameData:function(){},stop:function(){this.active=!1},start:this.executeInitialLoad,pause:function(){this.active=!0},isActive:function(){return this.active}},d}),define("responsive-gameday-core/src/js/GDModel/GameItem/GameItem",["require","exports","module","../storage/ModelCache","../../GDControl/TfsManager/TfsManager","message-service/message-service","../../GDControl/SubscriptionManager/SubscriptionManager","extant/extant","../../GDUtil/window/Logg","../ValueObjects/Players/PlayerModel","../load/manager/HeartbeatItem","../load/manager/PassiveRequest","../ValueObjects/Game/GameId","../../GDUtil/resources/GDConfig","../enums/datasources/Datasources","../enums/events/EventTypes"],function(a,b,c){function d(){for(var a=s,b=[a.GAME,a.LINESCORE,a.BENCH,a.PLAYERS,a.STATIC_RESOURCES],c=b.length-1;c>0;c--)k.checkSubscription(b[c])||b.splice(c,1);return b}function e(a,b){l(a)||l(b)?(u=!0,j.removeListener(t.INIT_DATA_LOADED,e),m.log("dispatching game ready"),j.publish(t.GAME_INITIALIZED)):(m.log("GameItem not ready! adding load listener..."),j.addListener(t.INIT_DATA_LOADED,e),u=!1)}function f(a){e(),g=!r.passiveMode,this.hbMode=g,this.heartbeat=g?new o(a,v):null,this.passiveLoader=g?null:new p(a),this.initLoads=d(),this.gameID=a,this.gid=new q(a)}var g,h=a("../storage/ModelCache"),i=a("../../GDControl/TfsManager/TfsManager"),j=a("message-service/message-service"),k=a("../../GDControl/SubscriptionManager/SubscriptionManager"),l=a("extant/extant"),m=a("../../GDUtil/window/Logg"),n=a("../ValueObjects/Players/PlayerModel"),o=a("../load/manager/HeartbeatItem"),p=a("../load/manager/PassiveRequest"),q=a("../ValueObjects/Game/GameId"),r=a("../../GDUtil/resources/GDConfig"),s=a("../enums/datasources/Datasources"),t=a("../enums/events/EventTypes"),u=!1,v={};return f.prototype={initialized:function(){return u},init:function(a,b){if(this.hbMode){var c=this.heartbeat;c.init(this.initLoads,this.addGameParams()),j.one(t.INIT_DATA_LOADED,function(){c.start()})}else this.passiveLoader.loadGameData(this.addGameParams());this.hbMonitor=this.heartbeat||this.passiveLoader},gid:null,getGameData:function(a){return h.retrieveGameData(this.gameID,a)},requestGameData:function(a,b,c){this.getFreshGameData(a,b,c)},getFreshGameData:function(a,b,c){h.getFreshGameData(this.gameID,a,b,c)},addGameParams:function(a){var b=this.gid,c={yyyy:b.year,mm:b.month,dd:b.day,gid:b.gid_path,sportcode:b.home_sport_code},d=$.extend({},c,{tfshost:i.getTfsHost(),timecode:i.getCurrentTimecode()});return $.extend({},d,a)},hbMonitor:null,hbMode:!0,pauseHeartbeat:function(){this.hbMonitor.pause()},stopHeartbeat:function(){this.hbMonitor.stop()},unStopHeartbeat:function(){this.hbMonitor.start()},startHeartbeat:function(){this.hbMonitor.start()},executePassiveLoad:function(){this.hbMode?this.hbMonitor.start():this.hbMonitor.loadGameData()},active:function(){return this.hbMonitor.isActive()},getPlayerSnapshot:function(a,b){return new n(a,"string"!=typeof b?"b":b)}},f}),define("responsive-gameday-core/src/js/GDControl/GameModelLocator/GameModelLocator",["require","exports","module","../../GDModel/GameItem/GameItem","../../GDModel/ValueObjects/Game/GameId","extant/extant","../../GDUtil/window/Logg","../TfsManager/TfsManager","../../GDUtil/window/UrlHasher"],function(a,b,c){var d,e=a("../../GDModel/GameItem/GameItem"),f=a("../../GDModel/ValueObjects/Game/GameId"),g=a("extant/extant"),h=a("../../GDUtil/window/Logg"),i=a("../TfsManager/TfsManager"),j=a("../../GDUtil/window/UrlHasher"),k=[];b.getGame=function(a){if(h.log("get game by ID: "+a),g(a)&&g(d)&&a!==d.gameID&&d.stopHeartbeat(),g(k[a]))g(a)&&(g(d)&&a!==d.gameID&&d.stopHeartbeat(),d=k[a],d.executePassiveLoad());else{h.log("creating new game instance");var b=new e(a);k[a]=b,d=b,b.init()}return g(d)&&d.active()===!1&&d.hbMode&&(h.log("starting game heartbeat..."),d.startHeartbeat()),d},b.getCurrentGame=function(){return d},b.getGameData=function(a){return g(d)?d.getGameData(a):null},b.requestGameData=function(a,b){var c="update_ID:"+parseInt(1e4*Math.random(),10);return g(d)?d.requestGameData(a,c,b):h.log("there was no game to get data from, so you will get nothing on this event id, ever."),c},b.switchGame=function(a,c,d){var e={};if(i.stopSync(),g(c)?(i.setTimerAdvanceOption(d),i.setTimecode(c),i.beginSync(!0),e.tfs=c):i.setTimecode(void 0),g(a)){var h=new f(a);e.game=h.gid,b.getGame(h.gid_path)}j.setHashParams(e)}}),define("responsive-gameday-core/src/js/GDUtil/window/WindowBridge",["require","exports","module","./Logg"],function(a,b,c){function d(){parent.window.addEventListener?parent.window.addEventListener("message",e,!0):parent.window.attachEvent?parent.window.attachEvent("message",e):f.log("Unable to attach listener to parent.window")}function e(a){var b=a.data.split("~"),c=b.shift();f.log("attempting to call function for event: "+c),h[c]&&(b.length>0?h[c](b):h[c]())}var f=a("./Logg"),g="http://"+document.location.host,h={};b.dispatchMessage=function(a){try{parent.window.postMessage(a,g)}catch(b){f.log("parent.window.postMessage has failed.")}},b.addListener=function(a,b){h[a]=b},b.removeListener=function(a){h[a]=void 0,delete h[a]},b.init=function(){d()}}),define("responsive-gameday-core/src/js/GDControl/managers/MidInningGamesManager",["require","exports","module","../../GDModel/load/execute/FileRequestItem","../../GDModel/storage/ModelCache","../GameModelLocator/GameModelLocator","data-fetcher/data-fetcher","../../GDModel/enums/datasources/Datasources","../../GDUtil/window/WindowBridge","message-service/message-service","../../GDModel/enums/events/EventTypes","../../GDUtil/window/Logg","extant/extant"],function(a,b,c){function d(){if(!s)return!1;if(q.log("MidInningGameManager : maybeDisplayMidInningGame"),t=e.getActiveMig(),!r(t))return!1;if(g===t.inning&&h===t.top_inning)return!1;q.log("Mid-inning game found: "+t.game.type+" with sponsor "+t.game.sponsor),g=t.inning,h=t.top_inning;var a="MidInningGames.loadGame~"+t.game.type+"~"+t.game.sponsor;return q.log("sending via WindowBridge.dispatchMessage : "+a),n.dispatchMessage(a),!0}var e,f,g,h,i=a("../../GDModel/load/execute/FileRequestItem"),j=a("../../GDModel/storage/ModelCache"),k=a("../GameModelLocator/GameModelLocator"),l=a("data-fetcher/data-fetcher"),m=a("../../GDModel/enums/datasources/Datasources"),n=a("../../GDUtil/window/WindowBridge"),o=a("message-service/message-service"),p=a("../../GDModel/enums/events/EventTypes"),q=a("../../GDUtil/window/Logg"),r=a("extant/extant"),s=!1,t=null;b.init=function(){function a(a){return r(a.data)?(j.storeGameData(k.getCurrentGame().gid.gid_path,a.dataSourceName,a.data,(new Date).getTime()),e=a.data,void(s=!0)):void q.log("thre was no data inside the mid-inning game Load")}var b=m.STATIC_RESOURCES,c=k.getGameData(b)[b],d=this;if(!r(c))return void o.one(p.UPDATE,function(){d.init()});if(!c.midInningGamesEnabled)return void q.log("mid-inning games disabled");f=k.getCurrentGame();var g=c.getMidInningGamesXmlUrl,h=m.MID_INNING_GAMES,n=f.addGameParams({urlPath:g});q.log("GET: mid inning game deets"),l.get(new i(h,!0,n,a));
},b.checkMidInningGames=function(){return d()}}),define("responsive-gameday-core/src/js/GDControl/managers/PageVisibilityManager",["require","exports","module","../../GDModel/enums/events/EventTypes","message-service/message-service","../../GDUtil/window/Logg"],function(a,b,c){function d(){document[e]?(i.log("PageVisibilityManager : handleVisibilityChange : hidden"),j=!1,h.publish(g.PAGE_VISIBILITY_CHANGED)):(i.log("PageVisibilityManager : handleVisibilityChange : visible"),j=!0,h.publish(g.PAGE_VISIBILITY_CHANGED))}var e,f,g=a("../../GDModel/enums/events/EventTypes"),h=a("message-service/message-service"),i=a("../../GDUtil/window/Logg"),j=!0;"undefined"!=typeof document.hidden?(e="hidden",f="visibilitychange"):"undefined"!=typeof document.mozHidden?(e="mozHidden",f="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e="webkitHidden",f="webkitvisibilitychange");document.getElementById("videoElement");"undefined"==typeof document.addEventListener||"undefined"==typeof document[e]?i.log("PageVisibilityManager : Page Visibility API not supported by this browser."):document.addEventListener(f,d,!1),b.getPageVisibility=function(){return j}}),define("data-transformers/json",["require","exports","module"],function(a,b,c){return function(a,b,c){return a&&a.json||JSON.parse(a.text||a.responseText)}}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Game/GameFileStadium",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.id=c.id||"",b.name=c.name||"",b.location=c.location||"",b.venue_w_chan_loc=c.venue_w_chan_loc||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Game/GameFileTeam",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.type=c.type||"",b.code=c.code||"",b.file_code=c.file_code||"",b.abbrev=c.abbrev||"",b.id=c.id||"",b.name=c.name||"",b.name_full=c.name_full||"",b.name_brief=c.name_brief||"",b.w=c.w||"",b.l=c.l||"",b.divisionID=c.division_id||"",b.leagueID=c.league_id||"",b.league=c.league||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Game/GameFile",["require","exports","module","../ValueObjectFactory","./GameFileStadium","./GameFileTeam"],function(a,b,c){function d(b){var c=f.ensureVO(this,d),g=b,h=a("./GameFileStadium"),i=a("./GameFileTeam");c.type=g.type||"",c.gameday_sw=g.gameday_sw||"",c.local_game_time=g.local_game_time||"",c.game_time_et=g.game_time_et||"",c.day_or_night=e(g),c.game_pk=g.game_pk||"",c.home=new i("home"==g.team[0].type?g.team[0]:g.team[1]),c.away=new i("home"==g.team[0].type?g.team[1]:g.team[0]),c.stadium=new h(g.stadium)}function e(a){var b=parseInt(a.local_game_time.substr(0,2)),c=parseInt(a.local_game_time.substr(3,2));return b>18||5>b||6===b&&c>30?"night":"day"}var f=a("../ValueObjectFactory");return f.create(d),d}),function(a,b){"function"==typeof define&&define.amd?define("ensureArray/ensureArray",[],b):"object"==typeof exports?module.exports=b():a.bamEnsureArray=b()}(this,function(){"use strict";var a="undefined";return function(b){return Array.isArray(b)?b:typeof b===a?[]:[b]}}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Resources/StaticResources",["require","exports","module","../ValueObjectFactory","../../../GDControl/GameModelLocator/GameModelLocator","jquery","extant/extant","ensureArray/ensureArray"],function(a,b,c){function d(a){function b(a){var b=parseInt(a.substring(0,4)),c=parseInt(a.substring(4,6))-1,d=parseInt(a.substring(6,8));return(new Date).setFullYear(b,c,d)}var c,j,k,l,m,n=e.ensureVO(this,d),o=a,p=[],q=!1;c=void 0!==typeof o.partner_display_config?g.extend(!0,o.display_config,o.partner_display_config):o.display_config,j=c.GamedayDisplay,l=o.gd_config.gdconfig.skin,m=o.skin_config.skin_config.skins.skin,h(j.jingleMappings)&&(p=i(j.jingleMappings.jingle)),g.extend(n,{scenes:[],gdConfigObjectArray:l,skinConfigObjectArray:m,skin:null,getMugshotUrl:function(a,b){var c=j.assets.mugshots.replace(/\$\{id\}/g,a).replace(/\$\{sportcode\}/g,f.getCurrentGame().gid.home_sport_code);return b===!0&&(c=c.substr(0,c.lastIndexOf("."))+"@2x"+c.substr(c.lastIndexOf("."))),c},getJingleMapping:function(a){var c,d,e,f,g=a,i=new Date;for(d in p)c=p[d],c.event===a&&(h(c.start_yyyymmdd)&&h(c.end_yyyymmdd)?8!==c.start_yyyymmdd.length||8!==c.end_yyyymmdd.length||isNaN(c.start_yyyymmdd)||isNaN(c.end_yyyymmdd)||(e=b(c.start_yyyymmdd),f=b(c.end_yyyymmdd),i>e&&f>i&&(g=c.fileprefix)):g=c.fileprefix);return g},areHighlightsEnabled:function(){return k},areShareablePlaysEnabled:function(){return q},getStadiumFileName:function(a){var b,c;for(b=0;b<j.graphics.team.length;b++)if(c=j.graphics.team[b],c.venue_id===a&&"Y"===c.hasVenue)return a;return j.graphics.default_venue},getBatterFileTeamID:function(a){var b,c;for(b=0;b<j.graphics.team.length;b++)if(c=j.graphics.team[b],c.team_id===a&&"Y"===c.hasBatter)return a;return j.graphics.default_batter},getAuditude:function(){return h(j,"auditude")?j.auditude:!1},getMidInningGamesXmlUrl:function(){return h(j.mid_inning_game_config_url)?j.mid_inning_game_config_url.content:null}(),midInningGamesEnabled:function(){return h(j.mid_inning_game_config_url)?"true"===j.mid_inning_game_config_url.enabled:!1}(),videoFormat:function(){return"videocore"}(),rawData:j})}var e=a("../ValueObjectFactory"),f=a("../../../GDControl/GameModelLocator/GameModelLocator"),g=a("jquery"),h=a("extant/extant"),i=a("ensureArray/ensureArray");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Scoreboard/Miniscoreboard/GameMiniscoreboardOffense",["require","exports","module","../../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.id=c.id||"",b.team_code=c.team_code||"",b.hr=c.hr||"",b.std_hr=c.std_hr||"",b.inning=c.inning||"",b.runners=c.runners||"",b.number=c.number||"",b.first=c.first||"",b.last=c.last||"",b.name_full=b.first+" "+b.last||"",b.name_display_roster=c.name_display_roster||""}var e=a("../../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Scoreboard/Miniscoreboard/GameMiniscoreboard",["require","exports","module","../../ValueObjectFactory","extant/extant","./GameMiniscoreboardOffense","./GameMiniscoreboardOffense"],function(a,b,c){function d(a){var b=g.ensureVO(this,d),c=a;b.id=c.gameday||"",b.double_header_sw=c.double_header_sw||"",b.home_games_back=c.home_games_back||"",b.away_games_back=c.away_games_back||"",b.away_games_back_wildcard=c.away_games_back_wildcard||"",b.home_games_back_wildcard=c.home_games_back_wildcard||"",b.game_status=c.game_status,b.post_game=e(c.post_game),b.home_runs=f(c.home_runs)}function e(b){var c=b,d=a("./GameMiniscoreboardOffense");return{winning_pitcher:h(c.winning_pitcher)?new d(c.winning_pitcher):null,losing_pitcher:h(c.losing_pitcher)?new d(c.losing_pitcher):null,save_pitcher:h(c.save_pitcher)?new d(c.save_pitcher):null,home_wins:h(c.home_team)?c.home_team.wins||"":"",home_losses:h(c.home_team)?c.home_team.losses||"":"",away_wins:h(c.away_team)?c.away_team.wins||"":"",away_losses:h(c.away_team)?c.away_team.losses||"":""}}function f(b){for(var c=h(b,"player")?[].concat(b.player):[],d=[],e=a("./GameMiniscoreboardOffense"),f=0,g=c.length;g>f;f++)d[f]=new e(c[f]);return d}var g=a("../../ValueObjectFactory"),h=a("extant/extant");return g.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Plays/PlaysFileOffense",["require","exports","module","../ValueObjectFactory","ensureArray/ensureArray"],function(a,b,c){function d(a){for(var b=e.ensureVO(this,d),c=a,g={},h=f(c.man),i=0,j=h.length;j>i;i++)"4"==h[i].bnum?g.b0=h[i]:g["b"+h[i].bnum]=h[i];b.id=c.id||"",b.type=c.type||"",b.home=g.b0||null,b.first=g.b1||null,b.second=g.b2||null,b.third=g.b3||null}var e=a("../ValueObjectFactory"),f=a("ensureArray/ensureArray");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Plays/PlaysFileDefense",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=f.ensureVO(this,d),c=a;c.man;b.id=c.id,b.type=c.type,b.first=e("1b"),b.second=e("2b"),b.third=e("3b"),b.shortstop=e("ss"),b.pitcher=e("p"),b.catcher=e("c"),b.leftfield=e("lf"),b.centerfield=e("cf"),b.rightfield=e("rf")}function e(a){try{for(var b=0,c=fielders.length;c>b;b++)if(fielders[b].pos==a)return fielders[b]}catch(d){return null}}var f=a("../ValueObjectFactory");return f.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Plays/Plays",["require","exports","module","../ValueObjectFactory","extant/extant","../../../GDUtil/dataMapping/GameStateUtil","../../../GDUtil/resources/ImagePath","./AtBat","./PlaysFileOffense","./PlaysFileDefense"],function(b,c,d){function e(a){var c=f.ensureVO(this,e),d=a,i=b("./PlaysFileOffense"),j=b("./PlaysFileDefense"),k=d.control,l=d.field,m=g(l,"offense")?l.offense:{},n=g(l,"defense")?l.defense:{},o=d.score,p=d.players,q=d.lineup,r=[],s=[],t=g(p)?p.pitcher:{},u=g(p)?p.batter:{},v=d.splits,w=d.weather;c.balls=d.b||"",c.strikes=d.s||"",c.outs=d.o||"",c.gamestate=d.status||"",c.status_ind=d.status_ind||"",c.liveState=h.getUsableGameState(d.status_ind),c.abstractGameState=h.getAbstractGamestate(d.status),c.reason=d.reason||"",c.inning=d.inning||"",c.inning_state=d.inning_state||"",c.half_inning="T"===d.top_inning?"top":"bottom",c.isMidInning="3"===d.o,c.event=d.event||"",c.team_batting=m?m.type:"",c.away_runs=o?o.ar:"",c.away_hits=o?o.ah:"",c.away_errors=o?o.ae:"",c.home_runs=o?o.hr:"",c.home_hits=o?o.hh:"",c.home_errors=o?o.he:"",c.game_includes_challenges=g(d.review),c.home_challenges_remain=d.review&&"1"===d.review.challenges_home_remaining,c.away_challenges_remain=d.review&&"1"===d.review.challenges_away_remaining,c.challenging_team=d.challenge_team_abbrev||null,c.challenge_status=d.status_ind||null,c.batter=u,c.pitcher=t,c.ondeck=p&&p.deck?p.deck.pid:"",c.inhole=p&&p.hole?p.hole.pid:"",c.pitcher_splits=v?v.pitcher:"",c.batter_splits=v?v.batter:"",c.mob_splits=v?v.runner:"",c.temp=w?w.temp:"",c.wind=w?w.wind:"",c.condition=w?w.condition:"",c.wait=k?k.wait:"",c.box=k?k.box:"",c.offense=g(m)?new i(m):null,c.defense=g(n)?new j(n):null,c.home_lineup=this.parseLineup("home",q,s),c.away_lineup=this.parseLineup("away",q,r),c.atbat=this.parseAtbat(d,u,t),c.ball=g(d,"field.ball.type")?d.field.ball:null,c.awayBattingOrder=r,c.homeBattingOrder=s}var f=b("../ValueObjectFactory"),g=b("extant/extant"),h=b("../../../GDUtil/dataMapping/GameStateUtil");b("../../../GDUtil/resources/ImagePath");return f.create(e,{parseAtbat:function(a,c,d){var e=a.atbat,f=a.action,h=b("./AtBat");this.offense.type;if(!g(e)&&!g(e))return null;if("object"!=typeof e)return new h(f,a.inning);if(g(d)&&g(c)){e.p_throws=d.p_throws,e.b_height=c.b_height;var i=new h(e,a.inning);return i.batter=c.pid,i.batterUniform=c.parent_team_abbrev||c.team_abbrev,i.pitcher=d.pid,i.stand=c.stand||e.stand,i.b=a.b,i.s=a.s,i.o=a.o,i.inning=a.inning,i}return null},parseLineup:function(a,b,c){var d,e,f=b.team[0].type==a?b.team[0]:b.team[1],g=f.man.splice(0,9),h=c;for(d=0,e=g.length;e>d;d++)g[d]=g[d].pid;var i=parseInt(f.index);for(d=0,e=g.length;e>d;d++)i===e&&(i=0),h.push(g[i]),i++;return g.push(f.pitcher),g},findPlayer:function(a){g(this.playerArray)?$playerArray=[].concat($playerArray):this.playerArray=[].concat(this.defense.man,this.offense.man||[]);try{for(var b=0,c=$playerArray.length;c>b;b++)if($playerArray[b].pid==a)return $playerArray[b]}catch(d){}return null},getLiveBatterAbs:function(){var b=[];try{for(var c=players.batter.ab,d=0,e=c.length;e>d;d++)g(c[d].inning)&&g(c[d].event)&&a.push({inning:c[d].inning,event:c[d].event})}catch(f){logg("Error retrieving atbat for live batter")}return b},findFieldPlayer:function(a,b){return g(b,"man")?this.findPlayer(a):null},findBaseRunner:function(a){return g(this.offense,"man")?this.findPlayer(a):null}}),e}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Boxscore/BoxPlayer",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.id=c.id||"",b.name=c.name||"",b.name_display_first_last=c.name_display_first_last||"",b.pos=c.pos||"",b.b_or_p="P"===c.pos?"p":"b",b.bo=c.bo||"",b.ab=c.ab||"",b.po=c.po||"",b.r=c.r||"",b.a=c.a||"",b.bb=c.bb||"",b.sac=c.sac||"",b.t=c.t||"",b.sf=c.sf||"",b.h=c.h||"",b.e=c.e||"",b.d=c.d||"",b.hbp=c.hbp||"",b.so=c.so||"",b.hr=c.hr||"",b.rbi=c.rbi||"",b.lob=c.lob||"",b.fldg=c.fldg||"",b.sb=c.sb||"",b.cs=c.cs||"",b.s_hr=c.s_hr||"",b.s_rbi=c.s_rbi||"",b.s_h=c.s_h||"",b.s_bb=c.s_bb||"",b.s_r=c.s_r||"",b.s_so=c.s_so||"",b.avg=c.avg||"",b.go=c.go||"",b.ao=c.ao,b.out=c.out||"",b.bf=c.bf||"",b.er=c.er||"",b.np=c.np||"",b.s=c.s||"",b.w=c.w||"",b.l=c.l||"",b.sv=c.sv||"",b.bs=c.bs||"",b.hld=c.hld||"",b.s_ip=c.s_ip||"",b.s_er=c.s_er||"",b.era=c.era,b.note=c.note,b.isSubstitute=c.bo&&"00"!==c.bo.substring(1)}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Boxscore/BoxTeam",["require","exports","module","../ValueObjectFactory","ensureArray/ensureArray","./BoxPlayer"],function(a,b,c){function d(a,b){var c,h,i,j,k,l,m=f.ensureVO(this,d),n=a,o=b,p=[],q=[],r=[],s=[];for(l=0;2>l;l++)n.batting&&n.batting[l].team_flag===o&&(s=n.batting[l],r=g(n.batting[l].batter).map(e),c=n.batting[l].note,h=n.batting[l].text_data);for(l=0;2>l;l++)n.pitching&&n.pitching[l].team_flag===o&&(q=n.pitching[l],p=g(n.pitching[l].pitcher).map(e));for(l=0;l<p.length;l++){var t=parseFloat(p[l].out),u=(t/3).toString(),v=u.split(".");if(p[l].ip=v[0]+"."+t%3,"string"==typeof p[l].note){var w=p[l].note;-1!==w.indexOf("W")?i=p[l]:"S"===w.charAt(1)?k=p[l]:-1!==w.indexOf("L")&&(j=p[l])}}m.batters=r||"",m.batterTotals=s||"",m.pitchers=p||"",m.pitcherTotals=q||"",m.win=i||"",m.loss=j||"",m.save=k||"",m.info=c||"",m.text_data=h||"",m.homeAway=o||"",m.id=n[b+"_id"]||""}function e(b){var c=a("./BoxPlayer");return new c(b)}var f=a("../ValueObjectFactory"),g=a("ensureArray/ensureArray");return f.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Linescore/LinescoreItem",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a,b){var c=e.ensureVO(this,d),f=a||{};c.inning=f.inning||b||"",c.home=f.home_inning_runs||f.home||"",c.away=f.away_inning_runs||f.away||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Linescore/LinescoreInnings",["require","exports","module","../ValueObjectFactory","./LinescoreItem"],function(a,b,c){function d(b){for(var c,f=e.ensureVO(this,d),g=a("./LinescoreItem"),h=[],i=[].concat(b.linescore||b.inning_line_score),j=i.length,k=Math.max(9,j),l=0;k>l;l++)c=i[l],h.push(new g(c,l+1));c=h[j-1],""===c.away?c.away_active=!0:c.home_active=""===c.home,f.inning=j-1,f.innings=h}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Boxscore/Boxscore",["require","exports","module","../ValueObjectFactory","./BoxPlayer","./BoxTeam","../Linescore/LinescoreInnings"],function(a,b,c){function d(b){var c=e.ensureVO(this,d),f=b,g=a("./BoxTeam"),h=a("../Linescore/LinescoreInnings"),i=new g(f,"home"),j=new g(f,"away"),k=f.linescore||{},l=new h(k);k.inning_line_score=l.innings,k.home=i,k.away=j,c.gameID=f.game_id||"",c.date=f.date||"",c.gamePK=f.game_pk||"",c.home_sport_code=f.home_sport_code||"mlb",c.venueName=f.venue_name||"",c.home=i,c.home_team_code=f.home_team_code||"",c.home_id=f.home_id||"",c.home_full_name=f.home_fname||"",c.home_sname=f.home_sname||"",c.linescore=k,c.home_hits=k.home_team_hits||"",c.home_runs=k.home_team_runs||"",c.home_errors=k.home_team_errors||"",c.home_wins=f.home_wins||"",c.home_loss=f.home_loss||"",c.away=j,c.away_team_code=f.away_team_code||"",c.away_id=f.away_id||"",c.away_full_name=f.away_fname||"",c.away_sname=f.away_sname||"",c.away_hits=k.away_team_hits||"",c.away_runs=k.away_team_runs||"",c.away_errors=k.away_team_errors||"",c.away_wins=f.away_wins||"",c.away_loss=f.away_loss||"",c.game_info=f.game_info||"",c.innings=l.innings,c.current_inning=l.inning}var e=a("../ValueObjectFactory"),f=a("./BoxPlayer");return e.create(d,{findPlayer:function(a,b){var c="b"==b?[].concat(this.away.batters,this.home.batters):[].concat(this.away.pitchers,this.home.pitchers),d=0,e=c.length;for(d;e>d;d++)if(c[d].id==a)return new f(c[d]);return{}}}),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Players/Lineup",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a,f={};c.forEach(function(a){var b=a.game_pk;delete a.game_pk,f[b]?f[b].push(a):f[b]=[a]}),b.lineupByGamePK=f}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Linescore/LinescorePitcher",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.winning_pitcher=c.winning_pitcher||"",b.first_name=c.first_name||"",b.first=c.first||"",b.id=c.id||"",b.last_name=c.last_name||"",b.last=c.last||"",b.name_display_roster=c.name_display_roster||"",b.wins=c.wins||"",b.losses=c.losses||"",b.era=c.era||"",b.saves=c.saves||"",b.s_wins=c.s_wins||"",b.s_losses=c.s_losses||"",b.s_era=c.s_era||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Linescore/LinescoreMedia",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.type=c.type||"",b.calendar_event_id=c.calendar_event_id||"",b.start=c.start||"",b.title=c.title||"",b.has_mlbtv=c.has_mlbtv||"",b.free=c.free||"",b.media_state=c.media_state||"",b.thumbnail=c.thumbnail||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Linescore/Linescore",["require","exports","module","../ValueObjectFactory","../../../GDUtil/dataMapping/GameStateUtil","./LinescoreInnings","./LinescorePitcher","./LinescoreMedia","extant/extant"],function(a,b,c){function d(b){var c=e.ensureVO(this,d),g=b,h=a("./LinescoreInnings"),i=a("./LinescorePitcher"),j=a("./LinescoreMedia"),k=a("extant/extant"),l=g.id.split("/").join("_").split("-").join("_"),m=new h(g);c.id=l||"",c.venue=g.venue||"",c.game_pk=g.game_pk||"",c.time=g.time||"",c.time_date=g.time_date||"",c.resume_date=g.resume_date||"",c.time_date_aw_lg=g.time_date_aw_lg||"",c.time_date_hm_lg=g.time_date_hm_lg||"",c.time_zone=g.time_zone||"",c.ampm=g.ampm||"",c.first_pitch_et=g.first_pitch_et||"",c.away_time=g.away_time||"",c.away_time_zone=g.away_time_zone||"",c.away_ampm=g.away_ampm||"",c.home_time=g.home_time||"",c.home_time_zone=g.home_time_zone||"",c.home_ampm=g.home_ampm||"",c.game_type=g.game_type||"",c.tiebreaker_sw=g.tiebreaker_sw||"",c.original_date=g.original_date||"",c.time_zone_aw_lg=g.time_zone_aw_lg||"",c.time_zone_hm_lg=g.time_zone_hm_lg||"",c.time_aw_lg=g.time_aw_lg||"",c.aw_lg_ampm=g.aw_lg_ampm||"",c.tz_aw_lg_gen=g.tz_aw_lg_gen||"",c.time_hm_lg=g.time_hm_lg||"",c.hm_lg_ampm=g.hm_lg_ampm||"",c.tz_hm_lg_gen=g.tz_hm_lg_gen||"",c.venue_id=g.venue_id||"",c.scheduled_innings=g.scheduled_innings||"",c.away_name_abbrev=g.away_name_abbrev||"",c.home_name_abbrev=g.home_name_abbrev||"",c.away_code=g.away_code||"",c.away_file_code=g.away_file_code||"",c.away_team_id=g.away_team_id||"",c.away_team_city=g.away_team_city||"",c.away_team_name=g.away_team_name||"",c.away_division=g.away_division||"",c.away_league_id=g.away_league_id||"",c.away_sport_code=g.away_sport_code||"",c.home_code=g.home_code||"",c.home_file_code=g.home_file_code||"",c.home_team_id=g.home_team_id||"",c.home_team_city=g.home_team_city||"",c.home_team_name=g.home_team_name||"",c.home_division=g.home_division||"",c.home_league_id=g.home_league_id||"",c.home_sport_code=g.home_sport_code||"",c.day=g.day||"",c.gameday_sw=g.gameday_sw||"",c.double_header_sw=g.double_header_sw||"",c.away_games_back=g.away_games_back||"",c.home_games_back=g.home_games_back||"",c.home_games_back_wildcard=g.home_games_back_wildcard||"",c.venue_w_chan_loc=g.venue_w_chan_loc||"",c.gameday_link=g.gameday_link||"",c.away_win=g.away_win||"",c.away_loss=g.away_loss||"",c.home_win=g.home_win||"",c.home_loss=g.home_loss||"",c.game_data_directory=g.game_data_directory||"",c.league=g.league||"",c.top_inning=g.top_inning||"",c.inning_state=g.inning_state||"",c.ind=g.ind||"",c.status_ind=g.ind||"",c.status=g.status||"",c.gamestate=g.status||"",c.liveState=f.getUsableGameState(g.ind),c.abstractGameState=f.getAbstractGamestate(g.status),c.inning=g.inning||m.inning||"",c.balls=g.balls||"",c.strikes=g.strikes||"",c.outs=g.outs||"",c.away_team_runs=g.away_team_runs||"",c.home_team_runs=g.home_team_runs||"",c.away_team_hits=g.away_team_hits||"",c.home_team_hits=g.home_team_hits||"",c.away_team_errors=g.away_team_errors||"",c.home_team_errors=g.home_team_errors||"",c.wrapup_link=g.wrapup_link||"",c.home_preview_link=g.home_preview_link||"",c.away_preview_link=g.away_preview_link||"",c.preview=g.preview||"",c.tv_station=g.tv_station||"",c.home_recap_link=g.home_recap_link||"",c.away_recap_link=g.away_recap_link||"",c.photos_link=g.photos_link||"",c.linescore=m.innings,c.losing_pitcher=k(g.losing_pitcher)?new i(g.losing_pitcher):null,c.winning_pitcher=k(g.winning_pitcher)?new i(g.winning_pitcher):null,c.save_pitcher=k(g.save_pitcher)?new i(g.save_pitcher):null,c.game_media=new j(g.game_media.game||{})}var e=a("../ValueObjectFactory"),f=a("../../../GDUtil/dataMapping/GameStateUtil");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Bench/BenchBatter",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a,b){var c=e.ensureVO(this,d),f=a;c.id=f.id||"",c.last=f.last||"",c.team=b,c.b=f.b||"",c.pos=f.pos||"",c.avg=f.avg||"",c.g=f.g||"",c.ab=f.ab||"",c.r=f.r||"",c.h=f.h||"",c.hr=f.hr||"",c.rbi=f.rbi||"",c.sb=f.sb||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Bench/BenchPitcher",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a,b){var c=e.ensureVO(this,d),f=a;c.id=f.id||"",c.last=f.last||"",c.team=b,c.t=f.t||"",c.w=f.w||"",c.l=f.l||"",c.era=f.era||"",c.g=f.g||"",c.sv=f.sv||"",c.ip=f.ip||"",c.h=f.h||"",c.bb=f.bb||"",c.so=f.so||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Bench/BenchFile",["require","exports","module","../ValueObjectFactory","extant/extant","./BenchBatter","./BenchPitcher"],function(a,b,c){function d(a){var b=g.ensureVO(this,d),c=a,i={team:h(c.away.tid)?c.away.tid:"",batters:h(c,"away.batters.batter")?e(c.away.batters.batter,c.away.tid):[],pitchers:h(c,"away.pitchers.pitcher")?f(c.away.pitchers.pitcher,c.away.tid):[]},j={team:h(c.home.tid)?c.home.tid:"",batters:h(c,"home.batters.batter")?e(c.home.batters.batter,c.home.tid):[],pitchers:h(c,"home.pitchers.pitcher")?f(c.home.pitchers.pitcher,c.home.tid):[]};b.away=i,b.home=j,b.away_batters=i.batters,b.away_pitchers=i.pitchers,b.home_batters=j.batters,b.home_pitchers=j.pitchers}function e(b,c){for(var d=[],e=a("./BenchBatter"),f=0,g=b.length;g>f;f++)d[f]=new e(b[f],c);return d}function f(b,c){for(var d=[],e=a("./BenchPitcher"),f=0,g=b.length;g>f;f++)d[f]=new e(b[f],c);return d}var g=a("../ValueObjectFactory"),h=a("extant/extant");return g.create(d,{getPlayerByID:function(a,b){var c=[],d=h(b)?b.toLowerCase():"n/a";c="b"===d.toLowerCase()?c.concat(away.batters,home.batters):"p"===d?c.concat(away.pitchers,home.pitchers):c.concat(away.batters,away.pitchers,home.batters,home.pitchers);for(var e=0,f=c.length;f>e;e++)if(c[e].id===a.toString())return c[e];return null}}),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Plays/ScoringPlays",["require","exports","module","../ValueObjectFactory","./AtBat","../../../GDUtil/dataMapping/NumberWithOrdinal"],function(a,b,c){function d(a){var b=h.ensureVO(this,d),c=a,e=c.score,g=f(Array.isArray(e)?e:[e]);b.innings=g.filter(Boolean),b.away_team=c.away_team,b.home_team=c.home_team}function e(a){return{atbats:[],has_atbats:!1,top_or_bottom:k[a],home_or_away:l[a]}}function f(a){var b,c,d=0,f=a.length,h=[];for(d;f>d;d++)a[d]&&(b=~~a[d].inn,c=a[d].top_inning,h[b]||(h[b]={num:b,numWithOrdinal:j(b),top:e("Y"),bottom:e("N")},h[b].halves=[h[b].top,h[b].bottom]),h[b][k[c]].hasAtBats=!0,h[b][k[c]].atbats.push(g(a[d])));return h}function g(a){var b,c,d=0,e={};if(e.top_or_bottom=k[a.top_inning],e.home_or_away=l[a.top_inning],e.homeScore=a.home,e.awayScore=a.away,a.action)for(c=[].concat(a.action),b=c.length,d=0;b>d;d++)"T"===c[d].score&&(e.des=c[d].des,e.event=c[d].event,e.player=c[d].player,e.pitcher=c[d].pitcher);if(a.atbat)for(c=[].concat(a.atbat),b=c.length,d=0;b>d;d++)"T"===c[d].score&&(e.atBat=new i(c[d],a.inn),e.num=e.atBat.num,e.des&&e.event||(e.des=e.message||c[d].des,e.event=e.event||c[d].event,e.player=e.player||c[d].batter,e.pitcher=e.pitcher||c[d].pitcher));return e.des=e.des||a.pbp,e}var h=a("../ValueObjectFactory"),i=a("./AtBat"),j=a("../../../GDUtil/dataMapping/NumberWithOrdinal"),k={N:"bottom",Y:"top"},l={N:"home",Y:"away"};return h.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Players/PlayerFileItem",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a,b){var c=e.ensureVO(this,d),f=a;c.id=f.id||"",c.first=f.first||"",c.last=f.last||"",c.num=f.num||"",c.boxname=f.boxname||"",c.rl=f.rl||"",c.position=f.position||"",c.status=f.status||"",c.avg=f.avg||"",c.hr=f.hr||"",c.rbi=f.rbi||"",c.wins=f.wins||"",c.losses=f.losses||"",c.era=f.era||"",c.parent_team_id=f.parent_team_id||"",c.parent_team_abbrev=f.parent_team_abbrev||"",c.isHome="home"===b,c.isAway="away"===b}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Players/PlayersFile",["require","exports","module","../ValueObjectFactory","extant/extant","./PlayerFileItem"],function(a,b,c){function d(a){var b=g.ensureVO(this,d),c=a;b.homePlayerIDsHash={},b.awayPlayerIDsHash={},b.playerMap={},b.playerIDsArray=[],b.away=e(c,"away"),b.home=e(c,"home"),b.getAllPlayerIds=function(){return this.playerIDsArray},b.findPlayer=function(a){return this.playerMap[a]||null},b.findPlayerParentTeamID=function(a){return h(this.playerMap[a])?this.playerMap[a].parent_team_id:null},f(b)}function e(a,b){for(var c=0,d=a.team.length;d>c;c++)if(a.team[c].type===b)return[].concat(a.team[c].player);return[]}function f(a){var b,c,d,e={};for(c=0,d=a.home.length;d>c;c++)b=new i(a.home[c],"home"),e[b.id]=b,a.homePlayerIDsHash[b.id]=b,a.playerIDsArray.push(b.id);for(c=0,d=a.away.length;d>c;c++)b=new i(a.away[c],"away"),e[b.id]=b,a.awayPlayerIDsHash[b.id]=b,a.playerIDsArray.push(b.id);a.playerMap=e}var g=a("../ValueObjectFactory"),h=a("extant/extant"),i=a("./PlayerFileItem");return g.create(d,{}),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Players/PlayerCardSplits",["require","exports","module","../ValueObjectFactory","extant/extant"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.name=c._nodeName||"",b.label=f(c._nodeName)?c._nodeName.split("_").join(" "):"",b.ab=c.ab||"",b.avg=c.avg||"",b.hr=c.hr||"",b.rbi=c.rbi||"",b.ops=c.ops||"",b.bb=c.bb||"",b.so=c.so||"",b.des=c.des||"",b.loves=c.loves||"",b.hates=c.hates||"",b.out=c.out||"",b.w=c.w||"",b.l=c.l||"",b.sv=c.sv||"",b.h=c.h||"",b.ip=c.ip||"",b.whip=c.whip||"",b.era=c.era||"",b.sb=c.sb||"",b.cs=c.cs||""}var e=a("../ValueObjectFactory"),f=a("extant/extant");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Players/PlayerCard",["require","exports","module","message-service/message-service","extant/extant","../ValueObjectFactory","./PlayerCardSplits","ensureArray/ensureArray"],function(a,b,c){function d(a){var b=j.ensureVO(this,d),c=a,i=h.getCurrentGame(),k=(i.getPlayerSnapshot(c.id,c.type.substr(0,1)),e(c.type)),l=[],m=[],n={},o=[],p={};b.team=c.team||"",b.id=c.id||"",b.pid=c.id||"",b.pos=c.pos||"",b.type=c.type||"",b.b_or_p=c.type||"",b.first_name=c.first_name||"",b.last_name=c.last_name||"",b.full_name=(c.first_name||"")+" "+(c.last_name||""),b.jersey_number=c.jersey_number||"",b.height=c.height||"",b.weight=c.weight||"",b.bats=g(),b.throwsWith=f(),b.dob=c.dob||"",b.loves=p.loves||"",b.hates=p.hates||"",b.boxpos=k,b.splits=m,b.splitsHash=n,b.faced=o,b.atbats=l,b.getSplits=function(a){return n[a.toLowerCase()]}}function e(a){if("batter"===a)if(i(playerSnap.pos))if(-1!=playerSnap.pos.indexOf("-")){var b=playerSnap.pos.split("-");boxpos=b[b.length-1]}else boxpos=playerSnap.pos;else boxpos=data.pos;else boxpos="P"}function f(){var a=data["throws"]||void 0;return i(a)?"R"===a?"Right":"L"===a?"Left":"Switch":""}function g(){var a=data.bats||void 0;return i(a)?"R"===a?"Right":"L"===a?"Left":"Switch":""}var h=a("message-service/message-service"),i=a("extant/extant"),j=a("../ValueObjectFactory");a("./PlayerCardSplits"),a("ensureArray/ensureArray");return j.create(d),d}),define("responsive-gameday-core/src/js/GDModel/enums/baseball/HotColdZoneColors",{hot:"rgba(189, 104, 99, .55)",warm:"rgba(208, 144, 139, .55)",cool:"rgba(151, 172, 193, .55)",cold:"rgba(41, 91, 140, .55)","default":"rgba(255, 255, 255, 0.55)"}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/HotColdZone/HotColdZone",["require","exports","module","../ValueObjectFactory","../../enums/baseball/HotColdZoneColors"],function(a,b,c){function d(a,b){var c=g.ensureVO(this,d),h=a;c.num=h.num||"",c.ab=h.ab||"",c.avg=h.avg||"",c.hr=h.hr||"",c.rbi=h.rbi||"",c.bb=h.bb||"",c.so=h.so||"",c.ops=h.ops||"",c.rating=h.rating||"",c.sweetness=h.sweetness||"",c.temperature=f(h.sweetness,b),c.color=e(c.temperature)}function e(a){var b=(a||"default").toLowerCase();return h[b]||h["default"]}function f(a,b){var c;return c=a>=1.15?b?"Cold":"Hot":a>=1.05?b?"Cool":"Warm":a>=.95?"Neutral":a>=.85?b?"Warm":"Cool":.85>a?b?"Hot":"Cold":"No Data"}var g=a("../ValueObjectFactory"),h=a("../../enums/baseball/HotColdZoneColors");return g.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/HotColdZone/HotColdSitFile",["require","exports","module","../ValueObjectFactory","./HotColdZone"],function(a,b,c){function d(a,b){var c=f.ensureVO(this,d),g=a,h=e(g,b);c.num=g.num||"",c.ab=g.ab||"",c.avg=g.avg||"",c.hr=g.hr||"",c.rbi=g.rbi||"",c.bb=g.bb||"",c.so=g.so||"",c.ops=g.ops||"",c.rating=g.rating||"",c.sweetness=g.sweetness||"",c.zones=h}function e(a,b){for(var c=[],d=0,e=a.zone.length;e>d;d++)c.push(new g(a.zone[d]),b);return c}var f=a("../ValueObjectFactory"),g=a("./HotColdZone");return f.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/HotColdZone/HotColdZones",["require","exports","module","../ValueObjectFactory","./HotColdSitFile"],function(a,b,c){function d(a,b){var c=e.ensureVO(this,d),g=a;paramObj=b,c.sitModel=new f(g.sit,"p"===paramObj.playerType),c.sitID=paramObj.sit||"",c.playerID=paramObj.id||"",c.playerType=paramObj.playertype||"",c.num=g.num||"",c.ab=g.ab||"",c.avg=g.avg||"",c.hr=g.hr||"",c.rbi=g.rbi||"",c.bb=g.bb||"",c.so=g.so||"",c.ops=g.ops||""}var e=a("../ValueObjectFactory"),f=a("./HotColdSitFile");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Hits/Hit",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.des=c.des,b.x=c.x,b.y=c.y,b.batter=c.batter,b.pitcher=c.pitcher,b.type=c.type,b.team=c.team,b.inning=c.inning}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Hits/HitsFile",["require","exports","module","../ValueObjectFactory","extant/extant","ensureArray/ensureArray","./Hit"],function(a,b,c){function d(a){var b=f.ensureVO(this,d),c=a;b.hits=e(c)}function e(b){var c=[],d=[],e=[],f=[],i=a("./Hit");
if(g(b.hip)){for(var j=h(b.hip),k=0,l=j.length;l>k;k++)"A"===j[k].team?"O"===j[k].type?d.push(new i(j[k])):"H"===j[k].type&&c.push(new i(j[k])):"H"===j[k].team&&("O"===j[k].type?f.push(new i(j[k])):"H"===j[k].type&&e.push(new i(j[k])));return{away_hits:c,away_outs:d,home_hits:e,home_outs:f}}}var f=a("../ValueObjectFactory"),g=a("extant/extant"),h=a("ensureArray/ensureArray");return f.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Gamecenter/GamecenterProbable",["require","exports","module","../ValueObjectFactory","extant/extant"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.player_id=c.player_id||"",b.useName=c.useName||"",b.lastName=c.lastName||"",b.rosterDisplayName=c.rosterDisplayName||"",b.number=c.number||"",b.throwinghand=c.throwingHand||"",b.wins=c.wins||"",b.losses=c.losses||"",b.era=c.era||"",b.so=c.so||"",b.std_wins=c.std_wins||"",b.std_losses=c.std_losses||"",b.std_era=c.std_era||"",b.std_so=c.std_so||"",b.report=c.report||"",b.video_id=f(c,"relatedvideo.media")?c.relatedvideo.media.conent_id:"",b.video_title=f(c,"relatedvideo.title")?c.relatedvideo.title:""}var e=a("../ValueObjectFactory"),f=a("extant/extant");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Gamecenter/GamecenterPlaybackScenario",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.speed=c.speed,b.fid=c.fid,b.w_id=c.w_id,b.id=c.id,b.authorization=c.authorization,b.login=c.login,b.type=c.type,b.gid=c.gid,b.pid=c.pid,b.spons=c.spons,b.vid=c.vid,b.c_url=c.c_url,b.mid=c.mid,b.v=c.v,b.state=c.state,b.url=c._text}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Gamecenter/GamecenterVideo",["require","exports","module","../ValueObjectFactory","./GamecenterPlaybackScenario"],function(a,b,c){function d(a){var b=f.ensureVO(this,d),c=a;switch(void 0){case c.media:case c.meta:case c.url:return null}b.title=c.title||"",b.content_id=c.meta.content_id||"",b.link_type=c.meta.linke_type||"",b.topic_id=c.meta.topic_id||"",b.calendar_event_id=c.meta.calendar_event_id||"",b.view_key=c.meta.view_key||"",b.duration=c.meta.duration||"",b.pid=c.media.pid||"",b.type=c.media.type||"",b.free="T"===c.media["true"],b.feed_code=c.media.free_code||"",b.dds_id=c.media.dds_id||"",b.date=c.media.date||"",b.state=c.media.state||"",b.game_id=c.media.game_id||"",b.blackout=c.media.blackout||"local",b.playback_scenarios=e(c)}function e(b){for(var c=[],d=[].concat(b.url),e=a("./GamecenterPlaybackScenario"),f=0,g=d.length;g>f;f++)c.push(new e(d[f]));return c}var f=a("../ValueObjectFactory");return f.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Gamecenter/Gamecenter",["require","exports","module","../ValueObjectFactory","extant/extant","./GamecenterProbable","./GamecenterVideo"],function(a,b,c){function d(a){var b=i.ensureVO(this,d),c=a;b.status=c.status||"",b.id=c.id||"",b.start_time=c.start_time||"",b.ampm=c.ampm||"",b.time_zone=c.time_zone||"",b.type=c.type||"",b.away_score=c.away_score||"",b.home_score=c.home_score||"",b.league=c.league||"",b.series_code=c["series-code"]||"",b.series_game_number=c["series-game-number"]||"",b.game_number=c["game-number"]||"",b.ticketlink=c.ticketlink||"",b.venue_short=c.venue_short||"",b.venue_long=c.venue_long||"",b.hasGallery=j(c,"gallery.exists")&&"0"!=c.gallery.exists,b.away_tv=j(c,"broadcast.away.tv")?c.broadcast.away.tv:null,b.away_radio=j(c,"broadcast.away.radio")?c.broadcast.away.radio:null,b.home_tv=j(c,"broadcast.home.tv")?c.broadcast.home.tv:"",b.home_radio=j(c,"broadcast.home.radio")?c.broadcast.home.radio:null,b.away_probables=e(c,"away"),b.home_probables=e(c,"home"),b.hasProbables=j(this.away_probables)&&j(this.home_probables),b.away_articles={preview:f(c,"away","previews"),recap:f(c,"away","recaps"),wrap:f(c,"away","wrap")},b.home_articles={preview:f(c,"home","previews"),recap:f(c,"home","recaps"),wrap:f(c,"home","wrap")},b.league_articles={preview:f(c,"mlb","previews"),recap:f(c,"mlb","recaps"),wrap:f(c,"mlb","wrap")},b.photos=g(c),b.condensed_video=h(c,"condensed_video"),b.ipad_video=h(c,"ipad_video")}function e(b,c){var d=null,e="probables."+c,f=a("./GamecenterProbable");return j(b,e)&&(d=new f(b.probables[c])),d}function f(a,b,c){var d=null;if(j(a,c+"."+b)){var e=a[c][b];d={},d.headline=e.headline||"",d.blurb=e.blurb||"",d.url=e.url||"",d.hasVideo=j(e.video_index),j(e.video_index)&&(d.video_index={},d.video_index.content_id=e.video_index.content_id||"",d.video_index.link_type=e.video_index.link_type||"",d.video_index.calendar_event_id=e.video_index.calendar_event_id||"",d.video_index.headline=e.video_index.headline||"",d.video_index.blurb=e.video_index.blurb||"",d.video_index.thumb=e.video_index.thumb||"")}return d}function g(a){var b=null;return j(a.photos,"ipad")&&(b={},b.url=a.photos.ipad.url||"",b.url_retina=a.photos.ipad.url_retina||"",b.ps_url=a.photos.ipad.url_ps||"",b.ps_url_retina=a.photos.ipad.url_ps_retina||"",b.headline=a.photos.ipad.headline||"",b.caption=a.photos.ipad.caption||"",b.credit=a.photos.ipad.credit||""),b}function h(b,c){var d=null,e=a("./GamecenterVideo");return j(b[c])&&(d=new e(b[c])),d}var i=a("../ValueObjectFactory"),j=a("extant/extant");return i.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/RealTimeHighlights/RealTimeHighlightKeyword",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.type=c.type||"",b.value=c.value||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/RealTimeHighlights/RealTimeHighlightsUrl",["require","exports","module","../ValueObjectFactory"],function(a,b,c){function d(a){var b=e.ensureVO(this,d),c=a;b.playback_scenario=c["playback-scenario"]||c.playback_scenario||"",b.id=c.id||"",b.authorization=c.authorization||null,b.login=c.login||null,b.mid=c.mid||null,b.cat_code=c.cat_code||"",b.state=c.state||"",b.url=c._text||""}var e=a("../ValueObjectFactory");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/RealTimeHighlights/Highlight",["require","exports","module","../ValueObjectFactory","extant/extant","../../../GDUtil/resources/GDConfig","./RealTimeHighlightKeyword","../Resources/SmpteTimecode","./RealTimeHighlightsUrl","./RealTimeHighlightKeyword"],function(a,b,c){function d(a){var b=l.ensureVO(this,d),c=a,m=e(c),o="",p="",q=f(c),r=g(c),s=h(c),t=k(r,n.supportedVideo);b.id=c.id||"",b.sv_id=o,b.keywords=m,b.timecode=p,b.dateUTC=q,b.media_type=c["media-type"]||"",b.headline=c.headline||"",b.kicker=c.kicker||"",b.headline=c.headline||"",b.blurb=c.blurb||"",b.duration=c.duration||"",b.thumb=c.thumb._text||"",b.thumbnails=s,b.condensed="true"===c.condensed,b.urls=r,b.defaultURL=t,b.getURLfromScenario=j,b.getThumbByType=i,b.defaultThumb=i(s,"7"),b.review="M"===c["media-type"]||"N"===c["media-type"]}function e(b){for(var c,d=[],e=[].concat(b.keywords.keyword||[]),f=a("./RealTimeHighlightKeyword"),g=0,h=e.length;h>g;g++)switch(c=new f(e[g]),d.push(c),c.type){case"sv_id":sv_id=c.value;break;case"timecode_in":timecode=new o(c.value)}return d}function f(a){var b=a.date,c=b.split("T"),d=c[0].split("-"),e=c[1].substr(0,8).split(":"),f=new Date(d[0],d[1],d[2],e[0],e[1],e[2]);return f.getTime()}function g(a){for(var b=[],c=[].concat(a.url),d=0,e=c.length;e>d;d++)b.push(new p(c[d]));return b}function h(a){for(var b=[],c=m(a,"thumbnails.thumb")?a.thumbnails.thumb:[],d=0,e=c.length;e>d;d++)b.push({type:c[d].type,url:c[d]._text});return b}function i(a,b){for(var c=0;c<a.length;c++)if(a[c].type.toString()===b.toString())return a[c]}function j(a,b){for(var c=0,d=a.l;d>c;c++)if(a[c].playback_scenario==b)return a[c];return null}function k(a,b){for(var c=0,d=b.length;d>c;c++){var e=j(a,b[c]);if(m(e))return e}return null}var l=a("../ValueObjectFactory"),m=a("extant/extant"),n=a("../../../GDUtil/resources/GDConfig"),o=(a("./RealTimeHighlightKeyword"),a("../Resources/SmpteTimecode")),p=a("./RealTimeHighlightsUrl");return l.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/RealTimeHighlights/Highlights",["require","exports","module","../ValueObjectFactory","./Highlight"],function(a,b,c){function d(a){var b=f.ensureVO(this,d),c=a,g=[],h={};videosSVIDHash=e(c,h,g)||{},b.videosBySVID=videosSVIDHash,b.videosByCID=h,b.videosArray=g,b.hasVideos=g.length>0}function e(a,b,c){for(var d=[].concat(a.media),e={},f=0,h=d.length;h>f;f++){var i=new g(d[f]);i.condensed||(b["cid_"+i.id]=i,e["rth_"+(i.sv_id||i.id)]=i,c.push(i))}return e}var f=a("../ValueObjectFactory"),g=a("./Highlight");return f.create(d),d}),define("responsive-gameday-core/src/js/GDModel/ValueObjects/Resources/MidInningGame",["require","exports","module","../ValueObjectFactory","../../../GDUtil/window/Logg"],function(a,b,c){function d(a){for(var b,c,g=e.ensureVO(this,d),h=a,i=[].concat(h.slot),j=GDC.getGameData("play").play,k="top"===j.half_inning?"Y":"N",l=j.inning,m=0,n=i.length;n>m;m++)b=i[m],b.inning==l&&"Y"===b.active.toUpperCase()&&b.top_inning===k&&(f.log("slot.game :: "+b.game.type),c=b);c=null,g.slot=c}var e=a("../ValueObjectFactory"),f=a("../../../GDUtil/window/Logg");return e.create(d),d}),define("responsive-gameday-core/src/js/GDModel/transform/DataTransformers",["require","exports","module","jquery","../storage/ResponseCache","data-transformers/xml-to-json","data-transformers/json","../ValueObjects/Game/GameFile","../ValueObjects/Resources/StaticResources","../ValueObjects/Scoreboard/Miniscoreboard/GameMiniscoreboard","../ValueObjects/Plays/Plays","../ValueObjects/Boxscore/Boxscore","../ValueObjects/Players/Lineup","../ValueObjects/Linescore/Linescore","../ValueObjects/Bench/BenchFile","../ValueObjects/Scoreboard/Innings","../ValueObjects/Scoreboard/AllInnings","../ValueObjects/Plays/ScoringPlays","../ValueObjects/Players/PlayersFile","../ValueObjects/Players/PlayerCard","../ValueObjects/HotColdZone/HotColdZones","../ValueObjects/Hits/HitsFile","../ValueObjects/Gamecenter/Gamecenter","../ValueObjects/RealTimeHighlights/Highlights","../ValueObjects/Resources/MidInningGame","../../GDUtil/window/Logg"],function(a,b,c){var d=a("jquery"),e=a("../storage/ResponseCache"),f=a("data-transformers/xml-to-json"),g=a("data-transformers/json"),h=a("../ValueObjects/Game/GameFile"),i=a("../ValueObjects/Resources/StaticResources"),j=a("../ValueObjects/Scoreboard/Miniscoreboard/GameMiniscoreboard"),k=a("../ValueObjects/Plays/Plays"),l=a("../ValueObjects/Boxscore/Boxscore"),m=a("../ValueObjects/Players/Lineup"),n=a("../ValueObjects/Linescore/Linescore"),o=a("../ValueObjects/Bench/BenchFile"),p=a("../ValueObjects/Scoreboard/Innings"),q=a("../ValueObjects/Scoreboard/AllInnings"),r=a("../ValueObjects/Plays/ScoringPlays"),s=a("../ValueObjects/Players/PlayersFile"),t=a("../ValueObjects/Players/PlayerCard"),u=a("../ValueObjects/HotColdZone/HotColdZones"),v=a("../ValueObjects/Hits/HitsFile"),w=a("../ValueObjects/Gamecenter/Gamecenter"),x=a("../ValueObjects/RealTimeHighlights/Highlights"),y=a("../ValueObjects/Resources/MidInningGame"),z=a("../../GDUtil/window/Logg");return{GameXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return new h(d.game)},DisplayConfigXMLToModelTransformer:function(a,b,c){try{return{}}catch(d){z.log("ERROR! transforming display config file..."+d)}},GdConfigToModelTransformer:function(a,b,c){try{return{}}catch(d){z.log("ERROR! transforming gameday config file..."+d)}},SkinConfigToModelTransformer:function(a,b,c){try{return{}}catch(d){z.log("ERROR! transforming skin config file..."+d)}},StaticResourcesJSONToModelTransformer:function(a,b,c){var d=g(a,b,c);return new i(d.staticresources)},GameMiniscoreboardXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return e.verifyChangeAndStore(b.dataSourceName,c.responseText),new j(d.game)},PlaysXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return e.verifyChangeAndStore(b.dataSourceName,c.responseText),new k(d.game)},BoxscoreXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return e.verifyChangeAndStore(b.dataSourceName,c.responseText),new l(d.boxscore)},LinesupJSONToModelTransformer:function(a,b,c){var d=g(a);return e.verifyChangeAndStore(b.dataSourceName,c.responseText),new m(d.list)},LinescoreXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return e.verifyChangeAndStore(b.dataSourceName,c.responseText),new n(d.game)},BenchFileXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return e.verifyChangeAndStore(b.dataSourceName,c.responseText),new o(d.bench)},InningXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);new p(d.inning);return new p(d.inning)},AllInningsXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return new q(d.inning)},ScoringPlaysXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return new r(d.scores)},PlayersXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return new s(d.game)},PlayerCardXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return new t(d.Player)},HotColdZoneXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return new u(d.std,c)},HitChartXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return new v(d.hitchart)},JingleJsonValueParser:function(a,b,c){var e=new d.parseJSON(a,b,c);return e},GamecenterXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return new w(d.game,c)},HighlightsXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return e.verifyChangeAndStore(b.dataSourceName,c.responseText),new x(d.highlights)},DateTimeJSONToModelTransformer:function(a,b,c){var e=new d.parseJSON(a,b,c);return new DateTime(e)},MidInningGameXmlToModelTransformer:function(a,b,c){var d=f(a);return new y(d.gamedayGames)},MoundballXMLToModelTransformer:function(a,b,c){var d=f(a,b,c);return d.moundballs.moundball}}}),define("responsive-gameday-core/src/js/GDModel/enums/datasources/StorageKeys",{URL:"StorageKeys.URL",DATASOURCE_NAME:"StorageKeys.DATASOURCE_NAME"}),define("responsive-gameday-core/src/js/GDModel/enums/datasources/DefaultDatasources",["require","exports","module","../../transform/DataTransformers","./StorageKeys"],function(a,b,c){var d=a("../../transform/DataTransformers"),e=a("./StorageKeys");return{players:{namespace:"{gid}",urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/players.xml",transformer:d.PlayersXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/players.xml"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/players.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/players.xml"}},playercard:{namespace:"{gid}",urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/{playertype}s/{id}.xml",transformer:d.PlayerCardXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/{playertype}s/{id}.xml"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/{playertype}s/{id}.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/{playertype}s/{id}.xml"}},hotcoldzone:{namespace:"{gid}",urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/premium/{playertype}s/{id}/{sit}.xml",transformer:d.HotColdZoneXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/premium/{playertype}s/{id}/{sit}.xml"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/premium/{playertype}s/{id}/{sit}.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/premium/{playertype}s/{id}/{sit}.xml"}},game:{storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/game.xml",transformer:d.GameXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/game.xml"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/game.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/game.xml"}},linescore:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/linescore.xml{timecode}",transformer:d.LinescoreXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/linescore.xml{timecode}"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/linescore.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/linescore.xml"}},miniscoreboard:{storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/miniscoreboard.xml",transformer:d.GameMiniscoreboardXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/miniscoreboard.xml"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/miniscoreboard.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/miniscoreboard.xml"}},play:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,maxElements:1,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/plays.xml{timecode}",transform:d.PlaysXMLToModelTransformer,timeout:30,retries:3,expires:5,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/plays.xml"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/plays.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/plays.xml{timecode}"}},boxscore:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/boxscore.xml{timecode}",transformer:d.BoxscoreXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/boxscore.xml{timecode}"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/boxscore.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/boxscore.xml{timecode}"}},lineup:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,namespace:"{yyyy}_{mm}_{dd}",urlTemplate:"/gen/lineups/{yyyy}/{mm}/{dd}.json",transformer:d.LinesupJSONToModelTransformer,timeout:300,retries:1,env_QA:{urlTemplate:"/gen/lineups/{yyyy}/{mm}/{dd}.json"},env_TEST:{urlTemplate:"proxy.php?url=/gen/lineups/{yyyy}/{mm}/{dd}.json"},env_TEST_QA:{urlTemplate:"proxy.php?url=/gen/lineups/{yyyy}/{mm}/{dd}.json"}},bench:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/bench.xml{timecode}",transformer:d.BenchFileXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/bench.xml"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/bench.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/bench.xml{timecode}"}},inning:{canUseTfs:!0,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}",transformer:d.InningXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}"}},all_innings:{canUseTfs:!0,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}",transformer:d.AllInningsXMLToModelTransformer,timeout:120,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}"}},scores:{canUseTfs:!0,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_Scores.xml{timecode}",transformer:d.ScoringPlaysXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_Scores.xml{timecode}"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_Scores.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_Scores.xml{timecode}"}},hitchart:{canUseTfs:!0,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_hit.xml{timecode}",transformer:d.HitChartXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_hit.xml{timecode}"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_hit.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_hit.xml{timecode}"}},gamecenter:{maxElements:1,namespace:"{gid}",urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/gamecenter.xml",transformer:d.GamecenterXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/gamecenter.xml"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/gamecenter.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/gamecenter.xml"}},video:{maxElements:1,namespace:"{gid}",urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/media/mobile.xml",transformer:d.HighlightsXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/media/mobile.xml"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/media/mobile.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/media/mobile.xml"}},displayconfig:{namespace:"app",urlTemplate:"/shared/flash/gameday/v5.2/display_config.xml",expires:300,transformer:d.DisplayConfigXMLToModelTransformer,env_QA:{urlTemplate:"/shared/flash/gameday/v5.2/display_config.xml"},env_TEST:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/shared/flash/gameday/v5.2/display_config.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/shared/flash/gameday/v5.2/display_config.xml"}},jingles:{namespace:"jingles",urlTemplate:"/shared/components/gameday/gdapp/release/shared/json/jingles/{jingle}.swiffy.json",expires:300,transformer:d.JingleJsonValueParser,env_QA:{urlTemplate:"../shared/json/jingles/{jingle}.swiffy.json"},env_TEST:{urlTemplate:"../shared/json/jingles/{jingle}.swiffy.json"},env_TEST_QA:{urlTemplate:"../shared/json/jingles/{jingle}.swiffy.json"}},skin_config:{namespace:"skin_config",urlTemplate:"/gameday/v5/skin_config.xml",expires:300,transformer:d.SkinConfigToModelTransformer,env_QA:{urlTemplate:"/gameday/v5/skin_config.xml"},env_TEST:{urlTemplate:"/gameday/v5/skin_config.xml"},env_TEST_QA:{urlTemplate:"/gameday/v5/skin_config.xml"}},gd_config:{namespace:"gd_config",urlTemplate:"/gameday/v5/gd_config.xml",expires:300,transformer:d.GdConfigToModelTransformer,env_QA:{urlTemplate:"/gameday/v5/gd_config.xml"},env_TEST:{urlTemplate:"/gameday/v5/gd_config.xml"},env_TEST_QA:{urlTemplate:"/gameday/v5/gd_config.xml"}},timecode:{namespace:"timecode",urlTemplate:"/gdcross/components/game/timecode.json",expires:300,transformer:d.DateTimeJSONToModelTransformer,env_QA:{urlTemplate:"/gdcross/components/game/timecode.json"},env_TEST:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/gdcross/components/game/timecode.json"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/gdcross/components/game/timecode.json"}},lookin:{namespace:"livelookin",urlTemplate:"/gen/multimedia/livelookin.json",expires:30,scenarios:"FLASH_1000K_640X360,FLASH_800K_640X360,FLASH_600K_400X224,FLASH_500K_512X288,FLASH_400K_600X338,FLASH_300K_320X180",env_TEST:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/gen/multimedia/livelookin.json"},env_QA:{urlTemplate:"/gen/multimedia/livelookin.json"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/gen/multimedia/livelookin.json"}},moundball:{namespace:"moundball",urlTemplate:"/gen/hb/list/mound-balls.xml",expires:30,transformer:d.MoundballXMLToModelTransformer,env_TEST:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/gen/hb/list/mound-balls.xml"},env_QA:{urlTemplate:"/gen/hb/list/mound-balls.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/gen/hb/list/mound-balls.xml"}},staticresources:{namespace:"staticresources",urlTemplate:"/shared/components/gameday/gdapp/release/shared/staticresources.jsp?partner={partner:mlb}",expires:300,transformer:d.StaticResourcesJSONToModelTransformer,env_QA:{urlTemplate:"/shared/components/gameday/gdapp/release/shared/staticresources.jsp?partner={partner:mlb}"},env_TEST:{urlTemplate:"proxy.php?url=http://mlb.mlb.com/shared/components/gameday/gdapp/release/shared/staticresources.jsp?partner={partner:mlb}"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://qa.mlb.com/shared/components/gameday/gdapp/release/shared/staticresources.jsp?partner={partner:mlb}"}},midInningGames:{namespace:"midInningGames",urlTemplate:"{urlPath}",expires:300,transformer:d.MidInningGameXmlToModelTransformer,env_QA:{urlTemplate:"{url:Path}"},env_TEST:{urlTemplate:"proxy.php?url=http://mlb.mlb.com{urlPath}"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://qa.mlb.com{urlPath}"}}}}),define("responsive-gameday-core/src/js/GDUtil/resources/DataSourceSelector",["require","exports","module","jquery","../../GDModel/enums/datasources/DefaultDatasources"],function(a,b,c){var d=a("jquery"),e=a("../../GDModel/enums/datasources/DefaultDatasources"),f={expires:60,timeout:30,retries:1,priority:2,mimetype:"text/xml",PROD:{gd_flat:"/gdcross",gd_tfs:"/tfs/tfs?file=",tfsTimecodeQuery:"&timecode="},QA:{gd_flat:"/gdcross",gd_tfs:"/tfs/tfs?file=",tfsTimecodeQuery:"&timecode="},TEST:{gd_flat:"http://gdx.mlb.com",gd_tfs:"http://lwsa.mlb.com/tfs/tfs?file=",tfsTimecodeQuery:"%26timecode="},TEST_QA:{gd_flat:"http://gd.qa.mlb.com",gd_tfs:"http://qa.mlb.com/tfs/tfs?file=",tfsTimecodeQuery:"%26timecode="}};b.mashSources=function(a){var b={},c=d.extend(e,a);return d.extend(b,f,c),b}}),define("responsive-gameday-core/src/js/GDModel/enums/events/TrackingEvents",{TRACKING:"Track",SCORING:"Scoring",SUMMARY:"Game Summary",FIELD_VIEW:"Field View",COLOR:"Social",ON_FIELD_LINEUPS:"On-Field Lineups",PITCHER:"Pitcher",BATTER:"Batter",SOCIAL:"Social",BINGO:"Bingo",MOUNDBALL:"Moundball",HIGHLIGHTS:"Real-Time Highlights",LIVE_LOOK_IN:"Live Look-in",USER_PREFERENCES:"User Preferences",ON_DECK_IN_HOLE:"On-Deck In-Hole Lineups",PLAYER_CARD:"Player Card",PITCH_VISUALIZATION:"Pitch Visualization",RECENT_PLAYS:"Recent Plays",CLICK:{LAUNCH:"Launch Click"}}),define("responsive-gameday-core/src/js/GDUtil/tracking/GDAppTracking",["require","exports","module","message-service/message-service","../../GDModel/enums/events/EventTypes","../../GDModel/enums/events/TrackingEvents","../window/Logg"],function(a,b,c){function d(a,b,c,d,g){var i={async:{isDynamic:a,compName:f+": "+c,pageName:"Major League Baseball: Gameday: Gameday:",compActivity:f+": "+c+": "+d,actionGen:b}};"undefined"!=typeof g&&$.extend(i,{async_media:g}),j.log("Tracking publisher",i),e.publish(h.TRACKING,i)}var e=a("message-service/message-service"),f="AtBat",g=a("../../GDModel/enums/events/EventTypes"),h=a("../../GDModel/enums/events/TrackingEvents"),i=!1,j=a("../window/Logg");return{VIDEO_HIGHLIGHTS_PLAYLIST:"Video Highlights Playlist",PREMIUM_STATS:"Premium Stats",VIDEO_HIGHLIGHT_ALERT:"Video Highlight Alert",init:function(){e.addListener(g.VIEW_READY,function a(b){e.removeListener(b.type,a),i=!0})},track_launch_link:function(a,b,c,e,f){d(b,c,e,f),window.open(a,"_blank")},track_launch_click:function(a,b,c){d(a,b,c,h.CLICK.LAUNCH)},set_app_name:function(a){f=a},track_new_batter_event:function(){d(!0,!1,"New Batter","New Batter")},track_jingle:function(a){d(!1,!1,"Jingle","Jingle "+a)},track_video_available:function(){d(!1,!0,h.HIGHLIGHTS,HIGHLIGHTS+" Viewed")},track_live_lookin_alert_click:function(){d(!1,!0,h.LIVE_LOOK_IN,"Live Look-In Click - 3D")},track_live_lookin_list_click:function(){d(!1,!0,h.LIVE_LOOK_IN,"Live Look-In Click - Video Tab")},track_live_lookin_view:function(){d(!1,!0,h.LIVE_LOOK_IN,"Live Look-In Launch")},track_live_lookin_available:function(){d(!1,!1,h.LIVE_LOOK_IN,"Alert")},track_recent_plays_share_to_facebook:function(){d(!1,!0,h.RECENT_PLAYS,"Facebook Share Click")},track_recent_plays_share_to_twitter:function(){d(!1,!0,h.RECENT_PLAYS,"Twitter Share Click")},track_plays_tab_launch:function(){this.track_launch_click(!0,!0,h.SUMMARY)},track_inning_click:function(){d(!0,!0,h.SUMMARY,"Inning Click")},track_scoring_plays_click:function(){d(!0,!0,h.SUMMARY,"Scoring Plays Click")},track_play_by_play_click:function(){d(!0,!0,h.SUMMARY,"Play By Play Click")},track_playercard:function(){d(!0,!0,h.PLAYER_CARD,"Player Card Access")},track_playercard_auto:function(){},track_field_tab_launch:function(){this.track_launch_click(!0,!0,h.FIELD_VIEW)},track_field_activity:function(){d(!0,!0,h.FIELD_VIEW,"Field Activity")},track_odih_activity:function(){d(!0,!0,h.ON_DECK_IN_HOLE,"On Deck In Hole Lineups Activity")},track_lineup_player_click:function(){d(!0,!0,h.ON_DECK_IN_HOLE,"Lineup Player Click")},track_on_deck_click:function(){d(!0,!0,h.ON_DECK_IN_HOLE,"On Deck Click")},track_on_deck_team_select:function(){d(!0,!0,h.ON_DECK_IN_HOLE,"Team Select Click")},track_in_hole_click:function(){d(!0,!0,h.ON_DECK_IN_HOLE,"In Hole Click")},track_on_field_lineups_activity:function(){d(!0,!0,h.ON_FIELD_LINEUPS,"On Field Lineups Activity")},track_box_tab_launch:function(){
this.track_launch_click(!0,!0,h.SCORING)},track_box_tab_activity:function(){d(!0,!0,h.SCORING,h.SCORING+" Boxscore Tab")},track_box_anchor_activity:function(){d(!0,!0,h.SCORING,h.SCORING+" Boxscore Tab Anchor Link")},track_bench_tab_activity:function(){d(!0,!0,h.SCORING,h.SCORING+" Bench Tab")},track_color_tab_launch:function(){this.track_launch_click(!0,!0,h.COLOR)},track_user_preferences_activity:function(){d(!0,!0,h.USER_PREFERENCES,"User Preferences Activity")},track_pitches_activity:function(){d(!0,!0,h.PITCH_VISUALIZATION,"Pitch Activity")},track_video_tab_launch:function(){this.track_launch_click(!0,!0,h.HIGHLIGHTS)},track_video_list_click:function(){d(!0,!0,h.HIGHLIGHTS,"List Click")},track_video_collapse:function(){d(!0,!0,h.HIGHLIGHTS,"Change to PIP ")},track_video_expand:function(){d(!0,!0,h.HIGHLIGHTS,"Change to Takeover ")},track_video_media_view:function(a){var b={mediaID:a.id+" | "+a.defaultUrl.playback_scenario,playerType:"HTML5 Video",playerContext:"AtBat Real-Time Highlights",streamType:null,bitRate:a.defaultUrl.playback_scenario.split("_")[1],actionGen:!0,sequenceID:null,cdn:null,postRoll:!1,playerFlavor:"2"};d(!0,!0,h.HIGHLIGHTS,"Real-Time Highlight Viewed",b)},track_penguin_activity:function(a,b,c,e){d(a,b,c,e)},track_color_feed_video_click:function(){d(!1,!0,h.HIGHLIGHTS+"AtBat: Social: Real-Time Highlights Click")}}}),define("responsive-gameday-core/src/js/main",["require","exports","module","jquery","datasource-manager/datasource-manager","message-service/message-service","extant/extant","./GDControl/GameModelLocator/GameModelLocator","./GDModel/enums/events/EventTypes","./GDModel/enums/datasources/Datasources","./GDControl/SubscriptionManager/SubscriptionManager","./GDControl/TfsManager/TfsManager","./GDControl/managers/MidInningGamesManager","./GDControl/managers/PageVisibilityManager","./GDUtil/resources/DataSourceSelector","./GDUtil/tracking/GDAppTracking","./GDUtil/window/UrlHasher","./GDUtil/window/WindowBridge","./GDUtil/window/Logg","./GDModel/ValueObjects/Game/GameId","./GDUtil/resources/GDConfig"],function(a,b,c){function d(){}function e(){return k(f)||(f=new d),f}var f,g,h=a("jquery"),i=a("datasource-manager/datasource-manager"),j=a("message-service/message-service"),k=a("extant/extant"),l=a("./GDControl/GameModelLocator/GameModelLocator"),m=a("./GDModel/enums/events/EventTypes"),n=(a("./GDModel/enums/datasources/Datasources"),a("./GDControl/SubscriptionManager/SubscriptionManager")),o=a("./GDControl/TfsManager/TfsManager"),p=a("./GDControl/managers/MidInningGamesManager"),q=(a("./GDControl/managers/PageVisibilityManager"),a("./GDUtil/resources/DataSourceSelector")),r=a("./GDUtil/tracking/GDAppTracking"),s=a("./GDUtil/window/UrlHasher"),t=a("./GDUtil/window/WindowBridge"),u=a("./GDUtil/window/Logg"),v=a("./GDModel/ValueObjects/Game/GameId"),w=a("./GDUtil/resources/GDConfig");return d.prototype={GDConfig:w,init:function(a,b){var c=s.getHashParams();if(k(b)?k(c)&&h.extend(b,c):b=c,w.initProps=b,k(b.logging)&&(w.log=b.logging||"none",u.setLevel(w.log)),k(b.game)&&""!==b.game){var d=new v(b.game);a=d.gid_path}if(s.setInitParams(b,b.game||a),o.init(b.tfsStartTime||b.tfsStart||b.tfs||null,b.ffwd||10,!k(b.tfsHold)),(k(b.supportedVideo)||k(b.playbackScenarios)||k(b.videoFormats))&&(w.supportedVideo=[].concat(b.supportedVideo||b.playbackScenarios||b.videoFormats)),k(b.liveLookin)&&this.setHashParams({game_tab:"videos"}),k(b.passiveMode)&&b.passiveMode===!0&&(w.passiveMode=!0),i.add(q.mashSources(b.dataOverrides||{})),n.subscribe(b.dataSources),k(b.excludes)&&n.unsubscribe(b.excludes),k(b.listeners))for(var e=0,f=b.listeners.length;f>e;e++)this.addListener(b.listeners[e].event,b.listeners[e].handler);g=this,this.addListener(m.GAME_INITIALIZED,this.initView),l.getGame(a,b)},start:function(a){if(!k(l.getCurrentGame())||!l.getCurrentGame().initialized())return void u.log("the game is not yet ready, this function will be recalled when it is...");var b=s.checkState;return u.log("attempting start..."),w.i18n=w.dictionary[w.lang]?function(a){return w.dic}:function(a){return a},t.addListener("hashchange",b),b(),s.getCachedParams()},initView:function(a,b){p.init(),t.init(),r.init(),j.removeListener(m.GAME_INITIALIZED,g.initView),g.start()},getGameData:function(a){return l.getGameData(a)},requestGameData:function(a,b){return l.requestGameData(a,b)},getCurrent:function(){return l.getCurrentGame()},switchGame:function(a,b,c){return l.switchGame(a,b,c)},addListener:function(a,b){u.log("subscribing to event: ",a),j.addListener(a,b)},removeListener:function(a,b){j.removeListener(a,b)},getCachedParams:function(a){return s.getCachedParams(a)},getHashParams:function(a){return s.getHashParams(a)},setHashParams:function(a){s.setHashParams(a)},removeHashParam:function(a){s.removeHashParam(a)},loadAtTfsPoint:function(a){o.setTimecode(a),w.passiveMode&&this.getCurrent().executePassiveLoad()},beginCommericalBreak:function(){j.publish(m.BEGIN_COMMERCIAL_BREAK)},endCommercialBreak:function(){j.publish(m.END_COMMERCIAL_BREAK)},handleCommercialCompanionAd:function(a){j.publish(m.COMMERCIAL_COMPANION_RECEIVED,a)}},e()});var Hogan={};!function(a,b){function c(a,b,c){var d;return b&&"object"==typeof b&&(null!=b[a]?d=b[a]:c&&b.get&&"function"==typeof b.get&&(d=b.get(a))),d}function d(a,b,c,d){function e(){}function f(){}e.prototype=a,f.prototype=a.subs;var g,h=new e;h.subs=new f,h.subsText={},h.ib();for(g in b)h.subs[g]=b[g],h.subsText[g]=d;for(g in c)h.partials[g]=c[g];return h}function e(a){return String(null===a||void 0===a?"":a)}function f(a){return a=e(a),l.test(a)?a.replace(g,"&amp;").replace(h,"&lt;").replace(i,"&gt;").replace(j,"&#39;").replace(k,"&quot;"):a}a.Template=function(a,b,c,d){a=a||{},this.r=a.code||this.r,this.c=c,this.options=d||{},this.text=b||"",this.partials=a.partials||{},this.subs=a.subs||{},this.ib()},a.Template.prototype={r:function(a,b,c){return""},v:f,t:e,render:function(a,b,c){return this.ri([a],b||{},c)},ri:function(a,b,c){return this.r(a,b,c)},ep:function(a,b){var c=this.partials[a],e=b[c.name];if(c.instance&&c.base==e)return c.instance;if("string"==typeof e){if(!this.c)throw new Error("No compiler available.");e=this.c.compile(e,this.options)}return e?(this.partials[a].base=e,c.subs&&(void 0===this.activeSub&&(b.stackText=this.text),e=d(e,c.subs,c.partials,b.stackText||this.text)),this.partials[a].instance=e,e):null},rp:function(a,b,c,d){var e=this.ep(a,c);return e?e.ri(b,c,d):""},rs:function(a,b,c){var d=a[a.length-1];if(!m(d))return void c(a,b,this);for(var e=0;e<d.length;e++)a.push(d[e]),c(a,b,this),a.pop()},s:function(a,b,c,d,e,f,g){var h;return m(a)&&0===a.length?!1:("function"==typeof a&&(a=this.ms(a,b,c,d,e,f,g)),h=!!a,!d&&h&&b&&b.push("object"==typeof a?a:b[b.length-1]),h)},d:function(a,b,d,e){var f,g=a.split("."),h=this.f(g[0],b,d,e),i=this.options.modelGet,j=null;if("."===a&&m(b[b.length-2]))h=b[b.length-1];else for(var k=1;k<g.length;k++)f=c(g[k],h,i),null!=f?(j=h,h=f):h="";return e&&!h?!1:(e||"function"!=typeof h||(b.push(j),h=this.mv(h,b,d),b.pop()),h)},f:function(a,b,d,e){for(var f=!1,g=null,h=!1,i=this.options.modelGet,j=b.length-1;j>=0;j--)if(g=b[j],f=c(a,g,i),null!=f){h=!0;break}return h?(e||"function"!=typeof f||(f=this.mv(f,b,d)),f):e?!1:""},ls:function(a,b,c,d,f){var g=this.options.delimiters;return this.options.delimiters=f,this.b(this.ct(e(a.call(b,d)),b,c)),this.options.delimiters=g,!1},ct:function(a,b,c){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(a,this.options).render(b,c)},b:b?function(a){this.buf.push(a)}:function(a){this.buf+=a},fl:b?function(){var a=this.buf.join("");return this.buf=[],a}:function(){var a=this.buf;return this.buf="",a},ib:function(){this.buf=b?[]:""},ms:function(a,b,c,d,e,f,g){var h,i=b[b.length-1],j=a.call(i);return"function"==typeof j?d?!0:(h=this.activeSub&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(j,i,c,h.substring(e,f),g)):j},mv:function(a,b,c){var d=b[b.length-1],f=a.call(d);return"function"==typeof f?this.ct(e(f.call(d)),d,c):f},sub:function(a,b,c,d){var e=this.subs[a];e&&(this.activeSub=a,e(b,c,this,d),this.activeSub=!1)}};var g=/&/g,h=/</g,i=/>/g,j=/\'/g,k=/\"/g,l=/[&<>\"\']/,m=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}}("undefined"!=typeof exports?exports:Hogan),function(a){function b(a){"}"===a.n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1))}function c(a){return a.trim?a.trim():a.replace(/^\s*|\s*$/g,"")}function d(a,b,c){if(b.charAt(c)!=a.charAt(0))return!1;for(var d=1,e=a.length;e>d;d++)if(b.charAt(c+d)!=a.charAt(d))return!1;return!0}function e(b,c,d,h){var i=[],j=null,k=null,l=null;for(k=d[d.length-1];b.length>0;){if(l=b.shift(),k&&"<"==k.tag&&!(l.tag in t))throw new Error("Illegal content in < super tag.");if(a.tags[l.tag]<=a.tags.$||f(l,h))d.push(l),l.nodes=e(b,l.tag,d,h);else{if("/"==l.tag){if(0===d.length)throw new Error("Closing tag without opener: /"+l.n);if(j=d.pop(),l.n!=j.n&&!g(l.n,j.n,h))throw new Error("Nesting error: "+j.n+" vs. "+l.n);return j.end=l.i,i}"\n"==l.tag&&(l.last=0==b.length||"\n"==b[0].tag)}i.push(l)}if(d.length>0)throw new Error("missing closing tag: "+d.pop().n);return i}function f(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c].o==a.n)return a.tag="#",!0}function g(a,b,c){for(var d=0,e=c.length;e>d;d++)if(c[d].c==a&&c[d].o==b)return!0}function h(a){var b=[];for(var c in a)b.push('"'+j(c)+'": function(c,p,t,i) {'+a[c]+"}");return"{ "+b.join(",")+" }"}function i(a){var b=[];for(var c in a.partials)b.push('"'+j(c)+'":{name:"'+j(a.partials[c].name)+'", '+i(a.partials[c])+"}");return"partials: {"+b.join(",")+"}, subs: "+h(a.subs)}function j(a){return a.replace(s,"\\\\").replace(p,'\\"').replace(q,"\\n").replace(r,"\\r")}function k(a){return~a.indexOf(".")?"d":"f"}function l(a,b){var c="<"+(b.prefix||""),d=c+a.n+u++;return b.partials[d]={name:a.n,partials:{}},b.code+='t.b(t.rp("'+j(d)+'",c,p,"'+(a.indent||"")+'"));',d}function m(a,b){b.code+="t.b(t.t(t."+k(a.n)+'("'+j(a.n)+'",c,p,0)));'}function n(a){return"t.b("+a+");"}var o=/\S/,p=/\"/g,q=/\n/g,r=/\r/g,s=/\\/g;a.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},a.scan=function(e,f){function g(){s.length>0&&(t.push({tag:"_t",text:new String(s)}),s="")}function h(){for(var b=!0,c=w;c<t.length;c++)if(b=a.tags[t[c].tag]<a.tags._v||"_t"==t[c].tag&&null===t[c].text.match(o),!b)return!1;return b}function i(a,b){if(g(),a&&h())for(var c,d=w;d<t.length;d++)t[d].text&&((c=t[d+1])&&">"==c.tag&&(c.indent=t[d].text.toString()),t.splice(d,1));else b||t.push({tag:"\n"});u=!1,w=t.length}function j(a,b){var d="="+y,e=a.indexOf(d,b),f=c(a.substring(a.indexOf("=",b)+1,e)).split(" ");return x=f[0],y=f[f.length-1],e+d.length-1}var k=e.length,l=0,m=1,n=2,p=l,q=null,r=null,s="",t=[],u=!1,v=0,w=0,x="{{",y="}}";for(f&&(f=f.split(" "),x=f[0],y=f[1]),v=0;k>v;v++)p==l?d(x,e,v)?(--v,g(),p=m):"\n"==e.charAt(v)?i(u):s+=e.charAt(v):p==m?(v+=x.length-1,r=a.tags[e.charAt(v+1)],q=r?e.charAt(v+1):"_v","="==q?(v=j(e,v),p=l):(r&&v++,p=n),u=v):d(y,e,v)?(t.push({tag:q,n:c(s),otag:x,ctag:y,i:"/"==q?u-x.length:v+y.length}),s="",v+=y.length-1,p=l,"{"==q&&("}}"==y?v++:b(t[t.length-1]))):s+=e.charAt(v);return i(u,!0),t};var t={_t:!0,"\n":!0,$:!0,"/":!0};a.stringify=function(b,c,d){return"{code: function (c,p,i) { "+a.wrapMain(b.code)+" },"+i(b)+"}"};var u=0;a.generate=function(b,c,d){u=0;var e={code:"",subs:{},partials:{}};return a.walk(b,e),d.asString?this.stringify(e,c,d):this.makeTemplate(e,c,d)},a.wrapMain=function(a){return'var t=this;t.b(i=i||"");'+a+"return t.fl();"},a.template=a.Template,a.makeTemplate=function(a,b,c){var d=this.makePartials(a);return d.code=new Function("c","p","i",this.wrapMain(a.code)),new this.template(d,b,this,c)},a.makePartials=function(a){var b,c={subs:{},partials:a.partials,name:a.name};for(b in c.partials)c.partials[b]=this.makePartials(c.partials[b]);for(b in a.subs)c.subs[b]=new Function("c","p","t","i",a.subs[b]);return c},a.codegen={"#":function(b,c){c.code+="if(t.s(t."+k(b.n)+'("'+j(b.n)+'",c,p,1),c,p,0,'+b.i+","+b.end+',"'+b.otag+" "+b.ctag+'")){t.rs(c,p,function(c,p,t){',a.walk(b.nodes,c),c.code+="});c.pop();}"},"^":function(b,c){c.code+="if(!t.s(t."+k(b.n)+'("'+j(b.n)+'",c,p,1),c,p,1,0,0,"")){',a.walk(b.nodes,c),c.code+="};"},">":l,"<":function(b,c){var d={partials:{},code:"",subs:{},inPartial:!0};a.walk(b.nodes,d);var e=c.partials[l(b,c)];e.subs=d.subs,e.partials=d.partials},$:function(b,c){var d={subs:{},code:"",partials:c.partials,prefix:b.n};a.walk(b.nodes,d),c.subs[b.n]=d.code,c.inPartial||(c.code+='t.sub("'+j(b.n)+'",c,p,i);')},"\n":function(a,b){b.code+=n('"\\n"'+(a.last?"":" + i"))},_v:function(a,b){b.code+="t.b(t.v(t."+k(a.n)+'("'+j(a.n)+'",c,p,0)));'},_t:function(a,b){b.code+=n('"'+j(a.text)+'"')},"{":m,"&":m},a.walk=function(b,c){for(var d,e=0,f=b.length;f>e;e++)d=a.codegen[b[e].tag],d&&d(b[e],c);return c},a.parse=function(a,b,c){return c=c||{},e(a,"",[],c.sectionTags||[])},a.cache={},a.cacheKey=function(a,b){return[a,!!b.asString,!!b.disableLambda,b.delimiters,!!b.modelGet].join("||")},a.compile=function(b,c){c=c||{};var d=a.cacheKey(b,c),e=this.cache[d];return e?e:(e=this.generate(this.parse(this.scan(b,c.delimiters),b,c),b,c),this.cache[d]=e)}}("undefined"!=typeof exports?exports:Hogan),"function"==typeof define&&define.amd&&define("hogan",Hogan),define("text",["module"],function(a){"use strict";var b,c,d,e,f,g=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],h=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,j="undefined"!=typeof location&&location.href,k=j&&location.protocol&&location.protocol.replace(/\:/,""),l=j&&location.hostname,m=j&&(location.port||void 0),n={},o=a.config&&a.config()||{};return b={version:"2.0.10",strip:function(a){if(a){a=a.replace(h,"");var b=a.match(i);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:o.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;3>b;b+=1){c=g[b];try{a=new ActiveXObject(c)}catch(d){}if(a){g=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.indexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1,a.length)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return i?(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e)):!0},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,o.isBuild&&(n[a]=d),e(d)},load:function(a,c,d,e){if(e.isBuild&&!e.inlineText)return void d();o.isBuild=e.isBuild;var f=b.parseName(a),g=f.moduleName+(f.ext?"."+f.ext:""),h=c.toUrl(g),i=o.useXhr||b.useXhr;return 0===h.indexOf("empty:")?void d():void(!j||i(h,k,l,m)?b.get(h,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([g],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)}))},write:function(a,c,d,e){if(n.hasOwnProperty(c)){var f=b.jsEscape(n[c]);d.asModule(a+"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(c){var d=function(a){return e(j,a)};d.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,d,f)},f)}},"node"===o.env||!o.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(c=require.nodeRequire("fs"),b.get=function(a,b,d){try{var e=c.readFileSync(a,"utf8");0===e.indexOf("\ufeff")&&(e=e.substring(1)),b(e)}catch(f){d(f)}}):"xhr"===o.env||!o.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);o.onXhr&&o.onXhr(g,a),g.onreadystatechange=function(b){var e,f;4===g.readyState&&(e=g.status,e>399&&600>e?(f=new Error(a+" HTTP status: "+e),f.xhr=g,d(f)):c(g.responseText),o.onXhrComplete&&o.onXhrComplete(g,a))},g.send(null)}:"rhino"===o.env||!o.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),null!==d&&c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===o.env||!o.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(d=Components.classes,e=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),f="@mozilla.org/windows-registry-key;1"in d,b.get=function(a,b){var c,g,h,i={};f&&(a=a.replace(/\//g,"\\")),h=new FileUtils.File(a);try{c=d["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream),c.init(h,1,0,!1),g=d["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream),g.init(c,"utf-8",c.available(),e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),g.readString(c.available(),i),g.close(),c.close(),b(i.value)}catch(j){throw new Error((h&&h.path||"")+": "+j)}}),b}),define("hgn",["hogan","text"],function(a,b){function c(c,f,g,j){var k=j.hgn||{},l=c;l+=k&&null!=k.templateExtension?k.templateExtension:h,b.get(f.toUrl(l),function(b){var f=k.compilationOptions?e({},k.compilationOptions):{};j.isBuild&&(f.asString=!0,i[c]=a.compile(b,f));var h=a.compile(b,f),l=d(h.render,h);l.text=h.text,l.template=h,g(l)})}function d(a,b){return function(){return a.apply(b,arguments)}}function e(a,b){var c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a}function f(b,c,d){if(c in i){g||(g=a.compile(j));var e=i[c];d(g.render({pluginName:b,moduleName:c,fn:e}))}}var g,h=".mustache",i={},j='define("{{pluginName}}!{{moduleName}}", ["hogan"], function(hogan){  var tmpl = new hogan.Template({{{fn}}}, "", hogan);  function render(){ return tmpl.render.apply(tmpl, arguments); } render.template = tmpl; return render;});\n';return{load:c,write:f}}),define("hgn!mlb-tv-app/app/templates/unavailableView",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<span class='gameday-widget-error'><p>"),d.b(d.v(d.f("message",a,b,0))),d.b("</p></span>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/UnavailableView",["jquery","underscore","backbone","mlb-tv-app/app/view/BaseView","hgn!mlb-tv-app/app/templates/unavailableView"],function(a,b,c,d,e){var f=d.extend({tagName:"div",events:{},render:function(){console.log("UnavailableView.render()"),this.$el.html(e({message:"PLAYS NOT CURRENTLY AVAILABLE"}))}});return f}),define("mlb-tv-app/app/model/GamedayUpdate",["backbone","mlb-tv-app/app/control/Dispatcher"],function(a,b){var c=Backbone.Model.extend({defaults:{id:void 0,all_innings:{},bench:{},boxscore:{},game:{},inning:{},linescore:{},play:{},players:{},video:{},highlightPlaying:!1,minisetup:!1,minimodeId:"minimode",miniGamestate:void 0,gameInProgress:!1,gameOver:!1,inningNum:void 0,inningHalf:void 0,formattedHomeTimeZone:void 0,showStartTime:!0,inningNumberWithOrdinal:"",inningState:"",onlyOneOut:!1,isBetweenInnings:!1,vsString:void 0,minigamestateCSS:void 0,startTimeTBD:!1},ensureGamedayId:function(){if(this.attributes.linescore){var a=this.attributes.linescore.id;this.attributes.id=a}},ensureInning:function(){this.attributes.all_innings&&this.attributes.all_innings&&this.attributes.all_innings.innings&&(this.attributes.play.inning=this.attributes.all_innings.innings.length-1,this.attributes.inning=this.attributes.all_innings.innings[this.attributes.play.inning])},ensureVideo:function(){this.attributes.video||(this.attributes.video={hasVideos:!1})},gamestate:function(){if(this.attributes.linescore){var a=this.attributes.play.gamestate;this.attributes.linescore.abstractGameState;switch(a){case"Pre-Game":this.attributes.miniGamestate=!1,this.attributes.gameInProgress=!1,this.attributes.gameOver=!1,this.attributes.showStartTime=!0,this.attributes.minigamestateCSS=void 0;break;case"Warmup":case"Preview":case"Wrapup":this.attributes.miniGamestate="Warmup",this.attributes.showStartTime=!1,this.attributes.gameOver=!1,this.attributes.gameInProgress=!1,this.attributes.minigamestateCSS=void 0;break;case"In Progress":this.attributes.miniGamestate="LIVE",this.attributes.gameInProgress=!0,this.attributes.gameOver=!1,this.attributes.showStartTime=!1,this.attributes.minigamestateCSS="yellow-highlight";break;case"Final":case"Game Over":this.attributes.miniGamestate="FINAL",this.attributes.gameInProgress=!1,this.attributes.gameOver=!0,this.attributes.showStartTime=!1,this.attributes.minigamestateCSS="red-highlight";break;case"Delayed":case"Delay":case"Delayed Start":case"Postponed":this.attributes.miniGamestate="Delay",this.attributes.gameInProgress=!1,this.attributes.showStartTime=!1,this.attributes.minigamestateCSS=void 0}}},checkForTBD:function(){var a=this.attributes.linescore&&this.attributes.linescore.home_time;"3:33"==a&&(this.attributes.startTimeTBD=!0)},formatHomeTimeZone:function(){if(this.attributes.linescore){var a=this.attributes.linescore.home_time_zone;if(a){var b=a.substring(0,1),c=a.substring(1,2);this.attributes.formattedHomeTimeZone=b+"."+c+"."}}},onlyOneOut:function(){outs=this.attributes.play.outs,"1"===outs?this.attributes.onlyOneOut=!0:this.attributes.onlyOneOut=!1},setInningNumberAndState:function(){var a="";this.attributes.linescore&&(a=this.attributes.linescore.inning,a?this.attributes.inningNumberWithOrdinal=this.numberWithOrdinal(a):this.attributes.inningNumberWithOrdinal="");var b="";a&&this.attributes.linescore?b=this.attributes.linescore.inning_state:this.attributes.play&&(b=this.attributes.play.inning_state),this.attributes.inningState=b,this.attributes.isBetweenInnings=this.isBetweenInnings(b)},numberWithOrdinal:function(a){var b,c=a+"",d=c.substr(-2);if("11"===d||"12"===d||"13"===d)b="th";else switch(~~d.substr(-1)){case 1:b="st";break;case 2:b="nd";break;case 3:b="rd";break;default:b="th"}return a+b},isBetweenInnings:function(a){switch(a){case"Middle":case"End":return!0;case"Top":case"Bottom":default:return!1}},setVsString:function(){this.attributes.vsString="vs."},initialize:function(){this.initListeners()},updateModel:function(){this.ensureGamedayId(),this.ensureInning(),this.ensureVideo(),this.setInningNumberAndState(),this.gamestate(),this.checkForTBD(),this.formatHomeTimeZone(),this.onlyOneOut(),this.setVsString()},initListeners:function(){this.listenTo(b,"gameday:datachange",this.updateModel)}});return new c}),define("mlb-tv-app/app/model/MetaData",["backbone","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/GamedayUpdate"],function(a,b,c){var d=Backbone.Model.extend({defaults:{advisory_rating:void 0,authflow_required:void 0,authorization:void 0,away_team_id:void 0,bigBlurb:void 0,blurb:void 0,truncatedBlurb:void 0,calendar_event_id:void 0,call_letters:void 0,closed_captioned:!1,closed_captions_location_ttml:void 0,combined_media_state:void 0,content_id:void 0,coverage_association:void 0,coverage_type:void 0,currentPlaybackScenario:void 0,date:void 0,default_dam_view_key:void 0,duration:void 0,embeddable:void 0,event_date:void 0,game_id:void 0,game_pk:void 0,headline:void 0,home_team_id:void 0,imagesByType:[],inning_index_location_xml:void 0,keywords:[],kicker:void 0,login:void 0,milestones_xml:void 0,notEmbeddable:void 0,notShareable:void 0,shareable:void 0,size:void 0,start_time:void 0,thumb:void 0,tv_rating:void 0,twitterInline:void 0,isHighlight:void 0,isAudioOnly:void 0,isLive:void 0,selectedMatchup:void 0},checkIfHighlight:function(){var a=!1;if(!this.attributes.authflow_required){this.attributes.authflow_required;a=!0,this.truncateBlurb(),console.log("highlight playing - MetaData.js")}return this.attributes.isHighlight=a,a},truncateBlurb:function(){var a=this.attributes.blurb,b=a.length;if(b>54){var c=a.substr(0,54)+"...";this.attributes.truncatedBlurb=c}},formatTheDate:function(){if(this.attributes.date&&this.attributes.date.indexOf("T")>-1){var a=this.attributes.date.substring(0,10),b=a.substring(0,4),c=a.substring(5,10),d=c+"-"+b;this.attributes.date=d}},formatTheDuration:function(){if(this.attributes.duration&&8===this.attributes.duration.length){var a=this.attributes.duration.substring(4,8);this.attributes.duration=a}},updateModel:function(){this.checkIfHighlight(),this.formatTheDate(),this.formatTheDuration(),c.set("minisetup",!1),b.trigger("MetaData:WasUpdated")},initialize:function(){this.listenTo(b,"highlight:playing",this.updateModel),this.bind("change:content_id",this.updateModel),this.listenTo(b,"MetaData:update",this.updateModel)},updateSelectedSlotMetaDataProperties:function(a){this.set({isHighlight:a.isHighlight,isLive:a.isLive,isAudioOnly:a.isAudioOnly},{silent:!0})}});return new d}),define("mlb-tv-app/app/util/GameIdUtil",["backbone","underscore"],function(a,b){var c=a.View.extend({defaults:{}},{formatIdForUI:function(a){return a?a.replace(/\//g,"_").replace(/-/g,"_"):""},formatIdForData:function(a){var b=a.split("_");return b[0]+"/"+b[1]+"/"+b[2]+"/"+b[3]+"-"+b[4]+"-"+b[5]}});return c}),define("mlb-tv-app/app/model/MediaMetrics",["underscore","backbone","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/util/GameIdUtil"],function(a,b,c,d){var e=b.Model.extend({defaults:{appSizeState:void 0,numSlots:void 0,videoAreaLayoutState:void 0,slots:[],metricsNeedUpdate:!0,slotNeedsUpdate:!0,initialGame:void 0,selectedSlot:void 0,selectedSlotData:void 0,slotState:void 0,previousGameId:void 0,previousSteamGameId:void 0,initialGameDeselected:!1,daypickerIsOpen:!1,previouslySelectedSlot:0,unformattedSelectedGame:void 0,selectedGame:void 0,currentSlots:[],previousSlots:[],activeGameIds:[],highlightIds:[{isHighlight:void 0,contentId:void 0},{isHighlight:void 0,contentId:void 0},{isHighlight:void 0,contentId:void 0},{isHighlight:void 0,contentId:void 0}],gameIsFree:void 0,isFreeGameEvalComplete:!1,initGamedayComplete:!1},initialize:function(){this.listenTo(c,"change",this.normalizeMetrics)},normalizeMetrics:function(a){console.log("normalizeMetrics()")},normalizeSlot:function(a){return a&&(a.slotIndex=parseInt(a.slotIndex),a.isAudioOnly="true"===a.isAudioOnly||a.isAudioOnly===!0,a.isLive="true"===a.isLive||a.isLive===!0,a.isHighlight="true"===a.isHighlight||a.isHighlight===!0,a.isSelected="true"===a.isSelected||a.isSelected===!0,a.formattedGameId=d.formatIdForUI(a.gameId),a.currentPlayheadTimecode=a.currentPlayheadTimecode||"00:00:00;00"),a},determineSelectedSlot:function(){var a,b,c,e,f=this.get("currentSlots"),g=this.get("selectedSlot"),h=f.length;if(f.length){var i=f[g];i&&(e=i.gameId)}for(c=this.get("highlightIds"),a=0;h>a;a++)b=f[a]=this.getSlotAtIndex(a),b&&b.isSelected&&g!==b.slotIndex&&this.set({selectedSlot:parseInt(b.slotIndex),slotState:b.mediaSlotState,unformattedSelectedGame:b.gameId,selectedGame:d.formatIdForUI(b.gameId),previouslySelectedSlot:g,previousGameId:e}),c[a].isHighlight=b.isHighlight,c[a].contentId=b.contentId;this.updateActiveGames(),this.attributes.slots=f,this.attributes.highlightIds=c},getPlayingContentIds:function(){return a.map(a.filter(this.get("currentSlots"),function(a){return a.contentId&&""!==a.contentId}),function(a){return a.contentId})},getSlotAtIndex:function(a){var b=this.get("slots")[a];return this.normalizeSlot(b)},getSelectedSlot:function(){this.determineSelectedSlot();var a=this.getSlotAtIndex(this.get("selectedSlot"));return a},setTimecodeForSlot:function(b,c){var d=this.get("slots");a.each(d,function(a,d,e){a.uniqueId===b&&(a.currentPlayheadTimecode=c)}),this.set("slots",d,{silent:!0})},setTimecodeForSelectedGame:function(b,c){var d=this.get("slots");a.each(d,function(a,d,e){a.gameId===b&&(a.currentPlayheadTimecode=c)}),this.set("slots",d,{silent:!0})},updateActiveGames:function(){var b=this.get("slots"),c=[];d.formatIdForUI(this.get("previousGameId"));c&&b&&(a.each(b,function(a,b){"EMPTY"===a.mediaSlotState||a.isHighlight||c.push(d.formatIdForUI(a.gameId))}),this.set("activeGameIds",c))},addActiveGame:function(a){var b=this.get("activeGameIds");b.push(a),this.set("activeGameIds",b)},removeActiveGame:function(b){var c=this.get("activeGameIds"),b=d.formatIdForUI(b);a.each(c,function(a,e){a&&d.formatIdForUI(a)===b&&c.splice(e,1)},this),this.set("activeGameIds",c)},removeOldGame:function(b){var c=this.get("slots"),b=d.formatIdForUI(b);a.each(c,function(a,e){a&&d.formatIdForUI(a.gameId)===b&&(c.splice(e,1),this.removeActiveGame(b))},this),this.set("slots",c)},updateSelectedSlotMetaDataProperties:function(a){var b=this.get("selectedSlot"),c=this.get("slots"),d=c[b];d&&(d.isHighlight=a.get("isHighlight"),d.isLive=a.get("isLive"),d.isAudioOnly=a.get("isAudioOnly"),c[b]=d,this.set("slots",c,{slient:!0}))},isSelectedSlotEvent:function(b){var c=this.get("slots");return a.some(c,function(a,c,d){return a.isSelected&&a.calendarEventId===b})},isSelectedSlotVideo:function(){var b=this.get("slots");return a.some(b,function(a){return a.isSelected&&!a.isAudioOnly})},setGameIdOnModels:function(){var a=d.formatIdForUI(this.get("unformattedSelectedGame"));return this.set("selectedGame",a),this.trigger("model:setGameIdOnModels",this.get("unformattedSelectedGame")),a},set:function(a,c){return(a.hasOwnProperty("slots")||a.hasOwnProperty("currentSlots"))&&(this.attributes.currentSlots=this.attributes.slots=a.slots,this.determineSelectedSlot(),(!c||c.silent)&&(this.trigger("change:slots"),this.trigger("change:currentSlots"))),b.Model.prototype.set.call(this,a,c)}});return new e}),define("mlb-tv-app/app/model/Preferences",["backbone","mlb-tv-app/app/control/Dispatcher"],function(a,b){var c=Backbone.Model.extend({defaults:{parentSelector:"#mlb-tv-concealer #concealer-container",tabSelector:"#preferencesPane ul.tabs li",tabContentSelector:"#preferencesPane .tab-content",closeButtonSelector:"#preferencesPane .header .close-button",spoilersPref:void 0,closedCaptionPref:void 0,playLiveGameFromStartPref:void 0,gameMessagingPref:void 0,standardVideoPref:void 0,favTeamData:[],playerTrackerAlert:void 0},initialize:function(){this.listenTo(b,"userprofile:update",this.updateModel),this.listenTo(b,"userpreference:update",this.updatePreference)},getFavTeamData:function(a){var b=window.teamsConfig,c=a.favoriteTeams;if(c)for(var d=c.length,e=0;d>e;e++){var f=b[c[e]];if(f){var g=f.name_display_full,h=f.logo;this.attributes.favTeamData.push({name:g,logo:h})}}},setPrefValues:function(a,b){this.set({spoilersPref:a.hideScores,playLiveGameFromStartPref:a.playLiveGameFromStart,standardVideoPref:a.preferStandardVideo,closedCaptionPref:a.showClosedCaptions,playerTrackerAlert:a.playerTrackerAlert},{silent:b})},updateModel:function(a){a&&(this.attributes.favTeamIds=[],this.attributes.favTeamData=[],this.getFavTeamData(a),this.setPrefValues(a))},updatePreference:function(a){null!=a.hideScores&&(this.attributes.hideScores=a.hideScores),null!=a.showClosedCaptions&&(this.attributes.closedCaptionPref=a.showClosedCaptions),null!=a.playerTrackerAlert&&(this.attributes.playerTrackerAlert=a.playerTrackerAlert)}});return new c}),function(a){"undefined"!=typeof define&&define.amd?define("scrollMonitor/scrollMonitor",[],a):"undefined"!=typeof module&&module.exports?module.exports=a():window.scrollMonitor=a()}(function(){function a(){if(j.viewportTop=i(),j.viewportBottom=j.viewportTop+j.viewportHeight,j.documentHeight=v(),j.documentHeight!==w){for(y=k.length;y--;)k[y].recalculateLocation();
w=j.documentHeight}}function b(){j.viewportHeight=u(),a(),d()}function c(){clearTimeout(z),z=setTimeout(b,100)}function d(){for(A=k.length;A--;)k[A].update();for(A=k.length;A--;)k[A].triggerCallbacks()}function e(a,b){function c(a){if(0!==a.length)for(u=a.length;u--;)v=a[u],v.callback.call(d,x),v.isOne&&a.splice(u,1)}var d=this;this.watchItem=a,b?b===+b?this.offsets={top:b,bottom:b}:this.offsets={top:b.top||t.top,bottom:b.bottom||t.bottom}:this.offsets=t,this.callbacks={};for(var e=0,f=s.length;f>e;e++)d.callbacks[s[e]]=[];this.locked=!1;var g,h,i,k,u,v;this.triggerCallbacks=function(){switch(this.isInViewport&&!g&&c(this.callbacks[m]),this.isFullyInViewport&&!h&&c(this.callbacks[n]),this.isAboveViewport!==i&&this.isBelowViewport!==k&&(c(this.callbacks[l]),h||this.isFullyInViewport||(c(this.callbacks[n]),c(this.callbacks[p])),g||this.isInViewport||(c(this.callbacks[m]),c(this.callbacks[o]))),!this.isFullyInViewport&&h&&c(this.callbacks[p]),!this.isInViewport&&g&&c(this.callbacks[o]),this.isInViewport!==g&&c(this.callbacks[l]),!0){case g!==this.isInViewport:case h!==this.isFullyInViewport:case i!==this.isAboveViewport:case k!==this.isBelowViewport:c(this.callbacks[r])}g=this.isInViewport,h=this.isFullyInViewport,i=this.isAboveViewport,k=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var a=this.top,b=this.bottom;if(this.watchItem.nodeName){var d=this.watchItem.style.display;"none"===d&&(this.watchItem.style.display="");var e=this.watchItem.getBoundingClientRect();this.top=e.top+j.viewportTop,this.bottom=e.bottom+j.viewportTop,"none"===d&&(this.watchItem.style.display=d)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=j.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===a&&void 0===b||this.top===a&&this.bottom===b||c(this.callbacks[q])}},this.recalculateLocation(),this.update(),g=this.isInViewport,h=this.isFullyInViewport,i=this.isAboveViewport,k=this.isBelowViewport}function f(b){x=b,a(),d()}var g="undefined"==typeof window,h=!g,i=function(){return g?0:window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop},j={},k=[],l="visibilityChange",m="enterViewport",n="fullyEnterViewport",o="exitViewport",p="partiallyExitViewport",q="locationChange",r="stateChange",s=[l,m,n,o,p,q,r],t={top:0,bottom:0},u=function(){return g?0:window.innerHeight||document.documentElement.clientHeight},v=function(){return g?0:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)};j.viewportTop=null,j.viewportBottom=null,j.documentHeight=null,j.viewportHeight=u();var w,x,y,z,A;e.prototype={on:function(a,b,c){switch(!0){case a===l&&!this.isInViewport&&this.isAboveViewport:case a===m&&this.isInViewport:case a===n&&this.isFullyInViewport:case a===o&&this.isAboveViewport&&!this.isInViewport:case a===p&&this.isAboveViewport:if(b.call(this,x),c)return}if(!this.callbacks[a])throw new Error("Tried to add a scroll monitor listener of type "+a+". Your options are: "+s.join(", "));this.callbacks[a].push({callback:b,isOne:c||!1})},off:function(a,b){if(!this.callbacks[a])throw new Error("Tried to remove a scroll monitor listener of type "+a+". Your options are: "+s.join(", "));for(var c,d=0;c=this.callbacks[a][d];d++)if(c.callback===b){this.callbacks[a].splice(d,1);break}},one:function(a,b){this.on(a,b,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<j.viewportTop,this.isBelowViewport=this.bottom>j.viewportBottom,this.isInViewport=this.top<=j.viewportBottom&&this.bottom>=j.viewportTop,this.isFullyInViewport=this.top>=j.viewportTop&&this.bottom<=j.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var a=k.indexOf(this),b=this;k.splice(a,1);for(var c=0,d=s.length;d>c;c++)b.callbacks[s[c]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var B=function(a){return function(b,c){this.on.call(this,a,b,c)}},C=0,D=s.length;D>C;C++){var E=s[C];e.prototype[E]=B(E)}if(h)try{a()}catch(F){try{window.$(a)}catch(F){throw new Error("If you must put scrollMonitor in the <head>, you must use jQuery.")}}return h&&(window.addEventListener?(window.addEventListener("scroll",f),window.addEventListener("resize",c)):(window.attachEvent("onscroll",f),window.attachEvent("onresize",c))),j.beget=j.create=function(a,b){"string"==typeof a?a=document.querySelector(a):a&&a.length>0&&(a=a[0]);var c=new e(a,b);return k.push(c),c.update(),c},j.update=function(){x=null,a(),d()},j.recalculateLocations=function(){j.documentHeight=0,j.update()},j}),define("hgn!mlbtv-widget-gameday/templates/play",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<li>"),d.b("\n"+c),d.s(d.f("isAction",a,b,1),a,b,1,0,0,"")||(d.b("		<table>"),d.b("\n"+c),d.b("			<tr>"),d.b("\n"+c),d.b("				<td>"),d.b("\n"+c),d.s(d.f("batter",a,b,1),a,b,0,63,335,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('					<div class="player-mug">'),d.b("\n"+c),d.b("					<img "),d.b("\n"+c),d.b('					src="http://mlb.mlb.com/mlb/images/fantasy/wsfb/41x50/'),d.b(d.v(d.f("batter",a,b,0))),d.b('.jpg" '),d.b("\n"+c),d.b('					alt="'),d.b(d.v(d.f("batter",a,b,0))),d.b('" '),d.b("\n"+c),d.b("					onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("					/>"),d.b("\n"+c),d.b("					</div>"),d.b("\n"+c)}),a.pop()),d.b("				</td>"),d.b("\n"+c),d.b("				<td>"),d.b("\n"+c),d.b('					<span class="at-bat-summary">'),d.b("\n"+c),d.b("						"),d.s(d.f("desWithBoldNames",a,b,1),a,b,0,428,450,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.t(c.f("desWithBoldNames",a,b,0)))}),a.pop()),d.b("\n"+c),d.b("						"),d.s(d.f("desWithBoldNames",a,b,1),a,b,1,0,0,"")||d.b(d.v(d.f("des",a,b,0))),d.b("\n"+c),d.b("					</span>"),d.b("\n"+c),d.b('					<span class="at-bat-event">'),d.b(d.v(d.f("event",a,b,0))),d.b("</span>"),d.b("\n"+c),d.s(d.f("newOut",a,b,1),a,b,0,606,701,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('						<span class="at-bat-outs">'),d.b(d.v(d.f("o",a,b,0))),d.b("&nbsp;out"),d.s(d.f("multipleOuts",a,b,1),a,b,0,670,671,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("s")}),a.pop()),d.b("</span>"),d.b("\n"+c)}),a.pop()),d.b("				</td>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c),d.b("		</table>"),d.b("\n"+c)),d.s(d.f("isAction",a,b,1),a,b,0,772,1015,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("		<div>"),d.b("\n"+c),d.b('			<span class="action-event">'),d.b(d.v(d.f("event",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			<br />"),d.b("\n"+c),d.b('			<span class="action-summary">'),d.b("\n"+c),d.b("				"),d.s(d.f("desWithBoldNames",a,b,1),a,b,0,896,918,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.t(c.f("desWithBoldNames",a,b,0)))}),a.pop()),d.b("\n"+c),d.b("				"),d.s(d.f("desWithBoldNames",a,b,1),a,b,1,0,0,"")||d.b(d.v(d.f("des",a,b,0))),d.b("\n"+c),d.b("			</span>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c)}),a.pop()),d.b('	<div style="clear:both"></div>'),d.b("\n"+c),d.b("</li>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-gameday/templates/pitcherBatter",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('	<ul class="pitcher-batter">'),d.b("\n"+c),d.b("		<li>"),d.b("\n"+c),d.b('			<div class="player pitcher">'),d.b("\n"+c),d.b('				<div class="player-mug">'),d.b("\n"+c),d.b("						<img "),d.b("\n"+c),d.b('						alt="'),d.b(d.v(d.f("pitcherName",a,b,0))),d.b('" '),d.b("\n"+c),d.b('						src="http://gdx.mlb.com/images/gameday/mugshots/mlb/'),d.b(d.v(d.f("pitcherId",a,b,0))),d.b('.jpg" '),d.b("\n"+c),d.b('						height="51" '),d.b("\n"+c),d.b("						onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("						/>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b('				<div class="meta"><strong>PITCHING</strong></div>'),d.b("\n"+c),d.b('				<div class="name">'),d.b("\n"+c),d.b("					<strong>"),d.b(d.v(d.f("pitcherName",a,b,0))),d.b("</strong> <span> "),d.b(d.v(d.f("pitcherThrows",a,b,0))),d.b("HP</span> <span> #"),d.b(d.v(d.f("pitcherNumber",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b('				<div class="line">'),d.b("\n"+c),d.b('					<span class="first-span">'),d.b(d.v(d.f("pitcherEra",a,b,0))),d.b(" ERA</span>"),d.b("\n"+c),d.s(d.f("gameIsLive",a,b,1),a,b,0,654,727,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("					<span>"),d.b(d.v(d.f("pitcherIP",a,b,0))),d.b(" IP</span>"),d.b("\n"+c),d.b("					<span>"),d.b(d.v(d.f("pitcherK",a,b,0))),d.b("K</span>"),d.b("\n"+c)}),a.pop()),d.s(d.f("gameIsLive",a,b,1),a,b,1,0,0,"")||(d.b("					<span>"),d.b(d.v(d.f("pitcherS_IP",a,b,0))),d.b(" IP</span>"),d.b("\n"+c),d.b("					<span>"),d.b(d.v(d.f("pitcherS_K",a,b,0))),d.b("K</span>"),d.b("\n"+c)),d.b("					<span>"),d.b(d.v(d.f("pitcherPitches",a,b,0))),d.b("P</span>"),d.b("\n"+c),d.b("					<span>("),d.b(d.v(d.f("pitcherStrikes",a,b,0))),d.b("S,</span>"),d.b("\n"+c),d.b("					<span>"),d.b(d.v(d.f("pitcherBalls",a,b,0))),d.b("B),</span>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div style="clear:both"></div>'),d.b("\n"+c),d.b("		</li>"),d.b("\n"+c),d.b("		<li>"),d.b("\n"+c),d.b('			<div class="player batter">'),d.b("\n"+c),d.b('				<div class="player-mug">'),d.b("\n"+c),d.b("						<img "),d.b("\n"+c),d.b('						alt="'),d.b(d.v(d.f("batterName",a,b,0))),d.b('" '),d.b("\n"+c),d.b('						src="http://gdx.mlb.com/images/gameday/mugshots/mlb/'),d.b(d.v(d.f("batterId",a,b,0))),d.b('.jpg" '),d.b("\n"+c),d.b('						height="51" '),d.b("\n"+c),d.b("						onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("						/>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b('				<div class="meta"><strong>AT BAT</strong></div>'),d.b("\n"+c),d.b('				<div class="name">'),d.b("\n"+c),d.b("					<strong>"),d.b(d.v(d.f("batterName",a,b,0))),d.b("</strong> "),d.b("\n"+c),d.b("					<span>"),d.b(d.v(d.f("batterPosition",a,b,0))),d.b("</span> "),d.b("\n"+c),d.b("					<span>#"),d.b(d.v(d.f("batterNumber",a,b,0))),d.b("</span> "),d.b("\n"+c),d.b("					<span>("),d.b(d.v(d.f("batterStand",a,b,0))),d.b(")</span>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b('				<div class="line">'),d.b("\n"+c),d.b('					<span class="first-span">'),d.b(d.v(d.f("batterHits",a,b,0))),d.b("-for-"),d.b(d.v(d.f("batterAtBats",a,b,0))),d.b(",</span>"),d.b("\n"+c),d.b("					<span>"),d.b(d.v(d.f("batterAvg",a,b,0))),d.b(" AVG</span>"),d.b("\n"+c),d.b("					<span>"),d.b(d.v(d.f("batterHR",a,b,0))),d.b(" HR</span>"),d.b("\n"+c),d.b("					<span>"),d.b(d.v(d.f("batterRBI",a,b,0))),d.b(" RBI</span>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div style="clear:both"></div>'),d.b("\n"+c),d.b("		</li>"),d.b("\n"+c),d.b("	</ul>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlbtv-widget-gameday/views/PlaysView",["jquery","underscore","backbone","mlb-tv-app/app/view/BaseView","hgn!../templates/play","hgn!../templates/pitcherBatter"],function(a,b,c,d,e,f){var g=d.extend({tagName:"ul",className:"nano-content",previousOuts:4,playerNames:[],playsScroll:void 0,isScrolling:void 0,render:function(){console.log("PlaysView.render()"),this.$el.html(e())},updatePlays:function(a){if(!this.isScrolling){this.playsScroll&&this.destroyPlaysScroll(),this.previousOuts=4;var b=this;this.$el.html("");for(var c=a.length,d=0;c>d;d++){var f=a[d];f.newOut=b.checkIfNewOut(f),f.multipleOuts=b.checkMultipleOuts(f),f.desWithBoldNames=b.boldPlayerNames(f.des),this.$el.append(e(f))}this.createPlaysScroll()}},checkIfNewOut:function(a){var b=a.o;return!a.isAction&&0!=b&&b<this.previousOuts?(this.previousOuts=b,!0):(0==b&&(this.previousOuts=4),!1)},checkMultipleOuts:function(a){return 1==a.o?!1:!0},storePlayerNames:function(a){this.playerNames=[],this.playerNames=a},boldPlayerNames:function(a){for(var b=!1,c=a,d=this.playerNames,e=d.length,f=0;e>f;f++){var g=d[f].first,h=d[f].last,i=a.indexOf(g);if(i>-1){var j="<strong>"+g+"</strong>";c=c.replace(g,j),b=!0}var k=a.indexOf(h);if(k>-1){var l="<strong>"+h+"</strong>";c=c.replace(h,l),b=!0}}return b?c:!1},destroyPlaysScroll:function(){this.playsScroll.destroy(),this.playsScroll=null},createPlaysScroll:function(){if(window.IScroll){var a=document.getElementById("plays-gameday-widget");if(a){this.playsScroll=new window.IScroll(a,{bounce:!1,disableTouch:!0,scrollbars:"custom",interactiveScrollbars:!0,mouseWheel:!0});var b=this;setTimeout(function(){b.playsScroll.refresh()},0),this.playsScroll.off("scroll"),this.playsScroll.on("scroll",function(){b.isScrolling=!0}),this.playsScroll.off("scrollEnd"),this.playsScroll.on("scrollEnd",function(){b.isScrolling=!1})}}},updatePitcherBatterView:function(b){if(b.play&&b.players){var c=b.play.pitcher.pid,d=b.players.findPlayer(c),e=b.play.batter.pid,g=b.players.findPlayer(e),h=b.play.gamestate,i=this.getGamestate(h),j=this.getPitcherBoxData(b,c),k=b.play.batter.ab;k.constructor===Array&&(k=k[0]);var l={pitcherName:b.play.pitcher.boxname,pitcherId:c,pitcherThrows:b.play.pitcher.p_throws,pitcherEra:b.play.pitcher.era,pitcherIP:j.ip,pitcherK:j.so,pitcherS_IP:j.s_ip,pitcherS_K:j.s_so,pitcherPitches:b.play.pitcher.pitches,pitcherStrikes:b.play.pitcher.strikes,pitcherBalls:b.play.pitcher.balls,pitcherNumber:d.num,pitcherTeam:d.parent_team_abbrev,batterName:b.play.batter.boxname,batterTeam:g.parent_team_abbrev,batterId:e,batterPosition:b.play.batter.current_position,batterStand:b.play.batter.stand,batterAvg:b.play.batter.avg,batterNumber:g.num,batterAtBats:k,batterHits:b.play.batter.h,batterHR:g.hr,batterRBI:g.rbi,gameIsLive:i};console.log("pitcher / batter update in plays view",l),a(".pitcher-batter").remove(),a("#pitcherBatter-gameday-widget").prepend(f(l))}},getPitcherBoxData:function(a,b){if(thisPitcher=a.players.findPlayer(b),thisPitcher){var c=[];c=a.boxscore.home.id==thisPitcher.parent_team_id?a.boxscore.home.pitchers:a.boxscore.away.pitchers;var d=c.length-1,e=c[d];return e}},getGamestate:function(a){var b;switch(a){case"In Progress":case"Replay":case"Live":case"Instant Replay":b=!0;break;case"Warmup":case"Preview":case"Pre-Game":case"Delayed Start":case"Postponed":case"Final":case"Game Over":case"Completed Early":case"Forfeit":case"Cancelled":case"Wrapup":case"Delayed":case"Suspended":b=!1;break;default:b=!1}return b}});return g}),function(a,b){"function"==typeof define&&define.amd?define("bam.cookies/cookies",[],b):"object"==typeof exports?module.exports=b():a.bamCookies=b()}(this,function(){"use strict";var a=new RegExp("[A-Za-z0-9_-]+"),b=";",c="string",d="date",e="boolean",f="object",g="value",h=["name","expires","path","domain","secure"],i=new RegExp("number|string|boolean"),j=new RegExp("([A-Za-z0-9_-|@\\.]+)=([^;]*)","ig"),k=encodeURIComponent,l=decodeURIComponent,m={};return m.set=function(){var j,l=[],m=$.makeArray(arguments),n=2===m.length&&$.type(m[0])===c?{name:m[0],value:m[1]}:m[0];$.type(n)===f&&$.each(h,function(b,f){if(j=f in n?n[f]:null,f!==h[2]||j||(j="/"),null!==j)switch(f){case h[0]:if($.type(j)!==c||!a.test(j)||!i.test($.type(n[g]||null)))return!1;l.push(j+"="+k(n[g]));break;case h[1]:$.type(j)===d&&l.push(f+"="+j.toGMTString());break;case h[2]:$.type(j)===c&&l.push(f+"="+(j||"/"));break;case h[4]:$.type(j)===e&&j&&l.push(f);break;default:$.type(j)===c&&j&&l.push(f+"="+j)}}),l.length&&(document.cookie=l.join(b))},m.setBulk=function(){var a=$.makeArray(arguments),b=a.length&&$.isArray(a[0])?a[0]:a,c=b.length;if(c)for(;c--;)this.set(b[c])},m.get=function(a){return this.getAll()[a]||null},m.getAll=function(){var a={};return l(document.cookie).replace(j,function(){a[arguments[1]]=arguments[2]}),a},m.remove=function(){var a=$.makeArray(arguments),b={expires:new Date,value:-1};if(b.expires.setTime(b.expires-1),a.length){switch($.type(a[0])){case c:b.name=a[0];break;case f:b=$.extend(a[0],b);break;default:return!1}this.set(b)}},m.removeBulk=function(){var a=$.makeArray(arguments),b=a.length&&$.isArray(a[0])?a[0]:a,c=b.length;if(c)for(;c--;)this.remove(b[c])},m}),define("tracking/omniture",["bam.cookies/cookies"],function(a){function b(){return"phone"===window.DeviceType.device?"Smartphone":x(window.DeviceType.device)}function c(a,b){return a.prototype=Object.create(b&&b.prototype||e.prototype),a}function d(){return h=h||$("<div style='display:hidden' hidden></div>")}function e(a){this.props=a||{}}function f(a){return this instanceof f?(e.call(this,a),void this.assign()):new f(a)}function g(c){var d=v(),f={site_formFactor:b(),site_orientation:d},g={user_ipid:a.get("ipid")};$.extend(c,g,f),e.call(this,c)}var h,i=window.s,j="undefined"==typeof j?{}:j,k="",l=/\s*;\s*/,m=/(?:^|([\W_-]))(\w)/g,n={open:'<img src="',close:'"/>'},o="prop",p="eVar",q=0,r=75,s={dynamicView:"Dynamic Page View"},t={},u={prop1:"site_sectionTitle",prop2:"content_articleId",prop3:"site_playerId",prop4:"user_searchTerms",prop5:"site_formFactor",prop6:"site_orientation",prop10:"content_mediawallCid",prop12:"dynamic_component",prop14:"dynamic_componentAction",prop16:"component",prop17:"component_activity",prop18:"media_mpSponsor",prop20:"media_mpIpid",prop22:"user_ipid",prop25:"media_streamId",prop26:"media_playerType",prop27:"media_playerContext",prop28:"media_playerVersion",prop29:"media_streamType",prop30:"media_streamTitle",prop32:"media_streamVideo",prop40:"gameday_matchup",prop43:"media_streamPlayer",prop47:"media_streamState",prop49:"media_embedHost",prop56:"content_mediaWall3rd",prop58:"media_embedId",prop61:"content_articleHeadline",prop62:"content_articleAuthor",prop63:"content_articleSponsor",prop65:"site_club",prop66:"user_deviceId",prop67:"user_deviceManufacturer",prop68:"user_deviceCarrier",prop69:"user_cookie",prop70:"user_ip",prop71:"gameday_inning",prop72:"user_userAgent",eVar4:"site_affiliateId",eVar5:"action_download",eVar6:"media_mpOffer",eVar7:"media_mpFlow",eVar8:"media_mpSkin",eVar9:"media_mpEntryPoint",eVar10:"action_click",eVar13:"media_videoStart",eVar14:"tcid",eVar17:"gameday_premiumConversion",eVar19:"content_mediawallCid",eVar21:"ticket_decisionLink",eVar22:"ticket_finalLink",eVar23:"action_formId",eVar26:"site_searchPosition",eVar27:"site_searchType",eVar28:"media_streamId",eVar41:"user_searchQuery",eVar49:"media_embedHost",eVar51:"ticket_waitId",eVar52:"ticket_waitHost",eVar59:"content_embedHost"},v=function(){var a=window.innerWidth||document.documentElement.clientWidth,b=window.innerHeight||document.documentElement.clientHeight,c=b>=a?"Portrait":"Landscape";return c},w=function(a,b,c){return(b||"")+c.toUpperCase()},x=function(a){return(a||"").toLowerCase().replace(m,w)},y=function(a){if(!a&&t.ipid)return t;for(var b,c=0,d={},e=document.cookie.split(l),f=e.length;f>c;c++)b=e[c].split("="),d[b[0]]=b[1];return t=d};for(e.prototype={assign:function(a){a=a||i;var b,c,d,e=this.props,f=this.propertyMap,g=this.generators;for(b in e)a.hasOwnProperty(b)&&(this[b]=e[b]);for(b in this)c=f[b],d=e[c],d&&(this[b]=d),(this.hasOwnProperty(b)||a.hasOwnProperty(b))&&(a[b]=this[b]);for(b in g)d=g[b](this,e),(d||a[b])&&(a[b]=d||k);return a},drawPixel:function(a){return a?$("<"===a.toString().charAt(0)?a:n.open+a+n.close).appendTo(d()):!1},fire:function(){var a=i.t();return this.s_code=a,a?this.drawPixel(a):!1},generators:{prop5:function(a,b){return x(a.prop5)},prop6:function(a,b){return x(a.prop6)},prop7:function(a,b){return a.prop7||a.prop5&&this.prop5(a,b)+": "+this.prop6(a,b)},prop11:function(a,b){return(a.prop11||b.isDynamic)&&s.dynamicView},prop13:function(a,b){return a.pageName||i.pageName},prop15:function(a,b){return a.prop7||a.prop5&&this.prop5(a,b)+": "+this.prop6(a,b)},prop20:function(a,b){return a.prop20||a.prop22||y().ipid},prop22:function(a,b){return a.prop22||y().ipid},prop31:function(a,b){return a.prop25&&this.prop22(a,b)},evar11:function(a,b){return b.isDynamic&&this.prop22(a,b)},evar18:function(a,b){return a.prop25&&this.prop22(a,b)},eVar34:function(a,b){return this.prop5(a,b)},eVar35:function(a,b){return this.prop6(a,b)},eVar36:function(a,b){return this.prop7(a,b)},evar40:function(a){return a.prop40}},addEvents:function(a){var b=this.events?this.events.split(","):[];return this.events=b.concat(a||"".split(",")).join(",")},props:{},propertyMap:u};r>q;q++)e.prototype[o+q]=e.prototype[p+q]=k;return e.prototype.events=k,f.prototype=e.prototype,c(g).prototype.fire=function(a){a=a||{href:"http://myGenericURL"},i.tl(a,"o",this.prop14||this.prop1||this.prop38||this.prop44||this.prop45||this.prop16||this.prop17||this.prop27||this.prop23||this.prop28||this.events)},j.Tracking={OmnitureAsync:g,OmnitureMobile:f,Omniture:e,capitalize:x,create:c,getUserData:y}}),define("mlb-tv-app/app/tracking/TrackingManager",["jquery","tracking/omniture"],function(a,b){function c(){}return a.extend(c.prototype,{config:void 0,trackingEventsMap:void 0,omnitureTrackingEventsMap:void 0,initialize:function(a){this.config=a;try{this.trackingEventsMap=this.config.app.trackingEventsMap,this.trackingEventsMap&&(this.omnitureTrackingEventsMap=this.trackingEventsMap.omniture)}catch(b){console.error("TrackingManager: Error loading omniture trackingEventsMap")}},trackByImpressionKey:function(a){if(a){var b=this.getImpressionData(a);b&&(b.media_mpSponsor="MLB",b.isDynamic=!0,this.trackOmniture(b))}},trackByImpressionKeyWithError:function(a,b){if(a){var c=this.getImpressionData(a);c&&(c.media_mpSponsor="MLB",c.isDynamic=!0,c.component_activity=c.component_activity+": "+b,this.trackOmniture(c))}},trackByImpressionKeyWithTeam:function(a,b){if(a){var c=this.getImpressionData(a);c&&(c.media_mpSponsor="MLB",c.isDynamic=!0,c.component_activity=c.component_activity.replace(/@@TEAM_CODE@@/g,b),this.trackOmniture(c))}},trackByImpressionKeyWithFeedDetails:function(a,b,c,d){if(a){var e=this.getImpressionData(a);e&&(e.media_mpSponsor="MLB",e.isDynamic=!0,e.component_activity=e.component_activity.replace(/@@MEDIA_CODE@@/g,this.capitalizeFirstLetter(b)),e.component_activity=e.component_activity.replace(/@@FEED_ASSOCIATION_CODE@@/g,this.capitalizeFirstLetter(c)),e.component_activity=e.component_activity.replace(/@@TEAM_CODE_AND_CALL_LETTERS@@/g,d),this.trackOmniture(e))}},getImpressionData:function(b){if(b&&this.omnitureTrackingEventsMap){var c=this.omnitureTrackingEventsMap[b];if("undefined"!=typeof c)return a.extend(!0,{},c)}return null},capitalizeFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},track:function(a){this.trackOmniture(a)},trackOmniture:function(a){var c=new b.OmnitureAsync(a);c.assign(),c.fire()},usesTrackingSuite:function(b){return a.inArray(b,this.config.trackingScenarios)>=0},TODAYS_GAME_VIEW_ALL_SCORES:"TODAYS_GAME_VIEW_ALL_SCORES",TODAYS_GAME_BACK_TO_GAME:"TODAYS_GAME_BACK_TO_GAME",TODAYS_GAME_GAME_SELECT:"TODAYS_GAME_GAME_SELECT",CALENDAR_ICON_CLICK:"CALENDAR_ICON_CLICK",CALENDAR_ICON_DAY_SELECT_CLICK:"CALENDAR_ICON_DAY_SELECT_CLICK",CALENDAR_TODAY_BUTTON_CLICK:"CALENDAR_TODAY_BUTTON_CLICK",IN_GAME_HIGHLIGHTS_CLICK:"IN_GAME_HIGHLIGHTS_CLICK",AROUND_THE_LEAGUE_HIGHLIGHTS_CLICK:"AROUND_THE_LEAGUE_HIGHLIGHTS_CLICK",IN_GAME_HIGHLIGHTS_NEXT_CLICK:"IN_GAME_HIGHLIGHTS_NEXT_CLICK",IN_GAME_HIGHLIGHTS_PREVIOUS_CLICK:"IN_GAME_HIGHLIGHTS_PREVIOUS_CLICK",AROUND_THE_LEAGUE_HIGHLIGHTS_NEXT_CLICK:"AROUND_THE_LEAGUE_HIGHLIGHTS_NEXT_CLICK",AROUND_THE_LEAGUE_HIGHLIGHTS_PREVIOUS_CLICK:"AROUND_THE_LEAGUE_HIGHLIGHTS_PREVIOUS_CLICK",IN_GAME_HIGHLIGHTS_SORT_BY_CLICK:"IN_GAME_HIGHLIGHTS_SORT_BY_CLICK",AROUND_THE_LEAGUE_HIGHLIGHTS_SORT_BY_CLICK:"AROUND_THE_LEAGUE_HIGHLIGHTS_SORT_BY_CLICK",BOX_SCORE_TEAM_SELECT_CLICK:"BOX_SCORE_TEAM_SELECT_CLICK",FEED_SELECTOR_CLICK:"FEED_SELECTOR_CLICK",PLAYER_LAUNCH_NOT_LOGGED_IN:"PLAYER_LAUNCH_NOT_LOGGED_IN",PLAYER_LAUNCH_LOGGED_IN:"PLAYER_LAUNCH_LOGGED_IN",PLAYER_LAUNCH_UPGRADE_OFFER:"PLAYER_LAUNCH_UPGRADE_OFFER",PLAYER_LAUNCH_ERROR:"PLAYER_LAUNCH_ERROR",FANTASY_ALERT_SHOW:"FANTASY_ALERT_SHOW",FANTASY_ALERT_CLICKTHRU:"FANTASY_ALERT_CLICKTHRU"}),new c}),define("hgn!mlbtv-widget-gameday/templates/gameday/BoxScore",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('	<section id="boxscore" data-view="'),d.b(d.v(d.f("active",a,b,0))),d.b('" class="padded-view gd-primary-regular">'),d.b("\n"),d.b("\n"+c),d.b('		<header class="screen_reader">'),d.b("\n"+c),d.b("			<h1>Box Score</h1>"),d.b("\n"+c),d.b("		</header>"),d.b("\n"+c),d.b(d.rp("<embedded_linescore0",a,b,"		")),d.b('		<nav class="secondary">'),d.b("\n"+c),d.b('			<ul class="tab-bar tabs">'),d.b("\n"+c),d.b('				<li data-view="0" '),d.s(d.f("isHomeBatting",a,b,1),a,b,1,0,0,"")||d.b('class="active"'),d.b('><a href="#">'),d.b(d.v(d.d("teams.away.name_brief",a,b,0))),d.b("</a></li>"),d.b("\n"+c),d.b('				<li data-view="1" '),d.s(d.f("isHomeBatting",a,b,1),a,b,0,397,411,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('class="active"')}),a.pop()),d.b('><a href="#">'),d.b(d.v(d.d("teams.home.name_brief",a,b,0))),d.b("</a></li>"),d.b("\n"+c),d.b("			</ul>"),d.b("\n"+c),d.b("		</nav>"),d.b("\n"+c),d.b('		<div class="iscroll-container">'),d.b("\n"+c),d.b('			<div class="iscroll-content">'),d.b("\n"+c),d.b('				<section class="box away secondary-content" data-view="0">'),d.b("\n"),d.b("\n"+c),d.b('					<header class="screen_reader">'),d.b("\n"+c),d.b("						<h2>"),d.b(d.v(d.d("teams.away.name_brief",a,b,0))),d.b("</h2>"),d.b("\n"+c),d.b("					</header>"),d.b("\n"),d.b("\n"+c),d.b('					<section class="batting stats clearfix">'),d.b("\n"+c),d.s(d.f("away",a,b,1),a,b,0,780,808,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<batting1",a,b,"							"))}),a.pop()),d.b("					</section>"),d.b("\n"),d.b("\n"+c),d.b('					<section class="pitching stats clearfix">'),d.b("\n"+c),d.s(d.f("away",a,b,1),a,b,0,897,926,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<pitching2",a,b,"							"))}),a.pop()),d.b("					</section>"),d.b("\n"),d.b("\n"+c),d.b("				</section>"),d.b("\n"),d.b("\n"+c),d.b('				<section class="box home secondary-content" data-view="1">'),d.b("\n"),d.b("\n"+c),d.b('					<header class="screen_reader">'),d.b("\n"+c),d.b("						<h2>"),d.b(d.v(d.d("teams.home.name_brief",a,b,0))),d.b("</h2>"),d.b("\n"+c),d.b("					</header>"),d.b("\n"),d.b("\n"+c),d.b('					<section class="batting stats clearfix">'),d.b("\n"+c),d.s(d.f("home",a,b,1),a,b,0,1187,1215,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<batting3",a,b,"							"))}),a.pop()),d.b("					</section>"),d.b("\n"),d.b("\n"+c),d.b('					<section class="pitching stats clearfix">'),d.b("\n"+c),d.s(d.f("home",a,b,1),a,b,0,1304,1333,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<pitching4",a,b,"							"))}),a.pop()),d.b("					</section>"),d.b("\n"),d.b("\n"+c),d.b("				</section>"),d.b("\n"+c),d.b('			<div class="bench-wrapper">'),d.b("\n"+c),d.b('					<section class="box bench away secondary-content clearfix" data-view="0">'),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b('						<header class="screen_reader">'),d.b("\n"+c),d.b("							<h2>"),d.b(d.v(d.d("teams.away.name_brief",a,b,0))),d.b("</h2>"),d.b("\n"+c),d.b("						</header>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b('						<section class="bench stats clearfix">'),d.b("\n"+c),d.s(d.d("benches.away",a,b,1),a,b,0,1653,1688,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<battingBench5",a,b,"								"))}),a.pop()),d.b("						</section>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b('						<section class="bullpen stats clearfix">'),d.b("\n"+c),d.s(d.d("benches.away",a,b,1),a,b,0,1796,1834,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<pitchingBullpen6",a,b,"								"))}),a.pop()),d.b("						</section>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b("					</section>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b('					<section class="box bench home secondary-content clearfix" data-view="1">'),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b('						<header class="screen_reader">'),d.b("\n"+c),d.b("							<h2>"),d.b(d.v(d.d("teams.home.name_brief",a,b,0))),d.b("</h2>"),d.b("\n"+c),d.b("						</header>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b('						<section class="bench stats clearfix">'),d.b("\n"+c),d.s(d.d("benches.home",a,b,1),a,b,0,2136,2171,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<battingBench7",a,b,"								"))}),a.pop()),d.b("						</section>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b('						<section class="bullpen stats clearfix">'),d.b("\n"+c),d.s(d.d("benches.home",a,b,1),a,b,0,2279,2317,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<pitchingBullpen8",a,b,"								"))}),a.pop()),d.b("						</section>"),d.b("\n"+c),d.b("					"),d.b("\n"+c),d.b("					</section>"),d.b("\n"+c),d.b("					"),d.b("\n"+c),d.b('					<section class="box game">'),d.b("\n"+c),d.b('						<header class="screen_reader">'),d.b("\n"+c),d.b("							<h2>Game Info</h2>"),d.b("\n"+c),d.b("						</header>"),d.b("\n"+c),d.b('						<div class="info gd-primary-light">'),d.b("\n"+c),d.b("							"),d.b(d.t(d.f("game_info",a,b,0))),d.b("\n"+c),d.b("						</div>"),d.b("\n"+c),d.b("					</section>"),d.b("\n"+c),d.b("					"),d.b("\n"+c),d.b("				</section>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	<div>"),d.fl()},partials:{"<embedded_linescore0":{name:"embedded_linescore",partials:{},subs:{}},"<batting1":{name:"batting",partials:{},subs:{}},"<pitching2":{name:"pitching",partials:{},subs:{}},"<batting3":{name:"batting",partials:{},subs:{}},"<pitching4":{name:"pitching",partials:{},subs:{}},"<battingBench5":{name:"battingBench",partials:{},subs:{}},"<pitchingBullpen6":{name:"pitchingBullpen",partials:{},subs:{}},"<battingBench7":{name:"battingBench",partials:{},subs:{}},"<pitchingBullpen8":{name:"pitchingBullpen",partials:{},subs:{}}},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-gameday/templates/gameday/batting",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("	<h6> Batting </h6>"),d.b("\n"+c),d.b("	<table>"),d.b("\n"+c),d.b("		<thead>"),d.b("\n"+c),d.b("			<tr>"),d.b("\n"+c),d.b("				<th>Batters</th>"),d.b("\n"+c),d.b("				<th>AB</th>"),d.b("\n"+c),d.b("				<th>R</th>"),d.b("\n"+c),d.b("				<th>H</th>"),d.b("\n"+c),d.b("				<th>RBI</th>"),d.b("\n"+c),d.b("				<th>BB</th>"),d.b("\n"+c),d.b("				<th>SO</th>"),d.b("\n"+c),d.b("				<th>LOB</th>"),d.b("\n"+c),d.b("				<th>AVG</th>"),d.b("\n"+c),d.b("				<th></th>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c),d.b("		</thead>"),d.b("\n"+c),d.b("		<tbody>"),d.b("\n"+c),d.s(d.f("batters",a,b,1),a,b,0,255,612,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.s(d.f("bo",a,b,1),a,b,0,266,602,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("				<tr "),d.b(d.t(d.f("isActive",a,b,0))),d.b(">"),d.b("\n"+c),d.b("					<td"),d.s(d.f("isSubstitute",a,b,1),a,b,0,315,327,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(' class="sub"')}),a.pop()),d.b('><a href="#player='),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b(d.v(d.f("note",a,b,0))),d.b(d.v(d.f("name",a,b,0))),d.b(", "),d.b(d.v(d.f("pos",a,b,0))),d.b("</a></td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("ab",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("rbi",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("bb",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("so",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("lob",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("avg",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td></td>"),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c)}),a.pop())}),a.pop()),d.b("\n"+c),d.s(d.f("batterTotals",a,b,1),a,b,0,645,868,"{{ }}")&&(d.rs(a,b,function(a,b,d){
d.b('			<tr class="totals">'),d.b("\n"+c),d.b("				<td>Totals</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("ab",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("rbi",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("bb",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("so",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("lob",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td></td>"),d.b("\n"+c),d.b("				<td></td>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.b("		</tbody>"),d.b("\n"+c),d.b("	</table>"),d.b("\n"),d.b("\n"+c),d.b('	<div class="info gd-primary-light">'),d.b("\n"+c),d.b("		"),d.b(d.t(d.f("info",a,b,0))),d.b("\n"+c),d.b("		"),d.b(d.t(d.f("text_data",a,b,0))),d.b("\n"+c),d.b("	</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-gameday/templates/gameday/battingBench",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("	<h6> Bench </h6>"),d.b("\n"+c),d.b("	<table>"),d.b("\n"+c),d.b("		<thead>"),d.b("\n"+c),d.b("			<tr>"),d.b("\n"+c),d.b("				<th>Bench</th>"),d.b("\n"+c),d.b("				<th>B</th>"),d.b("\n"+c),d.b("				<th>Pos</th>"),d.b("\n"+c),d.b("				<th>AVG</th>"),d.b("\n"+c),d.b("				<th>G</th>"),d.b("\n"+c),d.b("				<th>AB</th>"),d.b("\n"+c),d.b("				<th>R</th>"),d.b("\n"+c),d.b("				<th>H</th>"),d.b("\n"+c),d.b("				<th>HR</th>"),d.b("\n"+c),d.b("				<th>RBI</th>"),d.b("\n"+c),d.b("				<th></th>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c),d.b("		</thead>"),d.b("\n"+c),d.b("		<tbody>"),d.b("\n"+c),d.s(d.f("batters",a,b,1),a,b,0,265,543,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("			<tr "),d.b(d.t(d.f("isActive",a,b,0))),d.b(">"),d.b("\n"+c),d.b('				<td><a href="#player='),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b(d.v(d.f("last",a,b,0))),d.b("</a></td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("b",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("pos",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("avg",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("g",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("ab",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("hr",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("rbi",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td></td>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.b("		</tbody>"),d.b("\n"+c),d.b("	</table>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-gameday/templates/gameday/pitching",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("	<h6> Pitching </h6>"),d.b("\n"+c),d.b("	<table>"),d.b("\n"+c),d.b("		<thead>"),d.b("\n"+c),d.b("			<tr>"),d.b("\n"+c),d.b("				<th>Pitchers</th>"),d.b("\n"+c),d.b("				<th>IP</th>"),d.b("\n"+c),d.b("				<th>H</th>"),d.b("\n"+c),d.b("				<th>R</th>"),d.b("\n"+c),d.b("				<th>ER</th>"),d.b("\n"+c),d.b("				<th>BB</th>"),d.b("\n"+c),d.b("				<th>SO</th>"),d.b("\n"+c),d.b("				<th>HR</th>"),d.b("\n"+c),d.b("				<th>ERA</th>"),d.b("\n"+c),d.b("				<th></th>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c),d.b("		</thead>"),d.b("\n"+c),d.b("		<tbody>"),d.b("\n"+c),d.s(d.f("pitchers",a,b,1),a,b,0,256,522,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("			<tr>"),d.b("\n"+c),d.b('				<td><a href="#player='),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b(d.v(d.f("name",a,b,0))),d.b("</a> <span>"),d.b(d.v(d.f("note",a,b,0))),d.b("</span></td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("ip",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("er",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("bb",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("so",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("hr",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("era",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td></td>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.s(d.f("pitcherTotals",a,b,1),a,b,0,557,784,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('			<tr class="totals">'),d.b("\n"+c),d.b("				<td>Totals</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("total_ip",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("er",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("bb",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("so",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("hr",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td></td>"),d.b("\n"+c),d.b("				<td></td>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c)}),a.pop()),d.b("		</tbody>"),d.b("\n"+c),d.b("	</table>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b('	<div class="info gd-primary-light">'),d.b("\n"+c),d.b("		<!-- this isn't the correct data	"),d.b("\n"+c),d.b("		"),d.b(d.t(d.f("info",a,b,0))),d.b("\n"+c),d.b("		"),d.b(d.t(d.f("text_data",a,b,0))),d.b(" "),d.b("\n"+c),d.b("		-->"),d.b("\n"+c),d.b("	</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-gameday/templates/gameday/pitchingBullpen",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("	<table>"),d.b("\n"+c),d.b("		<thead>"),d.b("\n"+c),d.b("			<tr>"),d.b("\n"+c),d.b("				<th>Bullpen</th>"),d.b("\n"+c),d.b("				<th>T</th>"),d.b("\n"+c),d.b("				<th>IP</th>"),d.b("\n"+c),d.b("				<th>H</th>"),d.b("\n"+c),d.b("				<th>BB</th>"),d.b("\n"+c),d.b("				<th>SO</th>"),d.b("\n"+c),d.b("				<th>ERA</th>"),d.b("\n"+c),d.b("				<th></th>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c),d.b("		</thead>"),d.b("\n"+c),d.b("		<tbody>"),d.b("\n"+c),d.s(d.f("pitchers",a,b,1),a,b,0,202,406,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("			<tr>"),d.b("\n"+c),d.b('				<td><a href="#player='),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b(d.v(d.f("last",a,b,0))),d.b("</a></td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("t",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("ip",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("bb",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("so",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td>"),d.b(d.v(d.f("era",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				<td></td>"),d.b("\n"+c),d.b("			</tr>"),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.b("		</tbody>"),d.b("\n"+c),d.b("	</table>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-gameday/templates/gameday/linescore",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('	<section class="embedded_linescore gd-primary-light '),d.b(d.v(d.d("linescore.linescore_skin",a,b,0))),d.b('">'),d.b("\n"+c),d.s(d.f("linescore",a,b,1),a,b,0,99,2333,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="embedded_linescore_container">'),d.b("\n"+c),d.b('			<div class="fixed">'),d.b("\n"+c),d.b('				<table class="secondary teams" cellspacing="0" cellpadding="0" border="0">'),d.b("\n"+c),d.b("				<thead>"),d.b("\n"+c),d.b("				<tr>"),d.b("\n"+c),d.b('					<th class="show_default spacer first">'),d.b("\n"+c),d.b('						<span class="full">'),d.b(d.v(d.d("game.innings.state",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('						<span class="short">'),d.b(d.v(d.d("game.innings.stateShort",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("					</th>"),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c),d.b("				</thead>"),d.b("\n"+c),d.b("				<tbody>"),d.b("\n"+c),d.b('				<tr class="away">'),d.b("\n"+c),d.b('					<td class="first">'),d.b("\n"+c),d.b('						<span class="full">'),d.b(d.v(d.d("teams.away.name_brief",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('						<span class="short">'),d.b(d.v(d.d("teams.away.abbrev",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("					</td>"),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c),d.b('				<tr class="home">'),d.b("\n"+c),d.b('					<td class="first">'),d.b("\n"+c),d.b('						<span class="full">'),d.b(d.v(d.d("teams.home.name_brief",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('						<span class="short">'),d.b(d.v(d.d("teams.home.abbrev",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("					</td>"),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c),d.b("				</tbody>"),d.b("\n"+c),d.b("				</table>"),d.b("\n"+c),d.b('				<div class="inning_button prev_button hidden"><</div>'),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="right-scroll">'),d.b("\n"+c),d.b('				<table class="secondary innings" cellspacing="0" cellpadding="0" border="0">'),d.b("\n"+c),d.b("					<thead>"),d.b("\n"+c),d.b("					<tr>"),d.b("\n"+c),d.s(d.f("inning_line_score",a,b,1),a,b,0,1091,1156,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('							<th class="inningHeader  '),d.b(d.v(d.f("vis",a,b,0))),d.b('">'),d.b(d.v(d.f("inning",a,b,0))),d.b("</th>"),d.b("\n"+c)}),a.pop()),d.b("					</tr>"),d.b("\n"+c),d.b("					</thead>"),d.b("\n"+c),d.b("					<tbody>"),d.b("\n"+c),d.b('					<tr class="away">'),d.b("\n"+c),d.s(d.f("inning_line_score",a,b,1),a,b,0,1269,1387,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('								<td class="inning '),d.s(d.f("away_active",a,b,1),a,b,0,1312,1318,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("active")}),a.pop()),d.b(" "),d.b(d.v(d.f("vis",a,b,0))),d.b('" data-score="'),d.b(d.v(d.f("away",a,b,0))),d.b('">'),d.b(d.v(d.f("away",a,b,0))),d.b("</td>"),d.b("\n"+c)}),a.pop()),d.b("					</tr>"),d.b("\n"+c),d.b('					<tr class="home">'),d.b("\n"+c),d.s(d.f("inning_line_score",a,b,1),a,b,0,1473,1591,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('								<td class="inning '),d.s(d.f("home_active",a,b,1),a,b,0,1516,1522,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("active")}),a.pop()),d.b(" "),d.b(d.v(d.f("vis",a,b,0))),d.b('" data-score="'),d.b(d.v(d.f("home",a,b,0))),d.b('">'),d.b(d.v(d.f("home",a,b,0))),d.b("</td>"),d.b("\n"+c)}),a.pop()),d.b("					</tr>"),d.b("\n"+c),d.b("					</tbody>"),d.b("\n"+c),d.b("				</table>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="fixed">'),d.b("\n"+c),d.b('				<div class="runs-column-background-faker"></div>'),d.b("\n"+c),d.b('				<table class="secondary scores" cellspacing="0" cellpadding="0" border="0">'),d.b("\n"+c),d.b("				<thead>"),d.b("\n"+c),d.b("				<tr>"),d.b("\n"+c),d.b('					<th class="score">R</th>'),d.b("\n"+c),d.b("					<th>H</th>"),d.b("\n"+c),d.b("					<th>E</th>"),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c),d.b("				</thead>"),d.b("\n"+c),d.b("				<tbody>"),d.b("\n"+c),d.b('				<tr class="away">'),d.b("\n"+c),d.b('					<td class="score">'),d.b(d.v(d.f("away_team_runs",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("away_team_hits",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("away_team_errors",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c),d.b('				<tr class="home">'),d.b("\n"+c),d.b('					<td class="score">'),d.b(d.v(d.f("home_team_runs",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("home_team_hits",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					<td>"),d.b(d.v(d.f("home_team_errors",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c),d.b("				</tbody>"),d.b("\n"+c),d.b("				</table>"),d.b("\n"+c),d.b('				<div class="inning_button next_button hidden">></div>'),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.b("\n"+c)}),a.pop()),d.s(d.f("linescore",a,b,1),a,b,1,0,0,"")||(d.b('		<!--div class="no-content">data</div-->'),d.b("\n"+c)),d.b("	</section>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlbtv-widget-gameday/views/BoxscoreView",["jquery","underscore","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/tracking/TrackingManager","hgn!../templates/gameday/BoxScore","hgn!../templates/gameday/batting","hgn!../templates/gameday/battingBench","hgn!../templates/gameday/pitching","hgn!../templates/gameday/pitchingBullpen","hgn!../templates/gameday/linescore"],function(a,b,c,d,e,f,g,h,i,j,k){var l=d.extend({tagName:"div",events:{"click nav.secondary li":"handleClickTeamView"},boxscoreScroll:void 0,maxScrollTo:-1,isScrolling:void 0,homeTeamCode:void 0,awayTeamCode:void 0,currentScrollPositition:void 0,DEFAULT_INNING_TABLE:157,DEFAULT_TD_SIZE:18,handleClickTeamView:function(b){b.preventDefault(),console.log("boxscoreTeamView()"),this.currentClickActiveView=parseInt(a(b.currentTarget).attr("data-view")),this.currentClickActiveView!==this.activeView&&(1==this.currentClickActiveView?e.trackByImpressionKeyWithTeam(e.BOX_SCORE_TEAM_SELECT_CLICK,this.getTeamById(this.homeTeamCode)):e.trackByImpressionKeyWithTeam(e.BOX_SCORE_TEAM_SELECT_CLICK,this.getTeamById(this.awayTeamCode)),this.activeView=this.currentClickActiveView,a("nav.secondary .tabs li",this.$el).removeClass("active"),a('li[data-view="'+this.activeView+'"]').addClass("active"),this.$el.attr("data-view",this.activeView),a("#gameday-widget").trigger("changedTeams"))},render:function(){console.log("Boxscore.render()"),this.truncatePlayerNames();this.scoreboardDebounce=b.debounce(this.scrollToEnd,2500)},addPitchingInfo:function(a){return a},fixGameInfo:function(a){return a},update:function(b){a.isEmptyObject(b)||(void 0===this.activeView?(console.log("isHomeBatting",b.isHomeBatting),this.activeView=b.isHomeBatting?1:0,this.$el.attr("data-view",this.activeView)):b.isHomeBatting=1===this.activeView?!0:!1,this.homeTeamCode=b.home.id,this.awayTeamCode=b.away.id,this.addPitchingInfo(b),this.fixGameInfo(b),this.boxscoreScroll&&this.boxscoreScroll.destroy(),this.$el.html(f(b,{batting:g.template,battingBench:h.template,pitching:i.template,pitchingBullpen:j.template,embedded_linescore:k.template})),this.isScrolling||this.scrollToEnd(),this.handleScrollButtons(),this.truncatePlayerNames())},truncatePlayerNames:function(){for(var b=a('#boxscore a:not([href="#"])'),c=b.length,d=0;c>d;d++){var e=b[d];if(e.parentElement&&0!=e.parentElement.attributes.length)if("sub"==e.parentElement.attributes[0].nodeValue){if(e.text.length>14){var f=e.text.substr(0,14)+"...";a(e).text(f)}}else if(e.text.length>17){var f=e.text.substr(0,17)+"...";a(e).text(f)}}},getTeamById:function(a){var b="",c=a.toString(),d=teamsConfig[c];return d&&(b=d.name_abbrev),b},updateArrows:function(){var b=a(".prev_button"),c=a(".next_button"),d=a(".embedded_linescore_container .right-scroll")[0];b&&c&&d&&(this.currentScrollPositition&&0!==this.currentScrollPositition?b.removeClass("hidden"):b.hasClass("hidden")||b.addClass("hidden"),d.scrollWidth<=this.DEFAULT_INNING_TABLE||this.currentScrollPositition>=d.scrollWidth-this.DEFAULT_INNING_TABLE?c.hasClass("hidden")||c.addClass("hidden"):c.removeClass("hidden"))},handleScrollButtons:function(){var b=a(".embedded_linescore_container .right-scroll")[0];if(b){this.currentScrollPositition>=0&&(b.scrollLeft=this.currentScrollPositition);var c=this,d=a(".prev_button"),e=a(".next_button");d&&e&&(e.click(function(){b.scrollLeft+=c.DEFAULT_TD_SIZE,c.currentScrollPositition=b.scrollLeft,c.isScrolling=!0,c.updateArrows(),c.scoreboardDebounce()}),d.click(function(){b.scrollLeft+=-c.DEFAULT_TD_SIZE,c.currentScrollPositition=b.scrollLeft,c.isScrolling=!0,c.updateArrows(),c.scoreboardDebounce()}),this.scoreboardDebounce())}},scrollToEnd:function(){var b=a(".embedded_linescore_container .right-scroll")[0];b&&(b.scrollLeft=b.scrollWidth,this.isScrolling=!1,this.currentScrollPositition=b.scrollLeft,this.updateArrows())}});return l}),define("hgn!mlbtv-widget-gameday/templates/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="'),d.b(d.v(d.f("id",a,b,0))),d.b('" class="mlbtv-widget '),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b("\n"+c),d.b("	<h5>Plays & Box Score</h5>"),d.b("\n"+c),d.b('	<div id="plays-container">'),d.b("\n"+c),d.b('		<div id="pitcherBatter-'),d.b(d.v(d.f("id",a,b,0))),d.b('"></div>'),d.b("\n"+c),d.b('		<div id="plays-'),d.b(d.v(d.f("id",a,b,0))),d.b('"></div>'),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b('	<div id="boxscore-'),d.b(d.v(d.f("id",a,b,0))),d.b('"></div>'),d.b("\n"+c),d.s(d.f("disabled",a,b,1),a,b,0,230,286,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<span class="availability">'),d.b("\n"+c),d.b("			"),d.b(d.v(d.f("reason",a,b,0))),d.b("\n"+c),d.b("		</span>"),d.b("\n"+c)}),a.pop()),d.b('	<div class="gradient"></div>'),d.b("\n"+c),d.b('	<div class="view-more-container">'),d.b("\n"+c),d.b('		<div class="view-more-pipe"></div>'),d.b("\n"+c),d.b('		<div class="expand">View More</div>'),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.s(d.f("disabled",a,b,1),a,b,1,0,0,"")||d.b("\n"+c),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlbtv-widget-gameday/gameday",["jquery","underscore","backbone","scrollMonitor/scrollMonitor","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/view/BaseView","./views/PlaysView","./views/BoxscoreView","hgn!./templates/container"],function(a,b,c,d,e,f,g,h,i){var j,k,l,m,n="gameday-widget",o={container:"body"},p=f.extend({initialize:function(b){m=this,l=a.extend({},o,b),this.render()},render:function(){a(l.container).append(i({id:n})),j=new g,k=new h,j.render(),k.render();a("#plays-"+n).append(j.el),a("#boxscore-"+n).append(k.el),a(".expand").click(function(){var b=a(this).text();"View More"===b?(a(this).text("View Less"),a("#pitcherBatter-gameday-widget").css("height","initial"),a(".paddingForLastItem").attr("class","paddingSmall"),m.adjustViewMoreHeight(),j.destroyPlaysScroll(),setTimeout(function(){j.createPlaysScroll()},1e3)):(a(this).text("View More"),a(".paddingSmall").attr("class","paddingForLastItem"),m.adjustViewLessHeight(),setTimeout(function(){j.createPlaysScroll()},1e3))}),a("#gameday-widget").on("changedTeams",function(){setTimeout(function(){var a=m.isExpanded();a?m.adjustViewMoreHeight():m.adjustViewLessHeight()},500)}),m.setActiveBehavior(),m.adjustViewLessHeight()},setActiveBehavior:function(){var b=a("#"+n),c=d.create(b,-180);c.enterViewport(function(){b.addClass("activeWidget"),e.getDispatcher().publish(e.getVideoPlayerEvents().ACTIVE_WIDGET_UPDATE,n)}),c.exitViewport(function(){b.removeClass("activeWidget"),e.getDispatcher().publish(e.getVideoPlayerEvents().ACTIVE_WIDGET_REMOVE,n)})},start:function(a){console.log("if there's a poller in this widget, allow it to be started here"),console.log(n+".start()",a)},stop:function(a){console.log("if there's a poller in this widget, allow it to be stopped here"),console.log(n+".stop()",a)},update:function(a){console.log(n+".update()",a)},updatePitcherBatter:function(a){j.updatePitcherBatterView(a)},updateGameFeedWidget:function(a){j.updatePlays(a)},updateBoxscore:function(a){console.log(n+".updateBoxscoreWidget()",a),k.update(a);var b=m.isExpanded();b?m.adjustViewMoreHeight():m.adjustViewLessHeight()},stashPlayerNames:function(a){j.storePlayerNames(a)},isExpanded:function(){return"View Less"==a(".expand").text()?!0:!1},adjustViewMoreHeight:function(){var b=function(){var b=parseInt(a("#boxscore .game:visible").height()),c=parseInt(a("#boxscore .bench:visible").height());return b>c?b-c:0}(),c=parseInt(a("#boxscore").height())+b+70;400>c||a("#gameday-widget").css("height",c)},adjustViewLessHeight:function(){var b=a("#boxscore .box:visible").height()+125;400>b||a("#gameday-widget").css("height",b)}});return{GamedayWidget:p}}),define("extGamedayDatasources/extGamedayDatasources",["require","exports","module","responsive-gameday-core/src/js/GDModel/transform/DataTransformers","responsive-gameday-core/src/js/GDModel/enums/datasources/StorageKeys","responsive-gameday-core/src/js/GDUtil/window/UrlHasher","extant/extant"],function(a,b,c){var d=a("responsive-gameday-core/src/js/GDModel/transform/DataTransformers"),e=a("responsive-gameday-core/src/js/GDModel/enums/datasources/StorageKeys"),f=a("responsive-gameday-core/src/js/GDUtil/window/UrlHasher"),g=a("extant/extant"),h="prod";g(f.getHashParams().env)&&(h=f.getHashParams().env.toLowerCase());var i={gdx:"http://gdx.mlb.com",tfs:"http://lwsa.mlb.com",mlb:"http://m.mlb.com"};return"qa"===h&&(i.gdx="http://gd.qa.mlb.com",i.tfs="http://lwsa.mlb.com",i.mlb="http://mqa.mlb.com"),{PROD:{gd_flat:i.gdx,gd_tfs:i.tfs+"/tfs/tfs?file=",tfsTimecodeQuery:"&timecode="},QA:{gd_flat:i.gdx,gd_tfs:i.tfs+"/tfs/tfs?file=",tfsTimecodeQuery:"&timecode="},TEST:{gd_flat:i.gdx,gd_tfs:i.tfs+"/tfs/tfs?file=",tfsTimecodeQuery:"%26timecode="},TEST_QA:{gd_flat:i.gdx,gd_tfs:i.tfs+"/tfs/tfs?file=",tfsTimecodeQuery:"%26timecode="},players:{namespace:"{gid}",urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/players.xml",transformer:d.PlayersXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/players.xml"},env_TEST:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/players.xml"},env_TEST_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/players.xml"}},playercard:{namespace:"{gid}",urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/{playertype}s/{id}.xml",transformer:d.PlayerCardXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/{playertype}s/{id}.xml"},env_TEST:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/{playertype}s/{id}.xml"},env_TEST_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/{playertype}s/{id}.xml"}},hotcoldzone:{namespace:"{gid}",urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/premium/{playertype}s/{id}/{sit}.xml",transformer:d.HotColdZoneXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/premium/{playertype}s/{id}/{sit}.xml"},env_TEST:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/premium/{playertype}s/{id}/{sit}.xml"},env_TEST_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/premium/{playertype}s/{id}/{sit}.xml"}},game:{storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/game.xml",transformer:d.GameXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/game.xml"},env_TEST:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/game.xml"},env_TEST_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/game.xml"}},linescore:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/linescore.xml{timecode}",transformer:d.LinescoreXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/linescore.xml{timecode}"},env_TEST:{urlTemplate:"proxy.php?url=http://gdx.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/linescore.xml"},env_TEST_QA:{urlTemplate:"proxy.php?url=http://gd.qa.mlb.com/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/linescore.xml"}},miniscoreboard:{storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/miniscoreboard.xml",transformer:d.GameMiniscoreboardXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/miniscoreboard.xml"},env_TEST:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/miniscoreboard.xml"},env_TEST_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/miniscoreboard.xml"}},play:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,maxElements:1,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/plays.xml{timecode}",transform:d.PlaysXMLToModelTransformer,timeout:30,retries:3,expires:5,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/plays.xml"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/plays.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/plays.xml{timecode}"}},boxscore:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/boxscore.xml{timecode}",transformer:d.BoxscoreXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/boxscore.xml{timecode}"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/boxscore.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/boxscore.xml{timecode}"}},lineup:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,namespace:"{yyyy}_{mm}_{dd}",urlTemplate:i.mlb+"/gen/lineups/{yyyy}/{mm}/{dd}.json",transformer:d.LinesupJSONToModelTransformer,timeout:300,retries:1,env_QA:{urlTemplate:i.mlb+"/gen/lineups/{yyyy}/{mm}/{dd}.json"},env_TEST:{urlTemplate:i.mlb+"/gen/lineups/{yyyy}/{mm}/{dd}.json"},env_TEST_QA:{urlTemplate:i.mlb+"/gen/lineups/{yyyy}/{mm}/{dd}.json"}},bench:{canUseTfs:!0,storageKey:e.DATASOURCE_NAME,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/bench.xml{timecode}",transformer:d.BenchFileXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/bench.xml"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/bench.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/bench.xml{timecode}"}},inning:{canUseTfs:!0,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}",transformer:d.InningXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}"}},all_innings:{canUseTfs:!0,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}",transformer:d.AllInningsXMLToModelTransformer,timeout:120,retries:1,env_QA:{urlTemplate:"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_{inning}.xml{timecode}"}},scores:{canUseTfs:!0,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_Scores.xml{timecode}",transformer:d.ScoringPlaysXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_Scores.xml{timecode}"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_Scores.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_Scores.xml{timecode}"}},hitchart:{canUseTfs:!0,namespace:"{gid}",urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_hit.xml{timecode}",transformer:d.HitChartXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:"{tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_hit.xml{timecode}"},env_TEST:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_hit.xml{timecode}"},env_TEST_QA:{urlTemplate:"proxy.php?url={tfshost}/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/inning/inning_hit.xml{timecode}"}},gamecenter:{maxElements:1,namespace:"{gid}",urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/gamecenter.xml",transformer:d.GamecenterXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/gamecenter.xml"},env_TEST:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/gamecenter.xml"},env_TEST_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/gamecenter.xml"}},video:{maxElements:1,namespace:"{gid}",urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/media/mobile.xml",transformer:d.HighlightsXMLToModelTransformer,timeout:30,retries:1,env_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/media/mobile.xml"},env_TEST:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/media/mobile.xml"},env_TEST_QA:{urlTemplate:i.gdx+"/gdcross/components/game/{sportcode}/year_{yyyy}/month_{mm}/day_{dd}/{gid}/media/mobile.xml"}},displayconfig:{namespace:"app",urlTemplate:i.mlb+"/shared/flash/gameday/v5.2/display_config.xml",expires:300,transformer:d.DisplayConfigXMLToModelTransformer,env_QA:{urlTemplate:i.mlb+"/shared/flash/gameday/v5.2/display_config.xml"},env_TEST:{urlTemplate:i.mlb+"/shared/flash/gameday/v5.2/display_config.xml"},env_TEST_QA:{urlTemplate:i.mlb+"/shared/flash/gameday/v5.2/display_config.xml"}},jingles:{namespace:"jingles",urlTemplate:i.mlb+"/shared/components/gameday/gdapp/release/shared/json/jingles/{jingle}.swiffy.json",expires:300,transformer:d.JingleJsonValueParser,env_QA:{urlTemplate:i.mlb+"/shared/json/jingles/{jingle}.swiffy.json"},env_TEST:{urlTemplate:i.mlb+"/shared/json/jingles/{jingle}.swiffy.json"},env_TEST_QA:{urlTemplate:i.mlb+"/shared/json/jingles/{jingle}.swiffy.json"}},skin_config:{namespace:"skin_config",urlTemplate:i.mlb+"/gameday/v5/skin_config.xml",expires:300,transformer:d.SkinConfigToModelTransformer,env_QA:{urlTemplate:i.mlb+"/gameday/v5/skin_config.xml"},env_TEST:{urlTemplate:i.mlb+"/gameday/v5/skin_config.xml"},env_TEST_QA:{urlTemplate:i.mlb+"/gameday/v5/skin_config.xml"
}},gd_config:{namespace:"gd_config",urlTemplate:i.mlb+"/gameday/v5/gd_config.xml",expires:300,transformer:d.GdConfigToModelTransformer,env_QA:{urlTemplate:i.mlb+"/gameday/v5/gd_config.xml"},env_TEST:{urlTemplate:i.mlb+"/gameday/v5/gd_config.xml"},env_TEST_QA:{urlTemplate:i.mlb+"/gameday/v5/gd_config.xml"}},timecode:{namespace:"timecode",urlTemplate:i.gdx+"/gdcross/components/game/timecode.json",expires:300,transformer:d.DateTimeJSONToModelTransformer,env_QA:{urlTemplate:i.gdx+"/gdcross/components/game/timecode.json"},env_TEST:{urlTemplate:i.gdx+"/gdcross/components/game/timecode.json"},env_TEST_QA:{urlTemplate:i.gdx+"/gdcross/components/game/timecode.json"}},lookin:{namespace:"livelookin",urlTemplate:i.mlb+"/gen/multimedia/livelookin.json",expires:30,scenarios:"FLASH_1000K_640X360,FLASH_800K_640X360,FLASH_600K_400X224,FLASH_500K_512X288,FLASH_400K_600X338,FLASH_300K_320X180",env_TEST:{urlTemplate:i.mlb+"/gen/multimedia/livelookin.json"},env_QA:{urlTemplate:i.mlb+"/gen/multimedia/livelookin.json"},env_TEST_QA:{urlTemplate:i.mlb+"gen/multimedia/livelookin.json"}},moundball:{namespace:"moundball",urlTemplate:i.mlb+"/gen/hb/list/mound-balls.xml",expires:30,transformer:d.MoundballXMLToModelTransformer,env_TEST:{urlTemplate:i.mlb+"/gen/hb/list/mound-balls.xml"},env_QA:{urlTemplate:i.mlb+"/gen/hb/list/mound-balls.xml"},env_TEST_QA:{urlTemplate:i.mlb+"/gen/hb/list/mound-balls.xml"}},staticresources:{namespace:"staticresources",urlTemplate:i.mlb+"/shared/components/gameday/gdapp/release/shared/staticresources.jsp?partner={partner:mlb}",expires:300,transformer:d.StaticResourcesJSONToModelTransformer,env_QA:{urlTemplate:i.mlb+"/shared/components/gameday/gdapp/release/shared/staticresources.jsp?partner={partner:mlb}"},env_TEST:{urlTemplate:i.mlb+"/shared/components/gameday/gdapp/release/shared/staticresources.jsp?partner={partner:mlb}"},env_TEST_QA:{urlTemplate:i.mlb+"/shared/components/gameday/gdapp/release/shared/staticresources.jsp?partner={partner:mlb}"}},midInningGames:{namespace:"midInningGames",urlTemplate:i.mlb+"{urlPath}",expires:300,transformer:d.MidInningGameXmlToModelTransformer,env_QA:{urlTemplate:i.mlb+"{url:Path}"},env_TEST:{urlTemplate:i.mlb+"{urlPath}"},env_TEST_QA:{urlTemplate:i.mlb+"{urlPath}"}}}}),define("responsive-gameday-distributors/events/ViewModelUpdateEvents",{UPDATE_BOXSCORE:"updateBoxscoreView",UPDATE_ATBAT:"updateAtbatViews",UPDATE_ATBAT_W_LINESCORE:"updateAtbatWLinescore",UPDATE_CHYRON_PREGAME:"updateChyronPregame",UPDATE_CHYRON_INNING:"updateChyronInning",UPDATE_CHYRON_MID_INNING:"updateChyronMidInning",UPDATE_CHYRON_DELAY:"updateChyronDelay",UPDATE_CHYRON_FINAL:"updateChyronFinal",UPDATE_CHYRON_OTHER:"updateChyronOther",UPDATE_CHYRON_BSO:"updateChyronBSO",UPDATE_INNING:"updateInningsViews",UPDATE_SCORES:"updateScoringPlaysView",UPDATE_VIDEO:"updateVideoView",UPDATE_HOTCOLD_ZONES:"updateHotColdZoneViews",UPDATE_PITCHBYPITCH:"updatePitchByPitchViews",UPDATE_PITCHFX:"updatePitchFXViews",UPDATE_MATCHUP:"updateMatchupViews",UPDATE_FIELD_VIEW:"updateFieldView",REQUEST_BOX_DATA:"requestBoxData",REQUEST_CHYRON_DATA:"requestChyronData",REQUEST_PLAY_BY_PLAY_DATA:"requestPlayByPlayData",REQUEST_PITCHFX_DATA:"requestPitchFXData",REQUEST_PITCHBYPITCH_DATA:"requestPitchByPitchData",REQUEST_STADIUM_DATA:"requestStadiumData",REQUEST_MATCHUP_DATA:"requestMatchupData",REQUEST_FIELD_VIEW_DATA:"requestFieldViewData",REQUEST_VIDEO_DATA:"requestVideoData"}),define("responsive-gameday-distributors/events/SceneStateEvents",{SCENE_STATE_UPDATE:"sceneStateUpdate",NEW_BATTER:"newBatter",NEW_LEFT_HANDED_BATTER:"newLeftHandedBatter",NEW_LEFT_HANDED_BATTER_WITH_PITCHES:"newLeftHandedBatterWithPitches",NEW_RIGHT_HANDED_BATTER:"newRightHandedBatter",NEW_RIGHT_HANDED_BATTER_WITH_PITCHES:"newRightHandedBatterWithPitches",NEW_RIGHT_HANDED_HIT:"newRightHandedHit",NEW_LEFT_HANDED_HIT:"newLeftHandedHit",BATTER_SWITCHED_TO_LEFT_HANDED:"batterSwitchedToLeftHanded",BATTER_SWITCHED_TO_RIGHT_HANDED:"batterSwitchedToRightHanded",COUNT_CHANGE:"countChange",COUNT_4_2:"count42",COUNT_4_1:"count41",COUNT_4_0:"count40",COUNT_3_3:"count33",COUNT_3_2:"count32",COUNT_3_1:"count31",COUNT_3_0:"count30",COUNT_2_3:"count23",COUNT_2_2:"count22",COUNT_2_1:"count21",COUNT_2_0:"count20",COUNT_1_3:"count13",COUNT_1_2:"count12",COUNT_1_1:"count11",COUNT_1_0:"count10",COUNT_0_3:"count03",COUNT_0_2:"count02",COUNT_0_1:"count01",COUNT_0_0:"count00",BASES_EMPTY:"basesEmpty",RUNNER_ON_FIRST:"runnerOnFirst",RUNNER_ON_SECOND:"runnerOnSecond",RUNNER_ON_THIRD:"runnerOnThird",RUNNERS_ON_FIRST_AND_SECOND:"runnersOnFirstAndSecond",RUNNERS_ON_FIRST_AND_THIRD:"runnersOnFirstAndThird",RUNNERS_ON_SECOND_AND_THIRD:"runnersOnSecondAndThird",BASES_LOADED:"basesLoaded",RUNNERS_IN_SCORING_POSITION:"runnersInScoringPosition",GAME_STATE_CHANGE_TO_IN_PROGRESS:"gameStateChangeToInProgress",GAME_STATE_CHANGE_TO_WARMUP:"gameStateChangeToWarmup",GAME_STATE_CHANGE_TO_PREVIEW:"gameStateChangeToPreview",GAME_STATE_CHANGE_TO_PREGAME:"gameStateChangeToPreGame",GAME_STATE_CHANGE_TO_LINEUPS:"gameStateChangeToLineups",GAME_STATE_CHANGE_TO_DELAYED:"gameStateChangeToDelayed",GAME_STATE_CHANGE_TO_DELAYED_START:"gameStateChangeToDelayedStart",GAME_STATE_CHANGE_TO_FINAL:"gameStateChangeToFinal",GAME_STATE_CHANGE_TO_GAME_OVER:"gameStateChangeToGameOver",GAME_STATE_CHANGE_TO_COMPLETED_EARLY:"gameStateChangeToCompletedEarly",GAME_STATE_CHANGE_TO_SUSPENDED:"gameStateChangeToSuspended",GAME_STATE_CHANGE_TO_CANCELLED:"gameStateChangeToCancelled",GAME_STATE_CHANGE_TO_POSTPONED:"gameStateChangeToPostponed",GAME_STATE_CHANGE_TO_FORFEIT:"gameStateChangeToForfeit",GAME_STATE_CHANGE_TO_INSTANT_REPLAY:"gameStateChangeToInstantReplay",GAME_STATE_CHANGE_TO_EXTRA_INNINGS:"gameStateChangeToExtraInnings",ABSTRACT_GAME_STATE_CHANGE_TO_PREGAME:"abstractGameStateChangeToPregame",ABSTRACT_GAME_STATE_CHANGE_TO_LIVE:"abstractGameStateChangeToLive",ABSTRACT_GAME_STATE_CHANGE_TO_DELAYED:"abstractGameStateChangeToDelayed",ABSTRACT_GAME_STATE_CHANGE_TO_FINAL:"abstractGameStateChangeToFinal",ABSTRACT_GAME_STATE_CHANGE_TO_OTHER:"abstractGameStateChangeToOther",UI_GAME_STATE_CHANGE_TO_PREGAME:"UIGameStateChangeToPregame",UI_GAME_STATE_CHANGE_TO_LIVE:"UIGameStateChangeToLive",UI_GAME_STATE_CHANGE_TO_FINAL:"UIGameStateChangeToFinal",DEFENSIVE_SUBSTITUTION:"defensiveSubstitution",OFFENSIVE_SUBSTITUTION:"offensiveSubstitution",PITCHER_CHANGE:"pitcherChange",PITCHER_CHANGE_COMPLETE:"pitcherChangeComplete",COACH_TO_MOUND:"coachToMound",MID_INNING:"midInning",NEW_HALF_INNING:"newHalfInning",NEW_VIDEO_HIGHLIGHTS:"newVideoHighlights",COMMERCIAL_BREAK_BEGIN:"beginCommercialBreak",COMMERCIAL_BREAK_END:"endCommercialBreak"}),define("responsive-gameday-distributors/PitchByPitchViewDistributor",["require","exports","module","jquery","message-service/message-service","./events/SceneStateEvents","./events/ViewModelUpdateEvents","responsive-gameday-core/src/js/GDModel/enums/datasources/Datasources","responsive-gameday-core/src/js/GDUtil/dataMapping/NumberWithOrdinal","extant/extant"],function(a,b,c){function d(){g={};var a=e.play.half_inning,b=[],a=e.play.half_inning;"top"===a?b=b.concat(e.inning.top):"bottom"===a&&(b=b.concat(e.inning.bottom)),g.events=b.reverse(),g.events.outsText=function(){switch(this.o){case 0:case 2:case 3:return"outs";case 1:return"out"}},g.events.score_update=function(){return this.isScoringPlay?e.game.away.abbrev+" "+this.awayScore+" - "+e.game.home.abbrev+" "+this.homeScore:void 0},k(e,"play.atbat")&&(g.atbat=e.play.atbat,g.pitches=g.atbat.pitchesReverse,g.events.length&&g.events[0].num===g.atbat.num&&g.events.shift())}var e,f,g,h=a("jquery"),i=a("message-service/message-service"),j=(a("./events/SceneStateEvents"),a("./events/ViewModelUpdateEvents")),k=(a("responsive-gameday-core/src/js/GDModel/enums/datasources/Datasources"),a("responsive-gameday-core/src/js/GDUtil/dataMapping/NumberWithOrdinal"),a("extant/extant"));b.setGameData=function(a,c){e=h.extend({},a),f=c,d(),i.off(j.REQUEST_PITCHBYPITCH_DATA,b.handleUpdateRequest),i.on.call(b,j.REQUEST_PITCHBYPITCH_DATA,b.handleUpdateRequest),i.publish(j.UPDATE_PITCHBYPITCH,g)},b.handleUpdateRequest=function(){d(),i.publish(j.UPDATE_PITCHBYPITCH,g)}}),function(a){"use strict";a("es6ish-class/lib/create",["require","exports","module"],function(a,b,c){return Object.create||function(a){function b(){}return b.prototype=a,new b}})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),function(a){"use strict";a("es6ish-class/lib/ES6ishClassError",["require","exports","module","./create"],function(a,b,c){function d(a,b,c){this.name="ES6ishClassError",Error.prototype.constructor.call(this,a),this.message=a+" : "+f.call(c),this.child=b,this.parent=c}var e=a("./create"),f=Object.prototype.toString;return d.prototype=e(Error.prototype),d})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),function(a){"use strict";a("es6ish-class/lib/extend",["require","exports","module"],function(a,b,c){return function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),function(a){"use strict";a("es6ish-class/es6ish-class",["require","exports","module","./lib/ES6ishClassError","./lib/create","./lib/extend"],function(a,b,c){function d(a){if(typeof a!==h)throw new e("Constructor not a valid function.",void 0,a);return a.extendsFrom!==j.extendsFrom&&g(a,j),a}var e=a("./lib/ES6ishClassError"),f=a("./lib/create"),g=a("./lib/extend"),h="function",i=Object.prototype.constructor,j={extendsFrom:function(a){if(typeof a!==h)throw new e("parent not a valid constructor.",this,a);var b=f(a.prototype);return g(b,this.prototype),b.constructor=this,this.superclass=a.prototype,this.prototype=b,a.prototype.constructor===i&&(a.prototype.constructor=a),this},define:function(a){return g(this.prototype,a),this},spawn:function(a){return d(a),this.extendsFrom.call(a,this),a}};return d})}("object"==typeof module&&module.exports&&"function"!=typeof define?function(a){module.exports=a(require,exports,module)}:define),define("responsive-gameday-distributors/ViewModels/ViewModelBase",["require","exports","module","es6ish-class/es6ish-class","message-service/message-service"],function(a,b,c){function d(){this.gameData={},this.stateUpdates={},this.dataPack={},this.eventType=""}var e=a("es6ish-class/es6ish-class"),f=a("message-service/message-service");return d.prototype={refresh:function(a,b,c){this.gameData=a,this.stateUpdates=c||{},this.moldData(b)},dispatchUpdates:function(a,b){f.publish(a,b)},moldData:function(a,b){},handleUpdateRequest:function(){this.dispatchUpdates(this.eventType,this.dataPack)}},e(d),d}),define("responsive-gameday-distributors/ViewModels/BoxscoreViewModel",["require","exports","module","message-service/message-service","./ViewModelBase","../events/ViewModelUpdateEvents","extant/extant"],function(a,b,c){function d(){e.constructor.call(this),this.eventType=h.UPDATE_BOXSCORE,f.addListener.call(this,h.REQUEST_BOX_DATA,this.handleUpdateRequest)}var e,f=a("message-service/message-service"),g=a("./ViewModelBase"),h=a("../events/ViewModelUpdateEvents"),i=a("extant/extant");return g.spawn(d).define({moldData:function(a){var b={},c=this.gameData.play.inning_state;i(this.gameData,"boxscore,play,game,bench")&&(b=this.gameData.boxscore,b.teams={home:this.gameData.game.home,away:this.gameData.game.away},b.benches={home:this.gameData.bench.home,away:this.gameData.bench.away},b.activeBatter=i(this.gameData,"plays.batter")?this.gameData.plays.batter.pid:null,b.isActive=function(){return this.id===b.activeBatter?'class="active"':""},b.isHomeBatting="Top"===c||"End"===c?!1:!0,this.dispatchUpdates(this.eventType,b),this.dataPack=b)}}),e=d.superclass,d}),define("mlb-tv-app/app/model/Configuration",["jquery","backbone"],function(a,b){var c=b.Model.extend({defaults:{env:"dev",services:{},defaultHost:"http://dev-b.mlbam.com:5411",defaultContentId:0,poll:{timelineInterval:15e3,stateInterval:3e4},environments:{"default":{"static":"m.mlb.com",defaultHost:"http://m.mlb.com"},dev:{"static":"m.mlb.com",defaultHost:"http://local.mlb.com:8080"},qa:{"static":"m.mlb.com",defaultHost:"http://mqa.mlb.com"},prod:{"static":"m.mlb.com",defaultHost:"http://m.mlb.com"},beta:{"static":"m.mlb.com",defaultHost:"http://mbeta.mlb.com"}},epgContainer:"#mlbtv-epg",widgetsContainer:"#widgets"},initialize:function(){},updatePaths:function(a){var b=this.get("services"),c=this.get("environments"),d=this.param("env")||a||"prod",e=c[d];this.set("defaultHost",e.defaultHost),this.set("services",{state:["//",e["static"],b.state].join("")}),console.log("Configuration::updatePaths()",e,e["static"]),console.log("Configuration::updatePaths()",this.get("services"))},param:function(a){a=a.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var b=location.search.match(new RegExp("[?&]"+a+"=([^&]+)(&|$)"));return b&&decodeURIComponent(b[1].replace(/\+/g," "))},removeParam:function(a){a=a.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var b=location.search.match(new RegExp("[?&]"+a+"=([^&]+)(&|$)"));if(b&&b.length>0){var c=b[0].replace("?",""),d=location.href.replace(c,"&");history.pushState({},null,d)}}});return new c}),define("mlb-tv-app/app/model/Plays",["backbone","mlb-tv-app/app/model/Configuration"],function(a,b){var c=a.Model.extend({idAttribute:"reliableTimecode"});return c}),define("mlb-tv-app/app/collection/GamedayEvents",["backbone","underscore","mlb-tv-app/app/model/Plays"],function(a,b,c){var d=a.Collection.extend({model:c,initialize:function(){}});return d}),function(){function a(a){return function(){return a}}!function(b){var c=this||(0,eval)("this"),d=c.document,e=c.navigator,f=c.jQuery,g=c.JSON;!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports||exports):"function"==typeof define&&define.amd?define("knockout.js/knockout",["exports"],a):a(c.ko={})}(function(h){function i(a,b,c,d){k.d[a]={init:function(a){return k.a.f.set(a,o,{}),{controlsDescendantBindings:!0}},update:function(a,e,f,g,h){f=k.a.f.get(a,o),e=k.a.c(e()),g=!c!=!e;var i=!f.fb;(i||b||g!==f.vb)&&(i&&(f.fb=k.a.Oa(k.e.childNodes(a),!0)),g?(i||k.e.P(a,k.a.Oa(f.fb)),k.Ja(d?d(h,e):h,a)):k.e.ba(a),f.vb=g)}},k.g.S[a]=!1,k.e.L[a]=!0}function j(a,b,c){c&&b!==k.h.n(a)&&k.h.W(a,b),b!==k.h.n(a)&&k.q.I(k.a.Ga,null,[a,"change"])}var k="undefined"!=typeof h?h:{};k.b=function(a,b){for(var c=a.split("."),d=k,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},k.r=function(a,b,c){a[b]=c},k.version="2.3.0",k.b("version",k.version),k.a=function(){function a(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function h(a,b){if("input"!==k.a.u(a)||!a.type||"click"!=b.toLowerCase())return!1;var c=a.type;return"checkbox"==c||"radio"==c}var i={},j={};i[e&&/Firefox\/2/i.test(e.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],i.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),a(i,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)j[b[c]]=a});var l={propertychange:!0},m=d&&function(){for(var a=3,c=d.createElement("div"),e=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",e[0];);return a>4?a:b}();return{Ta:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],p:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c])},k:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},La:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d]))return a[d];return null},ka:function(a,b){var c=k.a.k(a,b);c>=0&&a.splice(c,1)},Ma:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)0>k.a.k(b,a[c])&&b.push(a[c]);return b},Z:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d]));return c},Y:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d])&&c.push(a[d]);return c},R:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},ja:function(a,b,c){var d=a.indexOf?a.indexOf(b):k.a.k(a,b);0>d?c&&a.push(b):c||a.splice(d,1)},extend:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},w:a,oa:function(a){for(;a.firstChild;)k.removeNode(a.firstChild)},Mb:function(a){a=k.a.N(a);for(var b=d.createElement("div"),c=0,e=a.length;e>c;c++)b.appendChild(k.H(a[c]));return b},Oa:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var f=a[c].cloneNode(!0);e.push(b?k.H(f):f)}return e},P:function(a,b){if(k.a.oa(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},eb:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)k.removeNode(c[f])}},hb:function(a,b){7>m?a.setAttribute("selected",b):a.selected=b},F:function(a){return null===a||a===b?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Wb:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;f>e;e++){var g=k.a.F(d[e]);""!==g&&c.push(g)}return c},Tb:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},yb:function(a,b){if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;null!=a;){if(a==b)return!0;a=a.parentNode}return!1},aa:function(a){return k.a.yb(a,a.ownerDocument)},pb:function(a){return!!k.a.La(a,k.a.aa)},u:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},o:function(a,b,c){var d=m&&l[b];if(d||"undefined"==typeof f)if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var e=function(b){c.call(a,b)},g="on"+b;a.attachEvent(g,e),k.a.C.ia(a,function(){a.detachEvent(g,e)})}else a.addEventListener(b,c,!1);else{if(h(a,b)){var i=c;c=function(a,b){var c=this.checked;b&&(this.checked=!0!==b.sb),i.call(this,a),this.checked=c}}f(a).bind(b,c)}},Ga:function(a,b){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof f){var e=[];h(a,b)&&e.push({sb:a.checked}),f(a).trigger(b,e)}else if("function"==typeof d.createEvent){if("function"!=typeof a.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");e=d.createEvent(j[b]||"HTMLEvents"),e.initEvent(b,!0,!0,c,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(e)}else{if("undefined"==typeof a.fireEvent)throw Error("Browser doesn't support triggering events");h(a,b)&&(a.checked=!0!==a.checked),a.fireEvent("on"+b)}},c:function(a){return k.T(a)?a():a},ya:function(a){return k.T(a)?a.t():a},ga:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];k.a.p(b.match(d),function(a){k.a.ja(e,a,c)}),a.className=e.join(" ")}},ib:function(a,c){var e=k.a.c(c);(null===e||e===b)&&(e="");var f=k.e.firstChild(a);!f||3!=f.nodeType||k.e.nextSibling(f)?k.e.P(a,[d.createTextNode(e)]):f.data=e,k.a.Bb(a)},gb:function(a,b){if(a.name=b,7>=m)try{a.mergeAttributes(d.createElement("<input name='"+a.name+"'/>"),!1)}catch(c){}},Bb:function(a){m>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},zb:function(a){if(m){var b=a.style.width;a.style.width=0,a.style.width=b}},Qb:function(a,b){a=k.a.c(a),b=k.a.c(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},N:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},Ub:6===m,Vb:7===m,ca:m,Ua:function(a,b){for(var c=k.a.N(a.getElementsByTagName("input")).concat(k.a.N(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},Nb:function(a){return"string"==typeof a&&(a=k.a.F(a))?g&&g.parse?g.parse(a):new Function("return "+a)():null},Ca:function(a,b,c){if(!g||!g.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return g.stringify(k.a.c(a),b,c)},Ob:function(b,c,e){e=e||{};var f=e.params||{},g=e.includeFields||this.Ta,h=b;if("object"==typeof b&&"form"===k.a.u(b))for(var h=b.action,i=g.length-1;i>=0;i--)for(var j=k.a.Ua(b,g[i]),l=j.length-1;l>=0;l--)f[j[l].name]=j[l].value;c=k.a.c(c);var m=d.createElement("form");m.style.display="none",m.action=h,m.method="post";for(var n in c)b=d.createElement("input"),b.name=n,b.value=k.a.Ca(k.a.c(c[n])),m.appendChild(b);a(f,function(a,b){var c=d.createElement("input");c.name=a,c.value=b,m.appendChild(c)}),d.body.appendChild(m),e.submitter?e.submitter(m):m.submit(),setTimeout(function(){m.parentNode.removeChild(m)},0)}}}(),k.b("utils",k.a),k.b("utils.arrayForEach",k.a.p),k.b("utils.arrayFirst",k.a.La),k.b("utils.arrayFilter",k.a.Y),k.b("utils.arrayGetDistinctValues",k.a.Ma),k.b("utils.arrayIndexOf",k.a.k),k.b("utils.arrayMap",k.a.Z),k.b("utils.arrayPushAll",k.a.R),k.b("utils.arrayRemoveItem",k.a.ka),k.b("utils.extend",k.a.extend),k.b("utils.fieldsIncludedWithJsonPost",k.a.Ta),k.b("utils.getFormFields",k.a.Ua),k.b("utils.peekObservable",k.a.ya),k.b("utils.postJson",k.a.Ob),k.b("utils.parseJson",k.a.Nb),k.b("utils.registerEventHandler",k.a.o),k.b("utils.stringifyJson",k.a.Ca),k.b("utils.range",k.a.Qb),k.b("utils.toggleDomNodeCssClass",k.a.ga),k.b("utils.triggerEvent",k.a.Ga),k.b("utils.unwrapObservable",k.a.c),k.b("utils.objectForEach",k.a.w),k.b("utils.addOrRemoveItem",k.a.ja),k.b("unwrap",k.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);return a=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),k.a.f=new function(){var a=0,c="__ko__"+(new Date).getTime(),d={};return{get:function(a,c){var d=k.a.f.pa(a,!1);return d===b?b:d[c]},set:function(a,c,d){(d!==b||k.a.f.pa(a,!1)!==b)&&(k.a.f.pa(a,!0)[c]=d)},pa:function(e,f){var g=e[c];if(!g||"null"===g||!d[g]){if(!f)return b;g=e[c]="ko"+a++,d[g]={}}return d[g]},clear:function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1}}},k.b("utils.domData",k.a.f),k.b("utils.domData.clear",k.a.f.clear),k.a.C=new function(){function a(a,c){var e=k.a.f.get(a,d);return e===b&&c&&(e=[],k.a.f.set(a,d,e)),e}function c(b){var d=a(b,!1);if(d)for(var d=d.slice(0),e=0;e<d.length;e++)d[e](b);if(k.a.f.clear(b),"function"==typeof f&&"function"==typeof f.cleanData&&f.cleanData([b]),g[b.nodeType])for(d=b.firstChild;b=d;)d=b.nextSibling,8===b.nodeType&&c(b)}var d="__ko_domNodeDisposal__"+(new Date).getTime(),e={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{ia:function(b,c){if("function"!=typeof c)throw Error("Callback must be a function");a(b,!0).push(c)},cb:function(c,e){var f=a(c,!1);f&&(k.a.ka(f,e),0==f.length&&k.a.f.set(c,d,b))},H:function(a){if(e[a.nodeType]&&(c(a),g[a.nodeType])){var b=[];k.a.R(b,a.getElementsByTagName("*"));for(var d=0,f=b.length;f>d;d++)c(b[d])}return a},removeNode:function(a){k.H(a),a.parentNode&&a.parentNode.removeChild(a)}}},k.H=k.a.C.H,k.removeNode=k.a.C.removeNode,k.b("cleanNode",k.H),k.b("removeNode",k.removeNode),k.b("utils.domNodeDisposal",k.a.C),k.b("utils.domNodeDisposal.addDisposeCallback",k.a.C.ia),k.b("utils.domNodeDisposal.removeDisposeCallback",k.a.C.cb),function(){k.a.xa=function(a){var b;if("undefined"!=typeof f){if(f.parseHTML)b=f.parseHTML(a)||[];else if((b=f.clean([a]))&&b[0]){for(a=b[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var e=k.a.F(a).toLowerCase();for(b=d.createElement("div"),e=e.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!e.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!e.indexOf("<td")||!e.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],a="ignored<div>"+e[1]+a+e[2]+"</div>","function"==typeof c.innerShiv?b.appendChild(c.innerShiv(a)):b.innerHTML=a;e[0]--;)b=b.lastChild;b=k.a.N(b.lastChild.childNodes)}return b},k.a.fa=function(a,c){if(k.a.oa(a),c=k.a.c(c),null!==c&&c!==b)if("string"!=typeof c&&(c=c.toString()),"undefined"!=typeof f)f(a).html(c);else for(var d=k.a.xa(c),e=0;e<d.length;e++)a.appendChild(d[e])}}(),k.b("utils.parseHtmlFragment",k.a.xa),k.b("utils.setHtml",k.a.fa),k.s=function(){function a(b,c){if(b)if(8==b.nodeType){var d=k.s.$a(b.nodeValue);null!=d&&c.push({xb:b,Kb:d})}else if(1==b.nodeType)for(var d=0,e=b.childNodes,f=e.length;f>d;d++)a(e[d],c)}var c={};return{va:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"<!--[ko_memo:"+b+"]-->"},mb:function(a,d){var e=c[a];if(e===b)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete c[a]}},nb:function(b,c){var d=[];a(b,d);for(var e=0,f=d.length;f>e;e++){var g=d[e].xb,h=[g];c&&k.a.R(h,c),k.s.mb(d[e].Kb,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},$a:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),k.b("memoization",k.s),k.b("memoization.memoize",k.s.va),k.b("memoization.unmemoize",k.s.mb),k.b("memoization.parseMemoText",k.s.$a),k.b("memoization.unmemoizeDomNodeAndDescendants",k.s.nb),k.Sa={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return k.j({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},notify:function(b,c){return b.equalityComparer="always"==c?a(!1):k.m.fn.equalityComparer,b}},k.b("extenders",k.Sa),k.kb=function(a,b,c){this.target=a,this.la=b,this.wb=c,k.r(this,"dispose",this.B)},k.kb.prototype.B=function(){this.Hb=!0,this.wb()},k.V=function(){this.G={},k.a.extend(this,k.V.fn),k.r(this,"subscribe",this.Da),k.r(this,"extend",this.extend),k.r(this,"getSubscriptionsCount",this.Db)},k.V.fn={Da:function(a,b,c){c=c||"change";var d=new k.kb(this,b?a.bind(b):a,function(){k.a.ka(this.G[c],d)}.bind(this));return this.G[c]||(this.G[c]=[]),this.G[c].push(d),d},notifySubscribers:function(a,b){b=b||"change",this.G[b]&&k.q.I(function(){k.a.p(this.G[b].slice(0),function(b){b&&!0!==b.Hb&&b.la(a)})},this)},Db:function(){var a=0;return k.a.w(this.G,function(b,c){a+=c.length}),a},extend:function(a){var b=this;return a&&k.a.w(a,function(a,c){var d=k.Sa[a];"function"==typeof d&&(b=d(b,c))}),b}},k.Wa=function(a){return null!=a&&"function"==typeof a.Da&&"function"==typeof a.notifySubscribers},k.b("subscribable",k.V),k.b("isSubscribable",k.Wa),k.q=function(){var a=[];return{rb:function(b){a.push({la:b,Ra:[]})},end:function(){a.pop()},bb:function(b){if(!k.Wa(b))throw Error("Only subscribable things can act as dependencies");if(0<a.length){var c=a[a.length-1];!c||0<=k.a.k(c.Ra,b)||(c.Ra.push(b),c.la(b))}},I:function(b,c,d){try{return a.push(null),b.apply(c,d||[])}finally{a.pop()}}}}();var l={undefined:!0,"boolean":!0,number:!0,string:!0};k.m=function(a){function b(){return 0<arguments.length?(b.equalityComparer&&b.equalityComparer(c,arguments[0])||(b.K(),c=arguments[0],b.J()),this):(k.q.bb(b),c)}var c=a;return k.V.call(b),b.t=function(){return c},b.J=function(){b.notifySubscribers(c)},b.K=function(){b.notifySubscribers(c,"beforeChange")},k.a.extend(b,k.m.fn),k.r(b,"peek",b.t),k.r(b,"valueHasMutated",b.J),k.r(b,"valueWillMutate",b.K),b},k.m.fn={equalityComparer:function(a,b){return null===a||typeof a in l?a===b:!1}};var m=k.m.Pb="__ko_proto__";k.m.fn[m]=k.m,k.qa=function(a,c){return null===a||a===b||a[m]===b?!1:a[m]===c?!0:k.qa(a[m],c)},k.T=function(a){return k.qa(a,k.m)},k.Xa=function(a){return"function"==typeof a&&a[m]===k.m||"function"==typeof a&&a[m]===k.j&&a.Eb?!0:!1},k.b("observable",k.m),k.b("isObservable",k.T),k.b("isWriteableObservable",k.Xa),k.U=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return a=k.m(a),k.a.extend(a,k.U.fn),a},k.U.fn={remove:function(a){for(var b=this.t(),c=[],d="function"==typeof a?a:function(b){return b===a},e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.K(),c.push(f),b.splice(e,1),e--)}return c.length&&this.J(),c},removeAll:function(a){if(a===b){var c=this.t(),d=c.slice(0);return this.K(),c.splice(0,c.length),this.J(),d}return a?this.remove(function(b){return 0<=k.a.k(a,b)}):[]},destroy:function(a){var b=this.t(),c="function"==typeof a?a:function(b){return b===a};this.K();for(var d=b.length-1;d>=0;d--)c(b[d])&&(b[d]._destroy=!0);this.J()},destroyAll:function(c){return c===b?this.destroy(a(!0)):c?this.destroy(function(a){return 0<=k.a.k(c,a)}):[]},indexOf:function(a){var b=this();return k.a.k(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.K(),this.t()[c]=b,this.J())}},k.a.p("pop push reverse shift sort splice unshift".split(" "),function(a){k.U.fn[a]=function(){var b=this.t();return this.K(),b=b[a].apply(b,arguments),this.J(),b}}),k.a.p(["slice"],function(a){k.U.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),k.b("observableArray",k.U),k.j=function(c,d,e){function f(){k.a.p(t,function(a){a.B()}),t=[]}function g(){var a=i.throttleEvaluation;a&&a>=0?(clearTimeout(u),u=setTimeout(h,a)):h()}function h(){if(!n)if(m&&r())s();else{n=!0;try{var a=k.a.Z(t,function(a){return a.target});k.q.rb(function(c){var d;0<=(d=k.a.k(a,c))?a[d]=b:t.push(c.Da(g))});for(var c=o.call(d),e=a.length-1;e>=0;e--)a[e]&&t.splice(e,1)[0].B();m=!0,i.notifySubscribers(l,"beforeChange"),l=c,i.notifySubscribers(l)}finally{k.q.end(),n=!1}t.length||s()}}function i(){if(0<arguments.length){if("function"!=typeof p)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return p.apply(d,arguments),this}return m||h(),k.q.bb(i),l}function j(){return!m||0<t.length}var l,m=!1,n=!1,o=c;if(o&&"object"==typeof o?(e=o,o=e.read):(e=e||{},o||(o=e.read)),"function"!=typeof o)throw Error("Pass a function that returns the value of the ko.computed");var p=e.write,q=e.disposeWhenNodeIsRemoved||e.$||null,r=e.disposeWhen||e.Qa||a(!1),s=f,t=[],u=null;if(d||(d=e.owner),i.t=function(){return m||h(),l},i.Cb=function(){return t.length},i.Eb="function"==typeof e.write,i.B=function(){s()},i.ta=j,k.V.call(i),k.a.extend(i,k.j.fn),k.r(i,"peek",i.t),k.r(i,"dispose",i.B),k.r(i,"isActive",i.ta),k.r(i,"getDependenciesCount",i.Cb),!0!==e.deferEvaluation&&h(),q&&j()){s=function(){k.a.C.cb(q,s),f()},k.a.C.ia(q,s);var v=r,r=function(){return!k.a.aa(q)||v()}}return i},k.Gb=function(a){return k.qa(a,k.j)},h=k.m.Pb,k.j[h]=k.m,k.j.fn={},k.j.fn[h]=k.j,k.b("dependentObservable",k.j),k.b("computed",k.j),k.b("isComputed",k.Gb),function(){function a(e,f,g){if(g=g||new d,e=f(e),"object"!=typeof e||null===e||e===b||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean)return e;var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var i=g.get(d);h[c]=i!==b?i:a(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.Ha=[]}k.lb=function(b){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return a(b,function(a){for(var b=0;k.T(a)&&10>b;b++)a=a();return a})},k.toJSON=function(a,b,c){return a=k.lb(a),k.a.Ca(a,b,c)},d.prototype={save:function(a,b){var c=k.a.k(this.keys,a);c>=0?this.Ha[c]=b:(this.keys.push(a),this.Ha.push(b))},get:function(a){return a=k.a.k(this.keys,a),a>=0?this.Ha[a]:b}}}(),k.b("toJS",k.lb),k.b("toJSON",k.toJSON),function(){k.h={n:function(a){switch(k.a.u(a)){case"option":return!0===a.__ko__hasDomDataOptionValue__?k.a.f.get(a,k.d.options.wa):7>=k.a.ca?a.getAttributeNode("value")&&a.getAttributeNode("value").specified?a.value:a.text:a.value;
case"select":return 0<=a.selectedIndex?k.h.n(a.options[a.selectedIndex]):b;default:return a.value}},W:function(a,c){switch(k.a.u(a)){case"option":switch(typeof c){case"string":k.a.f.set(a,k.d.options.wa,b),"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__,a.value=c;break;default:k.a.f.set(a,k.d.options.wa,c),a.__ko__hasDomDataOptionValue__=!0,a.value="number"==typeof c?c:""}break;case"select":""===c&&(c=b),(null===c||c===b)&&(a.selectedIndex=-1);for(var d=a.options.length-1;d>=0;d--)if(k.h.n(a.options[d])==c){a.selectedIndex=d;break}1<a.size||-1!==a.selectedIndex||(a.selectedIndex=0);break;default:(null===c||c===b)&&(c=""),a.value=c}}}}(),k.b("selectExtensions",k.h),k.b("selectExtensions.readValue",k.h.n),k.b("selectExtensions.writeValue",k.h.W),k.g=function(){function a(a,c){for(var d=null;a!=d;)d=a,a=a.replace(b,function(a,b){return c[b]});return a}var b=/\@ko_token_(\d+)\@/g,c=["true","false","null","undefined"],d=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;return{S:[],da:function(b){var c=k.a.F(b);if(3>c.length)return[];"{"===c.charAt(0)&&(c=c.substring(1,c.length-1)),b=[];for(var d,e=null,f=0;f<c.length;f++){var g=c.charAt(f);if(null===e)switch(g){case'"':case"'":case"/":e=f,d=g}else if(g==d&&"\\"!==c.charAt(f-1)){g=c.substring(e,f+1),b.push(g);var h="@ko_token_"+(b.length-1)+"@",c=c.substring(0,e)+h+c.substring(f+1),f=f-(g.length-h.length),e=null}}d=e=null;for(var i=0,j=null,f=0;f<c.length;f++){if(g=c.charAt(f),null===e)switch(g){case"{":e=f,j=g,d="}";break;case"(":e=f,j=g,d=")";break;case"[":e=f,j=g,d="]"}g===j?i++:g===d&&(i--,0===i&&(g=c.substring(e,f+1),b.push(g),h="@ko_token_"+(b.length-1)+"@",c=c.substring(0,e)+h+c.substring(f+1),f-=g.length-h.length,e=null))}for(d=[],c=c.split(","),e=0,f=c.length;f>e;e++)i=c[e],j=i.indexOf(":"),j>0&&j<i.length-1?(g=i.substring(j+1),d.push({key:a(i.substring(0,j),b),value:a(g,b)})):d.push({unknown:a(i,b)});return d},ea:function(a){var b="string"==typeof a?k.g.da(a):a,e=[];a=[];for(var f,g=0;f=b[g];g++)if(0<e.length&&e.push(","),f.key){var h;a:{h=f.key;var i=k.a.F(h);switch(i.length&&i.charAt(0)){case"'":case'"':break a;default:h="'"+i+"'"}}f=f.value,e.push(h),e.push(":"),e.push(f),f=k.a.F(f),0<=k.a.k(c,k.a.F(f).toLowerCase())?f=!1:(i=f.match(d),f=null===i?!1:i[1]?"Object("+i[1]+")"+i[2]:f),f&&(0<a.length&&a.push(", "),a.push(h+" : function(__ko_value) { "+f+" = __ko_value; }"))}else f.unknown&&e.push(f.unknown);return b=e.join(""),0<a.length&&(b=b+", '_ko_property_writers' : { "+a.join("")+" } "),b},Jb:function(a,b){for(var c=0;c<a.length;c++)if(k.a.F(a[c].key)==b)return!0;return!1},ha:function(a,b,c,d,e){a&&k.T(a)?!k.Xa(a)||e&&a.t()===d||a(d):(a=b()._ko_property_writers)&&a[c]&&a[c](d)}}}(),k.b("expressionRewriting",k.g),k.b("expressionRewriting.bindingRewriteValidators",k.g.S),k.b("expressionRewriting.parseObjectLiteral",k.g.da),k.b("expressionRewriting.preProcessBindings",k.g.ea),k.b("jsonExpressionRewriting",k.g),k.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",k.g.ea),function(){function a(a){return 8==a.nodeType&&(f?a.text:a.nodeValue).match(g)}function b(a){return 8==a.nodeType&&(f?a.text:a.nodeValue).match(h)}function c(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&(f--,0===f))return g;g.push(e),a(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function e(a,b){var d=c(a,b);return d?0<d.length?d[d.length-1].nextSibling:a.nextSibling:null}var f=d&&"<!--test-->"===d.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};k.e={L:{},childNodes:function(b){return a(b)?c(b):b.childNodes},ba:function(b){if(a(b)){b=k.e.childNodes(b);for(var c=0,d=b.length;d>c;c++)k.removeNode(b[c])}else k.a.oa(b)},P:function(b,c){if(a(b)){k.e.ba(b);for(var d=b.nextSibling,e=0,f=c.length;f>e;e++)d.parentNode.insertBefore(c[e],d)}else k.a.P(b,c)},ab:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},Va:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):k.e.ab(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},ob:function(b){return(b=a(b))?b[1]:null},Za:function(c){if(i[k.a.u(c)]){var d=c.firstChild;if(d)do if(1===d.nodeType){var f;f=d.firstChild;var g=null;if(f)do if(g)g.push(f);else if(a(f)){var h=e(f,!0);h?f=h:g=[f]}else b(f)&&(g=[f]);while(f=f.nextSibling);if(f=g)for(g=d.nextSibling,h=0;h<f.length;h++)g?c.insertBefore(f[h],g):c.appendChild(f[h])}while(d=d.nextSibling)}}}}(),k.b("virtualElements",k.e),k.b("virtualElements.allowedBindings",k.e.L),k.b("virtualElements.emptyNode",k.e.ba),k.b("virtualElements.insertAfter",k.e.Va),k.b("virtualElements.prepend",k.e.ab),k.b("virtualElements.setDomNodeChildren",k.e.P),function(){k.M=function(){this.Na={}},k.a.extend(k.M.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return null!=k.e.ob(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return k.e.ob(a);default:return null}},parseBindingsString:function(a,b,c){try{var d;if(!(d=this.Na[a])){var e,f=this.Na,g="with($context){with($data||{}){return{"+k.g.ea(a)+"}}}";e=new Function("$context","$element",g),d=f[a]=e}return d(b,c)}catch(h){throw h.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+h.message,h}}}),k.M.instance=new k.M}(),k.b("bindingProvider",k.M),function(){function a(a,b,c){for(var e=k.e.firstChild(b);b=e;)e=k.e.nextSibling(b),d(a,b,c)}function d(b,c,d){var f=!0,g=1===c.nodeType;g&&k.e.Za(c),(g&&d||k.M.instance.nodeHasBindings(c))&&(f=e(c,null,b,d).Sb),f&&a(b,c,!g)}function e(a,c,d,e){function g(a){return function(){return i[a]}}function h(){return i}var i,j,l=0,m=k.a.f.get(a,f);if(!c){if(m)throw Error("You cannot apply bindings multiple times to the same element.");k.a.f.set(a,f,!0)}return k.j(function(){var f=d&&d instanceof k.A?d:new k.A(k.a.c(d)),n=f.$data;!m&&e&&k.jb(a,f),(i=("function"==typeof c?c(f,a):c)||k.M.instance.getBindings(a,f))&&(0===l&&(l=1,k.a.w(i,function(c){var d=k.d[c];if(d&&8===a.nodeType&&!k.e.L[c])throw Error("The binding '"+c+"' cannot be used with virtual elements");if(d&&"function"==typeof d.init&&(d=d.init(a,g(c),h,n,f))&&d.controlsDescendantBindings){if(j!==b)throw Error("Multiple bindings ("+j+" and "+c+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");j=c}}),l=2),2===l&&k.a.w(i,function(b){var c=k.d[b];c&&"function"==typeof c.update&&c.update(a,g(b),h,n,f)}))},null,{$:a}),{Sb:j===b}}k.d={},k.A=function(a,b,c){b?(k.a.extend(this,b),this.$parentContext=b,this.$parent=b.$data,this.$parents=(b.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=a,this.ko=k),this.$data=a,c&&(this[c]=a)},k.A.prototype.createChildContext=function(a,b){return new k.A(a,this,b)},k.A.prototype.extend=function(a){var b=k.a.extend(new k.A,this);return k.a.extend(b,a)};var f="__ko_boundElement";k.jb=function(a,b){return 2!=arguments.length?k.a.f.get(a,"__ko_bindingContext__"):void k.a.f.set(a,"__ko_bindingContext__",b)},k.Ka=function(a,b,c){return 1===a.nodeType&&k.e.Za(a),e(a,b,c,!0)},k.Ja=function(b,c){1!==c.nodeType&&8!==c.nodeType||a(b,c,!0)},k.Ia=function(a,b){if(b&&1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");b=b||c.document.body,d(a,b,!0)},k.na=function(a){switch(a.nodeType){case 1:case 8:var c=k.jb(a);if(c)return c;if(a.parentNode)return k.na(a.parentNode)}return b},k.ub=function(a){return(a=k.na(a))?a.$data:b},k.b("bindingHandlers",k.d),k.b("applyBindings",k.Ia),k.b("applyBindingsToDescendants",k.Ja),k.b("applyBindingsToNode",k.Ka),k.b("contextFor",k.na),k.b("dataFor",k.ub)}();var n={"class":"className","for":"htmlFor"};k.d.attr={update:function(a,c){var d=k.a.c(c())||{};k.a.w(d,function(c,d){d=k.a.c(d);var e=!1===d||null===d||d===b;e&&a.removeAttribute(c),8>=k.a.ca&&c in n?(c=n[c],e?a.removeAttribute(c):a[c]=d):e||a.setAttribute(c,d.toString()),"name"===c&&k.a.gb(a,e?"":d.toString())})}},k.d.checked={init:function(b,c,d){k.a.o(b,"click",function(){var a;if("checkbox"==b.type)a=b.checked;else{if("radio"!=b.type||!b.checked)return;a=b.value}var e=c(),f=k.a.c(e);"checkbox"==b.type&&f instanceof Array?k.a.ja(e,b.value,b.checked):k.g.ha(e,d,"checked",a,!0)}),"radio"!=b.type||b.name||k.d.uniqueName.init(b,a(!0))},update:function(a,b){var c=k.a.c(b());"checkbox"==a.type?a.checked=c instanceof Array?0<=k.a.k(c,a.value):c:"radio"==a.type&&(a.checked=a.value==c)}},k.d.css={update:function(a,b){var c=k.a.c(b());"object"==typeof c?k.a.w(c,function(b,c){c=k.a.c(c),k.a.ga(a,b,c)}):(c=String(c||""),k.a.ga(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,k.a.ga(a,c,!0))}},k.d.enable={update:function(a,b){var c=k.a.c(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},k.d.disable={update:function(a,b){k.d.enable.update(a,function(){return!k.a.c(b())})}},k.d.event={init:function(a,b,c,d){var e=b()||{};k.a.w(e,function(e){"string"==typeof e&&k.a.o(a,e,function(a){var f,g=b()[e];if(g){var h=c();try{var i=k.a.N(arguments);i.unshift(d),f=g.apply(d,i)}finally{!0!==f&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===h[e+"Bubble"]&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},k.d.foreach={Ya:function(a){return function(){var b=a(),c=k.a.ya(b);return c&&"number"!=typeof c.length?(k.a.c(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:k.D.sa}):{foreach:b,templateEngine:k.D.sa}}},init:function(a,b){return k.d.template.init(a,k.d.foreach.Ya(b))},update:function(a,b,c,d,e){return k.d.template.update(a,k.d.foreach.Ya(b),c,d,e)}},k.g.S.foreach=!1,k.e.L.foreach=!0,k.d.hasfocus={init:function(a,b,c){function d(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement"in e){var f;try{f=e.activeElement}catch(g){f=e.body}d=f===a}e=b(),k.g.ha(e,c,"hasfocus",d,!0),a.__ko_hasfocusLastValue=d,a.__ko_hasfocusUpdating=!1}var e=d.bind(null,!0),f=d.bind(null,!1);k.a.o(a,"focus",e),k.a.o(a,"focusin",e),k.a.o(a,"blur",f),k.a.o(a,"focusout",f)},update:function(a,b){var c=!!k.a.c(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),k.q.I(k.a.Ga,null,[a,c?"focusin":"focusout"]))}},k.d.hasFocus=k.d.hasfocus,k.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){k.a.fa(a,b())}};var o="__ko_withIfBindingData";i("if"),i("ifnot",!1,!0),i("with",!0,!1,function(a,b){return a.createChildContext(b)}),k.d.options={init:function(a){if("select"!==k.a.u(a))throw Error("options binding applies only to SELECT elements");for(;0<a.length;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(a,c,e){function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(a,b){if(m){var c=0<=k.a.k(m,k.h.n(b[0]));k.a.hb(b[0],c)}}var h=0==a.length,i=!h&&a.multiple?a.scrollTop:null;c=k.a.c(c());var l,m,n=e(),o=n.optionsIncludeDestroyed,p={};if(a.multiple?m=k.a.Z(a.selectedOptions||k.a.Y(a.childNodes,function(a){return a.tagName&&"option"===k.a.u(a)&&a.selected}),function(a){return k.h.n(a)}):0<=a.selectedIndex&&(m=[k.h.n(a.options[a.selectedIndex])]),c){"undefined"==typeof c.length&&(c=[c]);var q=k.a.Y(c,function(a){return o||a===b||null===a||!k.a.c(a._destroy)});"optionsCaption"in n&&(l=k.a.c(n.optionsCaption),null!==l&&l!==b&&q.unshift(p))}else c=[];e=g,n.optionsAfterRender&&(e=function(a,c){g(0,c),k.q.I(n.optionsAfterRender,null,[c[0],a!==p?a:b])}),k.a.Aa(a,q,function(a,c,e){return e.length&&(m=e[0].selected&&[k.h.n(e[0])]),c=d.createElement("option"),a===p?(k.a.fa(c,l),k.h.W(c,b)):(e=f(a,n.optionsValue,a),k.h.W(c,k.a.c(e)),a=f(a,n.optionsText,e),k.a.ib(c,a)),[c]},null,e),m=null,h&&"value"in n&&j(a,k.a.ya(n.value),!0),k.a.zb(a),i&&20<Math.abs(i-a.scrollTop)&&(a.scrollTop=i)}},k.d.options.wa="__ko.optionValueDomData__",k.d.selectedOptions={init:function(a,b,c){k.a.o(a,"change",function(){var d=b(),e=[];k.a.p(a.getElementsByTagName("option"),function(a){a.selected&&e.push(k.h.n(a))}),k.g.ha(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=k.a.u(a))throw Error("values binding applies only to SELECT elements");var c=k.a.c(b());c&&"number"==typeof c.length&&k.a.p(a.getElementsByTagName("option"),function(a){var b=0<=k.a.k(c,k.h.n(a));k.a.hb(a,b)})}},k.d.style={update:function(a,b){var c=k.a.c(b()||{});k.a.w(c,function(b,c){c=k.a.c(c),a.style[b]=c||""})}},k.d.submit={init:function(a,b,c,d){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");k.a.o(a,"submit",function(c){var e,f=b();try{e=f.call(d,a)}finally{!0!==e&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},k.d.text={update:function(a,b){k.a.ib(a,b())}},k.e.L.text=!0,k.d.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++k.d.uniqueName.tb;k.a.gb(a,c)}}},k.d.uniqueName.tb=0,k.d.value={init:function(a,b,c){function d(){g=!1;var d=b(),e=k.h.n(a);k.g.ha(d,c,"value",e)}var e=["change"],f=c().valueUpdate,g=!1;f&&("string"==typeof f&&(f=[f]),k.a.R(e,f),e=k.a.Ma(e)),!k.a.ca||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=k.a.k(e,"propertychange")||(k.a.o(a,"propertychange",function(){g=!0}),k.a.o(a,"blur",function(){g&&d()})),k.a.p(e,function(b){var c=d;k.a.Tb(b,"after")&&(c=function(){setTimeout(d,0)},b=b.substring(5)),k.a.o(a,b,c)})},update:function(a,b){var c="select"===k.a.u(a),d=k.a.c(b()),e=k.h.n(a);d!==e&&(e=function(){k.h.W(a,d)},e(),c&&setTimeout(e,0)),c&&0<a.length&&j(a,d,!1)}},k.d.visible={update:function(a,b){var c=k.a.c(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},function(a){k.d[a]={init:function(b,c,d,e){return k.d.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e)}}}("click"),k.v=function(){},k.v.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},k.v.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},k.v.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||d;var c=b.getElementById(a);if(!c)throw Error("Cannot find template with ID "+a);return new k.l.i(c)}if(1==a.nodeType||8==a.nodeType)return new k.l.Q(a);throw Error("Unknown template type: "+a)},k.v.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c)},k.v.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")},k.v.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",!0)},k.b("templateEngine",k.v),k.Ea=function(){function a(a,b,c,d){a=k.g.da(a);for(var e=k.g.S,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=e[g];if("function"==typeof h){if(g=h(a[f].value))throw Error(g)}else if(!h)throw Error("This template engine does not support the '"+g+"' binding within its templates")}}return c="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+k.g.ea(a)+" } })()},'"+c.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(c)+b}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ab:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return k.Ea.Lb(a,b)},c)},Lb:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"<!-- ko -->","#comment",e)})},qb:function(a,b){return k.s.va(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&k.Ka(e,a,d)})}}}(),k.b("__tr_ambtns",k.Ea.qb),function(){k.l={},k.l.i=function(a){this.i=a},k.l.i.prototype.text=function(){var a=k.a.u(this.i),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.i[a];var b=arguments[0];"innerHTML"===a?k.a.fa(this.i,b):this.i[a]=b},k.l.i.prototype.data=function(a){return 1===arguments.length?k.a.f.get(this.i,"templateSourceData_"+a):void k.a.f.set(this.i,"templateSourceData_"+a,arguments[1])},k.l.Q=function(a){this.i=a},k.l.Q.prototype=new k.l.i,k.l.Q.prototype.text=function(){if(0==arguments.length){var a=k.a.f.get(this.i,"__ko_anon_template__")||{};return a.Fa===b&&a.ma&&(a.Fa=a.ma.innerHTML),a.Fa}k.a.f.set(this.i,"__ko_anon_template__",{Fa:arguments[0]})},k.l.i.prototype.nodes=function(){return 0==arguments.length?(k.a.f.get(this.i,"__ko_anon_template__")||{}).ma:void k.a.f.set(this.i,"__ko_anon_template__",{ma:arguments[0]})},k.b("templateSources",k.l),k.b("templateSources.domElement",k.l.i),k.b("templateSources.anonymousTemplate",k.l.Q)}(),function(){function a(a,b,c){var d;for(b=k.e.nextSibling(b);a&&(d=a)!==b;)a=k.e.nextSibling(d),1!==d.nodeType&&8!==d.nodeType||c(d)}function c(b,c){if(b.length){var d=b[0],e=b[b.length-1];a(d,e,function(a){k.Ia(c,a)}),a(d,e,function(a){k.s.nb(a,[c])})}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,e,g,h){h=h||{};var i=a&&d(a),i=i&&i.ownerDocument,j=h.templateEngine||f;if(k.Ea.Ab(e,j,i),e=j.renderTemplate(e,g,h,i),"number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(i=!1,b){case"replaceChildren":k.e.P(a,e),i=!0;break;case"replaceNode":k.a.eb(a,e),i=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return i&&(c(e,g),h.afterRender&&k.q.I(h.afterRender,null,[e,g.$data])),e}var f;k.Ba=function(a){if(a!=b&&!(a instanceof k.v))throw Error("templateEngine must inherit from ko.templateEngine");f=a},k.za=function(a,c,g,h,i){if(g=g||{},(g.templateEngine||f)==b)throw Error("Set a template engine before calling renderTemplate");if(i=i||"replaceChildren",h){var j=d(h);return k.j(function(){var b=c&&c instanceof k.A?c:new k.A(k.a.c(c)),f="function"==typeof a?a(b.$data,b):a,b=e(h,i,f,b,g);"replaceNode"==i&&(h=b,j=d(h))},null,{Qa:function(){return!j||!k.a.aa(j)},$:j&&"replaceNode"==i?j.parentNode:j})}return k.s.va(function(b){k.za(a,c,g,b,"replaceNode")})},k.Rb=function(a,d,f,g,h){function i(a,b){c(b,l),f.afterRender&&f.afterRender(b,a)}function j(b,c){l=h.createChildContext(k.a.c(b),f.as),l.$index=c;var d="function"==typeof a?a(b,l):a;return e(null,"ignoreTargetNode",d,l,f)}var l;return k.j(function(){var a=k.a.c(d)||[];"undefined"==typeof a.length&&(a=[a]),a=k.a.Y(a,function(a){return f.includeDestroyed||a===b||null===a||!k.a.c(a._destroy)}),k.q.I(k.a.Aa,null,[g,a,j,f,i])},null,{$:g})},k.d.template={init:function(a,b){var c=k.a.c(b());return"string"==typeof c||c.name||1!=a.nodeType&&8!=a.nodeType||(c=1==a.nodeType?a.childNodes:k.e.childNodes(a),c=k.a.Mb(c),new k.l.Q(a).nodes(c)),{controlsDescendantBindings:!0}},update:function(a,c,d,e,f){c=k.a.c(c()),d={},e=!0;var g,h=null;"string"!=typeof c&&(d=c,c=k.a.c(d.name),"if"in d&&(e=k.a.c(d["if"])),e&&"ifnot"in d&&(e=!k.a.c(d.ifnot)),g=k.a.c(d.data)),"foreach"in d?h=k.Rb(c||a,e&&d.foreach||[],d,a,f):e?(f="data"in d?f.createChildContext(g,d.as):f,h=k.za(c||a,f,d,a)):k.e.ba(a),f=h,(g=k.a.f.get(a,"__ko__templateComputedDomDataKey__"))&&"function"==typeof g.B&&g.B(),k.a.f.set(a,"__ko__templateComputedDomDataKey__",f&&f.ta()?f:b)}},k.g.S.template=function(a){return a=k.g.da(a),1==a.length&&a[0].unknown||k.g.Jb(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"},k.e.L.template=!0}(),k.b("setTemplateEngine",k.Ba),k.b("renderTemplate",k.za),k.a.Pa=function(){function a(a,b,c,d,e){var f,g,h,i,j,k=Math.min,l=Math.max,m=[],n=a.length,o=b.length,p=o-n||1,q=n+o+1;for(f=0;n>=f;f++)for(i=h,m.push(h=[]),j=k(o,f+p),g=l(0,f-1);j>=g;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||q,h[g-1]||q)+1:g+1:f+1;for(k=[],l=[],p=[],f=n,g=o;f||g;)o=m[f][g]-1,g&&o===m[f][g-1]?l.push(k[k.length]={status:c,value:b[--g],index:g}):f&&o===m[f-1][g]?p.push(k[k.length]={status:d,value:a[--f],index:f}):(k.push({status:"retained",value:b[--g]}),--f);if(l.length&&p.length){a=10*n;var r;for(b=c=0;(e||a>b)&&(r=l[c]);c++){for(d=0;m=p[d];d++)if(r.value===m.value){r.moved=m.index,m.moved=r.index,p.splice(d,1),b=d=0;break}b+=d}}return k.reverse()}return function(b,c,d){return b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}(),k.b("utils.compareArrays",k.a.Pa),function(){function a(a){for(;a.length&&!k.a.aa(a[0]);)a.splice(0,1);if(1<a.length){for(var b=a[0],c=a[a.length-1],d=[b];b!==c;){if(b=b.nextSibling,!b)return;d.push(b)}Array.prototype.splice.apply(a,[0,a.length].concat(d))}return a}function c(c,d,e,f,g){var h=[];return c=k.j(function(){var b=d(e,g,a(h))||[];0<h.length&&(k.a.eb(h,b),f&&k.q.I(f,null,[e,b,g])),h.splice(0,h.length),k.a.R(h,b)},null,{$:c,Qa:function(){return!k.a.pb(h)}}),{O:h,j:c.ta()?c:b}}k.a.Aa=function(d,e,f,g,h){function i(b,c){u=m[c],r!==c&&(x[b]=u),u.ra(r++),a(u.O),p.push(u),t.push(u)}function j(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&k.a.p(b[c].O,function(d){a(d,c,b[c].X)})}e=e||[],g=g||{};var l=k.a.f.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===b,m=k.a.f.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],n=k.a.Z(m,function(a){return a.X}),o=k.a.Pa(n,e,g.dontLimitMoves),p=[],q=0,r=0,s=[],t=[];e=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===b&&(u=m[q],u.j&&u.j.B(),s.push.apply(s,a(u.O)),g.beforeRemove&&(e[y]=u,t.push(u))),q++;break;case"retained":i(y,q++);break;case"added":w!==b?i(y,w):(u={X:v.value,ra:k.m(r++)},p.push(u),t.push(u),l||(n[y]=u))}j(g.beforeMove,x),k.a.p(s,g.beforeRemove?k.H:k.removeNode);for(var z,y=0,l=k.e.firstChild(d);u=t[y];y++){for(u.O||k.a.extend(u,c(d,f,u.X,h,u.ra)),q=0;o=u.O[q];l=o.nextSibling,z=o,q++)o!==l&&k.e.Va(d,o,z);!u.Fb&&h&&(h(u.X,u.O,u.ra),u.Fb=!0)}j(g.beforeRemove,e),j(g.afterMove,x),j(g.afterAdd,n),k.a.f.set(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult",p)}}(),k.b("utils.setDomNodeChildrenFromArrayMapping",k.a.Aa),k.D=function(){this.allowTemplateRewriting=!1},k.D.prototype=new k.v,k.D.prototype.renderTemplateSource=function(a){var b=(9>k.a.ca?0:a.nodes)?a.nodes():null;return b?k.a.N(b.cloneNode(!0).childNodes):(a=a.text(),k.a.xa(a))},k.D.sa=new k.D,k.Ba(k.D.sa),k.b("nativeTemplateEngine",k.D),function(){k.ua=function(){var a=this.Ib=function(){if("undefined"==typeof f||!f.tmpl)return 0;try{if(0<=f.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,c,e){if(e=e||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var g=b.data("precompiled");return g||(g=b.text()||"",g=f.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),b.data("precompiled",g)),b=[c.$data],c=f.extend({koBindingContext:c},e.templateOptions),c=f.tmpl(g,b,c),c.appendTo(d.createElement("div")),f.fragments={},c},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){d.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},a>0&&(f.tmpl.tag.ko_code={open:"__.push($1 || '');"},f.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},k.ua.prototype=new k.v;var a=new k.ua;0<a.Ib&&k.Ba(a),k.b("jqueryTmplTemplateEngine",k.ua)}()})}()}(),define("scoreboardViewModels/linescoreViewModel",["require","knockout.js/knockout"],function(a){function b(a){return a.is_during_game?"away"===r&&a.is_top_of_inning?"away currentHalf":"away"!==r||a.is_top_of_inning?"home"!==r||a.is_top_of_inning?"home"===r&&a.is_top_of_inning?"home":void 0:"home currentHalf":"away":"away"===r?"away":"home"}function c(a,b){var c=b&&b[r];return c?c:q.is_after_game&&(k>a||l)?"X":" "}function d(){for(var a=[],b=1;m>=b;++b){var c={};c.inning=k>=b||l?b:"",c.hidden=n>b?!1:!0,c.css="inning inning-"+b,a.push(c)}return a}function e(a){return q.inning==a?!0:!1}function f(a,b){return a.linescore.r[b]?a.linescore.r[b]:"-"}function g(a,b){var f=[];h(a,b);for(var g=0;m>g;++g){var i={};i.current=e(g+1),i.score=c(g,p.inning[g]),i.css="inning inning-"+(g+1)+(i.current?" currentInning":"")+" score-"+i.score,f.push(i)}u.innings=d(),u.scores=f}function h(a,b){q=a.status,p=a.linescore,j=p.inning.length,k=a.scheduled_innings,l=j>k,m=Math.max(j,t),n=m-t,o=m>t,r=b}function i(a,c){g(a,c),this.r=s.observable(a.linescore.r[r]||"0"),this.h=s.observable(a.linescore.h[r]||"0"),this.e=s.observable(a.linescore.e[r]||"0"),this.runsMini=s.observable(f(a,r)),this.scores=s.observableArray(u.scores),this.numCells=s.observableArray(u.innings),this.inning=s.observable(q.inning),this.paginated=s.observable(o),this.currentHalf=s.observable(b(q))}var j,k,l,m,n,o,p,q,r,s=a("knockout.js/knockout"),t=9,u={};return i.prototype={refresh:function(a,c){g(a,c),this.r(a.linescore.r[r]||"0"),this.h(a.linescore.h[r]||"0"),this.e(a.linescore.e[r]||"0"),this.runsMini(f(a,r)),this.scores(u.scores),this.numCells(u.innings),this.inning(q.inning),this.paginated(o),this.currentHalf(b(q))}},i}),define("mlbtv-scoreboard-gamestrip/GamestripViewModel",["knockout.js/knockout","scoreboardViewModels/linescoreViewModel"],function(a,b){function c(a,b){this.config=b,this.init(a),d=this}var d,e=window.teamsConfig,f={getHelperObject:function(a){var b={teamBatting:a.play.team_batting,teamPitching:"home"===a.play.team_batting?"away":"home",homeTeam:a.linescore.home_file_code,awayTeam:a.linescore.away_file_code};return b},defaultToZero:function(a){return a?a:0},getTeamById:function(a){var b="";return b=e&&e[a]?e[a].name_abbrev:""},isLive:function(a){var b=!1;switch(a){case"In Progress":case"Replay":case"Live":case"Instant Replay":case"Delayed":case"Suspended":case"abstractLive":b=!0;break;default:b=!1}return b},warmupState:function(a){return"Warmup"==a?!0:!1},delayedState:function(a){return"Delayed"==a||"Delay"==a||"Delayed Start"==a||"Postponed"==a?!0:!1},finalState:function(a){return"Final"==a||"Game Over"==a||"Forfeit"==a||"Cancelled"==a||"Wrapup"==a?!0:!1},isActiveInning:function(a,b){var c=!1;return a&&b.play&&!b.play.isMidInning&&(c=!0),c},firstBaseState:function(a){var b="offBase";return a&&(b="onBase"),b},secondBaseState:function(a){var b="offBase";return a&&(b="onBase"),b},thirdBaseState:function(a){var b="offBase";return a&&(b="onBase"),b},getBaseRunnerName:function(a){var b="";return a&&a.boxname&&(b=a.boxname),b},onlyOneOut:function(a){var b=!1;return"1"===a&&(b=!0),b},abbreviateInningState:function(a){switch(a){case"Top":return"TOP";case"Middle":return"MID";case"Bottom":return"BOT";case"End":return"END"}}};return c.prototype.init=function(a){},c.prototype.getLinescoreModel=function(a){var b=f.isLive(a.play.gamestate),c=f.onlyOneOut(a.play.outs),e=f.firstBaseState(a.play.offense.first),g=f.secondBaseState(a.play.offense.second),h=f.thirdBaseState(a.play.offense.third),i=f.getBaseRunnerName(a.play.offense.first),j=f.getBaseRunnerName(a.play.offense.second),k=f.getBaseRunnerName(a.play.offense.third),l=f.abbreviateInningState(a.linescore.inning_state),m=f.warmupState(a.play.gamestate),n=f.delayedState(a.play.gamestate),o=f.finalState(a.play.gamestate);console.log("GamestripViewModel getLinescoreModel: data.linescore.inning_state="+a.linescore.inning_state+", data.play.inning_state="+a.play.inning_state),console.log("GamestripViewModel getLinescoreModel: data.linescore.inning="+a.linescore.inning+", data.play.inning="+a.play.inning+", data.inning.num="+a.inning.num);var p=a.linescore.inning;p||(l=""),console.log("==== game data = ",a);var q={state:{isLive:b,isActiveInning:f.isActiveInning(b,a),firstBase:e,secondBase:g,thirdBase:h,firstBaseRunner:i,secondBaseRunner:j,thirdBaseRunner:k,balls:a.play.balls,strikes:a.play.strikes,outs:a.play.outs,onlyOneOut:c,inning:p,inningState:l,warmupState:m,delayedState:n,finalState:o},away:d.getTeamLinescore(a,"away"),home:d.getTeamLinescore(a,"home")};return q},c.prototype.getPreGameStrip=function(a){if(a.play.pitcher&&a.play.pitcher.boxname){var b={awayProbable:d.getPitcher(a.boxscore.away.pitchers[0],a.linescore.away_file_code,a),homeProbable:d.getPitcher(a.boxscore.home.pitchers[0],a.linescore.home_file_code,a),ondeck:d.getBatter(a.play.ondeck,"",a),inhole:d.getBatter(a.play.inhole,"",a)};return b}},c.prototype.getLiveGameStrip=function(a){if(a.play.pitcher&&a.play.pitcher.boxname&&a.play.batter.boxname){var b={pitcher:d.getPitcher(a.play.pitcher,"",a,!0),batter:d.getBatter(a.play.batter,"",a),ondeck:d.getBatter(a.play.ondeck,"",a),inhole:d.getBatter(a.play.inhole,"",a)};return b}},c.prototype.getPostGameStrip=function(a){if(a.play.pitcher&&a.play.pitcher.boxname){var b={winningPitcher:d.getPitcher(a.linescore.winning_pitcher,"",a),losingPitcher:d.getPitcher(a.linescore.losing_pitcher,"",a)};return a.linescore.save_pitcher&&a.linescore.save_pitcher.id?b.savePitcher=d.getPitcher(a.linescore.save_pitcher,"",a):b.savePitcher=null,b}},c.prototype.updateStateText=function(){this.stateText("")},c.prototype.getPlayerImg=function(a){var b;return b="http://gdx.mlb.com/images/gameday/mugshots/mlb/"+a+".jpg"},c.prototype.getTeamLinescore=function(a,b){var c={},d=a.play,e=a.game;if(e){var g=e.home,h=e.away;return c={team:"home"===b?g.name_brief||"":h.name_brief||"",runs:"home"===b?f.defaultToZero(d.home_runs):f.defaultToZero(d.away_runs),hits:"home"===b?f.defaultToZero(d.home_hits):f.defaultToZero(d.away_hits),errors:"home"===b?f.defaultToZero(d.home_errors):f.defaultToZero(d.away_errors),challenge:"home"===b?a.play.home_challenges_remain:a.play.away_challenges_remain}}},c.prototype.getBatter=function(a,b,c){var d,e,g={},h={},i="";if(a){a.boxname?(d=a.pid,e=a.ab,e.constructor===Array&&(e=a.ab[0])):d=a;var j=function(){return"d"==c.play.batter.current_position.toLowerCase()?"DH":c.play.batter.current_position}();h=c&&c.players&&c.players.findPlayer(d),h&&(i=a.h+"-for-"+e+", "+a.avg+" AVG, "+h.hr+" HR, "+h.rbi+" RBI",g={team:f.getTeamById(h.parent_team_id),image:this.getPlayerImg(d),name:h.last,lastName:h.last,pos:j,jersey:"#"+h.num,stance:"("+c.play.batter.stand+")",line:i})}return g},c.prototype.getPitcher=function(a,b,c,e){var g,h={},i={},j="",k="";if(a){if(e){if(i=c&&c.players&&c.players.findPlayer(a.pid)){var l=[];l=c.boxscore.home.id==i.parent_team_id?c.boxscore.home.pitchers:c.boxscore.away.pitchers;var m=l.length-1,g=l[m];j=a.era+" ERA, "+g.ip+" IP, "+g.so+"K, "+a.pitches+"P ("+a.strikes+"S, "+a.balls+"B)"}}else{i=c&&c.players&&c.players.findPlayer(a.id);var n=f.finalState(c.play.gamestate);n?(j=a.wins+"-"+a.losses+", "+a.era+" ERA",k=a.saves?a.saves+", "+a.era+" ERA":j):(j=a.era+" ERA",a.s_ip&&(j+=", "+a.s_ip+" IP"),a.losses&&(j=a.wins+"W, "+a.losses+"L "+j))}i&&(h={team:f.getTeamById(i.parent_team_id),image:d.getPlayerImg(i.id),name:i.last,pos:i.rl+"HP",jersey:"#"+i.num,line:j,saveLine:k})}return h},c}),define("hgn!mlbtv-scoreboard-gamestrip/templates/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="activeGameStrip" class="activeGame">'),d.b("\n"+c),d.b('	<div class="linescore-wrapper">'),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b('	<div class="details-wrapper" style="">'),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.b('<div class="viewall">'),d.b("\n"+c),d.b('	<a class="return sb">View All Games</a>'),
d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-scoreboard-gamestrip/templates/beforeGame",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="details">'),d.b("\n"+c),d.b('	<div class="probables">'),d.b("\n"+c),d.b('		<div class="player pitcher away">'),d.b("\n"+c),d.b('			<img src="'),d.b(d.v(d.d("awayProbable.image",a,b,0))),d.b('" alt="'),d.b(d.v(d.d("awayProbable.name",a,b,0))),d.b('" class="portrait" '),d.b("\n"+c),d.b("			onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("			/>"),d.b("\n"+c),d.b('			<div class="meta">STARTING PITCHER - <span>'),d.b(d.v(d.d("awayProbable.team",a,b,0))),d.b("</span></div>"),d.b("\n"+c),d.b('			<div class="name">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("awayProbable.name",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("awayProbable.pos",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("awayProbable.jersey",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="line">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("awayProbable.line",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b('		<div class="player batter home">'),d.b("\n"+c),d.b('			<img src="'),d.b(d.v(d.d("homeProbable.image",a,b,0))),d.b('" alt="'),d.b(d.v(d.d("homeProbable.name",a,b,0))),d.b('" class="portrait" '),d.b("\n"+c),d.b("			onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("			/>"),d.b("\n"+c),d.b('			<div class="meta">STARTING PITCHER - <span>'),d.b(d.v(d.d("homeProbable.team",a,b,0))),d.b("</span></div>"),d.b("\n"+c),d.b('			<div class="name">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("homeProbable.name",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("homeProbable.pos",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("homeProbable.jersey",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="line">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("homeProbable.line",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b('		<div class="next batter">'),d.b("\n"+c),d.b('			<div class="ondeck">'),d.b("\n"+c),d.b("				ON DECK"),d.b("\n"+c),d.b("				<span>&#45;</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="inhole">'),d.b("\n"+c),d.b("				IN HOLE"),d.b("\n"+c),d.b("				<span>&#45;</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-scoreboard-gamestrip/templates/liveGame",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="details">'),d.b("\n"+c),d.b('	<div class="face-off">'),d.b("\n"+c),d.b('		<div class="player pitcher">'),d.b("\n"+c),d.b('			<img alt="'),d.b(d.v(d.d("pitcher.name",a,b,0))),d.b('" src="'),d.b(d.v(d.d("pitcher.image",a,b,0))),d.b('" class="portrait" '),d.b("\n"+c),d.b("			onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("			/>"),d.b("\n"+c),d.b('			<div class="meta">PITCHING</div>'),d.b("\n"+c),d.b('			<div class="name">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("pitcher.name",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("pitcher.pos",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("pitcher.jersey",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="line">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("pitcher.line",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b('		<div class="player batter">'),d.b("\n"+c),d.b('			<img alt="'),d.b(d.v(d.d("batter.name",a,b,0))),d.b('" src="'),d.b(d.v(d.d("batter.image",a,b,0))),d.b('" class="portrait" '),d.b("\n"+c),d.b("			onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("			/>"),d.b("\n"+c),d.b('			<div class="meta">AT BAT</div>'),d.b("\n"+c),d.b('			<div class="name">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("batter.name",a,b,0))),d.b("</span> "),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("batter.pos",a,b,0))),d.b("</span> "),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("batter.jersey",a,b,0))),d.b("</span> "),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("batter.stance",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="line">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("batter.line",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b('		<div class="next batter">'),d.b("\n"+c),d.b('			<div class="ondeck">'),d.b("\n"+c),d.b("				ON DECK"),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("ondeck.lastName",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="inhole">'),d.b("\n"+c),d.b("				IN HOLE"),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("inhole.lastName",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-scoreboard-gamestrip/templates/afterGame",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="details">'),d.b("\n"+c),d.b('	<div class="endgame">'),d.b("\n"+c),d.b('		<div class="player pitcher winning">'),d.b("\n"+c),d.b('			<img alt="'),d.b(d.v(d.d("winningPitcher.name",a,b,0))),d.b('" src="'),d.b(d.v(d.d("winningPitcher.image",a,b,0))),d.b('" class="portrait" '),d.b("\n"+c),d.b("			onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("			/>"),d.b("\n"+c),d.b('			<div class="meta">WIN</div>'),d.b("\n"+c),d.b('			<div class="name">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("winningPitcher.name",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("winningPitcher.pos",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("winningPitcher.jersey",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="line">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("winningPitcher.line",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b('		<div class="player pitcher losing">'),d.b("\n"+c),d.b('			<img alt="'),d.b(d.v(d.d("losingPitcher.name",a,b,0))),d.b('" src="'),d.b(d.v(d.d("losingPitcher.image",a,b,0))),d.b('" class="portrait" '),d.b("\n"+c),d.b("			onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("			/>"),d.b("\n"+c),d.b('			<div class="meta">LOSS</div>'),d.b("\n"+c),d.b('			<div class="name">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("losingPitcher.name",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("losingPitcher.pos",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("losingPitcher.jersey",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="line">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("losingPitcher.line",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.s(d.f("savePitcher",a,b,1),a,b,0,1051,1535,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="player pitcher save">'),d.b("\n"+c),d.b('			<img alt="'),d.b(d.v(d.d("savePitcher.name",a,b,0))),d.b('" src="'),d.b(d.v(d.d("savePitcher.image",a,b,0))),d.b('" class="portrait" '),d.b("\n"+c),d.b("			onError=\"this.onerror=null;this.src='http://mlb.mlb.com/images/players/silhouettes/74x74/anon.png';\""),d.b("\n"+c),d.b("			/>"),d.b("\n"+c),d.b('			<div class="meta">SAVE</div>'),d.b("\n"+c),d.b('			<div class="name">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("savePitcher.name",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("savePitcher.pos",a,b,0))),d.b("</span> <span>"),d.b(d.v(d.d("savePitcher.jersey",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="line">'),d.b("\n"+c),d.b("				<span>"),d.b(d.v(d.d("savePitcher.saveLine",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c)}),a.pop()),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-scoreboard-gamestrip/templates/linescore",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<table class="truncated linescore">'),d.b("\n"+c),d.b("	<tbody>"),d.b("\n"+c),d.b('		<tr class="head">'),d.b("\n"+c),d.b('			<td class="top-left">'),d.b("\n"+c),d.b('				<div class="inningState rhe-heading">'),d.b("\n"+c),d.b("				"),d.s(d.d("state.delayedState",a,b,1),a,b,0,159,166,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("DELAYED")}),a.pop()),d.b("\n"+c),d.s(d.d("state.delayedState",a,b,1),a,b,1,0,0,"")||(d.s(d.d("state.isLive",a,b,1),a,b,0,240,296,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("						"),d.b(d.v(d.d("state.inningState",a,b,0))),d.b("&nbsp;"),d.b(d.v(d.d("state.inning",a,b,0))),d.b("\n"+c)}),a.pop()),d.s(d.d("state.warmupState",a,b,1),a,b,0,341,360,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("						WARMUP"),d.b("\n"+c)}),a.pop()),d.s(d.d("state.finalState",a,b,1),a,b,0,409,427,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("						FINAL"),d.b("\n"+c)}),a.pop())),d.b("				</div>"),d.b("\n"+c),d.b("			</td>"),d.b("\n"+c),d.b('			<td class="runs runsHeader rhe rhe-heading">R</td>'),d.b("\n"+c),d.b('			<td class="hits hitsHeader rhe rhe-heading">H</td>'),d.b("\n"+c),d.b('			<td class="errors errorsHeader rhe rhe-heading">E</td>'),d.b("\n"+c),d.b('			<td class="challenge challengeHeader rhe rhe-heading challenge-heading">C</td>'),d.b("\n"+c),d.b('			<td class="bases-td" rowspan="3">'),d.b("\n"+c),d.b('				<div class="playStateBlock">'),d.b("\n"+c),d.b('					<div class="bases">'),d.b("\n"+c),d.b('							<div class="baseDiv firstBase '),d.b(d.v(d.d("state.firstBase",a,b,0))),d.b('" title="'),d.b(d.v(d.d("state.firstBaseRunner",a,b,0))),d.b('"></div>'),d.b("\n"+c),d.b('							<div class="baseDiv secondBase '),d.b(d.v(d.d("state.secondBase",a,b,0))),d.b('" title="'),d.b(d.v(d.d("state.secondBaseRunner",a,b,0))),d.b('"></div>'),d.b("\n"+c),d.b('							<div class="baseDiv thirdBase '),d.b(d.v(d.d("state.thirdBase",a,b,0))),d.b('" title="'),d.b(d.v(d.d("state.thirdBaseRunner",a,b,0))),d.b('"></div>'),d.b("\n"+c),d.s(d.d("state.isLive",a,b,1),a,b,0,1163,1316,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('							<p class="playState">'),d.b("\n"+c),d.b("								"),d.b(d.v(d.d("state.balls",a,b,0))),d.b("-"),d.b(d.v(d.d("state.strikes",a,b,0))),d.b(", "),d.b(d.v(d.d("state.outs",a,b,0))),d.b(" out"),d.s(d.d("state.onlyOneOut",a,b,1),a,b,1,0,0,"")||d.b("s"),d.b("\n"+c),d.b("							</p>"),d.b("\n"+c)}),a.pop()),d.b("					</div>"),d.b("\n"+c),d.b("				<!-- "),d.s(d.f("isActiveInning",a,b,1),a,b,0,1374,1429,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b(" -->"),d.b("\n"+c),d.b('					<div class="outs">'),d.b(d.v(d.f("outText",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b("				<!-- ")}),a.pop()),d.b("\n"+c),d.b("				"),d.s(d.d("!state.isLive",a,b,1),a,b,0,1471,1538,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b(" -->"),d.b("\n"+c),d.b('					<div class="additionalText">'),d.b(d.v(d.f("stateText",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b("				<!-- ")}),a.pop()),d.b(" -->"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</td>"),d.b("\n"+c),d.b("		</tr>"),d.b("\n"+c),d.b('		<tr class="away-row">'),d.b("\n"+c),d.b("			<td>"),d.b(d.v(d.d("away.team",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('			<td class="runs rhe">'),d.b(d.v(d.d("away.runs",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('			<td class="hits rhe">'),d.b(d.v(d.d("away.hits",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('			<td class="errors rhe right-pipe">'),d.b(d.v(d.d("away.errors",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('			<td class="challenge rhe">'),d.b("\n"+c),d.b("				<div "),d.b("\n"+c),d.b('				class="challengeDiv'),d.b("\n"+c),d.b("				"),d.s(d.d("away.challenge",a,b,1),a,b,0,1870,1884,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("challengeAvail")}),a.pop()),d.b("\n"+c),d.b("				"),d.s(d.d("away.challenge",a,b,1),a,b,1,0,0,"")||d.b("noChallengeAvail"),d.b("\n"+c),d.b('				">'),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</td>"),d.b("\n"+c),d.b("		</tr>"),d.b("\n"+c),d.b("		<tr>"),d.b("\n"+c),d.b("			<td>"),d.b(d.v(d.d("home.team",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('			<td class="runs rhe">'),d.b(d.v(d.d("home.runs",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('			<td class="hits rhe">'),d.b(d.v(d.d("home.hits",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('			<td class="errors rhe right-pipe">'),d.b(d.v(d.d("home.errors",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('			<td class="challenge rhe">'),d.b("\n"+c),d.b("				<div "),d.b("\n"+c),d.b('				class="challengeDiv'),d.b("\n"+c),d.b("				"),d.s(d.d("home.challenge",a,b,1),a,b,0,2262,2276,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("challengeAvail")}),a.pop()),d.b("\n"+c),d.b("				"),d.s(d.d("home.challenge",a,b,1),a,b,1,0,0,"")||d.b("noChallengeAvail"),d.b("\n"+c),d.b('				">'),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</td>"),d.b("\n"+c),d.b("		</tr>"),d.b("\n"+c),d.b("	</tbody>"),d.b("\n"+c),d.b("</table>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-scoreboard-gamestrip/templates/emptyPitcherBatter",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="details"></div>'),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlbtv-scoreboard-gamestrip/mlbtv-scoreboard-gamestrip",["require","exports","module","jquery","./GamestripViewModel","hgn!./templates/container","hgn!./templates/beforeGame","hgn!./templates/liveGame","hgn!./templates/afterGame","hgn!./templates/linescore","hgn!./templates/emptyPitcherBatter"],function(a,b,c){function d(a,b){e=this,g=h.extend({},u,b),v(a)}var e,f,g,h=a("jquery"),i=".gamestripPlaceholder",j=".linescore-wrapper",k=".details-wrapper",l="pre",m=a("./GamestripViewModel"),n=new m,o=a("hgn!./templates/container"),p=a("hgn!./templates/beforeGame"),q=a("hgn!./templates/liveGame"),r=a("hgn!./templates/afterGame"),s=a("hgn!./templates/linescore"),t=a("hgn!./templates/emptyPitcherBatter"),u={useOrdinal:!1},v=function(a){h(i).html(o()),e.render(a)};d.prototype={updateData:function(a){console.log("updateData()",a),this.render(a)},preFinalGameStateData:void 0,determineFinalWithEndGameData:function(a){var b=a.play.gamestate;return b?("game over"!==b.toLowerCase()||a.linescore.winning_pitcher&&a.linescore.losing_pitcher?"game over"!==b.toLowerCase()&&(this.preFinalGameStateData=a):a.play.gamestate=this.preFinalGameState,a):a},populateLinescore:function(a){console.log("populateLinescore");var a=this.determineFinalWithEndGameData(a),b=n.getLinescoreModel(a);console.log(b),h(j).html(s(b))},populateGamestrip:function(a){var a=this.determineFinalWithEndGameData(a),b=a.play.gamestate;console.log("populateGamestrip()",a),e.setTemplate(b,a);var c=e.getGamestripModel(a);if("post"==l){if(!a.linescore.winning_pitcher||!a.linescore.losing_pitcher)return;h("#activeGameStrip").addClass("post-game"),c.savePitcher?h("#activeGameStrip").removeClass("no-save-pitcher"):h("#activeGameStrip").addClass("no-save-pitcher")}else h("#activeGameStrip").removeClass("post-game no-save-pitcher");h(k).html(f(c)),setTimeout(function(){e.checkNameLengths()},200)},checkNameLengths:function(){var a=".ondeck span",b=h(a).text();this.truncateNameIfNeeded(a,b);var c=".inhole span",d=h(c).text();this.truncateNameIfNeeded(c,d)},truncateNameIfNeeded:function(a,b){if(b.length>15){var c=b.substr(0,15)+"...";h(a).text(c)}},getGamestripModel:function(a){switch(l){case"live":console.log("live"),model=n.getLiveGameStrip(a);break;case"pre":console.log("pre"),model=n.getPreGameStrip(a);break;case"post":console.log("post"),model=n.getPostGameStrip(a);break;default:model={}}return model},setTemplate:function(a,b){switch(console.log("getTemplate(): "+a),a){case"In Progress":case"Replay":case"Live":case"Instant Replay":case"Delayed":case"Suspended":f=q,l="live";break;case"Warmup":case"Preview":case"Pre-Game":case"Delayed Start":case"Postponed":f=p,l="pre";break;case"Final":case"Game Over":f=r,l="post";break;case"Completed Early":case"Forfeit":case"Cancelled":f=t,l="post";default:console.log("default mode template"),f=p,l="pre"}},render:function(a){e.populateGamestrip(a),e.populateLinescore(a)}},b.ScoreboardGamestrip=d}),define("hgn!mlb-tv-app/app/templates/minimode/miniModeNoData",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="meta">'),d.b("\n"+c),d.b("	<p>"),d.b("\n"),d.b("\n"+c),d.b("	</p>"),d.b("\n"+c),d.b('	<p class="no-data-heading">'),d.b("\n"+c),d.b("		 "),d.b(d.v(d.d("game.away.name_full",a,b,0))),d.b("&nbsp;"),d.b(d.v(d.f("vsString",a,b,0))),d.b("&nbsp;"),d.b(d.v(d.d("game.home.name_full",a,b,0))),d.b("\n"+c),d.b("	</p>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/Gameday",["jquery","backbone","responsive-gameday-core/src/js/main","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/view/components/UnavailableView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/model/GamedayUpdate","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/model/Preferences","mlb-tv-app/app/util/GameIdUtil","mlbtv-widget-gameday/gameday","message-service/message-service","extGamedayDatasources/extGamedayDatasources","responsive-gameday-core/src/js/GDModel/enums/events/EventTypes","responsive-gameday-distributors/events/ViewModelUpdateEvents","responsive-gameday-distributors/PitchByPitchViewDistributor","responsive-gameday-distributors/ViewModels/BoxscoreViewModel","mlb-tv-app/app/collection/GamedayEvents","mlb-tv-app/app/tracking/TrackingManager","mlbtv-scoreboard-gamestrip/mlbtv-scoreboard-gamestrip","hgn!mlb-tv-app/app/templates/minimode/miniModeNoData"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x,y,z=!1,A={currentBalls:void 0,currentStrikes:void 0,currentPitcher:void 0,currentBatter:void 0,homeTeam:void 0,homeChallengeRemains:void 0,awayChallengeRemains:void 0},B=d.extend({viewName:"GamedayWidgetView",currentSubscription:"",tagName:"div",el:"#widgets",currentTimecode:"000000",GamedayEvents:new t,BoxscoreViewModel:new s,ScoreboardGamestrip:null,loadingGamedayData:!1,swapQueue:void 0,events:{},initialize:function(){this.initListeners(),this.deviceType=getStartupDeviceTypeString();try{var a=window.mp5Config.app.components.gameday.loadingTimeoutInSecs;isNaN(a)||(this.loadingTimeoutInSecs=a)}catch(b){console.error("GamedayWidgetView: There was an error getting config: "+this.e)}try{this.enabled=window.mp5Config.app.components.gameday.enabled}catch(b){console.error("GamedayWidgetView: There was an error getting config: "+this.e)}this.enabled&&this.render(),x=this,this.GamedayEvents.comparator=function(a){return a.get("num")}},initListeners:function(){n.on.call(this,p.UPDATE,this.handleGamedayUpdate),this.listenTo(f,"gameday:timecode",this.timecodeUpdate),this.listenTo(f,"hotswapGameday",this.handleHotswapGameSub),this.listenTo(f,"gameday:datachange",this.triggerGamedayUpdate),this.listenTo(f,"gamedayEvents:reset",this.resetGamedayEventsCollection),this.listenTo(f,"gamedaywidget:update",this.updatePitchByPitchDistributor),this.listenTo(f,"gamedaywidget:update",this.updateBoxscore),this.listenTo(f,"gamedaywidget:update",this.updateGamedayData),this.listenTo(f,"gamedaywidget:gamestrip",this.handleLoadGameStrip),this.listenTo(f,"gamedaywidget:loading",this.setupWidgets),this.listenTo(f,"gamedaywidget:loading",this.setGamestripToLoading),this.listenTo(f,"gamedaywidget:loading",this.setGamedayWidgetToLoading),this.listenTo(f,"gamedaywidget:loadingTimeout",this.gamedayWidgetLoadingStateTimeoutHandler),this.listenTo(f,"gamedaywidget:resetData",this.resetGamestripData),this.listenTo(f,"feedselector:load",this.setMiniModeToExitNoData),n.on.call(this,q.UPDATE_PITCHBYPITCH,this.updatePxpData),this.listenTo(h,"change",this.handleMetadataChanged)},gamedayMediator:function(){},stripTimecode:function(a){return a=a.split(";"),a=a[0].replace(/[^0-9]/g,"")},timecodeUpdate:function(a){var b=h.get("game_id"),c=g.get("gamedaySub"),d=this.stripTimecode(a);this.currentTimecode=d,console.log("Mediator: Should I switch Games? "+(b!==c)+" because: ("+b+" !== "+c+")"),console.log("timecodeUpdate(): isGamedayActive?",g.isGamedayActive()),b!==c?(console.log("load or switch game, trigger gamedaywidget:loading"),void 0===c?(console.log("Gameday not loaded yet, try to load game -->"),this.loadingGamedayData=!0,this.initGamedayApp(b,d),g.set("gamedaySub",b)):(console.log("Gameday loaded, hotswap game -->"+b+" @ "+d),x.hotswapGameSub(b,d))):this.loadAtTfsPoint(b,d)},loadAtTfsPoint:function(a,b){this.loadingGamedayData||(this.loadingGamedayData=!0,console.info("loadAtTfsPoint: Loading at - "+b),c.loadAtTfsPoint(b))},triggerGamedayUpdate:function(){console.log("gamedayUpdate!!!!"),i.set("minisetup",!1),f.trigger("gamedaywidget:update"),this.sendPlayerNamesToPlaysFeed()},handleHotswapGameSub:function(a){h.set("game_id",a.gameId),this.timecodeUpdate(a.timecode)},hotswapGameSub:function(b,d){if(""!==b){if(this.loadingGamedayData)return void(this.swapQueue={gameId:b,timecode:d});this.loadingGamedayData=!0,this.resetGamedayEventsCollection(),a(".nano-content").html(""),console.log("hotswap game: "+b),c.switchGame(b,d),g.set("gamedaySub",b),this.sendPlayerNamesToPlaysFeed()}},sendPlayerNamesToPlaysFeed:function(){var a=i.toJSON(),b=[];a&&a.players&&a.players.home&&a.players.away&&(_.each(a.players.home,function(a){b.push({first:a.first,last:a.last})}),_.each(a.players.away,function(a){b.push({first:a.first,last:a.last})}),this.gamedayWidget.stashPlayerNames(b))},initGamedayApp:function(a,b){var d=c.getCurrent();if(console.log("initGamedayApp(): isGamedayActive?",g.isGamedayActive()),d)console.log(d);else{var e=(h.get("start_time"),{dataSources:["boxscore","linescore","play","players","game","bench","all_innings","video"],game_state:"",tfs:b?b:void 0,passiveMode:!0,tfsHold:!0,env:"prod",dataOverrides:o});c.init(a,e)}},handleGamedayUpdate:function(a){x.loadingGamedayData=!1;var b=c.getGameData(),d=l.formatIdForUI(g.get("gamedaySub")),e=l.formatIdForUI(b.boxscore?b.boxscore.gameID:"");d===e&&(i.set(b),f.trigger("gameday:datachange"),x.loadGamestrip()),x.checkSwapQueue()},checkSwapQueue:function(){this.swapQueue&&(this.hotswapGameSub(this.swapQueue.gameId,this.swapQueue.timecode),this.swapQueue=void 0)},render:function(){this.gamedayWidget=new m.GamedayWidget({container:this.$el}),f.trigger("gamedaywidget:loading"),a(document).on("click",".viewall a.return.sb",function(){f.trigger("scoreboard:show"),u.trackByImpressionKey(u.TODAYS_GAME_VIEW_ALL_SCORES)})},updatePitchByPitchDistributor:function(){try{r.setGameData(i.toJSON())}catch(a){console.error("Gameday updatePitchByPitchDistributor: swallow any errors from gameday, error = "+a)}},updatePxpData:function(a){_.each(a.events,function(a,b){var c;if(a.tfs)c=a.tfs;else if(a.tfs_zulu){var d=a.tfs_zulu;c=d.substr(11,8).replace(/[^0-9]/g,"")}else c=a.startTfs;a.reliableTimecode=c,x.GamedayEvents.add(a,{merge:!0,at:b})});var b=x.GamedayEvents.length;b!==y&&(x.sendPlayerNamesToPlaysFeed(),x.updateGameFeedWidget(x.GamedayEvents)),y=b},resetGamedayEventsCollection:function(){this.GamedayEvents.reset()},loadGamestrip:function(){"gameview"!==g.get("scoreboardState")||x.ScoreboardGamestrip&&0!==a(".gamestripPlaceholder").children().length||(x.ScoreboardGamestrip=new v.ScoreboardGamestrip(i.toJSON(),{}))},resetGamestripData:function(){A.currentBalls=void 0,A.currentStrikes=void 0,A.currentPitcher=void 0,A.currentBatter=void 0,A.homeTeam=void 0},setGamestripToLoading:function(){a(".details").html("<img id='gamestrip-loading-spinner' src='/sections/tv/images/spinner.gif' />"),a(".truncated ").html("")},updateGamedayData:function(){var a=i.toJSON(),b=i.get("gameInProgress");if(b&&!z){var a=i.toJSON();this.gamedayWidget.updatePitcherBatter(a),z=!0}this.checkGamedayData(a)&&this.gamedayWidget.updatePitcherBatter(a);var c=g.get("scoreboardState");"gameview"===c&&x.ScoreboardGamestrip?this.checkGamedayData(a)&&(x.ScoreboardGamestrip.populateLinescore(a),x.ScoreboardGamestrip.populateGamestrip(a)):void 0!==c&&x.ScoreboardGamestrip||(f.trigger("hideGamestripButton"),console.log("load gamestrip -->"),x.loadGamestrip()),f.trigger("updateGamestripButtonState"),this.checkGamedayData(a)&&(A.currentBalls=a.play.balls,A.currentStrikes=a.play.strikes,A.currentInning=a.linescore.inning,A.inningState=a.linescore.inning_state,A.homeTeam=a.linescore.home_file_code,A.currentBatter=a.play.batter.pid,A.currentPitcher=a.play.pitcher.pid,A.homeChallengeRemains=a.play.home_challenges_remain,A.awayChallengeRemains=a.play.away_challenges_remain)},checkGamedayData:function(a){return a&&a.play&&a.play.balls&&a.play.strikes&&a.linescore&&a.play.batter&&a.play.pitcher&&(A.currentBalls!==a.play.balls||A.currentStrikes!==a.play.strikes||A.currentInning!==a.linescore.inning||A.inningState!==a.linescore.inning_state||A.homeTeam!==a.linescore.home_file_code||A.currentBatter!==a.play.batter.pid||A.currentPitcher!==a.play.pitcher.pid||A.homeChallengeRemains!==a.play.home_challenges_remain||A.awayChallengeRemains!==a.play.away_challenges_remain)?!0:!1},updateBoxscore:function(){this.BoxscoreViewModel.refresh(i.toJSON()),this.gamedayWidget.updateBoxscore(this.BoxscoreViewModel.dataPack),this.setGamedayWidgetToExitLoading()},setupWidgets:function(){console.log("GamedayWidgets(): LOADING... "),console.log("setupWidgets(): isGamedayActive?",g.isGamedayActive())},handleMetadataChanged:function(a,b){h.get("isAudioOnly")&&!h.get("isLive")?this.setGamedayWidgetToNoDataAvailable():this.resetGamedayWidgetToDefault()},handleLoadGameStrip:function(){if(i.get("id"))return void this.loadGamestrip();var a=j.getSelectedSlot();a&&"EMPTY"!==a.mediaSlotState&&a.currentPlayheadTimecode&&f.trigger("hotswapGameday",{gameId:l.formatIdForUI(a.gameId),timecode:a.currentPlayheadTimecode})},loadingTimeoutInSecs:10,gamedayWidgetInLoadingState:!1,gamedayWidgetLoadingStateTimeout:null,gamedayWidgetInErrorState:void 0,setGamedayWidgetToLoading:function(){this.gamedayWidgetInLoadingState=!0,this.gamedayWidgetInErrorState&&(this.gamedayWidgetInErrorState=!1,this.resetGamedayWidgetToDefault()),this.setupGamedayWidgetLoadingTimer(),a("#gameday-widget-loading-spinner, #gameday-widget-init-spinner").remove(),a("div[data-view]").length>0?(a("div[data-view]").html("<img id='gameday-widget-loading-spinner' src='/sections/tv/images/spinner.gif' />"),a("#plays-container").css("border-right","none"),a("#gameday-widget > .expand, #gameday-widget > .gradient").hide(),a(".nano-content").html(""),a(".pitcher-batter").remove()):(a("#boxscore-gameday-widget").append("<img id='gameday-widget-init-spinner' src='/sections/tv/images/spinner.gif' />"),a("#plays-container").css("border-right","none"),a("#gameday-widget > .expand, #gameday-widget > .gradient").hide(),a(".nano-content").html(""))},setGamedayWidgetToExitLoading:function(){this.gamedayWidgetInLoadingState=!1,this.clearGamedayWidgetLoadingTimer(),(!h.get("isAudioOnly")||h.get("isLive"))&&(this.setGamedayWidgetToExitErrorState(),a("#gameday-widget-loading-spinner, #gameday-widget-init-spinner").remove(),a("#gameday-widget > .expand, #gameday-widget > .gradient").show())},setupGamedayWidgetLoadingTimer:function(){this.clearGamedayWidgetLoadingTimer(),this.gamedayWidgetLoadingStateTimeout=setTimeout(function(){f.trigger("gamedaywidget:loadingTimeout")},1e3*this.loadingTimeoutInSecs)},gamedayWidgetLoadingStateTimeoutHandler:function(){this.loadingGamedayData=!1,this.setGamedayWidgetToErrorState()},clearGamedayWidgetLoadingTimer:function(){try{this.gamedayWidgetLoadingStateTimeout&&clearTimeout(this.gamedayWidgetLoadingStateTimeout)}catch(a){}},setGamedayWidgetToErrorState:function(){this.gamedayWidgetInLoadingState&&(this.gamedayWidgetInErrorState=!0,this.setGamedayWidgetToExitLoading(),this.setGamedayWidgetToNoDataAvailable())},setGamedayWidgetToExitErrorState:function(){a(".gameday-widget-error").remove(),a("#gameday-widget > h5").show(),this.showViewMoreControl()},gamedayWidgetViewCache:void 0,setGamedayWidgetToNoDataAvailable:function(){unavailableView=new e,unavailableView.render();var b=a("#gameday-widget");b.css("height","50px"),this.gamedayWidgetViewCache=b.html(),a("#gameday-widget > h5").hide(),a("#gameday-widget > .gradient").hide(),a("#plays-container").hide(),a("#boxscore-gameday-widget").hide(),a(".gameday-widget-error").remove(),b.prepend(unavailableView.el),this.hideViewMoreControl()},resetGamedayWidgetToDefault:function(){var b=a("#gameday-widget");void 0!==this.gamedayWidgetViewCache&&(a(".gameday-widget-error").remove(),a("#gameday-widget > h5").show(),a("#gameday-widget > .gradient").show(),a("#plays-container").show(),a("#boxscore-gameday-widget").show(),this.gamedayWidgetViewCache=void 0,setTimeout(function(){x.handleGamedayUpdate()},500)),b.css("height","532px"),this.showViewMoreControl()},setMiniModeToExitNoData:function(){g.set("noDataAvailable",!1)},updateGameFeedWidget:function(b){this.gamedayWidget.updateGameFeedWidget(b.toJSON()),a("#plays-container").css("border-right","1px solid #606060")},hideViewMoreControl:function(){a(".expand").hide()},showViewMoreControl:function(){a(".expand").show()}});return B}),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.2",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown);
}(jQuery),define("bootstrap/js/dropdown",function(){}),function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},a.each(["onResize","onThrottledResize"],a.proxy(function(b,c){this._handlers[c]=a.proxy(this[c],this)},this)),a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Workers,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}e.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Type={Event:"event",State:"state"},e.Plugins={},e.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||"",c=!this.settings.autoWidth,d=this.settings.rtl,e={width:"auto","margin-left":d?b:"","margin-right":d?"":b};!c&&this.$stage.children().css(e),a.css=e}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,c=null,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;)c=this._mergers[d],c=this.settings.mergeFit&&Math.min(c,this.settings.items)||c,a.items.merge=c>1||a.items.merge,f[d]=e?b*c:this._items[d].width();this._widths=f}},{filter:["items","settings"],run:function(){var b=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),f=2*Math.ceil(c.length/2),g=d.loop&&c.length?d.rewind?e:Math.max(e,f):0,h="",i="";for(g/=2;g--;)b.push(this.normalize(b.length/2,!0)),h+=c[b[b.length-1]][0].outerHTML,b.push(this.normalize(c.length-1-(b.length-1)/2,!0)),i=c[b[b.length-1]][0].outerHTML+i;this._clones=b,a(h).addClass("cloned").appendTo(this.$stage),a(i).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var a=this.settings.rtl?1:-1,b=this._clones.length+this._items.length,c=-1,d=0,e=0,f=[];++c<b;)d=f[c-1]||0,e=this._widths[this.relative(c)]+this.settings.margin,f.push(d+e*a);this._coordinates=f}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,b=this._coordinates,c={width:Math.ceil(Math.abs(b[b.length-1]))+2*a,"padding-left":a||"","padding-right":a||""};this.$stage.css(c)}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,c=!this.settings.autoWidth,d=this.$stage.children();if(c&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],d.eq(b).css(a.css);else c&&(a.css.width=a.items.width,d.css(a.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0,a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current)),this.reset(a.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;d>c;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass("active"),this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}],e.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var b,c,e;b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&0>=e&&this.preloadAutoWidthImages(b)}this.$element.addClass(this.options.loadingClass),this.$stage=a("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){b>=a&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),"function"==typeof e.stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=a.extend({},this.options),this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},e.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};c>b;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={},!this.is("valid")&&this.enter("valid")},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.$element.is(":visible")?(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized"))):!1:!1},e.prototype.registerEventHandlers=function(){a.support.transition&&this.$stage.on(a.support.transition.end+".owl.core",a.proxy(this.onTransitionEnd,this)),this.settings.responsive!==!1&&this.on(b,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",a.proxy(this.onDragEnd,this)))},e.prototype.onDragStart=function(b){var d=null;3!==b.which&&(a.support.transform?(d=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","),d={x:d[16===d.length?12:4],y:d[16===d.length?13:5]}):(d=this.$stage.position(),d={x:this.settings.rtl?d.left+this.$stage.width()-this.width()+this.settings.margin:d.left,y:d.top}),this.is("animating")&&(a.support.transform?this.animate(d.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===b.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=a(b.target),this._drag.stage.start=d,this._drag.stage.current=d,this._drag.pointer=this.pointer(b),a(c).on("mouseup.owl.core touchend.owl.core",a.proxy(this.onDragEnd,this)),a(c).one("mousemove.owl.core touchmove.owl.core",a.proxy(function(b){var d=this.difference(this._drag.pointer,this.pointer(b));a(c).on("mousemove.owl.core touchmove.owl.core",a.proxy(this.onDragMove,this)),Math.abs(d.x)<Math.abs(d.y)&&this.is("valid")||(b.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},e.prototype.onDragMove=function(a){var b=null,c=null,d=null,e=this.difference(this._drag.pointer,this.pointer(a)),f=this.difference(this._drag.stage.start,e);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),c=this.coordinates(this.maximum()+1)-b,f.x=((f.x-b)%c+c)%c+b):(b=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),c=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),d=this.settings.pullDrag?-1*e.x/5:0,f.x=Math.max(Math.min(f.x,b+d),c+d)),this._drag.stage.current=f,this.animate(f.x))},e.prototype.onDragEnd=function(b){var d=this.difference(this._drag.pointer,this.pointer(b)),e=this._drag.stage.current,f=d.x>0^this.settings.rtl?"left":"right";a(c).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==d.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(e.x,0!==d.x?f:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=f,(Math.abs(d.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},e.prototype.closest=function(b,c){var d=-1,e=30,f=this.width(),g=this.coordinates();return this.settings.freeDrag||a.each(g,a.proxy(function(a,h){return"left"===c&&b>h-e&&h+e>b?d=a:"right"===c&&b>h-f-e&&h-f+e>b?d=a+1:this.op(b,"<",h)&&this.op(b,">",g[a+1]||h-f)&&(d="left"===c?a+1:a),-1===d},this)),this.settings.loop||(this.op(b,">",g[this.minimum()])?d=b=this.minimum():this.op(b,"<",g[this.maximum()])&&(d=b=this.maximum())),d},e.prototype.animate=function(b){var c=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),c&&(this.enter("animating"),this.trigger("translate")),a.support.transform3d&&a.support.transition?this.$stage.css({transform:"translate3d("+b+"px,0px,0px)",transition:this.speed()/1e3+"s"}):c?this.$stage.animate({left:b+"px"},this.speed(),this.settings.fallbackEasing,a.proxy(this.onTransitionEnd,this)):this.$stage.css({left:b+"px"})},e.prototype.is=function(a){return this._states.current[a]&&this._states.current[a]>0},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(b){return"string"===a.type(b)&&(this._invalidated[b]=!0,this.is("valid")&&this.leave("valid")),a.map(this._invalidated,function(a,b){return b})},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(a,b){var c=this._items.length,e=b?0:this._clones.length;return!this.isNumeric(a)||1>c?a=d:(0>a||a>=c+e)&&(a=((a-e/2)%c+c)%c+e/2),a},e.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=this.settings,f=this._coordinates.length;if(e.loop)f=this._clones.length/2+this._items.length-1;else if(e.autoWidth||e.merge){for(b=this._items.length,c=this._items[--b].width(),d=this.$element.width();b--&&(c+=this._items[b].width()+this.settings.margin,!(c>d)););f=b+1}else f=e.center?this._items.length-1:this._items.length-e.items;return a&&(f-=this._clones.length/2),Math.max(f,0)},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c,e=1,f=b-1;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(e=-1,f=b+1),c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[f]||0))/2*e):c=this._coordinates[f]||0,c=Math.ceil(c))},e.prototype.duration=function(a,b,c){return 0===c?0:Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(a,b){var c=this.current(),d=null,e=a-this.relative(c),f=(e>0)-(0>e),g=this._items.length,h=this.minimum(),i=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>g/2&&(e+=-1*f*g),a=c+e,d=((a-h)%g+g)%g+h,d!==a&&i>=d-e&&d-e>0&&(c=d-e,a=d,this.reset(c))):this.settings.rewind?(i+=1,a=(a%i+i)%i):a=Math.max(h,Math.min(i,a)),this.speed(this.duration(c,a,b)),this.current(a),this.$element.is(":visible")&&this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.onTransitionEnd=function(a){return a!==d&&(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)!==this.$stage.get(0))?!1:(this.leave("animating"),void this.trigger("translated"))},e.prototype.viewport=function(){var d;return this.options.responsiveBaseElement!==b?d=a(this.options.responsiveBaseElement).width():b.innerWidth?d=b.innerWidth:c.documentElement&&c.documentElement.clientWidth?d=c.documentElement.clientWidth:console.warn("Can not detect viewport width."),d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(b,c){var e=this.relative(this._current);c=c===d?this._items.length:this.normalize(c,!0),b=b instanceof jQuery?b:a(b),this.trigger("add",{content:b,position:c}),b=this.prepare(b),0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(b),0!==this._items.length&&this._items[c-1].after(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(b),this._items.splice(c,0,b),this._mergers.splice(c,0,1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[e]&&this.reset(this._items[e].index()),this.invalidate("items"),this.trigger("added",{content:b,position:c})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.preloadAutoWidthImages=function(b){b.each(a.proxy(function(b,c){this.enter("pre-loading"),c=a(c),a(new Image).one("load",a.proxy(function(a){c.attr("src",a.target.src),c.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",c.attr("src")||c.attr("data-src")||c.attr("data-src-retina"))},this))},e.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),a(c).off(".owl.core"),this.settings.responsive!==!1&&(b.clearTimeout(this.resizeTimer),this.off(b,"resize",this._handlers.onThrottledResize));for(var d in this._plugins)this._plugins[d].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:c>a;case">":return d?c>a:a>c;case">=":return d?c>=a:a>=c;case"<=":return d?a>=c:c>=a}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d,f,g){var h={item:{count:this._items.length,index:this.current()}},i=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),j=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},h,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(j)}),this.register({type:e.Type.Event,name:b}),this.$element.trigger(j),this.settings&&"function"==typeof this.settings[i]&&this.settings[i].call(this,j)),j},e.prototype.enter=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]===d&&(this._states.current[b]=0),this._states.current[b]++},this))},e.prototype.leave=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]--},this))},e.prototype.register=function(b){if(b.type===e.Type.Event){if(a.event.special[b.name]||(a.event.special[b.name]={}),!a.event.special[b.name].owl){var c=a.event.special[b.name]._default;a.event.special[b.name]._default=function(a){return!c||!c.apply||a.namespace&&-1!==a.namespace.indexOf("owl")?a.namespace&&a.namespace.indexOf("owl")>-1:c.apply(this,arguments)},a.event.special[b.name].owl=!0}}else b.type===e.Type.State&&(this._states.tags[b.name]?this._states.tags[b.name]=this._states.tags[b.name].concat(b.tags):this._states.tags[b.name]=b.tags,this._states.tags[b.name]=a.grep(this._states.tags[b.name],a.proxy(function(c,d){return a.inArray(c,this._states.tags[b.name])===d},this)))},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.pointer=function(a){var c={x:null,y:null};return a=a.originalEvent||a||b.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,a.pageX?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c},e.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))},e.prototype.difference=function(a,b){return{x:a.x-b.x,y:a.y-b.y}},a.fn.owlCarousel=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data("owl.carousel");f||(f=new e(this,"object"==typeof b&&b),d.data("owl.carousel",f),a.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(b,c){f.register({type:e.Type.Event,name:c}),f.$element.on(c+".owl.carousel.core",a.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([c]),f[c].apply(this,[].slice.call(arguments,1)),this.release([c]))},f))})),"string"==typeof b&&"_"!==b.charAt(0)&&f[b].apply(f,c)})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoRefresh:!0,autoRefreshInterval:500},e.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=b.setInterval(a.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},e.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},e.prototype.destroy=function(){var a,c;b.clearInterval(this._interval);for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoRefresh=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,e=c.center&&Math.ceil(c.items/2)||c.items,f=c.center&&-1*e||0,g=(b.property&&b.property.value!==d?b.property.value:this._core.current())+f,h=this._core.clones().length,i=a.proxy(function(a,b){this.load(b)},this);f++<e;)this.load(h/2+this._core.relative(g)),h&&a.each(this._core.clones(this._core.relative(g)),i),g++},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1},e.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":'url("'+g+'")',opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var b=this._core._current,c=b+this._core.settings.items,d=this._core.$stage.children().toArray().slice(b,c),e=[],f=0;a.each(d,function(b,c){e.push(a(c).height())}),f=Math.max.apply(null,e),this._core.$stage.parent().height(f).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};e.Defaults={video:!1,videoHeight:!1,videoWidth:!1},e.prototype.fetch=function(a,b){var c=function(){return a.attr("data-vimeo-id")?"vimeo":a.attr("data-vzaar-id")?"vzaar":"youtube"}(),d=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else if(d[3].indexOf("vimeo")>-1)c="vimeo";else{if(!(d[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");c="vzaar"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},e.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after(e)};return b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length?(l(h.attr(i)),h.remove(),!1):void("youtube"===c.type?(f="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type?a.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}):"vzaar"===c.type&&a.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a.framegrab_url,l(f)}}))},e.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},e.prototype.play=function(b){var c,d=a(b.target),e=d.closest("."+this._core.settings.itemClass),f=this._videos[e.attr("data-video")],g=f.width||"100%",h=f.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),"youtube"===f.type?c='<iframe width="'+g+'" height="'+h+'" src="//www.youtube.com/embed/'+f.id+"?autoplay=1&rel=0&v="+f.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===f.type?c='<iframe src="//player.vimeo.com/video/'+f.id+'?autoplay=1" width="'+g+'" height="'+h+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===f.type&&(c='<iframe frameborder="0"height="'+h+'"width="'+g+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+f.id+'/player?autoplay=true"></iframe>'),a('<div class="owl-video-frame">'+c+"</div>").insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},e.prototype.isInFullScreen=function(){var b=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return b&&a(b).parent().hasClass("owl-video-frame")},e.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":a.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&a.support.animation&&a.support.transition){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(a.support.animation.end,c).css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g)),f&&e.one(a.support.animation.end,c).addClass("animated owl-animated-in").addClass(f))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null);
},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._timeout=null,this._paused=!1,this._handlers={"changed.owl.carousel":a.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._core.settings.autoplay&&this._setAutoPlayInterval()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":a.proxy(function(a,b,c){a.namespace&&this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=a.extend({},e.Defaults,this._core.options)};e.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},e.prototype.play=function(a,b){this._paused=!1,this._core.is("rotating")||(this._core.enter("rotating"),this._setAutoPlayInterval())},e.prototype._getNextTimeout=function(d,e){return this._timeout&&b.clearTimeout(this._timeout),b.setTimeout(a.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||c.hidden||this._core.next(e||this._core.settings.autoplaySpeed)},this),d||this._core.settings.autoplayTimeout)},e.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout()},e.prototype.stop=function(){this._core.is("rotating")&&(b.clearTimeout(this._timeout),this._core.leave("rotating"))},e.prototype.pause=function(){this._core.is("rotating")&&(this._paused=!0)},e.prototype.destroy=function(){var a,b;this.stop();for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(b){this._core=b,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){b.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var b,c=this._core.settings;this._controls.$relative=(c.navContainer?a(c.navContainer):a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=a("<"+c.navElement+">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",a.proxy(function(a){this.prev(c.navSpeed)},this)),this._controls.$next=a("<"+c.navElement+">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",a.proxy(function(a){this.next(c.navSpeed)},this)),c.dotsData||(this._templates=[a("<div>").addClass(c.dotClass).append(a("<span>")).prop("outerHTML")]),this._controls.$absolute=(c.dotsContainer?a(c.dotsContainer):a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","div",a.proxy(function(b){var d=a(b.target).parent().is(this._controls.$absolute)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(d,c.dotsSpeed)},this));for(b in this._overrides)this._core[b]=a.proxy(this[b],this)},e.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},e.prototype.update=function(){var a,b,c,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0),g=this._core.settings,h=g.center||g.autoWidth||g.dotsData?1:g.dotsEach||g.items;if("page"!==g.slideBy&&(g.slideBy=Math.min(g.slideBy,g.items)),g.dots||"page"==g.slideBy)for(this._pages=[],a=d,b=0,c=0;e>a;a++){if(b>=h||0===b){if(this._pages.push({start:Math.min(f,a-d),end:a-d+h-1}),Math.min(f,a-d)===f)break;b=0,++c}b+=this._core.mergers(this._core.relative(a))}},e.prototype.draw=function(){var b,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),f=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d),c.nav&&(this._controls.$previous.toggleClass("disabled",!f&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!f&&e>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!c.dots||d),c.dots&&(b=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==b?this._controls.$absolute.html(this._templates.join("")):b>0?this._controls.$absolute.append(new Array(b+1).join(this._templates[0])):0>b&&this._controls.$absolute.children().slice(b).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(a.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items)}},e.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,a.proxy(function(a,c){return a.start<=b&&a.end>=b},this)).pop()},e.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},e.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},e.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},e.prototype.to=function(b,c,d){var e;!d&&this._pages.length?(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c)):a.proxy(this._overrides.to,this._core)(b,c)},a.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this._core=c,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(c){c.namespace&&"URLHash"===this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!c)return;this._hashes[c]=b.content}},this),"changed.owl.carousel":a.proxy(function(c){if(c.namespace&&"position"===c.property.name){var d=this._core.items(this._core.relative(this._core.current())),e=a.map(this._hashes,function(a,b){return a===d?b:null}).join();if(!e||b.location.hash.slice(1)===e)return;b.location.hash=e}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(a){var c=b.location.hash.substring(1),e=this._core.$stage.children(),f=this._hashes[c]&&e.index(this._hashes[c]);f!==d&&f!==this._core.current()&&this._core.to(this._core.relative(f),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+h.join(f+" ")+f).split(" "),function(a,b){return g[b]!==d?(e=c?b:!0,!1):void 0}),e}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j={csstransforms:function(){return!!e("transform")},csstransforms3d:function(){return!!e("perspective")},csstransitions:function(){return!!e("transition")},cssanimations:function(){return!!e("animation")}};j.csstransitions()&&(a.support.transition=new String(f("transition")),a.support.transition.end=i.transition.end[a.support.transition]),j.cssanimations()&&(a.support.animation=new String(f("animation")),a.support.animation.end=i.animation.end[a.support.animation]),j.csstransforms()&&(a.support.transform=new String(f("transform")),a.support.transform3d=j.csstransforms3d())}(window.Zepto||window.jQuery,window,document),define("owl.carousel/dist/owl.carousel",function(){}),define("mlb-tv-app/app/model/Video",["backbone","mlb-tv-app/app/model/Configuration"],function(a,b){var c=a.Model.extend({idAttribute:"id",updateThumb:function(){if(this.attributes.getThumbByType&&this.attributes.thumbnails){var a=this.attributes.getThumbByType(this.attributes.thumbnails,"2");this.attributes.defaultThumb=a}},initialize:function(){this.bind("add sort",this.updateThumb)}});return c}),define("mlb-tv-app/app/collection/Videos",["backbone","mlb-tv-app/app/model/Video"],function(a,b){var c=a.Collection.extend({model:b,sort_type:"ascending",sort_key:"dateUTC",initialize:function(){},comparator:function(a,b){a=a.get(this.sort_key),b=b.get(this.sort_key);var c=a>b?1:b>a?-1:0;return"descending"===this.sort_type&&(c=-c),c}});return c}),define("mlb-tv-app/app/collection/LeagueHighlights",["backbone","mlb-tv-app/app/model/Video","mlb-tv-app/app/model/StateModel"],function(a,b,c){var d=a.Collection.extend({model:b,sort_type:"ascending",sort_key:"dateUTC",url:function(){var a="http://gdx.mlb.com/components/game/mlb",b=c.get("gameDate"),d=a+"/year_"+b.getFullYear()+"/month_"+this.formatMonth(b.getMonth())+"/day_"+this.padZero(b.getDate())+"/media/highlights.xml";return d},initialize:function(){},comparator:function(a,b){a=a.get(this.sort_key),b=b.get(this.sort_key);var c=a>b?1:b>a?-1:0;return"descending"===this.sort_type&&(c=-c),c},padZero:function(a){return 10>a&&(a="0"+a),a},formatMonth:function(a){var b=1+a;return b=this.padZero(b)},formatDateToUTC:function(a){var b=a.split("T"),c=b[0].split("-"),d=b[1].substr(0,8).split(":"),e=new Date(c[0],c[1],c[2],d[0],d[1],d[2]);return e.getTime()},getThumbByType:function(a,b){var c;return $(a).find("thumb").each(function(){$(this).attr("type")==b&&(c=$(this))}),c?{type:$(c).attr("type"),url:$(c).text()}:null},getThumbnail:function(a){var b=a.find("thumbnails"),c=this.getThumbByType(b,"43");if(!c&&(c=this.getThumbByType(b,"2"),!c)){var d={url:""},e=$(a).children("thumb").length>0?$(a).children("thumb")[0]:null;e&&(d={url:$(e).text()}),c=d}return c},parse:function(a){var b=[],c=this;return $(a).find("media").each(function(a){var d=new Date($(this).attr("date")),e=""+c.padZero(d.getMonth()+1)+"/"+c.padZero(d.getDate())+"/"+d.getFullYear().toString().substr(2,2),f=c.getThumbnail($(this));b.push({blurb:"",condensed:!1,dateText:e,dateUTC:c.formatDateToUTC($(this).attr("date")),defaultThumb:f,defaultURL:"",duration:$(this).find("duration").text(),durationText:$(this).find("duration").text().substr(3,5),getThumbByType:function(){return!1},getURLFromScenario:function(){return!1},headline:$(this).find("headline").text(),id:$(this).attr("id")})}),b},fetch:function(b){return b=b||{},b.dataType="xml",a.Collection.prototype.fetch.call(this,b)}});return d}),define("hgn!mlb-tv-app/app/templates/highlights/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="'),d.b(d.v(d.f("id",a,b,0))),d.b('" class="mlbtv-widget '),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b("\n"+c),d.b("	<h5>Highlights</h5>"),d.b("\n"+c),d.s(d.f("disabled",a,b,1),a,b,1,0,0,"")||(d.b('		<div id="gameclips">'),d.b("\n"+c),d.b("				<h6>In Game Highlights</h6>"),d.b("\n"+c),d.b('				<div id="gameclips-content" class="carousel-wrapper loading">'),d.b("\n"+c),d.b("					<img class=\"loading\" id='highlights-loading-spinner' src='/sections/tv/images/spinner.gif' />"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b('		<div id="leaguehighlights">'),d.b("\n"+c),d.b("				<h6>Around the League Highlights</h6>"),d.b("\n"+c),d.b('				<div id="leaguehighlights-content" class="carousel-wrapper loading">'),d.b("\n"+c),d.b("					<img class=\"loading\" id='highlights-loading-spinner' src='/sections/tv/images/spinner.gif' />"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c)),d.s(d.f("disabled",a,b,1),a,b,0,615,671,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<span class="availability">'),d.b("\n"+c),d.b("			"),d.b(d.v(d.f("reason",a,b,0))),d.b("\n"+c),d.b("		</span>"),d.b("\n"+c)}),a.pop()),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/highlights/carousel",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<img class=\"loading\" id='highlights-loading-spinner' src='/sections/tv/images/spinner.gif' />"),d.b("\n"+c),d.b('<div class="dropdown">'),d.b("\n"+c),d.b('  <button class="btn btn-default sort-toggle" type="button" id="sort" data-toggle="dropdown" aria-expanded="true">'),d.b("\n"+c),d.b("    Sort By"),d.b("\n"+c),d.b('    <span class="caret"></span>'),d.b("\n"+c),d.b("  </button>"),d.b("\n"+c),d.b('  <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="sort">'),d.b("\n"+c),d.b('    <li role="presentation"><a role="descending" href="#">Most Recent First</a></li>'),d.b("\n"+c),d.b('    <li role="presentation"><a role="ascending" href="#">Oldest First</a></li>'),d.b("\n"+c),d.b("  </ul>"),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.b('<div class="highlights owl-carousel">'),d.b("\n"+c),d.s(d.f("collection",a,b,1),a,b,0,607,636,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.rp("<carouselItem0",a,b,"   		"))}),a.pop()),d.b("</div> "),d.b("\n"),d.b("\n"+c),d.b("	"),d.fl()},partials:{"<carouselItem0":{name:"carouselItem",partials:{},subs:{}}},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/highlights/carouselItem",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<div>"),d.b("\n"+c),d.b('	<a href="/tv/v'),d.b(d.v(d.f("id",a,b,0))),d.b('" data-contentid="'),d.b(d.v(d.f("id",a,b,0))),d.b('" class="highlight">'),d.b("\n"+c),d.b('		<img class="owl-lazy" data-src="'),d.b(d.v(d.d("defaultThumb.url",a,b,0))),d.b('" title="'),d.b(d.v(d.f("headline",a,b,0))),d.b('" alt="'),d.b(d.v(d.f("headline",a,b,0))),d.b('"/>'),d.b("\n"+c),d.b("		"),d.b(d.v(d.f("headline",a,b,0))),d.b("\n"+c),d.b("		<p>"),d.b(d.v(d.f("dateText",a,b,0))),d.b(" | "),d.b(d.v(d.f("durationText",a,b,0))),d.b("</p>"),d.b("\n"+c),d.b("	</a>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/highlights/highlightsNotAvailable",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="highlights-not-available">'),d.b("\n"+c),d.b("	<span>"),d.b(d.v(d.f("label",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/highlights/highlightsHidden",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="highlights-not-available">'),d.b("\n"+c),d.b("	<span>"),d.b(d.v(d.f("label",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/Highlights",["jquery","underscore","backbone","scrollMonitor/scrollMonitor","bootstrap/js/dropdown","owl.carousel/dist/owl.carousel","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/model/GamedayUpdate","mlb-tv-app/app/model/Preferences","mlb-tv-app/app/collection/Videos","mlb-tv-app/app/tracking/TrackingManager","mlb-tv-app/app/collection/LeagueHighlights","hgn!mlb-tv-app/app/templates/highlights/container","hgn!mlb-tv-app/app/templates/highlights/carousel","hgn!mlb-tv-app/app/templates/highlights/carouselItem","hgn!mlb-tv-app/app/templates/highlights/highlightsNotAvailable","hgn!mlb-tv-app/app/templates/highlights/highlightsHidden"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v,w="highlights-widget",x=g.extend({viewName:"HighlightsWidgetView",tagName:"div",el:"#widgets",GameClips:new n,AroundTheLeagueClips:new p,set:!1,gameClipsRendered:!1,gameClipsChanged:!1,gameHighlightsLength:void 0,leagueHighlightsLength:void 0,gamePrev:void 0,gameNext:void 0,gameDropdown:void 0,leaguePrev:void 0,leagueNext:void 0,leagueDropdown:void 0,events:{},highlightsHidden:void 0,initialize:function(){v=this,this.initListeners(),this.deviceType=getStartupDeviceTypeString();try{this.enabled=window.mp5Config.app.components.highlights.enabled&&!j.get("isPSTV")}catch(a){console.error("HighlightsWidgetView: There was an error getting config: "+this.e)}this.enabled&&this.render()},initListeners:function(){this.listenTo(this.GameClips,"reset",this.handleVideosCollectionChanged),this.listenTo(h,"gamedaywidget:update",this.updateGameHighlights),this.listenTo(j,"change:gameDate",this.updateAroundTheLeagueHighlights),this.listenTo(h,"scoreBoardLoadComplete",this.updateAroundTheLeagueHighlights),this.listenTo(k,"change:isAudioOnly",this.handleMetadataUpdate),this.listenTo(k,"change:isLive",this.handleMetadataUpdate),this.listenTo(h,"gamedaywidget:loading",this.setHighlightsToLoading),this.listenTo(m,"change:spoilersPref",this.evaluateHighlightsVisibility),this.listenTo(j,"change:isCasting",this.evaluateHighlightsVisibility),this.listenTo(this.AroundTheLeagueClips,"sync",this.leagueHighlightsDeltaUpdate)},setActiveBehavior:function(){var b=a("#"+w),c=d.create(b,-180);c.enterViewport(function(){b.addClass("activeWidget"),i.getDispatcher().publish(i.getVideoPlayerEvents().ACTIVE_WIDGET_UPDATE,w)}),c.exitViewport(function(){b.removeClass("activeWidget"),i.getDispatcher().publish(i.getVideoPlayerEvents().ACTIVE_WIDGET_REMOVE,w)})},setHighlightsToLoading:function(){console.log("setHighlightsToLoading() --> cleaning out highlights collections"),this.GameClips.reset(),this.setGameClipsCarouselToLoading()},render:function(){this.$el.append(q({id:w,disabled:!1,reason:"Loading"})),this.setActiveBehavior()},updateGameHighlights:function(){if(!m.get("spoilersPref"))if(k.get("isAudioOnly")&&!k.get("isLive"))v.gameHighlightsNotAvailable();else{var a=l.toJSON(),c=a.video,d=null;c&&(d=[],b.each(c.videosArray,function(a){var b=new Date(a.dateUTC);a.dateText=""+v.padZero(b.getMonth())+"/"+v.padZero(b.getDate())+"/"+b.getFullYear().toString().substr(2,2),a.durationText=a.duration.substr(3,5);var c=a.getThumbByType(a.thumbnails,"43");c||(c=a.getThumbByType(a.thumbnails,"2")),c&&(a.defaultThumb=c),d.push(a)}),v.GameClips.reset(d,{merge:!0})),console.log("Changed Game Clips: ",v.GameClips),console.log(v.GameClips),0===this.GameClips.length?v.gameHighlightsNotAvailable():(!v.gameClipsRendered||v.gameClipsChanged||this.inGameHighlightsUnavailable)&&(v.gameClipsRendered=!0,v.gameClipsChanged=!1,v.updateGameClipsCarousel(),this.inGameHighlightsUnavailable&&(this.inGameHighlightsUnavailable=!1))}},handleVideosCollectionChanged:function(){this.gameClipsChanged=!0},setGameClipsCarouselToLoading:function(){this.gameClipsRendered=!1,a("#gameclips-content").addClass("loading")},previousGameHighlightsLength:0,updateGameClipsCarousel:function(){v.GameClips.length!==v.previousGameHighlightsLength&&(v.previousGameHighlightsLength=v.GameClips.length,a("#gameclips-content").removeClass("loading"),a("#gameclips-content").html(r({collection:this.GameClips.toJSON()},{carouselItem:s.template})),a(document).off("click","#gameclips-content .dropdown-menu > li > a").on("click","#gameclips-content .dropdown-menu > li > a",function(b){b.preventDefault();var c=a(this).attr("role");v.sortAndPlaceCollection(v.GameClips,c,"#gameclips-content"),o.trackByImpressionKey(o.IN_GAME_HIGHLIGHTS_SORT_BY_CLICK)}),a(document).off("click","#gameclips-content .owl-item").on("click","#gameclips-content .owl-item",function(a){a.preventDefault(),o.trackByImpressionKey(o.IN_GAME_HIGHLIGHTS_CLICK),v.setHighlightToSelected(this)}),this.renderCarousel(".highlights","#gameclips-content"),this.triggerCarouselChecker())},renderCarousel:function(b,c){if(this.shouldHideHighlights())return void this.evaluateHighlightsVisibility();var d=a(b,c);this.triggerCarouselChecker(),d.owlCarousel({items:4,navigation:!0,scrollPerPage:!0,lazyLoad:!0})},sortAndPlaceCollection:function(b,c,d){b.sort_type=c,b.sort(),a(d).html(r({collection:b.toJSON()},{carouselItem:s.template})),this.renderCarousel(".highlights",d)},previousLeagueHighlightsLength:0,renderLeagueHighlightsCarousel:function(b){this.AroundTheLeagueClips.length!==this.previousLeagueHighlightsLength&&(this.previousLeagueHighlightsLength=this.AroundTheLeagueClips.length,a("#leaguehighlights-content").removeClass("loading"),a("#leaguehighlights-content").html(r({collection:this.AroundTheLeagueClips.toJSON()},{carouselItem:s.template})),a(document).on("click","#leaguehighlights .dropdown-menu > li > a",function(b){b.preventDefault();var c=a(this).attr("role");v.sortAndPlaceCollection(v.AroundTheLeagueClips,c,"#leaguehighlights-content"),o.trackByImpressionKey(o.AROUND_THE_LEAGUE_HIGHLIGHTS_SORT_BY_CLICK)}),a(document).on("click","#leaguehighlights-content .owl-item",function(a){o.trackByImpressionKey(o.AROUND_THE_LEAGUE_HIGHLIGHTS_CLICK),v.setHighlightToSelected(this)}),this.renderCarousel(".highlights","#leaguehighlights-content"),this.triggerCarouselChecker())},updateLeagueHighlightsCarousel:function(a){},updateAroundTheLeagueHighlights:function(){if(!m.get("spoilersPref")){var a=j.get("gameDate");this.AroundTheLeagueClips.reset(),null!=a&&null!=new Date(a)&&this.AroundTheLeagueClips.fetch({error:function(a,b,c){console.error("[HIGHLIGHTS]: There was an error retrieving Around the League clips",b),v.leagueHighlightsNotAvailable()}}).done(function(){v.renderLeagueHighlightsCarousel()})}},handleMetadataUpdate:function(a){this.updateGameHighlights()},inGameHighlightsUnavailable:void 0,gameHighlightsNotAvailable:function(){var b={label:j.get("isCasting")?"HIGHLIGHTS DISABLED":"HIGHLIGHTS NOT AVAILABLE"};this.inGameHighlightsUnavailable=!0,a("#gameclips-content").length&&a("#gameclips-content").html("").append(t(b))},leagueHighlightsNotAvailable:function(){var b={label:j.get("isCasting")?"HIGHLIGHTS DISABLED":"HIGHLIGHTS NOT AVAILABLE"};a("#leaguehighlights-content").length&&a("#leaguehighlights-content").html("").append(t(b))},shouldHideHighlights:function(){return m.get("spoilersPref")||j.get("isCasting")},hideAllHighlights:function(){var b={label:j.get("isCasting")?"HIGHLIGHTS DISABLED":"HIGHLIGHT SPOILERS HIDDEN"};a("#gameclips-content").length&&a("#gameclips-content").html("").append(u(b)),a("#leaguehighlights-content").length&&a("#leaguehighlights-content").html("").append(u(b))},showAllHighlights:function(){this.previousGameHighlightsLength=0,this.previousLeagueHighlightsLength=0,this.updateAroundTheLeagueHighlights(),this.updateGameClipsCarousel()},evaluateHighlightsVisibility:function(){this.handleVideosCollectionChanged(),this.shouldHideHighlights()?this.hideAllHighlights():m.get("spoilersPref")||j.get("isCasting")||this.showAllHighlights()},triggerCarouselChecker:function(){setTimeout(function(){v.manageCarouselButtons()},0)},manageCarouselButtons:function(){return gameHighlightsLength=a("#gameclips-content > div.highlights > div > div > div.owl-item").length,leagueHighlightsLength=a("#leaguehighlights-content > div.highlights > div > div > div.owl-item").length,gamePrev="#gameclips-content > div > div > div > div.owl-prev",gameNext="#gameclips-content > div > div > div > div.owl-next",gameDropdown="#gameclips-content > .dropdown",leaguePrev="#leaguehighlights-content > div > div > div > div.owl-prev",leagueNext="#leaguehighlights-content > div > div > div > div.owl-next",leagueDropdown="#leaguehighlights-content > .dropdown",m.get("spoilersPref")?void this.hideAllHighlights():(0==gameHighlightsLength&&this.gameHighlightsNotAvailable(),0==leagueHighlightsLength&&this.leagueHighlightsNotAvailable(),gameHighlightsLength>4?setTimeout(function(){v.checkGameCarouselPosition(),a(gamePrev+", "+gameNext).unbind("click"),v.addGameCarouselClickHandlers()},0):(this.hideGameHighlightsPrev(),this.hideGameHighlightsNext(),this.hideGameHighlightsSort()),void(leagueHighlightsLength>4?setTimeout(function(){v.checkLeagueCarouselPosition(),a(leaguePrev+", "+leagueNext).unbind("click"),v.addLeagueCarouselClickHandlers()},0):(this.hideLeagueHighlightsPrev(),this.hideLeagueHighlightsNext(),this.hideLeagueHighlightsSort())))},addGameCarouselClickHandlers:function(){a(gamePrev).click(function(){o.trackByImpressionKey(o.IN_GAME_HIGHLIGHTS_PREVIOUS_CLICK),v.checkGameCarouselPosition()}),a(gameNext).click(function(){o.trackByImpressionKey(o.IN_GAME_HIGHLIGHTS_NEXT_CLICK),v.checkGameCarouselPosition()})},addLeagueCarouselClickHandlers:function(){a(leaguePrev).click(function(){o.trackByImpressionKey(o.AROUND_THE_LEAGUE_HIGHLIGHTS_PREVIOUS_CLICK),v.checkLeagueCarouselPosition()}),a(leagueNext).click(function(){o.trackByImpressionKey(o.AROUND_THE_LEAGUE_HIGHLIGHTS_NEXT_CLICK),v.checkLeagueCarouselPosition()})},checkGameCarouselPosition:function(){a("#gameclips-content > div.highlights > div > div > div.owl-item:first").hasClass("active")?this.hideGameHighlightsPrev():this.showGameHighlightsPrev(),a("#gameclips-content > div.highlights > div > div > div.owl-item:last").hasClass("active")?this.hideGameHighlightsNext():this.showGameHighlightsNext()},checkLeagueCarouselPosition:function(){a("#leaguehighlights-content > div.highlights > div > div > div.owl-item:first").hasClass("active")?this.hideLeagueHighlightsPrev():this.showLeagueHighlightsPrev(),a("#leaguehighlights-content > div.highlights > div > div > div.owl-item:last").hasClass("active")?this.hideLeagueHighlightsNext():this.showLeagueHighlightsNext()},setHighlightToSelected:function(b){a(b).addClass("selected-highlight")},hideGameHighlightsNext:function(){a(gameNext).css("top","9999px")},hideGameHighlightsPrev:function(){a(gamePrev).css("top","9999px")},hideGameHighlightsSort:function(){a(gameDropdown).hide()},showGameHighlightsNext:function(){a(gameNext).css("top","25%")},showGameHighlightsPrev:function(){a(gamePrev).css("top","25%")},showGameHighlightsSort:function(){a(gameDropdown).css("display","inline-block")},hideLeagueHighlightsNext:function(){a(leagueNext).css("top","9999px")},hideLeagueHighlightsPrev:function(){a(leaguePrev).css("top","9999px")},hideLeagueHighlightsSort:function(){a(leagueDropdown).hide()},showLeagueHighlightsNext:function(){a(leagueNext).css("top","25%")},showLeagueHighlightsPrev:function(){a(leaguePrev).css("top","25%")},showLeagueHighlightsSort:function(){a(leagueDropdown).css("display","inline-block")},padZero:function(a){return 10>a&&(a="0"+a),a}});return x}),define("mlb-tv-app/app/model/AppConfig",["jquery","backbone"],function(a,b){"use strict";var c=b.Model.extend({defaults:{data:void 0,global:void 0,app:void 0,vpm:void 0,videocore:void 0},initialize:function(){this.initListeners()},initListeners:function(){this.bind("change:data",this.onDataChange)},byStringPath:function(a){var b,c,d=0,e=this.attributes;a=a.replace(/\[(\w+)\]/g,".$1"),a=a.replace(/^\./,""),b=a.split("."),c=b.length;try{for(d;c>d;++d){var f=b[d];if(!(f in e))return void 0;e=e[f]}}catch(g){return void console.error('There was an error retrieving a value for path: "'+a+'"',g)}return e},getMP5Config:function(){return this.get("data")},getValue:function(a){var b=this.byStringPath(a);return b},getValueOr:function(a,b){var c=this.byStringPath(a);return void 0===c&&(c=b),c},onDataChange:function(a,b,c){this.set({global:b.global,app:b.app,vpm:b.vpm,videocore:b.videocore},{silent:!0})}});return new c}),define("mlbtv-widget-fantasy/scripts/MLBExternalController",["require","exports","module"],function(a,b,c){function d(a,b){var c="/v1gateway?";return b&&(c+="&cacheBust="+(new Date).getTime().toString()),c+="&url="+encodeURIComponent(a)}b.convertExternalURL=d}),function(a,b){"function"==typeof define&&define.amd?define("mlbtv-widget-fantasy/scripts/FantasyUtils",[],b):"object"==typeof exports?module.exports=b():a.FantasyUtils=b()}(this,function(){"use strict";function a(){}return a.prototype=$.extend(a.prototype,{}),a.replaceTokens=function(a,b){var c=/\$\{([a-zA-Z0-9|_]+)\}/g;return a.replace(c,function(){return b[arguments[1]]?b[arguments[1]]:""})},a}),define("mlbtv-widget-fantasy/scripts/GameData",["require","exports","module","./enums/events/FantasyEvents","bandwagon/bandwagon","./FantasyUtils"],function(a,b,c){function d(a){l=a,s=l.externalProxyCacheBust,t=l.playerStatsCacheBust,u=l.playerTrackerXMLCacheBust,v=l.endpoints,q=l.env}function e(){n=window.mp5Config,o="",n&&n.videocore&&n.videocore.container&&(o=window.mp5Config.videocore.container),x.registerEvents(z,w),m=x.getInstanceByKey(o),p=x.getRegisteredEventsByKey(z)}function f(a,b){var c,d,e,f,h,k,l=a[0].documentElement.getElementsByTagName("player"),n=b[0].documentElement.getElementsByTagName("game");for(C.players={},C.activePlayers={},"MLB"!=r&&(d=$(a[0].documentElement.getElementsByTagName("map")[0])),c=0;c<l.length;c++)l[c].getElementsByTagName("batting").length>0?(e=l[c].getElementsByTagName("batting")[0],g(d,{type:"B",id:l[c].getAttribute("id"),ab:e.getAttribute("ab"),s_ab:e.getAttribute("s_ab"),sb:e.getAttribute("sb"),
s_sb:e.getAttribute("s_sb"),avg:e.getAttribute("avg"),r:e.getAttribute("r"),s_r:e.getAttribute("s_r"),h:e.getAttribute("h"),s_h:e.getAttribute("s_h"),hr:e.getAttribute("hr"),s_hr:e.getAttribute("s_hr"),rbi:e.getAttribute("rbi"),s_rbi:e.getAttribute("s_rbi")})):l[c].getElementsByTagName("pitching").length>0?(e=l[c].getElementsByTagName("pitching")[0],g(d,{type:"P",id:l[c].getAttribute("id"),w:e.getAttribute("w"),l:e.getAttribute("l"),era:e.getAttribute("era"),ip:e.getAttribute("ip"),s_ip:e.getAttribute("s_ip"),h:e.getAttribute("h"),s_h:e.getAttribute("s_h"),r:e.getAttribute("r"),s_r:e.getAttribute("s_r"),so:e.getAttribute("k"),s_so:e.getAttribute("s_k")})):g(d,{id:l[c].getAttribute("id"),w:"-",l:"-",era:"-",ip:"-",s_ip:"-",h:"-",s_h:"-",r:"-",s_r:"-",so:"-",s_so:"-",hr:"-",s_hr:"-",rbi:"-",s_rbi:"-",ab:"-",s_ab:"-",sb:"-",s_sb:"-",avg:"-"});f=i(D,n),h=j(n),_.forEach(h,function(a){D[a.status_key]&&(a.timestamp=D[a.status_key].timestamp)}),k=_.filter(h,function(a){return!D[a.status_key]}),_.isEmpty(f)||(console.log("Stale Player alerts to dismiss alerts",f),m.publish(p.DISMISS_PLAYERS,f)),_.isEmpty(k)||(console.log("Active Player alerts for MyRoster",k),m.publish(p.ACTIVE_PLAYERS,k)),D=h}function g(a,b){"MLB"!=r?(b.yahooID=a.find("mapping[player_id="+b.id+"]").attr("yahoo"),C.players[b.yahooID]=b):C.players[b.id]=b}function h(a,b){return _.find(Object.keys(a),function(c){return a[c]===b})}function i(a,b){return _.filter(a,function(a){return!_.some(_.filter(b,function(b){return a.game_id===b.getAttribute("id")&&a.inning===b.getAttribute("inning")}),function(b){return _.some(b.getElementsByTagName(h(E,a.status)),function(b){return a.player_id===b.getAttribute("id")})})})}function j(a){var b={};if(!a)return b;for(var c,d,e,f,g,h,i,j,k,l=new Date,m=0;m<a.length;m++)j=a[m],Object.getOwnPropertyNames(E).forEach(function(a,m,n){if(k=j.getElementsByTagName(a),k.length>0&&(c=E[a],d=k[0],g=d.getAttribute("id"),C.activePlayers[g]=c,C.players[g]&&(i=j.getAttribute("inning"),h=g+"::"+i+"::"+c,e=d.getAttribute("first_name"),f=d.getAttribute("last_name"),void 0===b[h]))){var o={timestamp:l,status_key:h,player_id:g,status:c,player_name:e+" "+f,game_id:j.getAttribute("id"),calendar_event_id:j.getAttribute("calendar_event_id"),inning:i,team_abbrev:""};b[h]=o}});return b}function k(a,b,c){var d,e,g=new Date,h=g.getDate(),i=g.getMonth()+1,j=[];r=b,e=10>i?"0"+i:i.toString(),d=10>h?"0"+h:h.toString(),k=v&&v.playerTrackerXML?v.playerTrackerXML[q]:A;var k=y.replaceTokens(k,{year:g.getFullYear(),month:e,day:d});u&&(k+="?cacheBust="+(new Date).getTime().toString());for(var l=$.ajax({url:k,dataType:"xml"}),m=0;m<a.length;m++)"MLB"!=r?"p"==a[m].type?j.push("yahooPitcher="+a[m].id):j.push("yahooBatter="+a[m].id):"P"==a[m].position?j.push("pitcher="+a[m].id):j.push("batter="+a[m].id);k=v&&v.playerStatsAggregator?v.playerStatsAggregator[q]:B,k=k.indexOf("?")>-1?k+"&":k+"?",k+=j.join("&");var n=$.ajax({url:k,dataType:"xml"});$.when(l,n).done(function(a,b){f(b,a),c&&"function"==typeof c&&c()})}var l,m,n,o,p,q,r,s,t,u,v,w=a("./enums/events/FantasyEvents"),x=a("bandwagon/bandwagon"),y=a("./FantasyUtils"),z="FANTASY_EVENTS",A="http://gdx.mlb.com/components/game/mlb/year_${year}/month_${month}/day_${day}/playertracker.xml",B="http://fantasy-player-stats.mlb.com/soa/playerStatsAggregator/mp4.psa",C={},D={},E={current_pitcher:"pitching",current_batter:"at-bat",current_ondeck:"on-deck",current_inhole:"in-hole"};e(),b.initialize=d,b.gamedayData=C,b.updateGamedayData=k}),define("mlbtv-widget-fantasy/scripts/MLBFantasyController",["require","exports","module","./MLBExternalController","./GameData"],function(a,b,c){function d(a,b){$.get(n.convertExternalURL("http://www.mlb.com/PlayerTrackerServlet?cmd=G&uid="+a+"&cacheBust="+(1e5*Math.random()>>0)),b)}function e(a){$.getJSON(n.convertExternalURL("http://mlb.mlb.com/lookup/json/named.team_all.bam?all_star_sw=%27N%27&active_sw=%27Y%27&sport_code=%27mlb%27&team_all.col_in=name_display_full,team_id,team_code,league"),a)}function f(a,b){$.getJSON(n.convertExternalURL("http://mlb.mlb.com/lookup/json/named.roster_40.bam?team_id=%27"+a+"%27"),b)}function g(a,b){$.get(n.convertExternalURL("http://www.mlb.com/PlayerTrackerServlet?cmd=A&uid="+a+"&rname=My%20Roster&cacheBust="+(1e5*Math.random()>>0)),b)}function h(a,b,c){for(var d=[],e=b.allPlayers.length,f=0;e>f;f++)d.push(b.allPlayers[f].id+"^"+b.allPlayers[f].type);$.get(n.convertExternalURL("http://www.mlb.com/PlayerTrackerServlet?cmd=E&uid="+a+"&rid="+b.id+"&roster="+d.join(",")+"&cacheBust="+(1e5*Math.random()>>0)),c)}function i(a){var b=a.split("|"),c=b[2],d={id:b[0],name:b[1],allPlayers:[]};if(c){for(var e={},f=m(c),g=f.length,h=d.allPlayers,i=0;g>i;i++){var j=f[i];if(j){var k=j.split("^"),l={id:k[0],type:k[1],position:k[2],name:k[3],team:k[4]};h.push(l),e[k[0]]=l}}d.playerMap=e}return d}function j(a,b,c,d,e,f){if(!a.playerMap[b]){var g={id:b,name:c,position:d,team:e,type:f};a.allPlayers.unshift(g),a.playerMap[b]=g}}function k(a,b){for(var c=a.allPlayers.length,d=0;c>d;d++)if(a.allPlayers[d].id==b){a.allPlayers.splice(d,1);break}delete a.playerMap[b]}function l(a,b){if(o.gamedayData){for(var c,d=a.allPlayers,e=[],f=[],g=o.gamedayData.players,h=o.gamedayData.activePlayers,i=0;i<d.length;i++)if("P"==d[i].position){if(c=g[d[i].id],!c)continue;d[i].w=c.w,d[i].l=c.l,d[i].era=c.era,b?(d[i].ip=c.s_ip,d[i].h=c.s_h,d[i].r=c.s_r,d[i].so=c.s_so):(d[i].ip=c.ip,d[i].h=c.h,d[i].r=c.r,d[i].so=c.so),h[d[i].id]?d[i].status=h[d[i].id]:d[i].status="",f.push(d[i])}else{if(c=g[d[i].id],!c)continue;d[i].avg=c.avg,b?(d[i].r=c.s_r,d[i].h=c.s_h,d[i].hr=c.s_hr,d[i].rbi=c.s_rbi,d[i].ab=c.s_ab,d[i].sb=c.s_sb):(d[i].r=c.r,d[i].h=c.h,d[i].hr=c.hr,d[i].rbi=c.rbi,d[i].ab=c.ab,d[i].sb=c.sb),h[d[i].id]?d[i].status=h[d[i].id]:d[i].status="",e.push(d[i])}a.activeBatters=e,a.activePitchers=f}}function m(a){for(var b,c=[],d=a.split("^"),e=0;e<d.length;e++)b=d[e].toString(),e%4==0&&b.indexOf(",")>-1&&(d[e]=b.replace(",",",,"));return a=d.join("^"),c=a.split(",,")}var n=a("./MLBExternalController"),o=a("./GameData");b.loadMLBRoster=d,b.createMLBRoster=g,b.updateMLBRoster=h,b.loadTeams=e,b.loadRosterForTeam=f,b.splitMLBRosterToModel=i,b.addPlayerToModel=j,b.removePlayerFromModel=k,b.updateRosterModelWithGamedayData=l}),define("mlbtv-widget-fantasy/scripts/YahooFantasyController",["require","exports","module","./MLBExternalController","./GameData"],function(a,b,c){function d(a){$.ajax({dataType:"xml",url:"http://api.fantasysports.yahoo.com/fantasy/v1/users/status",xhrFields:{withCredentials:!0},success:a})}function e(a){k.popLoginPage(a)}function f(a){$.ajax({dataType:"xml",url:"http://api.fantasysports.yahoo.com/fantasy/v1/teams/games/mlb",xhrFields:{withCredentials:!0},success:a,error:function(){alert("There was an issue retrieving your fantasy league from Yahoo! services. Please try again later.")}})}function g(a,b,c,d){var e=(new Date).toISOString().substring(0,10);$.ajax({dataType:"xml",url:"http://api.fantasysports.yahoo.com/fantasy/v1/games/"+a+"/leagues/"+b+"/teams/"+c+"/roster/date/"+e+"/stats",xhrFields:{withCredentials:!0},success:d,error:function(){alert("There was an issue retrieving your fantasy roster from Yahoo! services. Please try again later.")}})}function h(a){var b,c,d,e,f={},g={};for(c=a.documentElement.getElementsByTagName("fantasy-game")[0].getElementsByTagName("fantasy-league")[0].getElementsByTagName("fantasy-team")[0].getElementsByTagName("fantasy-player"),e=c.length,f.allPlayers=[],d=f.allPlayers,b=0;e>b;b++){var h={},i=c[b].getElementsByTagName("fantasy-player-metadata")[0],j=i.getAttribute("display-position");h.id=i.getAttribute("player-key"),h.type=j.indexOf("P")>=0?"p":"b",h.name=i.getElementsByTagName("name")[0].getAttribute("full"),h.team=i.getAttribute("editorial-team-abbr").toLowerCase(),d.push(h),g[h.id]=h}return f.playerMap=g,f}function i(a,b){if(j.gamedayData){var c,d,e,f=a.allPlayers,g=[],h=[],i=j.gamedayData.players,k=j.gamedayData.activePlayers;for(d=f.length,c=0;d>c;c++)if("p"==f[c].type){if(e=i[f[c].id],!e)continue;f[c].w=e.w,f[c].l=e.l,f[c].era=e.era,b?(f[c].ip=e.s_ip,f[c].h=e.s_h,f[c].r=e.s_r,f[c].so=e.s_so):(f[c].ip=e.ip,f[c].h=e.h,f[c].r=e.r,f[c].so=e.so),k[e.id]?f[c].status=k[e.id]:f[c].status="",h.push(f[c])}else{if(e=i[f[c].id],!e)continue;f[c].avg=e.avg,b?(f[c].r=e.s_r,f[c].h=e.s_h,f[c].hr=e.s_hr,f[c].rbi=e.s_rbi,f[c].ab=e.s_ab,f[c].sb=e.s_sb):(f[c].r=e.r,f[c].h=e.h,f[c].hr=e.hr,f[c].rbi=e.rbi,f[c].ab=e.ab,f[c].sb=e.sb),k[e.id]?f[c].status=k[e.id]:f[c].status="",g.push(f[c])}a.activeBatters=g,a.activePitchers=h}}var j=(a("./MLBExternalController"),a("./GameData")),k={loginURL:"https://login.yahoo.com/config/login?logout=1&.direct=1&.done=https%3A//login.yahoo.com/config/login%3f.done=http://baseball.fantasysports.yahoo.com%2fpartner%2fmlb&.src=spt&.intl=us",popup:null,popLoginPage:function(a){this.popup=window.open(this.loginURL,"Log Into Yahoo!","width=780,height=635,scrollbars=1"),this.popup||alert("The Yahoo login popup was blocked. Please check your settings to allow popups for this page.")}};b.checkYahooLogin=d,b.loginYahoo=e,b.getYahooLeagues=f,b.getYahooRoster=g,b.buildYahooRosterModel=h,b.updateRosterModelWithGamedayData=i}),define("mlbtv-widget-fantasy/scripts/DraftKingsFantasyController",["require","exports","module","./MLBExternalController","./GameData"],function(a,b,c){function d(a){a(Curveball.Cookies.get("df_access_token")?{dkLoggedIn:!0}:{dkLoggedIn:!1})}function e(a){k.popLoginPage(a)}function f(a){Curveball.Cookies.get("df_access_token")&&$.ajax({dataType:"json",url:"https://www.draftkings.com/api/Lineup/List?fields=contest,entries&sport=MLB",type:"GET",headers:{Authorization:"bearer "+Curveball.Cookies.get("df_access_token")},success:a,error:function(){alert("There was an issue retrieving your fantasy league from DraftKings services. Please try again later.")}})}function g(a,b,c){var d,e,f,g,h=[],i=a.Lineups,j={};if(!i||0==i.length)return null;for(f=i.length,d=0;f>d;d++)0!=i[d].Entries.length&&(g=i[d].Entries[0].ContestId,j[g]||(j[g]=1),j[g]?i[d].LineupName=a.Contests[g].ContestName:i[d].LineupName=a.Contests[g].ContestName+" #"+j[g],j[g]++,e=document.createElement("option"),e.value=d,e.text=i[d].LineupName,h.push(e));if(0==h.length)return null;if(0==c&&0==i[0].Entries.length)for(d=1;f>d;d++)if(i[d].Entries.length>0){c=d;break}return b.teams=i,b.contests=a.Contests,b.selectedTeamIndex=c,h}function h(a){var b,c,d,e,f={},g={};for(c=a.DraftedPlayers,e=c.length,f.allPlayers=[],d=f.allPlayers,b=0;e>b;b++){var h={};h.id=c[b].StatsId,h.type="P"==c[b].RosterPositionName?"p":"b",h.name=c[b].FirstName+" "+c[b].LastName,h.averagePoints=c[b].AvgPointsPerGame,h.gamePoints=c[b].GamePoints,d.push(h),g[h.id]=h}return f.playerMap=g,f.isDraftKings=!0,f}function i(a,b){if(j.gamedayData){var c,d,e,f=a.allPlayers,g=[],h=[],i=j.gamedayData.players,k=j.gamedayData.activePlayers,l=0;for(d=f.length,c=0;d>c;c++)if("p"==f[c].type){if(e=i[f[c].id],!e)continue;f[c].w=e.w,f[c].l=e.l,f[c].era=e.era,f[c].ip=e.ip,f[c].h=e.h,f[c].r=e.r,f[c].so=e.so,f[c].pts=f[c].gamePoints,l+=f[c].gamePoints,k[e.id]?f[c].status=k[e.id]:f[c].status="",h.push(f[c])}else{if(e=i[f[c].id],!e)continue;f[c].avg=e.avg,f[c].r=e.r,f[c].h=e.h,f[c].hr=e.hr,f[c].rbi=e.rbi,f[c].ab=e.ab,f[c].sb=e.sb,f[c].pts=f[c].gamePoints,l+=f[c].gamePoints,k[e.id]?f[c].status=k[e.id]:f[c].status="",g.push(f[c])}a.totalPoints=l,a.activeBatters=g,a.activePitchers=h}}var j=(a("./MLBExternalController"),a("./GameData")),k={loginURL:"https://www.draftkings.com/oauth/authorize?client_id=dk-mlb&response_type=token&scope=user.lineup&redirect_uri=http%3A%2F%2Fmlb.mlb.com%2Fshared%2Fflash%2Fmediaplayer%2Fv4.5%2Fshared%2Fdraftkings%2Foauth.html",popup:null,popLoginPage:function(a){this.popup=window.open(this.loginURL,"Log Into DraftKings","width=780,height=635,scrollbars=1"),this.popup||alert("The DraftKings login popup was blocked. Please check your settings to allow popups for this page.")}};b.checkDraftKingsLogin=d,b.loginDraftKings=e,b.getDraftKingsLeagues=f,b.workLeagueData=g,b.buildDraftKingsRosterModel=h,b.updateRosterModelWithGamedayData=i}),define("hgn!mlbtv-widget-fantasy/templates/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="'),d.b(d.v(d.f("id",a,b,0))),d.b('" class="mlbtv-widget '),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b("\n"+c),d.b("	<h5>Fantasy Tracker</h5>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.s(d.f("isYahoo",a,b,1),a,b,0,87,143,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<select id="fantasy-tracker-yahoo-select"></select>'),d.b("\n"+c)}),a.pop()),d.s(d.f("isDraftKings",a,b,1),a,b,0,174,235,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<select id="fantasy-tracker-draftkings-select"></select>'),d.b("\n"+c)}),a.pop()),d.b("	"),d.b("\n"+c),d.b('	<fieldset class="button-radio">'),d.b("\n"+c),d.b("		<div>"),d.b("\n"+c),d.b('			<input type="radio" value="mlb" name="fantasy-tracker-provider-radio" id="fantasy-tracker-provider-mlb" '),d.s(d.f("isMLB",a,b,1),a,b,0,413,420,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("checked")}),a.pop()),d.b(" />"),d.b("\n"+c),d.b('			<label for="fantasy-tracker-provider-mlb">MLB.com</label>'),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("		<div "),d.s(d.f("yahooInactive",a,b,1),a,b,0,529,550,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('class="hidden-button"')}),a.pop()),d.b(">"),d.b("\n"+c),d.b('			<input type="radio" value="yahoo" name="fantasy-tracker-provider-radio" id="fantasy-tracker-provider-yahoo" '),d.s(d.f("isYahoo",a,b,1),a,b,0,693,700,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("checked")}),a.pop()),d.b(" />"),d.b("\n"+c),d.b('			<label for="fantasy-tracker-provider-yahoo">Yahoo! Sports</label>'),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("		<div "),d.s(d.f("draftKingsInactive",a,b,1),a,b,0,824,845,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('class="hidden-button"')}),a.pop()),d.b(">"),d.b("\n"+c),d.b('			<input type="radio" value="draftkings" name="fantasy-tracker-provider-radio" id="fantasy-tracker-provider-draftkings" '),d.s(d.f("isDraftKings",a,b,1),a,b,0,1008,1015,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("checked")}),a.pop()),d.b(" />"),d.b("\n"+c),d.b('			<label for="fantasy-tracker-provider-draftkings">DraftKings</label>'),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</fieldset>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.s(d.f("preState",a,b,1),a,b,0,1145,1249,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<button type="button" id="fantasy-tracker-create-button">'),d.b("\n"+c),d.b("			CREATE YOUR ROSTER &raquo;"),d.b("\n"+c),d.b("		</button>"),d.b("\n"+c)}),a.pop()),d.s(d.f("rosterSelect",a,b,1),a,b,0,1281,2554,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<button type="button" id="fantasy-tracker-submit">Submit Roster</button>'),d.b("\n"+c),d.b('		<div class="clear"></div>'),d.b("\n"+c),d.b("		<div>"),d.b("\n"+c),d.b('			<div class="clear"></div>'),d.b("\n"+c),d.b('			<div class="picks-table left" id="fantasy-tracker-team-table">'),d.b("\n"+c),d.b("				<h6>SELECT A TEAM:</h6>"),d.b("\n"+c),d.b('				<div class="iscroll-wrapper" id="team-list-scroll-target">'),d.b("\n"+c),d.b('					<div class="list-inner"></div>'),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="picks-table left" id="fantasy-tracker-player-table">'),d.b("\n"+c),d.b("				<h6>SELECT PLAYERS:</h6>"),d.b("\n"+c),d.b('				<div class="team-title"></div>'),d.b("\n"+c),d.b('				<div class="iscroll-wrapper" id="select-players-scroll-target">'),d.b("\n"+c),d.b('					<div class="list-inner"></div>'),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="picks-table last left" id="fantasy-tracker-roster-table">'),d.b("\n"+c),d.b("				<h6>MY ROSTER:</h6>"),d.b("\n"+c),d.b('				<div class="team-title">Players</div>'),d.b("\n"+c),d.b('				<div class="iscroll-wrapper" id="my-roster-scroll-target">'),d.b("\n"+c),d.b('					<div class="list-inner">'),d.b("\n"+c),d.s(d.f("activeRoster",a,b,1),a,b,0,2148,2464,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.s(d.f("allPlayers",a,b,1),a,b,0,2171,2442,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('								<div class="player-pick" data-id="'),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b("\n"+c),d.b('									<span class="list-position">'),d.b(d.v(d.f("position",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("									<span>"),d.b(d.v(d.f("name",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('									<span class="list-subtract"><a href="javascript:void(0);" data-index="'),d.b(d.v(d.f("index",a,b,0))),d.b('">&times;</a></span>'),d.b("\n"+c),d.b("								</div>"),d.b("\n"+c)}),a.pop())}),a.pop()),d.b("					</div>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="clear"></div>'),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c)}),a.pop()),d.s(d.f("rosterView",a,b,1),a,b,0,2588,6407,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.s(d.f("activeRoster",a,b,1),a,b,0,2608,6388,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('			<div class="clear"></div>'),d.b("\n"+c),d.s(d.f("currentDay",a,b,1),a,b,0,2656,2951,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('				<div class="center-container season-switch '),d.s(d.f("isDraftKings",a,b,1),a,b,0,2721,2730,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("invisible")}),a.pop()),d.b('">'),d.b("\n"+c),d.b('					<a class="selected" id="fantasy-tracker-current-switch" href="javascript:void(0);">CURRENT DAY</a> /'),d.b("\n"+c),d.b('					<a id="fantasy-tracker-season-switch" href="javascript:void(0);">SEASON</a>'),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c)}),a.pop()),d.s(d.f("season",a,b,1),a,b,0,2981,3232,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('				<div class="center-container season-switch">'),d.b("\n"+c),d.b('					<a id="fantasy-tracker-current-switch" href="javascript:void(0);">CURRENT DAY</a> /'),d.b("\n"+c),d.b('					<a class="selected" id="fantasy-tracker-season-switch" href="javascript:void(0);">SEASON</a>'),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c)}),a.pop()),d.b("			"),d.b("\n"+c),d.b("			<h6>MY "),d.b(d.v(d.f("serviceMode",a,b,0))),d.b(" ROSTER:</h6>"),d.b("\n"+c),d.b('			<div class="picks-table left" id="fantasy-tracker-active-batters">'),d.b("\n"+c),d.b('				<div class="list-inner">'),d.b("\n"+c),d.b("					<table>"),d.b("\n"+c),d.b("						<thead>"),d.b("\n"+c),d.b("							<tr>"),d.b("\n"+c),d.b('								<th class="player-name large-table-header '),d.s(d.f("isDraftKings",a,b,1),a,b,0,3492,3494,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("dk")}),a.pop()),d.b('">Batters</th>'),d.b("\n"+c),d.b('								<th class="ab">AB</th>'),d.b("\n"+c),d.b('								<th class="r">R</th>'),d.b("\n"+c),d.b('								<th class="h">H</th>'),d.b("\n"+c),d.b('								<th class="hr">HR</th>'),d.b("\n"+c),d.b('								<th class="rbi">RBI</th>'),d.b("\n"+c),d.b('								<th class="sb">SB</th>'),d.b("\n"+c),d.b('								<th class="avg">AVG</th>'),d.b("\n"+c),d.b("								"),d.s(d.f("isDraftKings",a,b,1),a,b,0,3768,3792,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<th class="pts">PTS</td>')}),a.pop()),d.b("\n"+c),d.b("							</tr>"),d.b("\n"+c),d.b("						</thead>"),d.b("\n"+c),d.b("					</table>"),d.b("\n"+c),d.b('					<div class="table-container" id="batters-scroll-target">'),d.b("\n"+c),d.b('						<table class="inner-roster-table">'),d.b("\n"+c),d.b("							<tbody>"),d.b("\n"+c),d.s(d.f("activeBatters",a,b,1),a,b,0,3996,4483,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("									<tr>"),d.b("\n"+c),d.b('										<td class="player-name '),d.s(d.f("isDraftKings",a,b,1),a,b,0,4061,4063,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("dk")}),a.pop()),d.b('"><span class="'),d.b(d.v(d.f("status",a,b,0))),d.b('"></span>'),d.b(d.v(d.f("name",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="ab">'),d.b(d.v(d.f("ab",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="r">'),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="h">'),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="hr">'),d.b(d.v(d.f("hr",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="rbi">'),d.b(d.v(d.f("rbi",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="sb">'),d.b(d.v(d.f("sb",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="avg">'),d.b(d.v(d.f("avg",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("										"),d.s(d.f("isDraftKings",a,b,1),a,b,0,4414,4442,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<td class="pts">'),c.b(c.v(c.f("pts",a,b,0))),c.b("</td>")}),a.pop()),d.b("\n"+c),d.b("									</tr>"),d.b("\n"+c)}),a.pop()),d.b("							</tbody>"),d.b("\n"+c),d.b("						</table>"),d.b("\n"+c),d.b("					</div>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="picks-table left" id="fantasy-tracker-active-pitchers">'),d.b("\n"+c),d.b('				<div class="list-inner">'),d.b("\n"+c),d.b("					<table>"),d.b("\n"+c),d.b("						<thead>"),d.b("\n"+c),d.b("							<tr>"),d.b("\n"+c),d.b('								<th class="player-name large-table-header '),d.s(d.f("isDraftKings",a,b,1),a,b,0,4772,4774,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("dk")}),a.pop()),d.b('">Pitchers</th>'),d.b("\n"+c),d.b('								<th class="w">W</th>'),d.b("\n"+c),d.b('								<th class="l">L</th>'),d.b("\n"+c),d.b('								<th class="era">ERA</th>'),d.b("\n"+c),d.b('								<th class="ip">IP</th>'),d.b("\n"+c),d.b('								<th class="h">H</th>'),d.b("\n"+c),d.b('								<th class="r">R</th>'),d.b("\n"+c),d.b('								<th class="so">SO</th>'),d.b("\n"+c),d.b("								"),d.s(d.f("isDraftKings",a,b,1),a,b,0,5043,5067,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<th class="pts">PTS</td>')}),a.pop()),d.b("\n"+c),d.b("							</tr>"),d.b("\n"+c),d.b("						</thead>"),d.b("\n"+c),d.b("					</table>"),d.b("\n"+c),d.b('					<div class="table-container"  id="pitchers-scroll-target">'),d.b("\n"+c),d.b('						<table class="inner-roster-table">'),d.b("\n"+c),d.b("							<tbody>"),d.b("\n"+c),d.s(d.f("activePitchers",a,b,1),a,b,0,5274,5755,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("									<tr>"),d.b("\n"+c),d.b('										<td class="player-name '),d.s(d.f("isDraftKings",a,b,1),a,b,0,5339,5341,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("dk")}),a.pop()),d.b('"><span class="'),d.b(d.v(d.f("status",a,b,0))),d.b('"></span>'),d.b(d.v(d.f("name",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="w">'),d.b(d.v(d.f("w",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="l">'),d.b(d.v(d.f("l",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="era">'),d.b(d.v(d.f("era",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="ip">'),d.b(d.v(d.f("ip",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="h">'),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="r">'),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('										<td class="so">'),d.b(d.v(d.f("so",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("										"),d.s(d.f("isDraftKings",a,b,1),a,b,0,5686,5714,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<td class="pts">'),c.b(c.v(c.f("pts",a,b,0))),c.b("</td>")}),a.pop()),d.b("\n"+c),d.b("									</tr>"),d.b("\n"+c)}),a.pop()),d.b("							</tbody>"),d.b("\n"+c),d.b("						</table>"),d.b("\n"+c),d.b("					</div>"),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="picks-table last left">'),d.b("\n"+c),d.b('				<div class="center-container">'),d.b("\n"+c),d.s(d.f("isMLB",a,b,1),a,b,0,5928,6025,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('						<button id="fantasy-tracker-edit-button">'),d.b("\n"+c),d.b("							EDIT ROSTER &raquo;"),d.b("\n"+c),d.b("						</button>"),d.b("\n"+c)}),a.pop()),d.s(d.f("isDraftKings",a,b,1),a,b,0,6058,6118,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('						<p id="fantasy-tracker-draftkings-ranking"></p>'),d.b("\n"+c)}),a.pop()),d.b("					<br /><br />"),d.b("\n"+c),d.b("					"),d.b("\n"+c),d.b('					<input id="fantasy-tracker-alert" type="checkbox" '),d.s(d.f("activeAlert",a,b,1),a,b,0,6231,6238,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("checked")}),a.pop()),d.b(" />"),d.b("\n"+c),d.b('					<label for="fantasy-tracker-alert">ALERT ME WHEN MY PLAYER IS UP</label>'),d.b("\n"+c),d.b("				</div>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="clear"></div>'),d.b("\n"+c)}),a.pop())}),a.pop()),d.s(d.f("externalLogin",a,b,1),a,b,0,6442,6834,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="clear"></div>'),d.b("\n"+c),d.b('		<div class="external-login-container">'),d.b("\n"+c),d.b('			<p class="external-text">'),d.b("\n"+c),d.b("				To connect your "),d.s(d.f("isYahoo",a,b,1),a,b,0,6573,6579,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("Yahoo!")}),a.pop()),d.s(d.f("isDraftKings",a,b,1),a,b,0,6608,6618,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("DraftKings")}),a.pop()),d.b(" Fantasy Baseball roster with MLB.TV, log in through the popup window and click the button below."),d.b("\n"+c),d.b('				<button id="fantasy-tracker-proceed-button" type="button">Load Roster</button>'),d.b("\n"+c),d.b("			</p>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c)}),a.pop()),d.s(d.f("noYahooLeague",a,b,1),a,b,0,6872,7377,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="clear"></div>'),d.b("\n"+c),d.b('		<div class="external-login-container">'),d.b("\n"+c),d.b('			<p class="external-text-alert">'),d.b("\n"+c),d.b("				"),d.s(d.f("yahooInProgress",a,b,1),a,b,0,7001,7189,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('You have not created a team on Yahoo! Fantasy Baseball. To create one, <a target="_blank" href="http://baseball.fantasysports.yahoo.com/">click here</a>. Registration ends June 29th, 2015.')}),a.pop()),d.b("\n"+c),d.b("				"),d.s(d.f("yahooEnded",a,b,1),a,b,0,7229,7343,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("Registration for Yahoo! Fantasy Baseball has ended for 2015. Don't worry, 2016 will be here sooner than you think.")}),a.pop()),d.b("\n"+c),d.b("			</p>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c)}),a.pop()),d.s(d.f("noDraftKingsLeague",a,b,1),a,b,0,7420,7789,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="clear"></div>'),d.b("\n"+c),d.b('		<div class="external-login-container">'),d.b("\n"+c),d.b('			<p class="external-text-alert">'),d.b("\n"+c),d.b('				You do not have an MLB lineup entered into a contest on DraftKings. To create one, <a target="_blank" href="https://www.draftkings.com/contest/draftteam/6524198?showPrizePop=True&showFppEntryPop=True&gatewayTemplateSetId=698">click here</a>.'),d.b("\n"+c),d.b("			</p>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c)}),a.pop()),d.b("	"),d.b("\n"+c),d.b('	<div class="player-status-map">'),d.b("\n"+c),d.b('		<span class="bottom-status pitching-status"></span>PITCHING'),d.b("\n"+c),d.b('		<span class="bottom-status at-bat-status"></span>AT BAT'),d.b("\n"+c),d.b('		<span class="bottom-status on-deck-status"></span>ON DECK'),d.b("\n"+c),d.b('		<span class="bottom-status in-hole-status"></span>IN HOLE'),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-fantasy/templates/teamList",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="team-title">American League</div>'),d.b("\n"+c),d.s(d.f("al",a,b,1),a,b,0,53,239,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<input type="radio" name="rosterSelectTeam" id="fantasy-tracker-team-'),d.b(d.v(d.f("team_id",a,b,0))),d.b('" data-id="'),d.b(d.v(d.f("team_id",a,b,0))),d.b('" />'),d.b("\n"+c),d.b('	<label for="fantasy-tracker-team-'),d.b(d.v(d.f("team_id",a,b,0))),d.b('">'),d.b(d.v(d.f("name_display_full",a,b,0))),d.b("</label>"),d.b("\n"+c)}),a.pop()),d.b('<div class="team-title">National League</div>'),d.b("\n"+c),d.s(d.f("nl",a,b,1),a,b,0,300,486,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<input type="radio" name="rosterSelectTeam" id="fantasy-tracker-team-'),d.b(d.v(d.f("team_id",a,b,0))),d.b('" data-id="'),d.b(d.v(d.f("team_id",a,b,0))),d.b('" />'),d.b("\n"+c),d.b('	<label for="fantasy-tracker-team-'),d.b(d.v(d.f("team_id",a,b,0))),d.b('">'),d.b(d.v(d.f("name_display_full",a,b,0))),d.b("</label>"),d.b("\n"+c)}),a.pop()),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-fantasy/templates/playerList",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.s(d.f("players",a,b,1),a,b,0,12,487,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<div class="player-pick" data-id="'),d.b(d.v(d.f("player_id",a,b,0))),d.b('">'),d.b("\n"+c),d.b('		<span class="list-position">'),d.b(d.v(d.f("position_txt",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('		<span class="list-name"><a href="javascript:void(0);">'),d.b(d.v(d.f("name_display_first_last",a,b,0))),d.b("</a></span>"),d.b("\n"+c),d.s(d.f("is_add",a,b,1),a,b,0,226,325,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('			<span class="list-add"><a href="javascript:void(0);" data-index="'),d.b(d.v(d.f("index",a,b,0))),d.b('">+ Add</a></span>'),d.b("\n"+c)}),a.pop()),d.s(d.f("is_subtract",a,b,1),a,b,0,355,462,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('			<span class="list-subtract"><a href="javascript:void(0);" data-index="'),d.b(d.v(d.f("index",a,b,0))),d.b('">&#10004;</a></span>'),d.b("\n"+c)}),a.pop()),d.b("	</div>"),d.b("\n"+c)}),a.pop()),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-fantasy/templates/rosterList",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.s(d.f("allPlayers",a,b,1),a,b,0,15,244,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<div class="player-pick" data-id="'),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b("\n"+c),d.b('		<span class="list-position">'),d.b(d.v(d.f("position",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("		<span>"),d.b(d.v(d.f("name",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('		<span class="list-subtract"><a href="javascript:void(0);" data-index="'),d.b(d.v(d.f("index",a,b,0))),d.b('">&times;</a></span>'),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c)}),a.pop()),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-fantasy/templates/activeBatterList",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<table>"),d.b("\n"+c),d.b("	<thead>"),d.b("\n"+c),d.b("		<tr>"),d.b("\n"+c),d.b('			<th class="player-name large-table-header '),d.s(d.f("isDraftKings",a,b,1),a,b,0,86,88,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("dk")}),a.pop()),d.b('">Batters</th>'),d.b("\n"+c),d.b('			<th class="ab">AB</th>'),d.b("\n"+c),d.b('			<th class="r">R</th>'),d.b("\n"+c),d.b('			<th class="h">H</th>'),d.b("\n"+c),d.b('			<th class="hr">HR</th>'),d.b("\n"+c),d.b('			<th class="rbi">RBI</th>'),d.b("\n"+c),d.b('			<th class="sb">SB</th>'),d.b("\n"+c),d.b('			<th class="avg">AVG</th>'),d.b("\n"+c),d.b("			"),d.s(d.f("isDraftKings",a,b,1),a,b,0,322,346,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<th class="pts">PTS</th>')}),a.pop()),d.b("\n"+c),d.b("		</tr>"),d.b("\n"+c),d.b("	</thead>"),d.b("\n"+c),d.b("</table>"),d.b("\n"+c),d.b('<div class="table-container" id="batters-scroll-target">'),d.b("\n"+c),d.b('	<table class="inner-roster-table">'),d.b("\n"+c),d.b("		<tbody>"),d.b("\n"+c),d.s(d.f("activeBatters",a,b,1),a,b,0,515,942,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("				<tr>"),d.b("\n"+c),d.b('					<td class="player-name '),d.s(d.f("isDraftKings",a,b,1),a,b,0,570,572,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("dk")}),a.pop()),d.b('"><span class="'),d.b(d.v(d.f("status",a,b,0))),d.b('"></span>'),d.b(d.v(d.f("name",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="ab">'),d.b(d.v(d.f("ab",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="r">'),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="h">'),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="hr">'),d.b(d.v(d.f("hr",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="rbi">'),d.b(d.v(d.f("rbi",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="sb">'),d.b(d.v(d.f("sb",a,b,0))),
d.b("</td>"),d.b("\n"+c),d.b('					<td class="avg">'),d.b(d.v(d.f("avg",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					"),d.s(d.f("isDraftKings",a,b,1),a,b,0,883,911,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<td class="pts">'),c.b(c.v(c.f("pts",a,b,0))),c.b("</td>")}),a.pop()),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c)}),a.pop()),d.b("		</tbody>"),d.b("\n"+c),d.b("	</table>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlbtv-widget-fantasy/templates/activePitcherList",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<table>"),d.b("\n"+c),d.b("	<thead>"),d.b("\n"+c),d.b("		<tr>"),d.b("\n"+c),d.b('			<th class="player-name large-table-header '),d.s(d.f("isDraftKings",a,b,1),a,b,0,86,88,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("dk")}),a.pop()),d.b('">Pitchers</th>'),d.b("\n"+c),d.b('			<th class="w">W</th>'),d.b("\n"+c),d.b('			<th class="l">L</th>'),d.b("\n"+c),d.b('			<th class="era">ERA</th>'),d.b("\n"+c),d.b('			<th class="ip">IP</th>'),d.b("\n"+c),d.b('			<th class="h">H</th>'),d.b("\n"+c),d.b('			<th class="r">R</th>'),d.b("\n"+c),d.b('			<th class="so">SO</th>'),d.b("\n"+c),d.b("			"),d.s(d.f("isDraftKings",a,b,1),a,b,0,317,341,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<th class="pts">PTS</th>')}),a.pop()),d.b("\n"+c),d.b("		</tr>"),d.b("\n"+c),d.b("	</thead>"),d.b("\n"+c),d.b("</table>"),d.b("\n"+c),d.b('<div class="table-container" id="pitchers-scroll-target">'),d.b("\n"+c),d.b('	<table class="inner-roster-table">'),d.b("\n"+c),d.b("		<tbody>"),d.b("\n"+c),d.s(d.f("activePitchers",a,b,1),a,b,0,512,933,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("				<tr>"),d.b("\n"+c),d.b('					<td class="player-name '),d.s(d.f("isDraftKings",a,b,1),a,b,0,567,569,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("dk")}),a.pop()),d.b('"><span class="'),d.b(d.v(d.f("status",a,b,0))),d.b('"></span>'),d.b(d.v(d.f("name",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="w">'),d.b(d.v(d.f("w",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="l">'),d.b(d.v(d.f("l",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="era">'),d.b(d.v(d.f("era",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="ip">'),d.b(d.v(d.f("ip",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="h">'),d.b(d.v(d.f("h",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="r">'),d.b(d.v(d.f("r",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b('					<td class="so">'),d.b(d.v(d.f("so",a,b,0))),d.b("</td>"),d.b("\n"+c),d.b("					"),d.s(d.f("isDraftKings",a,b,1),a,b,0,874,902,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('<td class="pts">'),c.b(c.v(c.f("pts",a,b,0))),c.b("</td>")}),a.pop()),d.b("\n"+c),d.b("				</tr>"),d.b("\n"+c)}),a.pop()),d.b("		</tbody>"),d.b("\n"+c),d.b("	</table>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlbtv-widget-fantasy/fantasy",["require","exports","module","./scripts/MLBFantasyController","./scripts/YahooFantasyController","./scripts/DraftKingsFantasyController","scrollMonitor/scrollMonitor","./scripts/GameData","mlb-tv-app/app/control/EventRegistry","hgn!./templates/container","hgn!./templates/teamList","hgn!./templates/playerList","hgn!./templates/rosterList","hgn!./templates/activeBatterList","hgn!./templates/activePitcherList"],function(a,b,c){function d(a){if(a.documentElement){var b=a.documentElement.getAttribute("logged-in"),c=a.documentElement.getAttribute("is-session-active");"false"==b||"false"==c?(v.presentExternalLogin(),x.loginYahoo(),$("#fantasy-tracker-proceed-button").click(function(){x.checkYahooLogin(d)})):(M={guid:a.documentElement.getAttribute("guid")},x.getYahooLeagues(e))}else a.dkLoggedIn?(M={guid:Curveball.Cookies.get("df_access_token")},y.getDraftKingsLeagues(e)):(v.presentExternalLogin(),y.loginDraftKings(),$("#fantasy-tracker-proceed-button").click(function(){y.checkDraftKingsLogin(d)}))}function e(a){if(t={allPlayers:[]},a.documentElement){v.viewRoster();var b,c,d,e,f,g,i=a.documentElement.getElementsByTagName("fantasy-game")[0],j=0,k=[],l=$("#fantasy-tracker-yahoo-select");if(M.gameID=i.getElementsByTagName("fantasy-game-metadata")[0].getAttribute("game-key"),0==i.getElementsByTagName("fantasy-league").length)return void v.presentNoYahooLeague();c=i.getElementsByTagName("fantasy-league"),e=c.length;for(var m=0;e>m;m++)c[m].getElementsByTagName("fantasy-team").length>0&&(d=c[m].getElementsByTagName("fantasy-league-metadata")[0],g=c[m].getElementsByTagName("fantasy-team")[0].getElementsByTagName("fantasy-team-metadata")[0],f={teamID:g.getAttribute("team-key"),leagueID:d.getAttribute("league-key"),teamName:g.getAttribute("team-name"),leagueName:d.getAttribute("league-name")},k.push(f),b=document.createElement("option"),b.value=j,b.text=f.teamName+" - "+f.leagueName,l[0].add(b),j++);if(0==k.length)return void v.presentNoYahooLeague();l.change(v.yahooSelectChange),M.teams=k,M.selectedTeamIndex=0,x.getYahooRoster(M.gameID,k[0].leagueID,k[0].teamID,h)}else{v.viewRoster();var l=$("#fantasy-tracker-draftkings-select"),n=y.workLeagueData(a,M,0);if(null==n)return void v.presentNoDraftKingsLeague();M.opts=n;for(var e=n.length,m=0;e>m;m++)l[0].add(n[m]);l.change(v.draftKingsSelectChange),h(M.teams[0])}}function f(a){var b,c,d={},e=a.roster_40.queryResults.row,f=t.playerMap;for(f||(t.playerMap={},f=t.playerMap),c=e.length,b=0;c>b;b++)e[b].index=b,f[e[b].player_id]?e[b].is_subtract=!0:e[b].is_add=!0;d.players=e,d.team=e[0].team_name,$("#fantasy-tracker-player-table .list-inner").html(Z(d)).scrollTop(0),$("#fantasy-tracker-player-table .team-title").html(d.team),T&&(T.destroy(),playersScroll=null),k(),U&&U.destroy(),l();var g=$("#fantasy-tracker-player-table .list-inner .player-pick");g.on("click",".list-add a",function(){var a=$(this);return 30==t.allPlayers.length?void alert("You may only have 30 players maximum on your MLB fantasy team."):(b=a.data("index"),w.addPlayerToModel(t,e[b].player_id,e[b].name_display_first_last,e[b].position_txt,e[b].team_code,"P"==e[b].position_txt?"p":"b"),a.html("&#10004;").parent().removeClass("list-add").addClass("list-subtract"),$("#fantasy-tracker-roster-table .list-inner").html(_(t)),U&&U.destroy(),l(),void $("#fantasy-tracker-submit").html("Submit Roster <span>("+t.allPlayers.length+" of 30)</span>"))}),g.on("click",".list-name a",function(){var a=$(this).parent().parent().find(".list-add a");if(0!=a.length){if(30==t.allPlayers.length)return void alert("You may only have 30 players maximum on your MLB fantasy team.");b=a.data("index"),w.addPlayerToModel(t,e[b].player_id,e[b].name_display_first_last,e[b].position_txt,e[b].team_code,"P"==e[b].position_txt?"p":"b"),a.html("&#10004;").parent().removeClass("list-add").addClass("list-subtract"),$("#fantasy-tracker-roster-table .list-inner").html(_(t)),U&&U.destroy(),l(),$("#fantasy-tracker-submit").html("Submit Roster <span>("+t.allPlayers.length+" of 30)</span>")}}),g.on("click",".list-subtract a",function(){var a=$(this),b=a.parent().parent().data("id");w.removePlayerFromModel(t,b),$("#fantasy-tracker-player-table .list-inner .player-pick[data-id="+b+"] .list-subtract a").html("+ Add").parent().removeClass("list-subtract").addClass("list-add"),$("#fantasy-tracker-roster-table .list-inner").html(_(t)),U&&U.destroy(),l(),$("#fantasy-tracker-submit").html("Submit Roster <span>("+t.allPlayers.length+" of 30)</span>")})}function g(a){for(var b=a.team_all.queryResults.row,c=b.length,d=[],e=[],g=0;c>g;g++)"AL"==b[g].league?d.push(b[g]):e.push(b[g]);O.al=d,O.nl=e,$("#fantasy-tracker-team-table .list-inner").html(Y(O)),S&&S.destroy(),j(),setTimeout(function(){S.refresh(),$("#fantasy-tracker-team-table .list-inner input[type=radio]").hide()},0),$("#fantasy-tracker-team-table input").click(function(){var a=$(this).data("id");w.loadRosterForTeam(a,f)}),$("#fantasy-tracker-roster-table .list-inner").on("click",".list-subtract a",function(){var a=$(this),b=a.parent().parent().data("id");w.removePlayerFromModel(t,b),$("#fantasy-tracker-player-table .list-inner .player-pick[data-id="+b+"] .list-subtract a").html("+ Add").parent().removeClass("list-subtract").addClass("list-add"),$("#fantasy-tracker-roster-table .list-inner").html(_(t)),l(),$("#fantasy-tracker-submit").html("Submit Roster <span>("+t.allPlayers.length+" of 30)</span>")})}function h(a){a.documentElement?(t=x.buildYahooRosterModel(a),p()):(t=y.buildDraftKingsRosterModel(a),p())}function i(a){var b=a.split("&")[0].substring(3);""==b?(P="S",t={},v.renderInit({id:C,preState:!0,isMLB:H,isYahoo:I,isDraftKings:J,yahooInactive:K,draftKingsInactive:L}),$("#fantasy-tracker-create-button").click(v.createRoster)):""==P?(t=w.splitMLBRosterToModel(b),P="V",p(),v.renderInit({id:C,season:E,currentDay:F,rosterView:!0,serviceMode:D,activeRoster:t,isMLB:H,isYahoo:I,isDraftKings:J,yahooInactive:K,draftKingsInactive:L}),t.activeBatters?($("#fantasy-tracker-active-batters").html(aa(t)),m(),$("#fantasy-tracker-active-pitchers").html(ba(t)),n()):($("#fantasy-tracker-active-batters").html("Waiting on live game data update."),$("#fantasy-tracker-active-pitchers").html("Waiting on live game data update.")),$("#fantasy-tracker-edit-button").click(v.editRoster),$("#fantasy-tracker-alert").change(v.toggleActiveAlert)):"V"==P?(t=w.splitMLBRosterToModel(b),v.viewRoster(),$("#fantasy-tracker-edit-button").click(v.editRoster),$("#fantasy-tracker-alert").change(v.toggleActiveAlert)):(t=w.splitMLBRosterToModel(b),v.editRoster())}function j(){var a=document.getElementById("team-list-scroll-target");a&&(S=o(a))}function k(){var a=document.getElementById("select-players-scroll-target");a&&(T=o(a))}function l(){var a=document.getElementById("my-roster-scroll-target");a&&(U=o(a))}function m(){var a=document.getElementById("batters-scroll-target");a&&(V=o(a))}function n(){var a=document.getElementById("pitchers-scroll-target");a&&(W=o(a))}function o(a){var b=new window.IScroll(a,{bounce:!1,disableTouch:!0,scrollbars:"custom",interactiveScrollbars:!0,mouseWheel:!0});return b}function p(){t&&"V"==P&&A.updateGamedayData(t.allPlayers,D,function(){"YAHOO"==D?x.updateRosterModelWithGamedayData(t,E):"DRAFTKINGS"==D?(y.updateRosterModelWithGamedayData(t,E),y.getDraftKingsLeagues(function(a){var b=y.workLeagueData(a,M,M.selectedTeamIndex);if(!b)return void v.presentNoDraftKingsLeague();var c=document.getElementById("fantasy-tracker-draftkings-select"),d=+c.options[c.selectedIndex].value,e=M.teams,f=(M.contests,e[d].Entries[0].Status);"Live"==f||"PendingPayouts"==f||"Completed"==f||"FinalizingScores"==f?$("#fantasy-tracker-draftkings-ranking").html('<span class="points-label">TOTAL FANTASY POINTS</span><div class="points-text">'+t.totalPoints.toLocaleString({useGrouping:!0})+'</div><span class="rank-label">RANK:</span> '+e[d].Entries[0].Rank.toLocaleString({useGrouping:!0})+"/"+M.contests[e[d].Entries[0].ContestId].EntryCount.toLocaleString({useGrouping:!0})):$("#fantasy-tracker-draftkings-ranking").html("")})):w.updateRosterModelWithGamedayData(t,E),t&&"V"==P&&($("#fantasy-tracker-active-batters").html(aa(t)),m(),$("#fantasy-tracker-active-pitchers").html(ba(t)),n())})}function q(){w.loadMLBRoster(N,i)}function r(a){v=this,u=$.extend({},ca,a),A.initialize(u.options),q()}var s,t,u,v,w=a("./scripts/MLBFantasyController"),x=a("./scripts/YahooFantasyController"),y=a("./scripts/DraftKingsFantasyController"),z=a("scrollMonitor/scrollMonitor"),A=a("./scripts/GameData"),B=a("mlb-tv-app/app/control/EventRegistry"),C="fantasy-widget",D="MLB",E=!1,F=!0,G=!1,H=!0,I=!1,J=!1,K=!window.mp5Config.app.components.fantasy.yahooActive,L=!window.mp5Config.app.components.fantasy.draftKingsActive,M={},N=Curveball.Cookies.get("ipid"),O={},P="",Q=2e4,R=void 0,S=void 0,T=void 0,U=void 0,V=void 0,W=void 0,X=a("hgn!./templates/container"),Y=a("hgn!./templates/teamList"),Z=a("hgn!./templates/playerList"),_=a("hgn!./templates/rosterList"),aa=a("hgn!./templates/activeBatterList"),ba=a("hgn!./templates/activePitcherList"),ca=($("#fantasy-tracker-player-table"),$("#fantasy-tracker-roster-table"),{container:"body"});R=setInterval(p,Q),r.prototype={initiScroll:function(){m(),n()},renderInit:function(a){return $("#"+C)[0]?v.render(a):($(u.container).append(X(a)),void v.postRender())},render:function(a){s.replaceWith(X(a)),v.postRender()},postRender:function(){s=$("#"+C),$(".season-switch a").click(v.seasonSwitchClick),$(".button-radio input").click(v.changeService),v.setActiveBehavior()},changeService:function(a){"fantasy-tracker-provider-yahoo"==this.id?(D="YAHOO",I=!0,J=!1,H=!1,P="V",x.checkYahooLogin(d)):"fantasy-tracker-provider-draftkings"==this.id?(D="DRAFTKINGS",I=!1,J=!0,H=!1,P="V",y.checkDraftKingsLogin(d)):(D="MLB",I=!1,J=!1,H=!0,P="V",w.loadMLBRoster(N,i))},seasonSwitchClick:function(){var a,b,c,d;if("fantasy-tracker-current-switch"==this.id&&E){if(E=!1,F=!0,$(".season-switch a").removeClass("selected"),$(this).addClass("selected"),v.viewRoster(),$("#fantasy-tracker-edit-button").click(v.editRoster),$("#fantasy-tracker-alert").change(v.toggleActiveAlert),"YAHOO"==D){for(d=$("#fantasy-tracker-yahoo-select"),c=M.teams,b=c.length,a=0;b>a;a++)opt=document.createElement("option"),opt.value=a,opt.text=c[a].teamName+" - "+c[a].leagueName,d[0].add(opt);d[0].selectedIndex=M.selectedTeamIndex,d.change(v.yahooSelectChange)}else if("DRAFTKINGS"==D){for(d=$("#fantasy-tracker-draftkings-select"),b=M.opts.length,a=0;b>a;a++)d[0].add(M.opts[a]);d[0].selectedIndex=M.selectedTeamIndex,d.change(v.draftKingsSelectChange)}}else if("fantasy-tracker-season-switch"==this.id&&F)if(E=!0,F=!1,$(".season-switch a").removeClass("selected"),$(this).addClass("selected"),v.viewRoster(),$("#fantasy-tracker-edit-button").click(v.editRoster),$("#fantasy-tracker-alert").change(v.toggleActiveAlert),"YAHOO"==D){for(d=$("#fantasy-tracker-yahoo-select"),c=M.teams,b=c.length,a=0;b>a;a++)opt=document.createElement("option"),opt.value=a,opt.text=c[a].teamName+" - "+c[a].leagueName,d[0].add(opt);d[0].selectedIndex=M.selectedTeamIndex,d.change(v.yahooSelectChange)}else if("DRAFTKINGS"==D){for(d=$("#fantasy-tracker-draftkings-select"),b=M.opts.length,a=0;b>a;a++)d[0].add(M.opts[a]);d[0].selectedIndex=M.selectedTeamIndex,d.change(v.draftKingsSelectChange)}},yahooSelectChange:function(){var a=document.getElementById("fantasy-tracker-yahoo-select"),b=+a.options[a.selectedIndex].value,c=M.teams;M.selectedTeamIndex=b,x.getYahooRoster(M.gameID,c[b].leagueID,c[b].teamID,h)},draftKingsSelectChange:function(){var a=document.getElementById("fantasy-tracker-draftkings-select"),b=+a.options[a.selectedIndex].value,c=M.teams,d=c[b].Entries[0].Status,e=$("#fantasy-tracker-draftkings-ranking");M.selectedTeamIndex=b,"Live"==d||"PendingPayouts"==d||"Completed"==d||"FinalizingScores"==d?e.html('<span class="points-label">TOTAL FANTASY POINTS</span><div class="points-text">'+t.totalPoints.toLocaleString({useGrouping:!0})+'</div><span class="rank-label">RANK:</span> '+c[b].Entries[0].Rank.toLocaleString({useGrouping:!0})+"/"+M.contests[c[b].Entries[0].ContestId].EntryCount.toLocaleString({useGrouping:!0})):e.html(""),h(c[b])},presentExternalLogin:function(){v.render({id:C,season:E,currentDay:F,externalLogin:!0,serviceMode:D,isMLB:H,isYahoo:I,isDraftKings:J,yahooInactive:K,draftKingsInactive:L}),$("#fantasy-widget select").remove()},presentNoYahooLeague:function(){var a=!0,b=new Date,c=b.getFullYear(),d=b.getMonth(),e=b.getDate(),f=2016;c>f?a=!1:c==f&&d>5?a=!1:c==f&&5==d&&e>29&&(a=!1),v.render({id:C,season:E,currentDay:F,noYahooLeague:!a,yahooInProgress:a,yahooEnded:!a,serviceMode:D,isMLB:H,isYahoo:I,isDraftKings:J,yahooInactive:K,draftKingsInactive:L}),$("#fantasy-widget select").remove()},presentNoDraftKingsLeague:function(){v.render({id:C,season:E,currentDay:F,noDraftKingsLeague:!0,serviceMode:D,isMLB:H,isYahoo:I,isDraftKings:J,yahooInactive:K,draftKingsInactive:L}),$("#fantasy-widget select").remove()},toggleActiveAlert:function(){G=!G},createRoster:function(){w.createMLBRoster(N,function(a){var b=+a.split("=")[1];-1!=b&&(t.id=b,q())})},editRoster:function(){P="E",v.render({id:C,rosterSelect:!0,activeRoster:t,isMLB:H,isYahoo:I,isDraftKings:J,yahooInactive:K,draftKingsInactive:L}),$("#fantasy-tracker-submit").click(v.submitRoster).html("Submit Roster <span>("+t.allPlayers.length+" of 30)</span>"),w.loadTeams(g)},submitRoster:function(){w.updateMLBRoster(N,t,v.viewRoster)},viewRoster:function(){var a=E,b=F;P="V",p(),J&&(a=!1,b=!0),v.render({id:C,season:a,currentDay:b,rosterView:!0,serviceMode:D,activeRoster:t,isMLB:H,isYahoo:I,isDraftKings:J,yahooInactive:K,draftKingsInactive:L}),t.activeBatters?($("#fantasy-tracker-active-batters").html(aa(t)),m(),$("#fantasy-tracker-active-pitchers").html(ba(t)),n()):($("#fantasy-tracker-active-batters").html("Waiting on live game data update."),$("#fantasy-tracker-active-pitchers").html("Waiting on live game data update.")),$("#fantasy-tracker-edit-button").click(v.editRoster),G=!1},setActiveBehavior:function(){var a=z.create(s,-180);a.enterViewport(function(){s.addClass("activeWidget"),B.getDispatcher().publish(B.getVideoPlayerEvents().ACTIVE_WIDGET_UPDATE,C)}),a.exitViewport(function(){s.removeClass("activeWidget"),B.getDispatcher().publish(B.getVideoPlayerEvents().ACTIVE_WIDGET_REMOVE,C)}),l()},start:function(a){},stop:function(a){},update:function(a){}},b.FantasyWidget=r}),define("mlb-tv-app/app/view/components/Fantasy",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/GamedayUpdate","mlb-tv-app/app/model/AppConfig","mlbtv-widget-fantasy/fantasy","mlb-tv-app/app/model/StateModel"],function(a,b,c,d,e,f,g,h){var i=c.extend({viewName:"FantasyWidgetView",tagName:"div",el:"#widgets",events:{},initialize:function(){try{this.enabled=window.mp5Config.app.components.fantasy.enabled&&!h.get("isPSTV")}catch(a){console.error("FantasyWidgetView: There was an error getting config: "+this.e)}this.enabled&&(this.initListeners(),this.deviceType=getStartupDeviceTypeString(),this.render())},initListeners:function(){this.listenTo(d,"gamedaywidget:update",this.updateGamedayData),this.listenTo(d,"player:loaded",this.renderFantasyiScroll)},updateGamedayData:function(a){console.log("Fantasy Widget: UpdateGamedayData()",e),this.fantasyWidget.update(e.toJSON())},render:function(){var a=f.getValue("app.components.fantasy");a.env=f.getValue("global.env"),this.fantasyWidget=new g.FantasyWidget({container:this.$el,options:a})},renderFantasyiScroll:function(){this.fantasyWidget.initiScroll()}});return i}),function(a){"function"==typeof define&&define.amd?define("paperboy/paperboy",a):"object"==typeof module&&module.exports?module.exports=a():window.paperboy=a()}(function(){var a={},b=Array.prototype.slice;return a.mixin=function(a,c){function d(a,b){for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function e(a,b){throw new Error("tried to "+a+" a non-existent event type: "+type+". Options are: "+c.join(", "))}function f(c){if(h&&!g[c])e("trigger",c);else if(!g[c]&&0===g["*"].length)return;for(var d=g["*"].slice(),f=0;f<d.length;f++)d[f].callback.apply(a,b.call(arguments)),d[f].isOne&&a.off(c,d[f].callback);if(g[c]){var i=b.call(arguments,1);d=g[c].slice();for(var f=0;f<d.length;f++)d[f].callback.apply(a,i),d[f].isOne&&a.off(c,d[f].callback)}}var g={"*":[]},h=!!c;if(c)for(var i=0;i<c.length;i+=1)g[c[i]]=[];return a.on=function(a,b,c){c=!!c,h&&!g[a]?e("add",a):g[a]||(g[a]=[]),g[a].push({callback:b,isOne:c})},a.once=a.one=function(b,c){a.on(b,c,!0)},a.off=function(a,b){if(h&&!g[a])e("remove",a);else if(!g[a])return;for(var c,d=0;c=g[a][d];d+=1)if(c.callback===b)return void g[a].splice(d,1)},a.on.accepts=function(a){return h?-1!==d(c,a):!0},f.repeat=function(c,g){if(g)for(var h=0;h<g.length;h+=1)!a.on.accepts||a.on.accepts(g[h])?!function(d){c.on(g[h],function(){var c=b.call(arguments);c.unshift(d),f.apply(a,c)})}(g[h]):e("repeat",g[h]);else c.on("*",function(b){g&&-1===d(g,b)||f.apply(a,arguments)})},f},a.emitter=function(b){var c={};return c.trigger=a.mixin(c,b),c},a}),define("hgn!mlbtv-widget-social/templates/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<!--"),d.b("\n"+c),d.b('<div id="'),d.b(d.v(d.f("id",a,b,0))),d.b('" class="mlbtv-widget '),d.b(d.v(d.f("id",a,b,0))),d.b('">'),d.b("\n"+c),d.b("	<h5>Twitter</h5>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.s(d.f("disabled",a,b,1),a,b,0,85,141,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<span class="availability">'),d.b("\n"+c),d.b("			"),d.b(d.v(d.f("reason",a,b,0))),d.b("\n"+c),d.b("		</span>"),d.b("\n"+c)}),a.pop()),d.b("</div>"),d.b("\n"+c),d.b("-->"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlbtv-widget-social/social",["require","exports","module","paperboy/paperboy","scrollMonitor/scrollMonitor","hgn!./templates/container"],function(a,b,c){function d(){g.render()}function e(a){g=this,f=$.extend({},n,a),d()}var f,g,h=a("paperboy/paperboy"),i=a("scrollMonitor/scrollMonitor"),j="social-widget",k="active_"+j+"_widget",l=h.emitter([k]),m=a("hgn!./templates/container"),n={container:"body"};e.prototype={render:function(){$(f.container).append(m({id:j,disabled:!0,reason:"Not Available for Spring Training"})),g.setActiveBehavior()},setActiveBehavior:function(){var a=$("#"+j),b=i.create(a,-150);b.enterViewport(function(){a.addClass("activeWidget"),l.trigger(k,j)}),b.exitViewport(function(){a.removeClass("activeWidget")})},start:function(a){console.log("if there's a poller in this widget, allow it to be started here"),console.log(j+".start()",a)},stop:function(a){console.log("if there's a poller in this widget, allow it to be stopped here"),console.log(j+".stop()",a)},update:function(a){console.log(j+".update()",a),$("#"+j).html(a)}},b.ACTIVE_WIDGET=k,b.emitter=l,b.SocialWidget=e}),define("mlb-tv-app/app/view/components/Social",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlbtv-widget-social/social"],function(a,b,c,d,e){var f=c.extend({viewName:"SocialWidgetView",tagName:"div",el:"#widgets",events:{},initialize:function(){this.initListeners(),this.deviceType=getStartupDeviceTypeString();try{this.enabled=window.mp5Config.app.components.social.enabled}catch(a){console.error("SocialWidgetView: There was an error getting config: "+this.e)}this.enabled&&this.render()},initListeners:function(){},render:function(){this.socialWidget=new e.SocialWidget({container:this.$el});var a=e.emitter;a.on(e.ACTIVE_WIDGET,function(a){d.trigger("activewidget:update",a)})}});return f}),define("jqueryui-amd/jqueryui/widget",["jquery"],function(a){!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(a)}),define("jqueryui-amd/jqueryui/core",["jquery"],function(a){!function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){
a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}}))}(a)}),define("jqueryui-amd/jqueryui/button",["jquery","./core","./widget"],function(a){!function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,j),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i="checkbox"===this.type||"radio"===this.type,l=i?"":"ui-state-active",m="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===c&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||a(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){b.buttonElement.addClass(m)}).bind("blur"+this.eventNamespace,function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change"+this.eventNamespace,function(){f||b.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){h.disabled||(f=!1,d=a.pageX,e=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){h.disabled||(d!==a.pageX||e!==a.pageY)&&(f=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return h.disabled||f?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),c=this,void b.document.one("mouseup",function(){c=null}))}).bind("mouseup"+this.eventNamespace,function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return h.disabled?!1:void((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?void(b?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(i),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(a)}),define("jqueryui-amd/jqueryui/datepicker",["jquery","./core"],function(a){!function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,todayDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.0"}});var f,g="datepicker",h=(new Date).getTime();a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;e<a.length;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},"string"==typeof d&&(g={},g[d]=f),void(k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k))))},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(b){var c,d,e=a.datepicker._getInst(b.target);return a.datepicker._get(e,"constrainInput")?(c=a.datepicker._possibleChars(a.datepicker._get(e,"dateFormat")),d=String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),b.ctrlKey||b.metaKey||" ">d||!c||c.indexOf(d)>-1):void 0},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!==document.activeElement&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=this._getTodayDate(e),e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(c="object"==typeof c?c.toString():c+"",""===c)return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=c.substring(i).match(e);if(!f)throw"Missing number at position "+i;return i+=f[0].length,parseInt(f[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];return c.substr(i,d.length).toLowerCase()===d.toLowerCase()?(f=b[0],i+=d.length,!1):void 0}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():100>p&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k>=p?0:-100)),s>-1)for(q=1,r=s;;){if(f=this._getDaysInMonth(p,q-1),f>=r)break;q++,r-=f}if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=d+1<a.length&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;d.length<c;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;d<a.length;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=b+1<a.length&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;b<a.length;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){
var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"===g.toString()?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){window["DP_jQuery_"+h].datepicker._adjustDate(d,-c,"M")},next:function(){window["DP_jQuery_"+h].datepicker._adjustDate(d,+c,"M")},hide:function(){window["DP_jQuery_"+h].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+h].datepicker._gotoToday(d)},selectDay:function(){return window["DP_jQuery_"+h].datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+h].datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+h].datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=this._getTodayDate(a),P=this._get(a,"isRTL"),Q=this._get(a,"showButtonPanel"),R=this._get(a,"hideIfNoPrevNext"),S=this._get(a,"navigationAsDateFormat"),T=this._getNumberOfMonths(a),U=this._get(a,"showCurrentAtPos"),V=this._get(a,"stepMonths"),W=1!==T[0]||1!==T[1],X=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Y=this._getMinMaxDate(a,"min"),Z=this._getMinMaxDate(a,"max"),$=a.drawMonth-U,_=a.drawYear;if(0>$&&($+=12,_--),Z)for(b=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-T[0]*T[1]+1,Z.getDate())),b=Y&&Y>b?Y:b;this._daylightSavingAdjust(new Date(_,$,1))>b;)$--,0>$&&($=11,_--);for(a.drawMonth=$,a.drawYear=_,c=this._get(a,"prevText"),c=S?this.formatDate(c,this._daylightSavingAdjust(new Date(_,$-V,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,_,$)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+c+"</span></a>":R?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=S?this.formatDate(e,this._daylightSavingAdjust(new Date(_,$+V,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,_,$)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+e+"</span></a>":R?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(P?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?X:O,g=S?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=Q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(P?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(P?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;w<T[0];w++){for(x="",this.maxRows=4,y=0;y<T[1];y++){if(z=this._daylightSavingAdjust(new Date(_,$,a.selectedDay)),A=" ui-corner-all",B="",W){if(B+="<div class='ui-datepicker-group",T[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(P?"right":"left");break;case T[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(P?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?P?f:d:"")+(/all|right/.test(A)&&0===w?P?d:f:"")+this._generateMonthYearHeader(a,$,_,Y,Z,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(_,$),_===a.selectedYear&&$===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(_,$)-k+7)%7,G=Math.ceil((F+E)/7),H=W&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(_,$,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==$,N=M&&!s||!L[0]||Y&&Y>I||Z&&I>Z,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&$===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===X.getTime()?" "+this._currentClass:"")+(I.getTime()===O.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2]+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===O.getTime()?" ui-state-highlight":"")+(I.getTime()===X.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}$++,$>11&&($=0,_++),B+="</tbody></table>"+(W?"</div>"+(T[0]>0&&y===T[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||k<=e.getMonth())&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getTodayDate:function(a){return this._determineDate(a,this._get(a,"todayDate"),new Date)},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10)+d,h=parseInt(c[1],10)+d),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||b.getFullYear()<=h)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.0",window["DP_jQuery_"+h]=a}(a)}),function(a,b){"function"==typeof define&&define.amd?define("ensureDate/ensureDate",["require","exports","module"],function(a,c,d){d.exports=b()}):"object"==typeof exports?module.exports=b():a.bamEnsureDate=b()}(this,function(){return function(a){var b="undefined"!=typeof a?a instanceof Date?a:new Date(a):new Date;if(isNaN(b.getTime()))throw"ensureDate: Invalid date";return b}}),define("floorDate/floorDate",["require","ensureDate/ensureDate"],function(a){var b=a("ensureDate/ensureDate");return function(a,c,d,e){switch(c=b(d?c.toString():c),a||"day"){case"year":c.setMonth(0);case"month":case"week":c.setDate("week"===a?c.getDate()-c.getDay()+~~+e:1);case"day":c.setHours(0);case"hour":c.setMinutes(0);case"minute":c.setSeconds(0);default:c.setMilliseconds(0)}return c}}),function(a,b){"function"==typeof define&&define.amd?define("pageMeta/pageMeta",[],b):"object"==typeof exports?module.exports=b():a.bamPageMeta=b()}(this,function(){"use strict";var a=document.querySelectorAll("meta"),b=Array.prototype.slice.call(a),c={};return b.forEach(function(a,b){var d=a.getAttribute("name")||a.getAttribute("property");if(d){var e="bam-override-"+d+"=",f=window.location.href.indexOf(e);if(-1!==f){var g=window.location.href.substr(f+e.length),h=g.indexOf("&");-1!==h&&(g=g.substr(0,h)),c[d]=g}else c[d]=a.getAttribute("content");switch(a.getAttribute("data-type")){case"json":c[d]=JSON.parse(c[d])}}}),c}),define("pad/pad",[],function(){return function(a,b,c){for(a=a.toString(),c=c||"0",b=b||2;a.length<b;)a=c+a;return a}}),define("flipDate/flipDate",["exports","pageMeta/pageMeta","pad/pad"],function(a,b,c){"use strict";var d,e=864e5,f=!1;a.recalculate=function(a,c,g){a=a||b.serverTime,c=c||b.flipTime||"11:00",g=g||b.flipTimeZoneOffset||"-0400";var h=new Date(a);isNaN(h)&&(h=new Date),c=c.replace(":","");var i=+c.slice(0,-2),j=+c.slice(-2);isNaN(i)&&(i=11),isNaN(j)&&(j=0);var k=60*i+j;g=g.replace(":","");var l=+g.slice(0,-2)||0,m=+g.slice(-2)||0;isNaN(l)&&(l=-4),isNaN(m)&&(m=0);var n=60*(60*l+m)*1e3,o=new Date(h.getTime()+n),p=o.getUTCHours(),q=o.getUTCMinutes(),r=60*p+q;d=k>r?new Date(o.getTime()-e):o,f=!0},a.getOffset=function(b){f||a.recalculate();var g;return g=0!==b?new Date(d.getTime()+b*e):d,g.getUTCFullYear()+"/"+c(g.getUTCMonth()+1)+"/"+c(g.getUTCDate())},a.today=function(){return a.getOffset(0)},a.tomorrow=function(){return a.getOffset(1)},a.yesterday=function(){return a.getOffset(-1)}}),define("jquery.daypicker/jquery.daypicker",["require","jquery","jqueryui-amd/jqueryui/widget","jqueryui-amd/jqueryui/button","jqueryui-amd/jqueryui/datepicker","floorDate/floorDate","flipDate/flipDate"],function(a){var b=a("jquery"),c=(a("jqueryui-amd/jqueryui/widget"),a("jqueryui-amd/jqueryui/button"),a("jqueryui-amd/jqueryui/datepicker"),a("floorDate/floorDate")),d=a("flipDate/flipDate");!function(){var a=b.Widget.prototype,e=b(window),f=/\s+/,g=b.datepicker._gotoToday;b.datepicker._gotoToday=function(a){var c=b(a).closest(".bam-daypicker");c.length||g.call(b.datepicker,a)},b.widget("bam.daypicker",{_daysOfWeek:"sunday monday tuesday wednesday thursday friday saturday".split(" "),_daySelector:"#daypicker-view .bam-daypicker-calendar .ui-datepicker-inline .ui-datepicker-calendar td, #daypicker-view .bam-daypicker-calendar .ui-datepicker .ui-datepicker-calendar td",_calendarMiddleIdx:1,_calendarEdgeMonths:5,_countsQueryTemplateUrl:"http://mlb.mlb.com/lookup/json/named.schedule_game_aggregate_date.bam?season=@@YEAR@@&end_date=%27@@YEAR@@/12/31%27&sport_code=%27mlb%27&start_date=%27@@YEAR@@/01/01%27&game_type=%27R%27&game_type=%27A%27&game_type=%27L%27&game_type=%27D%27&game_type=%27W%27&game_type=%27S%27&game_type=%27F%27&schedule_game_count_by_date.col_in=game_date,games",_queryYearKey:"@@YEAR@@",countsAppended:!1,countsYearPending:null,gameCounts:{},countRequestQueue:[],options:{increment:"day",firstDayOfWeek:"Sunday",toggleButton:null,previousButton:null,previousText:"Previous",nextButton:null,nextText:"Next",i18n:"en",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]},_widgetClass:function(a){var c=this.widgetBaseClass+"-";return b.map(b.trim(a).split(f),function(a){return c+a}).join(" ")},_formatDate:function(a,c,d){return b.datepicker.formatDate(a,c,d)},_create:function(){this.widgetBaseClass=this.widgetFullName;var a=this.element,c=this.options,d=this._previousButton=c.previousButton?b(c.previousButton):b("<button/>",{html:c.previousText}),e=this._toggleButton=b(c.toggleButton?c.toggleButton:"<button/>"),f=this._nextButton=c.nextButton?b(c.nextButton):b("<button/>",{html:c.nextText}),g=this._datepicker=b("<div/>").appendTo("body").datepicker({showButtonPanel:!0,dateFormat:"m/d/yy",onSelect:b.proxy(this,"_handleDatepickerSelect"),monthNames:c.monthNames,todayDate:c.todayDate}).addClass(this._widgetClass("calendar")).css({position:"absolute",display:"none",zIndex:"99999"}).delegate(".ui-datepicker-current","click",b.proxy(this,"_handleTodayButtonClick"));d.button().addClass(this._widgetClass("previous")).bind("click",b.proxy(this,"_previous")),e.button().addClass(this._widgetClass("toggle")).bind("click",b.proxy(this,"_toggle")),f.button().addClass(this._widgetClass("next")).bind("click",b.proxy(this,"_next")),g.datepicker("widget").remove(),a.addClass(this.widgetBaseClass+" ui-widget").append(d,e,f)},_init:function(){var a=(this.element,this.options=b.extend(!0,{},b.bam.daypicker.i18n[this.options.i18n],this.options)),c="undefined"==typeof a.date?d.today():a.date;delete a.date,a.max&&this._setMax(a.max),a.min&&this._setMin(a.min),a.numberOfMonths&&this._setNumberOfMonths(a.numberOfMonths),a.beforeShow&&this._beforeShow(a.beforeShow),a.beforeShowDay&&this._beforeShowDay(a.beforeShowDay),this._setDate(c),this._setFirstDayOfWeek(a.firstDayOfWeek)},_destroy:function(){var b=this.element;this.options;b.remove(this._previousButton,this._toggleButton,this._nextButton),a.destroy.apply(this,arguments)},_handleDatepickerSelect:function(a){newDate=new Date(a),this._trigger("select");var b=a.split("/"),c=b[1]+"/"+b[0]+"/"+b[2];this._setDate(c)},_handleTodayButtonClick:function(a){this._hide(a),this._today(a)},_setMax:function(b){var d=c(this.options.increment,b);this._datepicker.datepicker("option","maxDate",d),a._setOption.call(this,"max",d)},_setMin:function(b){var d=c(this.options.increment,b);this._datepicker.datepicker("option","minDate",d),a._setOption.call(this,"min",d)},_setNumberOfMonths:function(b){this._datepicker.datepicker("option","numberOfMonths",b),a._setOption.call(this,"numberOfMonths",b)},_beforeShow:function(b){this._datepicker.datepicker("option","beforeShow",b),a._setOption.call(this,"beforeShow",b)},_beforeShowDay:function(b){this._datepicker.datepicker("option","beforeShowDay",b),a._setOption.call(this,"beforeShowDay",b)},_setTodayDate:function(a,b){this._datepicker.datepicker("setTodayDate",a)},_setDate:function(b,d){var e=this.options,f=b.split("/"),g=new Date(parseInt(f[2]),parseInt(f[1])-1,parseInt(f[0]));c(e.increment,g),("undefined"==typeof e.date||e.date.getTime()!==g.getTime())&&(e.min&&(g<=e.min?(g=e.min,this._previousButton.button("disable").removeClass("ui-state-hover"),this._trigger("min",d)):e.date&&e.date.getTime()===e.min.getTime()&&this._previousButton.button("enable")),e.max&&(g>=e.max?(g=e.max,this._nextButton.button("disable").removeClass("ui-state-hover"),this._trigger("max",d)):e.date&&e.date.getTime()===e.max.getTime()&&this._nextButton.button("enable")),a._setOption.call(this,"date",g),g=e.date,this._toggleButton.button("option","label",this._formatDate(e.dateFormat,g)),this._datepicker.datepicker("setDate",g),this._trigger("change",d,{date:g,year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate()})),this.countsAppended=!1,_.defer(_(this.getGameCounts).bind(this))},_adjusters:{day:function(a,b){return a.setDate(a.getDate()+b)},week:function(a,b){return a.setDate(a.getDate()+7*b)},month:function(a,b){return a.setMonth(a.getMonth()+b)},year:function(a,b){return a.setYear(a.getFullYear()+b)}},_setFirstDayOfWeek:function(c){this._firstDayOfWeek=b.inArray(c.toLowerCase(),this._daysOfWeek),this._datepicker.datepicker("option","firstDay",this._firstDayOfWeek),a._setOption.call(this,"firstDayOfWeek",c)},_setters:{todayDate:"_setTodayDate",date:"_setDate",firstDayOfWeek:"_setFirstDayOfWeek",max:"_setMax",min:"_setMin"},_setOption:function(b,c){var d=this._setters[b];d?this[d](c):a._setOption.call(this,b,c)},_adjustDate:function(a,b){var c=this.options,d=new Date(c.date);this._setDate(this._adjusters[c.increment](d,a),b)},_previous:function(a){this._trigger("previous",a),this._adjustDate(-1,a)},_next:function(a){this._trigger("next",a),this._adjustDate(1,a)},_today:function(a){this._trigger("today",a),this._setDate(d.today(),a)},_bindExternalClick:function(){function a(a){if(c)return void(c=!1);var d=!0,e=a.target;if("scoreboard-next"!=e.id&&"scoreboard-prev"!=e.id&&!(e.className.indexOf("game")>=0&&"false"==e.dataset.isPlayable)){if(e.parentElement&&e.parentElement.className){var f=e.parentElement.className;if(f.indexOf("pregame")>=0||f.indexOf("preview")>=0||f.indexOf("nixed")>=0||f.indexOf("postponed")>=0||f.indexOf("viewall")>=0)return}var g=e.classList,h=b.inArray("ui-datepicker-prev",g)>-1||b.inArray("ui-datepicker-next",g)>-1||b.inArray("ui-datepicker-current",g)>-1;if(h&&(this.countsAppended=!1,this.getGameCounts(),this._trigger("nav",a)),!(e.className.indexOf("game")>=0&&"false"==e.dataset.isplayable||null!=e.closest("li")&&e.className.indexOf("d-font")>=0&&"false"==e.closest("li").data("isplayable"))){for(;e&&(d=!~e.className.indexOf("ui-datepicker"))&&(e=e.parentNode)&&9!==e.nodeType;);d&&(this._hide(a),b("#returnToggle").show(),b("#tv-daypicker").trigger("hide"),b("#tv-daypicker").trigger("repositionCarouselButton"))}}}var c=!0;e.bind("click",b.proxy(a,this)),this.element.one(this.widgetEventPrefix+"hide",function(){e.unbind("click",a)})},_show:function(a){var c=this.options;this.countsAppended=!1,this.getGameCounts();var d=c.calendarContainer?c.calendarContainer:elem;this._trigger("beforeshow",a),this._datepicker.appendTo(d).show(),this._trigger("show",a),b("#tv-daypicker").trigger("show"),this._bindExternalClick(),this.appendGameCounts()},_hide:function(a){this._trigger("beforehide",a),this._datepicker.hide(),this._trigger("hide",a),b("#tv-daypicker").trigger("hide")},_toggle:function(a){this._datepicker.is(":visible")?this._hide(a):this._show(a)},show:function(){this._show()},hide:function(){this._hide()},toggle:function(){this._toggle()},setTodayDate:function(a){this._setTodayDate(a)},setDate:function(a){this._setDate(a)},getDate:function(){return this.options.date},previous:function(){this._previous()},next:function(){this._next()},today:function(){this._today()},disable:function(){this._previousButton.button("disable").removeClass("ui-state-hover"),this._toggleButton.button("disable").removeClass("ui-state-hover"),this._nextButton.button("disable").removeClass("ui-state-hover")},enable:function(){var a=this.options;(!a.min||a.date>a.min)&&this._previousButton.button("enable"),this._toggleButton.button("enable"),(!a.max||a.date<a.max)&&this._nextButton.button("enable")},getGameCounts:function(){var a=parseInt(b(this._datepicker.find(".ui-datepicker-year")[this._calendarMiddleIdx]).text()),c=[a],d=b(this._datepicker.find(".ui-datepicker-month")[this._calendarMiddleIdx]).text(),e=b.inArray(d,this.options.monthNames);e<this._calendarEdgeMonths?c.push(a-1):e>=this.options.monthNames.length-this._calendarEdgeMonths&&c.push(a+1);for(var f=c.length,g=0;f>g;g++)this.fillCountsForYear(c[g]);this.appendGameCounts()},fillCountsForYear:function(a){this.countsYearPending!==a&&(this.countsYearPending?this.countRequestQueue.unshift(a):void 0===this.gameCounts[a]&&this.fetchCountsForYear(a))},fetchCountsForYear:function(a){var c=this,d=this._countsQueryTemplateUrl.split(this._queryYearKey).join(a);this.countsYearPending=a,b.getJSON(d).done(function(b){for(var d=b.schedule_game_aggregate_date.queryResults.row,e=d.length,f=0;e>f;f++){var g=d[f].game_date.split("T")[0].split("-"),h=g[0]+(parseInt(g[1],10)-1)+parseInt(g[2],10);c.gameCounts[a]||(c.gameCounts[a]={}),c.gameCounts[a][h]=parseInt(d[f].games,10)}c.appendGameCounts()}).fail(function(){console.log("jquery.daypicker.js fetchCountsForYear(): Failed to load game counts for "+a+".")}).always(function(){c.countsYearPending=null,c.countRequestQueue.length>0&&c.fillCountsForYear(c.countRequestQueue.pop())})},appendGameCounts:function(){if(!this.countsAppended){var a=this;b(this._daySelector).not(".ui-datepicker-unselectable").each(function(c){var d=parseInt(b(this).attr("data-year")),e=a.gameCounts[d];if(e){var f=b(this).attr("data-month"),g=b(this).find("a.ui-state-default").text(),h=e[d+f+g];void 0!==h&&b(this).append('<div class="daypicker-count">'+h+"</div>"),a.countsAppended=!0}})}}}),b.bam.daypicker.i18n={},b.bam.daypicker.i18n.en={dateFormat:"MM d, yy"},b.bam.daypicker.i18n.es={dateFormat:"d 'de' MM, yy"}}()}),define("mlb-tv-app/app/model/Playlist",["backbone","mlb-tv-app/app/model/Configuration"],function(a,b){var c=a.Model.extend({defaults:{content_id:void 0,calendar_event_id:void 0,startTimeOffset:void 0,isFree:void 0,isEnhanced:void 0,type:"video"},ensureType:function(){var a=b.param("media_type");a&&(this.attributes.type=a)},initialize:function(){this.bind("change",this.ensureType)}});return new c}),define("hgn!mlb-tv-app/app/templates/daypicker",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<div>"),d.b("\n"+c),d.b('	<a href="#" title="daypicker" class="nav-icon daypicker" id="tv-daypicker">'),d.b("\n"+c),d.b('		<div class="icon"></div>'),d.b("\n"+c),d.b("	</a>			"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/Daypicker",["jquery","jquery.daypicker/jquery.daypicker","flipDate/flipDate","backbone","bandwagon/bandwagon","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/tracking/TrackingManager","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/model/Configuration","mlb-tv-app/app/model/MediaMetrics","hgn!mlb-tv-app/app/templates/daypicker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p=h.getVideoPlayerEvents(),q="tv-daypicker",r=f.extend({viewName:"DaypickerView",tagName:"div",el:".daypicker-item",monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],bandwagonBus:void 0,initialize:function(){_this=this,this.bandwagonBus=e.getInstanceByKey(window.mp5Config.videocore.container);try{this.enabled=j.get("dayPickerEnabled")&&!j.get("isPSTV")}catch(a){console.error("DaypickerView: There was an error getting config: "+this.e)}this.enabled&&this.render(),this.initListeners(),this.setupDayPicker(),this.setDate()},initListeners:function(){this.listenTo(g,"daypicker:toggle",this.toggleDayPicker),this.listenTo(g,"scoreBoardLoadComplete",this.initTodayButton),this.listenTo(j,"change:date",this.onDateChange)},onDateChange:function(a,b){var c=this,d=c.formatDate(o.daypicker("getDate"));d!==b&&o.daypicker("setDate",b)},render:function(){this.$el.append(n({id:q,disabled:!1,reason:"Loading"}))},formatDate:function(a){var b=a.getDate(),c=a.getMonth()+1,d=a.getFullYear();return c+"/"+b+"/"+d},initTodayButton:function(){var b=this,d=a(".ui-datepicker-current").get(0);void 0!=d&&(d.onclick=function(){g.trigger("scoreboard:show");var d=c?new Date(c.today()):new Date,e=b.formatDate(d);console.log("Setting todays data as "+e),j.set("date",e),g.trigger("scoreboard:refresh",e),a(".ui-datepicker-current-day").removeClass("ui-datepicker-current-day"),setTimeout(function(){a(".ui-datepicker-today").addClass("ui-datepicker-current-day")},500),i.trackByImpressionKey(i.CALENDAR_TODAY_BUTTON_CLICK)})},showDaypickerYear:function(){var b=this;a("#daypicker-view .ui-datepicker-month").each(function(){var c=a(this).html();c===b.monthNames[0]&&a(this).parent().find(".ui-datepicker-year").show()})},setupDayPicker:function(){var b=c?new Date(c.today()):new Date,d=new Date(b.getFullYear()-2,1,1,0,0,0,0);try{var e=window.mp5Config.app.dayPicker.minimumDate;d=new Date(b.getFullYear()+e.yearAdjustment,e.month,e.day,0,0,0,0)}catch(f){console.error("Error setting minimum date. Is the config value missing?",f)}var h=j.get("date");h instanceof Date||(h=b);var k=""+h.getDate()+"/"+(h.getMonth()+1)+"/"+h.getFullYear();o=a("#tv-daypicker"),o.daypicker({numberOfMonths:3,calendarContainer:a("#daypicker-view"),monthNamesShort:!0,monthNames:this.monthNames,min:d.setDate(d.getDate()),max:b.setDate(b.getDate()),onChangeMonthYear:function(a,b,c){},extendInit:function(a){},beforeShow:function(){console.log("before show")},beforeShowDay:function(a){return[!0,"",""]},showButtonPanel:!0,date:k,todayDate:new Date(c.today()),dateFormat:"D, MM d, yy"});var l=this;o.on("daypickerchange",function(a,b){i.trackByImpressionKey(i.CALENDAR_ICON_DAY_SELECT_CLICK),setTimeout(function(){l.initTodayButton()},3500);var c=b.month+"/"+b.day+"/"+b.year;j.set("date",c),g.trigger("scoreboard:refresh",c),l.initTodayButton()}),this.initTodayButton();var m=this;o.on("click",function(a){a.preventDefault(),j.get("initComplete")&&(m.toggleDayPicker(),i.trackByImpressionKey(i.CALENDAR_ICON_CLICK),setTimeout(function(){g.trigger("updateGamestripButtonState")},0))}),o.on("repositionCarouselButton",function(){g.trigger("toggleDayPicker"),g.trigger("updateGamestripButtonState"),g.trigger("render:scoreboardCarousel"),g.trigger("repositionCarouselButton")}),o.on("hide",function(b){a("#branding-container").css("top",0)}),o.on("show",function(b){a("#branding-container").css("top",a("#daypicker-view").height()+25)}),o.on("daypickernav",function(b,c){m.showDaypickerYear(),a("#branding-container").css("top",a("#daypicker-view").height()+25)}),a("#tv-preferences").on("click",function(a){a.preventDefault(),g.trigger("togglePreferences")}),a("#tv-help").on("click",function(a){a.preventDefault();var b="http://mlb.mlb.com/help/supportforum/index.jsp";window.open(RedirectUtil.appendRedirectUrl(b))})},toggleDayPicker:function(){var b=a("#daypicker-view").height(),c=function(){return b>=10}();c?(a("#tv-daypicker").daypicker("hide"),g.trigger("updateGamestripButtonState"),g.trigger("render:scoreboardCarousel"),g.trigger("repositionCarouselButton"),m.set("daypickerIsOpen",!1)):(a("#tv-daypicker").daypicker("show"),g.trigger("updateGamestripButtonState"),g.trigger("render:scoreboardCarousel"),g.trigger("repositionCarouselButton"),m.set("daypickerIsOpen",!0),this.showDaypickerYear()),g.trigger(p.TOGGLE_DAY_PICKER)},setDate:function(){var a=k.get("calendar_event_id");if(a){console.log("parse calendar event id for date",a);var b=a.split("-");b.slice(2).join("-");date=new Date(b[2],b[3]-1,b[4]),isNaN(date.getTime())&&this.setDate()}else{var d=l.param("date");d?date=d:date=c.today()}return j.set("date",date),date}});return r}),define("hgn!mlb-tv-app/app/templates/widgets",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/WidgetsView",["backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/WidgetsManifest","mlb-tv-app/app/view/components/Gameday","mlb-tv-app/app/view/components/Highlights","mlb-tv-app/app/view/components/Fantasy","mlb-tv-app/app/view/components/Social","mlb-tv-app/app/view/components/Daypicker","hgn!mlb-tv-app/app/templates/widgets"],function(a,b,c,d,e,f,g,h,i,j,k){
var l=b.extend({viewName:"WidgetsView",tagName:"div",el:"#widgets",model:d,initialize:function(){this.render(),this.initListeners()},initListeners:function(){var a=c.getDispatcher();a.on(c.getVideoPlayerEvents().ACTIVE_WIDGET_UPDATE,this.updateActiveWidget),a.on(c.getVideoPlayerEvents().ACTIVE_WIDGET_REMOVE,this.removeActiveWidget)},render:function(){return console.log("widgets view"),this.gamedayBrain=new f,this.highlightsView=new g,this.fantasyView=new h,this.socialView=new i,this.daypickerView=new j,this.gamedayBrain.enabled&&this.highlightsView.enabled&&this.fantasyView.enabled||$(this.gamedayBrain.el).append($('<div class="paddingForLastItem"></div>')),this},updateActiveWidget:function(a){console.log("this widget now active: "+a),e.activate(a)},removeActiveWidget:function(a){console.log("this widget now not active: "+a),e.deactivate(a)}});return l}),define("mlb-tv-app/app/marketing/FreewheelCompanionBannerManager",["jquery","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/MediaMetrics"],function(a,b,c){function d(){}return d.FREE_USER="FREE",a.extend(d.prototype,{areCompanionBannersActive:!0,companionBannerSlotNames:["videoCompanionAdBackgroundSlot1","videoCompanionAdBackgroundSlot2","videoCompanionAdBackgroundSlot3","videoCompanionAdBackgroundSlot4"],resetCompanionBannerContainerBySlotIndex:function(a){b.trigger("companion:resetSlotByIndex")},showComponent:function(){b.trigger("companion:showSelectedCompanionBannerSlot",{slotIndex:c.get("selectedSlot")}),a("#mlb_video_companion").show()},hideComponent:function(){a("#mlb_video_companion").hide()}}),new d}),define("hgn!mlb-tv-app/app/templates/companion/videoCompanion",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="'),d.b(d.v(d.f("slotId",a,b,0))),d.b('" style="position: absolute; top: 0px;">'),d.b("\n"+c),d.b('    <span id="mlb_video_hub_'),d.b(d.v(d.f("width",a,b,0))),d.b("_"),d.b(d.v(d.f("height",a,b,0))),d.b("_slot_"),d.b(d.v(d.f("index",a,b,0))),d.b('" class="_fwph">'),d.b("\n"+c),d.b('        <form id="_fw_form_mlb_video_hub_'),d.b(d.v(d.f("width",a,b,0))),d.b("_"),d.b(d.v(d.f("height",a,b,0))),d.b("_slot_"),d.b(d.v(d.f("index",a,b,0))),d.b('" style="display:none">'),d.b("\n"+c),d.b('            <input type="hidden" name="_fw_input_mlb_video_hub_'),d.b(d.v(d.f("width",a,b,0))),d.b("_"),d.b(d.v(d.f("height",a,b,0))),d.b("_slot_"),d.b(d.v(d.f("index",a,b,0))),d.b('" id="_fw_input_mlb_video_hub_'),d.b(d.v(d.f("width",a,b,0))),d.b("_"),d.b(d.v(d.f("height",a,b,0))),d.b("_slot_"),d.b(d.v(d.f("index",a,b,0))),d.b('" value="w='),d.b(d.v(d.f("width",a,b,0))),d.b("&amp;h="),d.b(d.v(d.f("height",a,b,0))),d.b("&amp;slau="),d.b(d.v(d.f("width",a,b,0))),d.b("x"),d.b(d.v(d.f("height",a,b,0))),d.b('&amp;ptgt=s">'),d.b("\n"+c),d.b("        </form>"),d.b("\n"+c),d.b('        <span id="_fw_container_mlb_video_hub_'),d.b(d.v(d.f("width",a,b,0))),d.b("_"),d.b(d.v(d.f("height",a,b,0))),d.b("_slot_"),d.b(d.v(d.f("index",a,b,0))),d.b('" class="_fwac"></span>'),d.b("\n"+c),d.b("    </span>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/VideoCompanionView",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/marketing/FreewheelCompanionBannerManager","hgn!mlb-tv-app/app/templates/companion/videoCompanion"],function(a,b,c,d,e,f,g,h){var i,j=c.extend({viewName:"CompanionAdsView",tagName:"div",el:"#mlb_video_companion",companionSlots:[],events:{},initialize:function(){i=this,this.render(),this.initListeners()},initListeners:function(){this.listenTo(d,"companion:resetSlotByIndex",this.handleResetSlotByIndex),this.listenTo(d,"companion:showSelectedCompanionBannerSlot",this.handleShowSelectSlotCompanionBanner)},render:function(){var a=!1;try{a=window.mp5Config.app.components.sponsorship.companionBannersEnabled&&!e.get("isEmbed")}catch(b){console.log("VideoCompanionView render: could not find companionBannersEnabled in config so default to false")}if(a){var c=g.companionBannerSlotNames;_.each(c,function(a,b){i.companionSlots.push(h({slotId:a,width:1680,height:692,index:b+1}))}),_.each(this.companionSlots,function(a){i.$el.append(a)})}return this},showSelectedCompanionBannerSlot:function(b){_.each(g.companionBannerSlotNames,function(c,d){d===b?a("#"+c).show():a("#"+c).hide()})},resetCompanionBannerSlotByIndex:function(b){var c=g.companionBannerSlotNames[b];a("#"+c).replaceWith(h({slotId:c,width:1680,height:692,index:b+1}))},handleResetSlotByIndex:function(a){this.resetCompanionBannerSlotByIndex(a.slotIndex)},handleShowSelectSlotCompanionBanner:function(a){this.showSelectedCompanionBannerSlot(a.slotIndex)}});return j.RESET_SLOT_BY_INDEX="companion:resetSlotByIndex",j}),define("lazyLoadImages/lazyLoadImages",["jquery","scrollMonitor/scrollMonitor"],function(a,b){return function(c){c=c||document.body,a("img[data-lazy-src]",c).each(function(a,c){var d=c.getAttribute("data-lazy-src");c.removeAttribute("data-lazy-src");var e=b.create(c,100);e.enterViewport(function(){c.src=d,e.destroy()})})}}),define("mlbtv-flashblock-detector/flashblock-detector",["jquery"],function(a){function b(b,c,e){var f=a.extend({},d,c),g="blocked",h="not_blocked";if(window.deviceBootstrap().is[f.browser]){setTimeout(function(){if(!b||""===b)throw new Error("movieElementId not provided");b=b.indexOf("#")<0?"#"+b:b;var c=a(b).find("object");e(c.length&&"undefined"!=typeof c[0].PercentLoaded&&c[0].PercentLoaded()?h:g)},f.timeout)}}var c,d={timeout:2e3};return c={init:b}}),define("bindable/jquery.bindable",["require","exports","module","jquery"],function(a,b,c){var d,e=d=a("jquery"),f=/\s+/;return d.unwhite=function(a){return a=a&&d.trim(a),a.length?a.split(f):[]},d.eventProxy=function(a,b){var c=d.proxy.apply(null,arguments);return function(){return c.apply(null,Array.prototype.slice.call(arguments,1))}},d.bindable=function(a,b){return a instanceof Object||(b=a,a={}),a=d.isFunction(a)?a.prototype:a,d.each(["bind","one","unbind","on","off"],function(b,c){a[c]=function(a,b,e){return d(this)[c](a,b,e),this}}),a.trigger=function(a,b){var c=new d.Event(a),e=new d.Event(c);return c.preventDefault(),e.type="*",c.type!==e.type&&d.event.trigger(c,b,this),d.event.trigger(e,b,this),this},"string"==typeof b&&d.each(d.unwhite(b),function(b,c){a[c]=function(a,b){return arguments.length?this.bind(c,a,b):this.trigger(c)}}),a},e.bindable.bind(e)}),define("mp5/config/Config",["require","exports","module"],function(a,b,c){function d(){}return d.VPM_SHOULD_VALIDATE_CALENDAR_EVENT=!0,d.MEDIA_FRAMEWORK_PARAMS={platform:"WEB_MEDIAPLAYER_5"},d.MEDIA_SELECTION_DISABLE_BLACKOUT_LOGIC=!1,d.MEDIA_SELECTION_IS_BASEBALL_UX=!0,d.SECURE_DOMAIN_DEFAULT=".mlb.com",d.SECURE_SUB_DOMAIN_QA="qasecure",d.SECURE_SUB_DOMAIN_BETA="secure",d.SECURE_SUB_DOMAIN_PROD="secure",d.MEDIA_FRAMEWORK_DOMAIN_DEFAULT=".media.mlb.com",d.MEDIA_FRAMEWORK_SUB_DOMAIN_QA="mlb-qaws-mf",d.MEDIA_FRAMEWORK_SUB_DOMAIN_PROD="mlb-ws-mf",d}),define("auth-media-gateway/subclasses/AuthenticatedMediaParams",["require","exports","module"],function(a,b,c){function d(){return{serviceDomain:null,loginFormPath:null,purchaseViewPath:null,loginViewTemplate:null,bypassLogin:!1}}return d}),define("jpath/jpath",["require","exports","module"],function(require,exports,module){function JPath(a){return this instanceof JPath?(this.data=a||null,void(this.selection=[])):new JPath(a)}var TRUE=!0,FALSE=!1,STRING="string",PERIOD=".",undef,rxTokens=new RegExp("([A-Za-z0-9_\\*@\\$\\-]+(?:\\[.+?\\])?)","g"),rxIndex=new RegExp("(\\S+)\\[(\\d+)\\]"),rxPairs=new RegExp("([\\w@\\.]+)\\s*([><=]=?|[~\\^\\$\\!\\*]=|\\?|!\\*)\\s*([@\\w\\s_\\'$\\.\\+-\\/\\:]+)(\\s*|$)","g"),rxCondition=new RegExp("(\\S+)\\[(.+)\\]"),app=Array.prototype.push,apc=Array.prototype.concat,hidden={toArray:function(a){return a instanceof Array?a:a===undef||null===a?[]:[a]},traverse:function(pattern,cfn,obj){var out,data=obj||this.data,temp,tokens,token,idxToken,index,expToken,condition,tail,self=arguments.callee,found,i,j,l;if(data&&typeof pattern===STRING){if(tokens=pattern.match(rxTokens),token=tokens[0],tail=tokens.slice(1).join(PERIOD),data instanceof Array){for(temp=[],i=0,l=data.length;l>i;i++)j=data[i],found=self.apply(this,[token,cfn,j]),(found instanceof Array&&found.length||found!==undef)&&app.apply(temp,[found]);return temp.length?tail?self.apply(this,[tail,cfn,temp]):temp:void 0}if("*"===token)return tail?self.apply(this,[tail,cfn,data]):data;if(data[token]!==undef)return tail?self.apply(this,[tail,cfn,data[token]]):data[token];if(rxIndex.test(token))return idxToken=token.match(rxIndex),token=idxToken[1],index=+idxToken[2],tail?self.apply(this,[tail,cfn,data[token][index]]):data[token][index];if(rxCondition.test(token)){expToken=token.match(rxCondition),token=expToken[1],condition=expToken[2];var evalStr,isMatch,subset="*"===token?data:data[token],elem;if($.isArray(subset)){for(temp=[],i=0,l=subset.length;l>i;i++)elem=subset[i],evalStr=condition.replace(rxPairs,function(a,b,c,d){return hidden.testPairs.apply(elem,[b,d,c,cfn])}),isMatch=eval(evalStr),isMatch&&app.apply(temp,[elem]);return temp.length?tail?self.apply(this,[tail,cfn,temp]):temp:void 0}if(elem=subset,evalStr=condition.replace(rxPairs,function(a,b,c,d){return hidden.testPairs.apply(elem,[b,d,c,cfn])}),isMatch=eval(evalStr))return tail?self.apply(this,[tail,cfn,elem]):elem}}return out},matchTypes:function(a,b){var c,d;switch(typeof a){case"string":d=b+"";break;case"boolean":d="true"===b?TRUE:FALSE;break;case"number":d=+b;break;case"date":d=new Date(b).valueOf(),c=a.valueOf();break;default:d=b}return"null"===b&&(d=null),"undefined"===b&&(d=undef),{left:c||a,right:d}},testPairs:function(){var a={"=":function(a,b){return a===b},"==":function(a,b){return a===b},"!=":function(a,b){return a!==b},"^=":function(a,b){return!(a+"").indexOf(b)},"<":function(a,b){return b>a},"<=":function(a,b){return b>=a},">":function(a,b){return a>b},">=":function(a,b){return a>=b},"~=":function(a,b){return(a+"").toLowerCase()===(b+"").toLowerCase()},"$=":function(a,b){return new RegExp(b+"$","i").test(a)},"*=":function(a,b){return(a+"").indexOf(b)>=0},"!*":function(a,b){return(a+"").indexOf(b)<0}};return function(b,c,d,e){if("?"!==d&&!(d in a))throw new Error("Unsupported operation ("+d+")");var f=FALSE,g=-1!==b.indexOf(PERIOD)?hidden.traverse(b,null,this):this[b],h=hidden.matchTypes(g,$.trim(c));return"?"===d?$.isFunction(e)&&(f=e.call(this,h.left,c)):f=a[d](h.left,h.right),f}}(),merge:function(a){var b=[],c=hidden.toArray(a?hidden.traverse.apply(this,arguments):this.selection);return b=apc.apply([],c)}};JPath.prototype={from:function(a){return this.data=a,this},first:function(){return this.selection.length?this.selection[0]:null},last:function(){return this.selection.length?this.selection.slice(-1)[0]:null},eq:function(a){return this.selection.length?this.selection[a]:null},select:function(a,b,c){return this.selection=hidden.merge.apply(this,arguments),this},and:function(a){return this.selection=this.selection.concat(hidden.merge.apply(this,arguments)),this},val:function(){return this.selection}},exports.select=function(a,b,c){return new JPath(a).select(b,c,null)},exports.JPath=JPath,exports.filter=function(a,b,c){return new JPath(a).select(b,c,null).val()}}),define("class/class",["require","exports","module"],function(a,b,c){var d=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return this.Class=function(){},this.Class.extend=function(a){function b(){!d&&this.init&&this.init.apply(this,arguments)}var c=this.prototype;d=!0;var f=new this;d=!1;for(var g in a)f[g]="function"==typeof a[g]&&"function"==typeof c[g]&&e.test(a[g])?function(a,b){return function(){var d=this._super;this._super=c[a];var e=b.apply(this,arguments);return this._super=d,e}}(g,a[g]):a[g];return b.prototype=f,b.constructor=b,b.extend=arguments.callee,b},this.Class}),define("xml/xml",["require","exports","module","jpath/jpath","class/class"],function(a,b,c){function d(){var a=[];return $.extend(a,w),a}var e,f,g,h=a("jpath/jpath"),i=a("class/class"),j=null,k=!1,l=!0,m="object",n="string",o="function",p="array",q=/^@[\w-:]+$/,r=/^@xmlns$/,s=/_super|ns|nodeName|typeOf|hasCDATA|$comments/,t={isIE:function(){return!1},isXNode:function(a){return typeof a===m&&"undefined"!=typeof a.nodeName},isNodeSet:function(a){return $.isArray(a)}},u={newDocument:function(a,b){if(a||(a=""),b||(b=""),document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b,a,j);var c=new ActiveXObject("MSXML2.DOMDocument");if(a){var d="",e=a,f=a.indexOf(":");-1!==f&&(d=a.substring(0,f),e=a.substring(f+1)),b?d||(d="a0"):d="";var g="<"+(d?d+":":"")+e+(b?" xmlns:"+d+'="'+b+'"':"")+"/>";c.loadXML(g)}return c},xmlToString:function(a){var b;if("XMLSerializer"in window){var c=new XMLSerializer;b=c.serializeToString(a)}else b=a.xml;return b=b.replace(/xmlns=\"\"/g,"")},textToXML:function(a){var b=j;try{b="DOMParser"in window?new DOMParser:new ActiveXObject("MSXML2.DOMDocument"),b.async=k}catch(c){throw new Error("XML Parser could not be instantiated")}var d=j,e=l;if(t.isIE()?(e=b.loadXML(a),d=e?b:k):(d=b.parseFromString(a,"text/xml"),e="parsererror"!==d.documentElement.tagName),!e)throw new Error("Error parsing XML string");return d}},v=function(){function a(a,b){var d,e=b&&"@xmlns"in b?b["@xmlns"]:null;return e?"createElementNS"in c?d=c.createElementNS(e,a):(d=c.createElement(a),d.setAttribute("xmlns",e)):d=c.createElement(a),d}function b(d,e){if(d&&e){var f;if($.type(e)===m)$.each(e,function(h,i){switch($.type(i)){case m:"parent"===h&&i instanceof g||(f=d.appendChild(a(h,i)),b(f,i));break;case p:if("*"===h)b(d,i);else for(var j,k=0,l=i.length;l>k;k++)j=i[k],f=d.appendChild(a(h)),b(f,j);break;case n:if(r.test(h))break;q.test(h)?d.setAttribute(String(h.slice(1)),i):"CDATA"===h?d.appendChild(c.createCDATASection(i)):"TEXT"===h||"Text"===h?d.appendChild(c.createTextNode(i)):e instanceof g&&s.test(h)||(f=d.appendChild(c.createElement(h)),b(f,{Text:i}));break;case o:break;default:q.test(h)?d.setAttribute(String(h.slice(1)),i):e instanceof g&&s.test(h)||(f=d.appendChild(c.createElement(h)),b(f,{Text:i+""}))}});else if($.type(e)===p)for(var h,i=0,j=e.length;j>i;i++)h=e[i],b(d,h);else"window"!==$.type(e)&&$.type(e)!==o&&d.appendChild(c.createTextNode(e))}}var c;return{serializeToString:function(){var a=this.serializeToXML.apply(this,arguments);return u.xmlToString(a.documentElement)},serializeToXML:function(){if(arguments.length>0){var a=0,d=arguments[a++],e=arguments.length>=3?arguments[a++]:"",f=arguments[a++],g=u.newDocument(d,e);return c=g,b(g.documentElement,f),g}}}}();e=i.extend({init:function(a){this.parent=a}}),g=e.extend({init:function(){var a=j,b=j,c=j;switch(arguments.length){case 1:b=arguments[0];break;case 2:a=arguments[0],b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],c=arguments[2];break;default:b="noname"}this.nodeName=b,this.Text=c||"",this._super(a)},attr:function(){var a,b,c;if(arguments.length)switch(arguments.length){case 1:b=$.trim(arguments[0]),c=this["@"+b]||this[b],"undefined"==typeof c||$.isArray(c)||(a=c);break;case 2:b=$.trim(arguments[0]),c=arguments[1],$.type(b)===n&&(this[q.test(b)?b:"@"+b]=c,a=this)}return a},find:function(a,b){var c=j;return c=h.filter(this,a,b)},addComment:function(a){return $.type(a)===n&&("undefined"==typeof this.$comments&&(this.$comments=[]),this.$comments.push(a)),this},val:function(a){var b=this;return"undefined"!=typeof a?this.Text=a:b=this.Text,b},toXML:function(){var a=v.serializeToXML(this.nodeName,this.ns,this);return a},toXMLString:function(){var a=this.toXML(),b=u.xmlToString(a);return b},appendChild:function(a){"undefined"!=typeof a&&a instanceof g&&(a.parent=this,"undefined"==typeof this[a.nodeName]&&(this[a.nodeName]=x.makeNodeSet()),this[a.nodeName].push(a))},toString:function(){return this.Text}}),f=g.extend({init:function(a){this._super(a),this.ns="",this.typeOf="xmlObjectifier",delete this.parent}});var w={find:function(a){return h.filter(this,a)},getNodesByAttribute:function(a,b){var c=[],d=this.length;return d&&$.type(a)===n&&"undefined"!=typeof b&&(c=h.filter(this,"*["+a+"="+b+"]")),c.length?c:j},getNodesByValue:function(a){var b=[],c=this.length;return c&&"undefined"!=typeof a&&(b=h.filter(this,"*[Text="+a+"]")),b.length?b:j},contains:function(a,b){var c,d,e=k,f=this.length;if(f&&$.type(a)===n&&"undefined"!=typeof b)for(;f--;)if(c=this[f],d=c[a],"undefined"!=typeof d&&d===b){e=l;break}return e},indexOf:function(){var a,b,c,d,e=-1,f=this.length;if(f)switch(arguments.length){case 1:for(b=arguments[0];f--;)if(c=this[f],d=c.val(),"undefined"!=typeof d&&d===b){e=f;break}break;case 2:for(a=arguments[0],b=arguments[1];f--;)if(c=this[f],d=c[a],"undefined"!=typeof d&&d===b){e=f;break}}return e},sortByAttribute:function(a,b){this.length&&$.type(a)===n&&this.sort(function(c,d){var e=c.attr(a),f=d.attr(a);e=isNaN(e)?e:parseFloat(e),f=isNaN(f)?f:parseFloat(f);var g=f>e?-1:e>f?1:0;return g="undefined"!=typeof b&&"desc"===b.toLowerCase()?0-g:g})},sortByValue:function(a){this.length&&this.sort(function(b,c){var d=b.Text,e=c.Text;d=isNaN(d)?d:parseFloat(d),e=isNaN(e)?e:parseFloat(e);var f=e>d?-1:d>e?1:0;return f="undefined"!=typeof a&&"desc"===a.toLowerCase()?0-f:f})},sortByChildNode:function(a,b){this.length&&$.type(a)===n&&this.sort(function(c,d){var e=c[a],f=d[a];e="undefined"!=typeof e&&e.length?e[0].Text:j,f="undefined"!=typeof f&&f.length?f[0].Text:j,e=isNaN(e)?e:parseFloat(e),f=isNaN(f)?f:parseFloat(f);var g=f>e?-1:e>f?1:0;return g="undefined"!=typeof b&&"desc"===b.toLowerCase()?0-g:g})},first:function(){var a=j;return this.length&&(a=this[0]),a},last:function(){var a=j;return this.length&&(a=this.slice(-1)),a}},x={makeNodeSet:function(){return d()},makeNode:function(a,b){var c=$.trim(b.localName||b.baseName),d=new g(a,c);return d.ns=b.prefix||"",this.setAttributes(d,b),d},setAttributes:function(a,b){if("undefined"!=typeof b&&b.attributes.length)for(var c=b.attributes.length,d=j,e=j;c--;)d=b.attributes[c],e="@"+d.name,a[e]=d.value},run:function(a,b){var c,d;if("undefined"!=typeof a&&"undefined"!=typeof b&&b.hasChildNodes()){var e=b.childNodes.length-1,f=0;do switch(c=b.childNodes[f],c.nodeType){case 1:if(d=x.makeNode(a,c),$.isFunction(this.decorator)){var g=this.decorator.apply(d,[d]);if(g===k)continue}d&&(a.appendChild(d),c.hasChildNodes()&&x.run.apply(this,[d,c]));break;case 3:a.Text?a.Text+=$.trim(c.nodeValue):a.val($.trim(c.nodeValue));break;case 4:a.hasCDATA=l,a.val("undefined"!=typeof c.text?$.trim(c.text):$.trim(c.nodeValue));break;case 8:"undefined"!=typeof this.noComments&&this.noComments||("undefined"==typeof a.$comments&&(a.$comments=[]),a.$comments.push($.trim(c.nodeValue)))}while(f++<e)}},init:function(a,b){var c={noComments:l};if($.extend(c,b),a=$.type(a)===n?u.textToXML(a):t.isXNode(a)?a:j,!a)return j;var d=9===a.nodeType?a.documentElement:11===a.nodeType?a.firstChild:a,e=new f(d.nodeName);return $.isFunction(c.decorator)&&c.decorator.apply(e,[e]),3===a.nodeType||4===a.nodeType?a.nodeValue:(this.run.apply(c,[e,d]),this.setAttributes(e,d),e)}};b.xmlToJSON=function(a,b){return x.init(a,b)},b.jsonToXML=function(){return v.serializeToString.apply(v,arguments)},b.textToXML=u.textToXML,b.xmlObjectifier={RootClass:f,NodeClass:g,NodeSetClass:w}}),define("bam.xdomainrequest/bam.xdomainrequest",["require","exports","module"],function(a,b,c){return function(a){if(!a.support.cors&&a.ajaxTransport&&window.XDomainRequest){var b=/^https?:\/\//i,c=/^get|post$/i,d=new RegExp("^"+location.protocol,"i"),e=/text\/html/i,f=/\/json/i,g=/\/xml/i;a.ajaxTransport("* text html xml json",function(h,i,j){if(h.crossDomain&&h.async&&c.test(h.type)&&b.test(h.url)&&d.test(h.url)){var k=null,l=(i.dataType||"").toLowerCase();return{send:function(b,c){k=new XDomainRequest,/^\d+$/.test(i.timeout)&&(k.timeout=i.timeout),k.ontimeout=function(){c(500,"timeout")},k.onload=function(){var b="Content-Length: "+k.responseText.length+"\r\nContent-Type: "+k.contentType,d={code:200,message:"success"},h={text:k.responseText};try{if("html"===l||e.test(k.contentType))h.html=k.responseText;else if("json"===l||"text"!==l&&f.test(k.contentType))try{h.json=a.parseJSON(k.responseText)}catch(i){d.code=500,d.message="parseerror"}else if("xml"===l||"text"!==l&&g.test(k.contentType)){var j=new ActiveXObject("Microsoft.XMLDOM");j.async=!1;try{j.loadXML(k.responseText)}catch(i){j=void 0}if(!j||!j.documentElement||j.getElementsByTagName("parsererror").length)throw d.code=500,d.message="parseerror","Invalid XML: "+k.responseText;h.xml=j}}catch(m){throw m}finally{c(d.code,d.message,h,b)}},k.onprogress=function(){},k.onerror=function(){c(500,"error",{text:k.responseText})};var d="";i.data&&(d="string"===a.type(i.data)?i.data:a.param(i.data)),k.open(h.type,h.url),k.send(d)},abort:function(){k&&k.abort()}}}})}}(jQuery),{}}),define("soap/soap",["require","exports","module","xml/xml","bindable/jquery.bindable","bam.xdomainrequest/bam.xdomainrequest"],function(a,b,c){"use strict";var d=a("xml/xml"),e=a("bindable/jquery.bindable"),f=(a("bam.xdomainrequest/bam.xdomainrequest"),function(a,b){this.settings={proxy:null,ws:null,contentType:"text/xml",charSet:"utf-8",type:"post"},this.events={onSOAPResponse:"onSOAPResponse",onSOAPError:"onSOAPError"},this.request=b||null,a&&$.extend(this.settings,a)}),g=function(a,b){var c=this;this.settings={action:"",ns:{}},this.envelope={"soapenv:Body":{}},a&&$.extend(this.settings,a),"string"==typeof this.settings.ns?this.envelope["@xmlns"]=this.settings.ns:$.each(this.settings.ns,function(a,b){c.envelope["@xmlns:"+a]=b}),b&&this.addToBody(b)};f.prototype={sendRequest:function(a){if(this.request=a||this.request,this.request){var b,c=this,e=this.settings,f=this.request,g=f.toString(),h=new $.Deferred;return $.ajax({type:e.type,url:e.proxy||e.ws,dataType:"xml",contentType:e.contentType+'; charset="'+e.charSet+'"',processData:!1,crossDomain:!0,data:g,xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("SOAPAction",f.settings.action)},complete:function(a,e){b=d.xmlToJSON(a.responseXML||a.responseText),"success"==e?(h.resolve(b),c.trigger(c.events.onSOAPResponse,b)):(h.reject(b),c.trigger(c.events.onSOAPError,arguments))}}),h.promise()}}},e(f),g.prototype={addHeader:function(a){return this.envelope["soapenv:Header"]||(this.envelope["soapenv:Header"]={}),a&&$.extend(this.envelope["soapenv:Header"],a),this},addToBody:function(a){return a&&$.extend(this.envelope["soapenv:Body"],a),this},toString:function(){return d.jsonToXML("soapenv:Envelope","http://schemas.xmlsoap.org/soap/envelope/",this.envelope)}},b.SOAPClient=f,b.SOAPRequest=g}),define("auth-media-gateway/subclasses/SoapObject",["require","exports","module"],function(a,b,c){function d(a){this.typeOf="SOAPObject",this.ns=null,this.name=a,this.attributes=[],this.children=[],this.value=null,this.attr=function(a,b){return this.attributes.push({name:a,value:b}),this},this.appendChild=function(a){return this.children.push(a),a},this.hasChildren=function(){return this.children.length>0?!0:!1},this.val=function(a){return a?(this.value=a,this):this.value},this.ToXML=function(a){var b="",c=!1;try{if(a&&"object"==typeof a&&"SOAPObject"===a.typeOf){if(a.ns?"object"==typeof a.ns?(c=!0,b+="<"+a.ns.name+":"+a.name,b+=" xmlns:"+a.ns.name+'="'+a.ns.uri+'"'):(b+="<"+a.name,b+=' xmlns="'+a.ns+'"'):b+="<"+a.name,a.attributes.length>0){var d,e=a.attributes.length-1;do d=a.attributes[e],b+=c?" "+a.ns.name+":"+d.name+'="'+d.value+'"':" "+d.name+'="'+d.value+'"';while(e--)}if(b+=">",a.hasChildren()){var f,g;for(f in a.children)(!a.children.hasOwnProperty||a.children.hasOwnProperty(f))&&(g=a.children[f],"object"==typeof g&&(b+=a.ToXML(g)))}return a.value&&(b+=a.value),b+=c?"</"+a.ns.name+":"+a.name+">":"</"+a.name+">"}}catch(h){throw new Error("Unable to process SOAPObject! Object must be an instance of SOAPObject")}}}return d}),define("auth-media-gateway/serviceClients/registrationServiceUtils",["require","exports","module","soap/soap","../subclasses/SoapObject"],function(a,b,c){var d=(a("soap/soap"),a("../subclasses/SoapObject")),e={proxyURI:"https://betasecure.net.wwe.com/ws/services/",serviceURI:"http://dev-a.pubservices.bamnetworks.com:8888/pubajaxws/services/",createRequestBody:function(a){var b=new d(a);return b.ns="http://services.bamnetworks.com/registration/types/1.6",b},isErrorThrown:function(a){return a.status&&1!=a.status[0].code[0].Text},getStatus:function(a){var b=new Object;if(b.code=a.status[0].code[0].Text,b.message=a.status[0].message[0].Text,a.status[0].detail){b.detailList=new Array;for(var c=0;c<a.status[0].detail.length;c++){var d=new Object,e=a.status[0].detail[c];d.type=e.type?e.type:"",d.field=e.field?e.field:"",d.message=e.message?e.message:"",d.messageKey=e.messageKey?e.messageKey:"",d.rule=e.rule?e.rule:"",b.detailList.push(d)}}return b},getServiceErrorMessage:function(a){var b="Unknonwn Service Error : Service may be down";return a&&a.Body&&a.Body[0].Fault&&a.Body[0].Fault[0].faultstring&&(b=a.Body[0].Fault[0].faultstring[0].Text),b}};return e}),define("auth-media-gateway/serviceClients/emailService",["require","exports","module","./registrationServiceUtils","../subclasses/SoapObject"],function(a,b,c){var d=a("./registrationServiceUtils"),e=a("../subclasses/SoapObject"),f={proxy:d.proxyURI+"EmailService",devURL:d.serviceURI+"EmailService",add:function(a,b,c){var e=d.createRequestBody("email_add_request");a&&e.appendChild(emailToSoap(a)),bam.soap.SOAPClient.Proxy=f.proxy,bam.soap.SOAPClient.SOAPServer=f.devURL;var g=new bam.soap.SOAPRequest("http://services.bamnetworks.com/registration/email/add",e);bam.soap.SOAPClient.SendRequest(g,function(a){if(a&&a.Body&&a.Body[0].email_add_response){var e=a.Body[0].email_add_response[0];d.isErrorThrown(e)?c("Email.add",d.getStatus(e)):b&&b(e.emailId[0].Text)}else c("Email.add",{code:-1e5,message:d.getServiceErrorMessage(a)})})},findAll:function(a,b){var c=d.createRequestBody("email_findAll_request");bam.soap.SOAPClient.Proxy=ProfileService.proxy,bam.soap.SOAPClient.SOAPServer=ProfileService.devURL;var e=new bam.soap.SOAPRequest("http://services.bamnetworks.com/registration/email/findAll",c);bam.soap.SOAPClient.SendRequest(e,function(c){if(c&&c.Body&&c.Body[0].email_findAll_response){var e=c.Body[0].email_findAll_response[0];if(d.isErrorThrown(e))b("Email.findAll",d.getStatus(e));else if(e.email){for(var g=new Array,h=0;h<e.email.length;h++)g.push(f.soapToEmail(e.email[h]));a(g)}}else b("Email.findAll",{code:-1e5,message:d.getServiceErrorMessage(c)})})},findById:function(a,b,c){var g=d.createRequestBody("email_findById_request");g.appendChild(new e("emailId")).val(a),bam.soap.SOAPClient.Proxy=f.proxy,bam.soap.SOAPClient.SOAPServer=f.devURL;var h=new bam.soap.SOAPRequest("http://services.bamnetworks.com/registration/email/findById",g);bam.soap.SOAPClient.SendRequest(h,function(a){if(a&&a.Body&&a.Body[0].email_findById_response){var e=a.Body[0].email_findById_response[0];!d.isErrorThrown(e)&&e.email?b(f.soapToEmail(e.email[0])):c("Email.findById",d.getStatus(e))}else c("Email.findById",{code:-1e5,message:d.getServiceErrorMessage(a)})})},findPrimary:function(a,b){var c=d.createRequestBody("email_findPrimary_request");bam.soap.SOAPClient.Proxy=f.proxy,bam.soap.SOAPClient.SOAPServer=f.devURL;var e=new bam.soap.SOAPRequest("http://services.bamnetworks.com/registration/email/findPrimary",c);return bam.soap.SOAPClient.SendRequest(e,function(c){if(c&&c.Body&&c.Body[0].email_findPrimary_response){var e=c.Body[0].email_findPrimary_response[0];!d.isErrorThrown(e)&&e.email?a(f.soapToEmail(e.email[0])):b("Email.findPrimary",d.getStatus(e))}else b("Email.findPrimary",{code:-1e5,message:d.getServiceErrorMessage(c)})})},setPrimary:function(a,b,c){var g=d.createRequestBody("email_setPrimary_request");g.appendChild(new e("emailId")).val(a),bam.soap.SOAPClient.Proxy=f.proxy,bam.soap.SOAPClient.SOAPServer=f.devURL;var h=new bam.soap.SOAPRequest("http://services.bamnetworks.com/registration/email/setPrimary",g);bam.soap.SOAPClient.SendRequest(h,function(a){if(a&&a.Body&&a.Body[0].email_setPrimary_response){var e=a.Body[0].email_setPrimary_response[0];d.isErrorThrown(e)?c("Email.setPrimary",d.getStatus(e)):b&&b()}else c("Email.setPrimary",{code:-1e5,message:d.getServiceErrorMessage(a)})})},sendVerification:function(a){var b,c,e,g=d.createRequestBody("email_sendVerification_request");c=IdentityPointService.identityPointToSoap(a.identification),c&&g.appendChild(c),bam.soap.SOAPClient.Proxy=f.proxy,bam.soap.SOAPClient.SOAPServer=f.devURL,b=new bam.soap.SOAPRequest("http://services.bamnetworks.com/registration/email/sendVerification",g),bam.soap.SOAPClient.SendRequest(b,function(b){b&&b.Body&&b.Body[0].email_sendVerification_response?(e=b&&b.Body&&b.Body[0].email_sendVerification_response,d.isErrorThrown(e)?a.error("Email.sendVerification",d.getStatus(e)):a.success&&a.success()):a.error("Email.sendVerification",{code:-1e5,message:d.getServiceErrorMessage(b)})})},update:function(a,b,c,e){var g=d.createRequestBody("email_update_request");g.attr("persistNullValues",b===!0?!0:!1),a&&g.appendChild(f.emailToSoap(a)),bam.soap.SOAPClient.Proxy=f.proxy,bam.soap.SOAPClient.SOAPServer=f.devURL;var h=new bam.soap.SOAPRequest("http://services.bamnetworks.com/registration/email/update",g);bam.soap.SOAPClient.SendRequest(h,function(a){if(a&&a.Body&&a.Body[0].email_update_response){var b=a.Body[0].email_update_response[0];d.isErrorThrown(b)?e("Email.update",d.getStatus(b)):c&&c()}else e("Email.update",{code:-1e5,message:d.getServiceErrorMessage(a)})})},emailToSoap:function(a){var b=null;return a&&(b=new e("email"),a.id&&b.appendChild(new e("id")).val(a.id),a.address&&b.appendChild(new e("address")).val(a.address),a.formatId&&b.appendChild(new e("formatId")).val(a.formatId)),b},soapToEmail:function(a){var b=null;return a&&(b={},a.id&&(b.id=a.id[0].Text),a.address&&(b.address=a.address[0].Text),a.formatId&&(b.formatId=a.formatId[0].Text),a.verified&&(b.verified="true"===a.verified[0].Text?!0:!1)),b}};return f}),define("auth-media-gateway/config/Config",["require","exports","module"],function(a,b,c){function d(){}return d.PROPERTY="mlbtv",d.SECURE_HOST_DOMAIN_DEFAULT="mlb.com",d.PROFILE_SERVICE_PATH_DEFAULT="/pubajaxws/bamrest/ProfileService/op-jsFind/v-1.5",d.PROFILE_SERVICE_DOMAIN=".mlb.com",d.PROFILE_SERVICE_SECURE_SUB_DOMAIN_QA="qasecure",d.PROFILE_SERVICE_SECURE_SUB_DOMAIN_BETA="betasecure",d.PROFILE_SERVICE_SECURE_SUB_DOMAIN_PROD="secure",d.PROFILE_SERVICE_SUB_DOMAIN_QA="qa",d.PROFILE_SERVICE_SUB_DOMAIN_BETA="beta",d.PROFILE_SERVICE_SUB_DOMAIN_PROD="",d}),define("auth-media-gateway/serviceClients/identityPointService",["require","exports","module","./registrationServiceUtils","auth-media-gateway/config/Config","soap/soap","bindable/jquery.bindable","../subclasses/SoapObject"],function(a,b,c){var d=a("./registrationServiceUtils"),e=a("auth-media-gateway/config/Config"),f=a("soap/soap"),g=a("bindable/jquery.bindable"),h=a("../subclasses/SoapObject"),i=function(){var a=d.proxyURI+"IdentityPointService",b=d.serviceURI+"IdentityPointService",c={create:function(c,e,g,j){var k,l,m,n=d.createRequestBody("identityPoint_create_request");if(c&&n.appendChild(i.identityPointToSoap(c)),e){if(e.email&&n.appendChild(EmailService.emailToSoap(e.email)),e.profile)for(k in e.profile)e.profile.hasOwnProperty(k)&&(l=e.profile[k],m=new h("profileProperty"),m.appendChild(new h("name").val(k)),m.appendChild(new h("value").val(l)),n.appendChild(m));e.address&&n.appendChild(AddressService.addressToSoap(e.address)),e.creditCard&&n.appendChild(CreditCardService.creditCardToSoap(e.creditCard))}f.SOAPClient.Proxy=a,f.SOAPClient.SOAPServer=b;var o=new f.SOAPRequest("http://services.bamnetworks.com/registration/identityPoint/create",n);f.SOAPClient.SendRequest(o,function(a){if(a&&a.Body&&a.Body[0].identityPoint_create_response){var b=a.Body[0].identityPoint_create_response[0];d.isErrorThrown(b)?j("IdentityPoint.create",d.getStatus(b)):g(b.identification[0].id[0].Text);
}else j("IdentityPoint.create",{code:-1e5,message:d.getServiceErrorMessage(a)})})},identify:function(a){var b=e.PROFILE_SERVICE_PATH_DEFAULT,c=e.PROFILE_SERVICE_SECURE_SUB_DOMAIN_PROD,d=e.PROFILE_SERVICE_SUB_DOMAIN_PROD;window.location.hostname.indexOf("beta")>=0?(c=e.PROFILE_SERVICE_SECURE_SUB_DOMAIN_BETA,d=e.PROFILE_SERVICE_SUB_DOMAIN_BETA):(window.location.hostname.indexOf("qa")>=0||window.location.hostname.indexOf("dev")>=0)&&(c=e.PROFILE_SERVICE_SECURE_SUB_DOMAIN_QA,d=e.PROFILE_SERVICE_SUB_DOMAIN_QA);var f=b,g="https://"+c+e.PROFILE_SERVICE_DOMAIN+f,h="undefined"!=typeof a.secureHost?a.secureHost+f:g;navigator.userAgent.match(/msie/i)||!window.ActiveXObject&&"ActiveXObject"in window;return $.ajax({url:h,data:{identityPointId:a.ipid,fingerprint:a.fprt,profileFieldGroup:"mediaPrefs"},contentType:"application/json; charset=utf-8",xhrFields:{withCredentials:!0},cache:!1,success:function(b){b.status&&(1==b.status.code?a.success(b):a.error())},error:a.error})},identifySoap:function(e){var g=new f.SOAPClient({proxy:a,ws:b}),i=e.success&&"function"==typeof e.success?e.success:null,j=e.error&&"function"==typeof e.error?e.error:null,k=d.createRequestBody("identityPoint_identify_request");if(e){var l=c.identityPointToSoap(e);l&&k.appendChild(l)}var m=new f.SOAPRequest("http://services.bamnetworks.com/registration/identityPoint/identify",k);if(e.application){var n=new h("ns1:appCredentials"),o=e.application.ns?"ns1:":"";e.application.ns?n.attr("xmlns:ns1",e.application.ns):n.ns="http://services.bamnetworks.com/application/types/1.5",e.application.name&&n.attr(o+"name",e.application.name),e.application.targetAccountName&&n.attr(o+"targetAccountName",e.application.targetAccountName),e.application.password&&n.attr(o+"password",e.application.password),m.addHeader(n)}g.sendRequest(m,function(a){if(a&&a.Body&&a.Body[0].identityPoint_identify_response){var b=a.Body[0].identityPoint_identify_response[0];if(d.isErrorThrown(b)){if(j){var c=d.getStatus(b);c.operation="IdentityPoint.identify",j(c)}}else i&&i(b)}else j&&j({operation:"IdentityPoint.identify",code:-1e5,message:d.getServiceErrorMessage(a)})})},findIdentityPointKeys:function(e){var g=new f.SOAPClient({proxy:a,ws:b}),i=e.success&&"function"==typeof e.success?e.success:null,j=e.error&&"function"==typeof e.error?e.error:null,k=d.createRequestBody("identityPoint_findIdentityPointKeys_request");if(e){var l=c.identityPointToSoap(e);l&&k.appendChild(l)}var m=new f.SOAPRequest("http://services.bamnetworks.com/registration/identityPoint/findIdentityPointKeys",k);if(e.application){var n=new h("appCredentials");n.ns="http://services.bamnetworks.com/application/types/1.5",e.application.name&&n.attr("name",e.application.name),e.application.password&&n.attr("password",e.application.password),m.addHeader(n)}g.sendRequest(m,function(a){if(a&&a.Body&&a.Body[0].identityPoint_findIdentityPointKeys_response){var b=a.Body[0].identityPoint_findIdentityPointKeys_response[0];if(d.isErrorThrown(b)){if(j){var c=d.getStatus(b);c.operation="IdentityPoint.findModifiedIdentityPointKeys",j(c)}}else i&&i(b)}else j&&j({operation:"IdentityPoint.findModifiedIdentityPointKeys",code:-1e5,message:d.getServiceErrorMessage(a)})})},unlink:function(e){var g=e.success&&"function"==typeof e.success?e.success:null,h=e.error&&"function"==typeof e.error?e.error:null,i=d.createRequestBody("identityPoint_unlink_request");if(e){var j=c.identityPointToSoap(e);j&&i.appendChild(j)}f.SOAPClient.Proxy=a,f.SOAPClient.SOAPServer=b;var k=new f.SOAPRequest("http://services.bamnetworks.com/registration/identityPoint/unlink",i);f.SOAPClient.SendRequest(k,function(a){if(a&&a.Body&&a.Body[0].identityPoint_unlink_response){var b=a.Body[0].identityPoint_unlink_response[0];if(d.isErrorThrown(b)){if(h){var c=d.getStatus(b);c.operation="IdentityPoint.unlink",h(c)}}else g&&g(b)}else h&&h({operation:"IdentityPoint.unlink",code:-1e5,message:d.getServiceErrorMessage(a)})})},identityPointToSoap:function(a){var b,c,d,e=null;if(a&&"object"==typeof a&&(e=new h("identification"),a.type&&e.attr("type",a.type),a.id&&e.appendChild(new h("id")).val(a.id),a.fingerprint&&(b=new h("fingerprint").val(a.fingerprint),a.maxAge&&b.attr("maxAge",a.maxAge),e.appendChild(b)),a.email&&e.appendChild(EmailService.emailToSoap(a.email)),a.password&&e.appendChild(new h("password")).val(a.password),a.profile))for(c in a.profile)a.profile.hasOwnProperty(c)&&(d=new h("profileProperty"),d.appendChild(new h("name").val(c)),d.appendChild(new h("value").val(a.profile[c])),e.appendChild(d));return e.children.length>0?e:null},soapToIdentityPoint:function(a){var b=null;return a&&(b={},a.id[0].Text&&(b.id=a.id[0].Text),a.type[0].Text&&(b.type=a.type[0].Text),a.fingerprint[0].Text&&(b.fingerprint=a.fingerprint[0].Text),a.email&&(b.email=EmailService.soapToEmail(a.email[0])),a.address&&(b.address=AddressService.soapToAddress(a.address[0]))),b}};return c}();return g(i),i}),define("auth-media-gateway/subclasses/Session",["require","exports","module","auth-media-gateway/serviceClients/emailService","auth-media-gateway/serviceClients/identityPointService","bam.cookies/cookies","bindable/jquery.bindable"],function(a,b,c){function d(a){var b="sh_"+(new Date).valueOf();m[b]=a}function e(a,b,c){var d,e,f;for(d in m)if(m.hasOwnProperty(d)){if(f=m[d],e=b&&f===b,"undefined"!=typeof c){var g=_.object(_.map(c.profile,function(a){return[a.name,1==a.value.length?a.value[0]:a.value]}));a.profile=g}f.trigger(t.isLoggedIn,[a,e])}}function f(){var a,b;a=k.get(q),b=k.get(r),this.ipid=a,this.fprt=b}function g(a,b){var c,d;if(!p){if(p=!0,f.call(this),a&&("boolean"==typeof a||$.isPlainObject(a))?b=a:a&&"function"==typeof a&&($.eventProxy=function(){var a=$.proxy.apply(null,arguments);return function(){return a.apply(null,Array.prototype.slice.call(arguments,1))}},this.one(s,$.eventProxy(a))),"boolean"==typeof b&&(b={identify:b}),c=b&&b.identify?b.identify:n,d=b&&b.verifyEmail?b.verifyEmail:o,!this.ipid||!this.fprt)return p=!1,e({isLoggedIn:!1},this),!1;if(d&&this.ipid&&this.fprt)i.findPrimary(function(a){e({isLoggedIn:!0,isEmailVerified:a.verified},this)},function(a,b){e({isLoggedIn:!1},this)});else{if(c&&this.ipid&&this.fprt){var g=j.identify({secureHost:this.config.secureHost,ipid:this.ipid,fprt:this.fprt,success:$.proxy(function(a){p=!1,e({isLoggedIn:!0},this,a)},this),error:$.proxy(function(a){p=!1,e({isLoggedIn:!1},this)},this)});return $.when(g).fail($.proxy(function(a){p=!1,e({isLoggedIn:!1},this)},this)),void console.log("identityPointService id = "+g)}if(this.ipid&&this.fprt)return p=!1,e({isLoggedIn:!0},this),!0}}}function h(){return this instanceof h?(this.ipid=null,this.fprt=null,void d(this)):new h}var i=a("auth-media-gateway/serviceClients/emailService"),j=a("auth-media-gateway/serviceClients/identityPointService"),k=a("bam.cookies/cookies"),l=a("bindable/jquery.bindable"),m={},n=!1,o=!1,p=!1,q="ipid",r="fprt",s="isLoggedIn",t={isLoggedIn:s};return h.prototype={events:t,isLoggedIn:function(a,b){return g.call(this,a,b)}},l(h.prototype),h}),define("jqueryui-amd/jqueryui/mouse",["jquery","./widget"],function(a){!function(a,b){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(a)}),define("jqueryui-amd/jqueryui/draggable",["jquery","./core","./mouse","./widget"],function(a){!function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c,d=this,e=!1,f=!1;for(a.ui.ddmanager&&!this.options.dropBehaviour&&(f=a.ui.ddmanager.drop(this,b)),this.dropped&&(f=this.dropped,this.dropped=!1),c=this.element[0];c&&(c=c.parentNode);)c===document&&(e=!0);return e||"original"!==this.options.helper?("invalid"===this.options.revert&&!f||"valid"===this.options.revert&&f||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,f)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").addBack().each(function(){this===b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;if("parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=["document"===e.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"===e.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"===e.containment?0:a(window).scrollLeft())+a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"===e.containment?0:a(window).scrollTop())+(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor===Array)e.containment.constructor===Array&&(this.containment=e.containment);else{if(c=a(e.containment),d=c[0],!d)return;b="hidden"!==a(d).css("overflow"),this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName),j=b.pageX,k=b.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(j=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(k=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(j=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(k=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((k-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,k=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((j-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,j=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:k-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:j-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.ui.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,q>h-p&&i+p>q&&s>j-p&&k+p>s||q>h-p&&i+p>q&&t>j-p&&k+p>t||r>h-p&&i+p>r&&s>j-p&&k+p>s||r>h-p&&i+p>r&&t>j-p&&k+p>t?("inner"!==o.snapMode&&(d=Math.abs(j-t)<=p,e=Math.abs(k-s)<=p,f=Math.abs(h-r)<=p,g=Math.abs(i-q)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=Math.abs(j-s)<=p,e=Math.abs(k-t)<=p,f=Math.abs(h-q)<=p,g=Math.abs(i-r)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m):(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=a(this).data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(d[0].style.zIndex,10)||0,a(d).each(function(a){this.style.zIndex=b+a}),this[0].style.zIndex=b+d.length)}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(a)}),define("jqueryui-amd/jqueryui/position",["jquery"],function(a){!function(a,b){function c(a,b,c){return[parseInt(a[0],10)*(n.test(a[0])?b/100:1),parseInt(a[1],10)*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:e?a.position.scrollbarWidth():0,height:f?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&h(c+d)<n&&(i.horizontal="center"),m>p&&h(e+f)<p&&(i.vertical="middle"),g(h(c),h(d))>g(h(e),h(f))?i.important="horizontal":i.important="vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;
b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):j>0&&0>=i?a.left=e:i>j?a.left=e+f-b.collisionWidth:a.left=e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):j>0&&0>=i?a.top=e:i>j?a.top=e+f-b.collisionHeight:a.top=e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<h(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||h(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||d<h(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||h(c)<l)&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(a)}),define("jqueryui-amd/jqueryui/resizable",["jquery","./core","./mouse","./widget"],function(a){!function(a,b){function c(a){return parseInt(a,10)||0}function d(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=c(this.helper.css("left")),e=c(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,c,e,f,g,h=this.options;g={minWidth:d(h.minWidth)?h.minWidth:0,maxWidth:d(h.maxWidth)?h.maxWidth:1/0,minHeight:d(h.minHeight)?h.minHeight:0,maxHeight:d(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,c=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),c<g.maxWidth&&(g.maxWidth=c),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,e=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,e=d(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=d(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=d(a.width)&&b.minWidth&&b.minWidth>a.width,h=d(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(c),l=/nw|ne|n/.test(c);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=c(b.css("padding"+e))}),j.containerOffset=b.offset(),j.containerPosition=b.position(),j.containerSize={height:b.innerHeight()-d[3],width:b.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&c.maxWidth<m,p=c.maxHeight&&c.maxHeight<n,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(a)}),define("jqueryui-amd/jqueryui/dialog",["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],function(a){!function(a,b){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&this._trigger("beforeClose",b)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||a(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return c&&!b&&this._trigger("focus",a),c},open:function(){return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),void this._trigger("focus"))},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(e.focus(1),b.preventDefault()):(d.focus(1),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()],a(this).removeClass("ui-dialog-dragging"),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){d.height=a(this).height(),d.width=a(this).width(),a(this).removeClass("ui-dialog-resizing"),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var e=this,f=!1,g={};a.each(b,function(a,b){e._setOption(a,b),a in c&&(f=!0),a in d&&(g[a]=b)}),f&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){this.options.modal&&(a.ui.dialog.overlayInstances||this._delay(function(){a.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(b){a(b.target).closest(".ui-dialog").length||(b.preventDefault(),a(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),a.ui.dialog.overlayInstances++)},_destroyOverlay:function(){this.options.modal&&(a.ui.dialog.overlayInstances--,a.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove())}}),a.ui.dialog.overlayInstances=0,a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{_position:function(){var b,c=this.options.position,d=[],e=[0,0];c?(("string"==typeof c||"object"==typeof c&&"0"in c)&&(d=c.split?c.split(" "):[c[0],c[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),c={my:d[0]+(e[0]<0?e[0]:"+"+e[0])+" "+d[1]+(e[1]<0?e[1]:"+"+e[1]),at:d.join(" ")}),c=a.extend({},a.ui.dialog.prototype.options.position,c)):c=a.ui.dialog.prototype.options.position,b=this.uiDialog.is(":visible"),b||this.uiDialog.show(),this.uiDialog.position(c),b||this.uiDialog.hide()}})}(a)}),define("bam.xd/bam.xd",["require","exports","module","bindable/jquery.bindable","bam.url/url"],function(a,b,c){function d(a){this.name="bam"+(new Date).valueOf()*Math.floor(1e3*Math.random()+1),this.frameSrc=a.src,this._data=a.data||{},window[this.name]=this}function e(){var a=window.location.hash.split("#!/")[1];this.params=j.parseQueryParameters(a)}function f(){var a=window.location.hash.split("#!/")[1];return"success"===a?(window.location.hash="",!1):!0}var g="xdp_baseurl",h="xdp_name",i=a("bindable/jquery.bindable"),j=a("bam.url/url"),k="/shared/bam.xde.html";d.prototype={create:function(a,b){var c=this,d=window.location.protocol+"//"+document.domain+(""!==window.location.port?":"+window.location.port:""),e={};this.receiveMessage;b=b||{},b[g]=d,b[h]=this.name,$.extend(e,this._data,b),this._iframeEl=$("<iframe />",{frameborder:0,marginheight:0,marginwidth:0,scrolling:"no",src:this.frameSrc+"#!/?"+$.param(e)}).appendTo(a)[0];var f=window.addEventListener?"addEventListener":"attachEvent",i=window[f],j="attachEvent"==f?"onmessage":"message";"undefined"!=typeof i&&i(j,$.proxy(function(a){if("undefined"!=typeof a.data){var b,d;if(-1===a.data.indexOf("/"))b=a.data,d=[];else var e=a.data.split("/"),b=a.data[0],d=e.slice(1,e.length);c.trigger(b,d)}}),!1)},destroy:function(){try{delete window[this.name]}catch(a){}this.unbind(),$(this._iframeEl).remove(),this._iframeEl=null}},i(d.prototype),e.prototype={triggerEvent:function(a,b){if("undefined"!=typeof window.postMessage)parent.postMessage(a+(b?"/"+b.join("/"):""),"*");else{var c=document.createElement("iframe");c.src=this.params[g]+k+"#!/"+this.params[h]+"/"+a+(b?"/"+b.join("/"):""),c.style.display="none",document.body.appendChild(c),function(){f()?setTimeout(arguments.callee,13):document.body.removeChild(c)}()}}},c={iframe:function(a){return new d(a)},publisher:function(){return new e}},$.extend(b,c)}),define("hgn!loginTemplates/login.layout",["hogan"],function(a){
function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="login">'),d.b("\n"+c),d.b('	<div class="header">'),d.b("\n"+c),d.b('		<span class="logo"></span>'),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b('	<div class="left loginFrame" id="login-container">'),d.b("\n"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b('	<div class="right purchaseFrame" id="purchase-frame">'),d.b("\n"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b('	<div class="superbar" id="superbar-frame">'),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!loginTemplates/login.upsell",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<h3>Buy</h3>"),d.b("\n"+c),d.b("<h4>Purchase MLB.TV now</h4>"),d.b("\n"+c),d.b("<p>Buy now and watch every 2014 out-of-market game LIVE or on demand on over 400 supported devices. Choice of monthly and yearly packages.</p>"),d.b("\n"+c),d.b('<a href="http://mlb.mlb.com/mlb/subscriptions/index.jsp?c_id=mlb" class="bam-button bam-button-mlbtv">Choose Package</a>'),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!loginTemplates/login.superbar",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('I already own MLB.TV through my pay TV provider. <a href="'),d.b(d.v(d.f("activateLink",a,b,0))),d.b('" class="bam-button bam-button-products">Activate</a>'),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("auth-media-gateway/subclasses/LoginDelegate",["require","exports","module","auth-media-gateway/subclasses/Session","jqueryui-amd/jqueryui/dialog","auth-media-gateway/config/Config","bam.xd/bam.xd","hgn!../../loginTemplates/login.layout","hgn!../../loginTemplates/login.upsell","hgn!../../loginTemplates/login.superbar"],function(a,b,c){function d(a){$.extend(k,a),this.config=k;k.loginViewPath;d.superclass.constructor.call(this);var b=k.secureHost+k.loginFormPath;this._loginFrame=g.iframe({src:b}).bind("loginSuccess",$.proxy(function(){this.isLoggedIn(),this.trigger(d.LOGIN_SUCCESS),this.hide(),this._loginFrame.destroy()},this)).bind("loginError",$.proxy(function(){this.trigger(d.LOGIN_ERROR)},this))}var e=a("auth-media-gateway/subclasses/Session"),f=(a("jqueryui-amd/jqueryui/dialog"),a("auth-media-gateway/config/Config")),g=a("bam.xd/bam.xd"),h=(f.PROPERTY,f.SECURE_HOST_DOMAIN_DEFAULT),i=window.location.hostname.indexOf("beta")>=0?"betasecure.":"secure.",j="https://"+i+h,k={secureHost:j,loginLayout:a("hgn!../../loginTemplates/login.layout"),popModuleCss:"/gda-login-popModule.css",loginFormPath:"/shared/components/login/mlbtv/login.html",upsellTemplate:a("hgn!../../loginTemplates/login.upsell"),superbarTemplate:a("hgn!../../loginTemplates/login.superbar")};return $.IENativeEnumFix=function(a,b){$.each(["toString","valueOf"],function(c,d){var e=b[d];$.isFunction(e)&&e!==Object.prototype[d]&&(a[d]=e)})},$.eventProxy=function(){var a=$.proxy.apply(null,arguments);return function(){return a.apply(null,Array.prototype.slice.call(arguments,1))}},$.inherit=function(a,b,c){function d(){}if(!$.isFunction(b)||!$.isFunction(a))throw new Error("jQuery.inherit failed, please check that all dependencies are included.");var e;if(d.prototype=b.prototype,a.prototype=new d,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor===Object.prototype.constructor&&(b.prototype.constructor=b),c){for(e in c)c.hasOwnProperty(e)&&(a.prototype[e]=c[e]);$.support.nativeEnum||$.IENativeEnumFix(a.prototype,c)}},$.inherit(d,e,{visible:!1,configure:function(){},display:function(){uiPop=$("<div id='loginOverlay'></div>"),uiPop.html(k.loginLayout()),$(uiPop).find("#purchase-frame").html(k.upsellTemplate());var a=window.location.hostname.indexOf("beta")>=0?"beta":window.location.hostname.indexOf("qa")>=0||window.location.hostname.indexOf("dev")>=0||window.location.hostname.indexOf("local")>=0?"qa":"";a=window.env?window.env.split(".")[0]:a;var b="https://"+a+"secure.mlb.com/tv/activate";$(uiPop).find("#superbar-frame").html(k.superbarTemplate({activateLink:b})),$(document).ready(function(){$(window).resize(function(){var a=window.innerWidth,b=a/2-340;$(".ui-dialog").css("left",b+"px")})});var c=this;uiPop.dialog({modal:!0,width:680,show:"fade",hide:"fade",close:function(){c._loginFrame.destroy(),uiPop.dialog("destroy")},position:{my:"center top",at:"center top",of:window,collision:"none"},create:function(a,b){setTimeout(function(){$(a.target).parent().css({position:"fixed",top:"120px","z-index":"3"}),$(".ui-widget-overlay").css({"z-index":"2"})},1e3)}}),$("#loginOverlay").on("click",".ui-dialog-titlebar button.ui-button",function(a){a.preventDefault(),uiPop.dialog("isOpen")&&uiPop.dialog("close")}),this._loginFrame.create("#login-container"),this.bind("loginError",$.eventProxy(function(){$("#login-form-container").find("iframe").css({height:"330px"}),$("#gameday-audio-authentication-view").find(".gda-auth-frame").css({height:"356px"})}),this)},hide:function(){this.visible=!1,this.unbind(),uiPop.dialog("isOpen")&&uiPop.dialog("close")}}),d.LOGIN_SUCCESS="LoginDelegate.LOGIN_SUCCESS",d.LOGIN_ERROR="LoginDelegate.LOGIN_ERROR",d}),define("auth-media-gateway/subclasses/MediaXML",["require","exports","module"],function(a,b,c){var d=function(){var a=null,b=null,c={complex:0,lite:1},d=function(a){function b(){}return a&&"object"==typeof a?(b.prototype=a,new b):void 0},e=function(a){var b="";a&&"string"==typeof a&&(b=a);var c=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return c.test(b)},f=function(a){var b=/-/g,c=String(a).replace(b,"_");return c},g=function(){var a={activate:function(){var a=[];return a&&b.outputType===c.complex&&(a.getNodesByAttribute=function(b,c){if(a&&a.length>0){var d,e=[],f=a.length-1;if(f>=0)do d=a[f],d&&d[b]===c&&e.push(d);while(f--);return e.reverse(),e}},a.getNodeByAttribute=function(b,c){if(a&&a.length>0){var d=null,e=null,f=a.length-1;if(f>=0)do if(d=a[f],d&&d[b]===c){e=d;break}while(f--);return e}},a.getNodesByValue=function(b){if(a&&a.length>0){var c,d=[],e=a.length-1;if(e>=0)do c=a[e],c&&c.Text&&c.Text===b&&d.push(c);while(e--);return d.reverse(),d}},a.contains=function(b,c){if(a&&a.length>0){var d=!1,e=a.length-1;if(e>=0)do if(a[e][b]===c){d=!0;break}while(e--);return d}},a.indexOf=function(b,c){var d=-1;if(a&&a.length>0){var e=a.length-1;if(e>=0)do if(a[e][b]===c){d=e;break}while(e--);return d}},a.SortByAttribute=function(b,c){a&&a.length>0&&a.sort(function(a,d){var f=a[b],g=d[b];f=e(f)?parseFloat(f):f,g=e(g)?parseFloat(g):g;var h=g>f?-1:f>g?1:0;return h=c&&"DESC"===c.toUpperCase()?0-h:h})},a.SortByValue=function(b){a&&a.length>0&&a.sort(function(a,c){var d=a.Text,f=c.Text;d=e(d)?parseFloat(d):d,f=e(f)?parseFloat(f):f;var g=f>d?-1:d>f?1:0;return g=b&&"DESC"===b.toUpperCase()?0-g:g})},a.SortByNode=function(b,c){a&&a.length>0&&a.sort(function(a,d){var f=a[b][0].Text,g=d[b][0].Text;f=e(f)?parseFloat(f):f,g=e(g)?parseFloat(g):g;var h=g>f?-1:f>g?1:0;return h=c&&"DESC"===c.toUpperCase()?0-h:h})}),a}};return a}(),h=function(){var a=d(g);return a.activate()},i=function(d){var e={Text:"",_processChildren:!0,_processAttributes:!0},g=null;if("function"==typeof a)try{g=a(d)}catch(h){}if(g&&-1===g)e=null;else if(g)e=g,e._processChildren="undefined"==typeof e._processChildren?!0:e._processChildren,e._processAttributes="undefined"==typeof e._processAttributes?!0:e._processAttributes,e.Text||(e.Text=""),e._namespace||d.prefix&&b.outputType===c.complex&&(e._namespace=d.prefix);else{var i=d.localName?d.localName:d.baseName;i=f(i),e._nodeName=i,d.prefix&&(e._namespace=d.prefix)}return e},j=function(a,d){if(d.attributes.length>0){b.outputType===c.complex&&(a._attributes=[]);var e=d.attributes.length-1,g=null,h=null;do g=String(f(d.attributes[e].name)),h=a._parent||!1,h&&h[a._nodeName][0][g]&&"object"==typeof h[a._nodeName][0][g]&&(g="attr_"+g),b.outputType===c.complex&&a._attributes.push(g),a[g]=$.trim(d.attributes[e].value);while(e--)}},k={JSONOutputType:c,xmlToJSON:function(d,e){function f(a,d){var e,g,k="";if(!d)return null;if(d.hasChildNodes()){var l=d.childNodes.length-1,m=0;do switch(e=d.childNodes[m],e.nodeType){case 1:b.outputType===c.complex&&(a._children=a._children?a._children:[]),g=i(e),g&&(b.outputType===c.complex&&(g._parent=a,k!==g._nodeName&&a._children.push(g._nodeName)),a[g._nodeName]||(a[g._nodeName]=h()),a[g._nodeName].push(g),g._processChildren&&e.hasChildNodes()&&f(g,e),delete g._processChildren,g._processAttributes&&j(g,e),delete g._processAttributes,k=g._nodeName,b.outputType===c.lite&&delete g._nodeName);break;case 3:a.Text+=$.trim(e.nodeValue);break;case 4:a.Text+=e.text?$.trim(e.text):$.trim(e.nodeValue)}while(m++<l)}}b=e||{outputType:k.JSONOutputType.complex},a=b&&b.nodeHandler;var g=null;if(g="string"==typeof d?k.textToXML(d):"object"==typeof d&&d.nodeType?d:null,!g)return null;var l=9===g.nodeType?g.documentElement:g,m=i(l);return m.typeOf="JSXBObject",m.RootName=m._nodeName,3===g.nodeType||4===g.nodeType?g.nodeValue:(j(m,l),f(m,l),b.outputType===c.lite&&delete m._nodeName,delete m._processChildren,delete m._processAttributes,g=null,l=null,m)},textToXML:function(a){var b=null;try{b=$.browser.msie?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser,b.async=!1}catch(c){throw new Error("XML Parser could not be instantiated")}var d=null,e=!0;if($.browser.msie?(e=b.loadXML(a),d=e?b:!1):(d=b.parseFromString(a,"text/xml"),e="parsererror"!==d.documentElement.tagName),!e)throw new Error("Error parsing XML string");return d}};return k}();return d}),define("auth-media-gateway/serviceClients/mediaService",["require","exports","module","../subclasses/MediaXML","bam.cookies/cookies","soap/soap","../subclasses/SoapObject","bindable/jquery.bindable"],function(a,b,c){function d(a,b){if(y>0)if("undefined"!=typeof o.console)console[a](b);else if("string"==typeof b)throw new Error(b)}function e(a){var b={code:a.status_code[0].Text};switch(b.code){case"-1000":b.msg="Requested media not found";break;case"-2000":b.msg="Invalid App Account Information";break;case"-3000":b.msg="Invalid user credentials";break;case"-3500":b.msg="Sign-on restriction status";break;case"-4000":b.msg="System Error";break;default:b.msg="Unknown Error"}return b}function f(a){var b=new r(a);return b.ns="http://services.bamnetworks.com/media/types/2.0",b}function g(){var a=q.get("ipid"),b=unescape(q.get("fprt")),c=null;return a||d("log","MediaService2_0: missing identity point id"),b||d("log","MediaService2_0: missing fingerprint"),a&&b&&(c=new r("fingerprint-identity-point"),c.appendChild(new r("identity-point-id").val(a.toString())),c.appendChild(new r("fingerprint").val(b.toString()))),c}function h(a,b){var c,d,e;if("object"!=typeof b)throw new Error("MediaService2_0: invalid mediaParams object");d=b.isVerifiedUserRequest,delete b.isVerifiedUserRequest,e=b.session_key,delete b.session_key;for(var f in b)b[f]&&(c=b[f].toString(),a.appendChild(new r(f.replace("_","-")).val(c)));if(d){var h=g();h&&a.appendChild(h)}e&&a.appendChild(new r("session-key").val(e.toString()))}function i(a){return a.status_code&&1!=a.status_code[0].Text}function j(a){var b=null;if("object"==typeof a)if(a._children){var c,d,e=0;b={};do c=a._children[e],d=a[c],b[c]=j(d.length>1?d:d[0]),e++;while(e<a._children.length)}else if(a.length>1){var f=0;b=[];do a[f]._children||a[f]._attributes?a[f]._attributes&&a[f].name?a[f].value?b.push({name:a[f].name,value:a[f].value}):b.push({name:a[f].name,value:a[f].Text}):b.push(j(a[f])):a[f].Text&&b.push(a[f].Text),f++;while(f<a.length)}else a._attributes&&a.name?b=a.value?{name:a.name,value:a.value}:{name:a.name,value:a.Text}:a.Text&&(b=a.Text);return b}function k(a){var b,c,e,f=null;if("object"!=typeof a)throw new Error("MediaService2_0: invalid mediaParams object");if(f={},c=a.isVerifiedUserRequest,a.success&&delete a.success,a.error&&delete a.error,delete a.isVerifiedUserRequest,delete a.requestType,c&&!a.partner_token){var g=q.get("ipid"),h=q.get("fprt");h&&(h=unescape(h));g||d("log","MediaService2_0: missing identity point id"),h||d("log","MediaService2_0: missing fingerprint"),g&&h&&(f.identityPointId=g.toString(),f.fingerprint=h.toString())}for(var i in a)if(a[i]){if(b=a[i].toString(),-1!==i.indexOf("_")){e=i.split("_");for(var j=1;j<e.length;j++)e[j]=e[j].charAt(0).toUpperCase()+e[j].substring(1);i=e.join("")}f[i]=b}return f.platform="undefined"==typeof a.platform?"WEB_MEDIAPLAYER":a.platform,f}function l(a){var b=$.extend(n,a),c=a.success&&"function"==typeof a.success?a.success:null,g=a.error&&"function"==typeof a.error?a.error:null;d("group","MEDIA SERVICE 2.0: Request Media"),soap.SOAPClient.Proxy=u,soap.SOAPClient.SOAPServer=v;var k=f("user-verified-media-request"),l=(h(k,b),new soap.SOAPRequest("find",k));soap.SOAPClient.SendRequest(l,function(a){if(a&&a.Body&&a.Body[0].user_verified_media_response){var b=a.Body[0].user_verified_media_response[0];if(i(b))if("function"==typeof g){var f=e(b);f.operation="MediaService.requestMedia",g(f)}else d("error","MediaService2_0.requestMedia: errorCallback is not a function");else if(c){var h=j(b);d("dir",h),c(h)}else d("error","MediaService2_0.requestMedia: success handler is not a function")}else g?g({operation:"MediaService2_0.requestMedia",code:-1e5,message:"bad data"}):d("error","MediaService2_0.requestMedia: errorCallback is not a function")}),d("groupEnd","END MEDIA SERVICE 2.0: Request Media")}function m(a){var b=a.success&&"function"==typeof a.success?a.success:null,c=a.error&&"function"==typeof a.error?a.error:null,f=$.extend({},n,a),g=k(f);$.ajax({url:a.use_proxy?"/media/msp.jsp":x,data:g,xhrFields:{withCredentials:!0},cache:!1,success:function(f){var g,h,k,l=q.get("NSC_BPIP");l&&!z?(z=!0,setTimeout(function(){t.requestMedia(a),q.remove({name:"NSC_BPIP",path:"/"})},1e3)):(z=!1,q.remove({name:"NSC_BPIP",path:"/"}),g=p.xmlToJSON(f),"user_verified_media_response"===g.RootName?i(g)?(k=e(g),k.operation="MediaService.requestMedia"):(h=j(g),d("dir",h),s&&t.trigger("requestMedia:success",[h]),"function"==typeof b?b(h):d("error","MediaService2_0.requestMedia: success handler is not a function")):k={operation:"MediaService2_0.requestMedia",code:-1e5,message:"Bad Data in Response"},k&&(s&&t.trigger("requestMedia:error",[k]),"function"==typeof c?c(k):d("error","MediaService2_0.requestMedia: errorCallback is not a function")),z=!1)},error:function(){var a={operation:"MediaService2_0.requestMedia",code:-1e5,message:"Bad Data in Response"};s&&t.trigger("requestMedia:error",[a]),"function"==typeof c?c(a):d("error","MediaService2_0.requestMedia: errorCallback is not a function")}})}var n,o=this,p=a("../subclasses/MediaXML"),q=a("bam.cookies/cookies"),r=(a("soap/soap"),a("../subclasses/SoapObject")),s=a("bindable/jquery.bindable"),t={},u="/pubajaxws/services/MediaService2_3",v="http://dev-a.services.bamnetworks.com:8888/ws/services/MediaService2_3",w="/ws/media/mf/op-findUserVerifiedEvent/v-2.3",x="/ws/media/mf/op-findUserVerifiedEvent/v-2.3",y=0,z=!1;return n={isVerifiedUserRequest:!0,event_id:null,content_id:null,playback_scenario:null,subject:"LIVE_EVENT_COVERAGE",session_key:null},$.extend(t,{setLogLevel:function(a){y=a},requestMedia:function(a){var b=a.frameworkEndPoint?a.frameworkEndPoint:w;x=a.frameworkURL+b,a.requestType&&"soap"===String.prototype.toLowerCase(a.requestType)?l(a):m(a)}}),s(t),o.MediaService=t,t}),define("auth-media-gateway/subclasses/Utils",["require","exports","module"],function(a,b,c){b.log=function(a){"undefined"!=typeof console&&console.log(a)}}),define("auth-media-gateway/subclasses/FeaturesEnum",["require","exports","module"],function(a,b,c){function d(){}return d.FREE_GAME="mp4.freeGame",d.FREE_EVENT="mp4.freeEvent",d.NEW_MESSAGE="mp4.newMessage",d.GD_MESSAGE="mp4.gdMessage",d.BASIC_MESSAGE="mp4.basicMessage",d.BASIC_AR_MESSAGE="mp4.basicARMessage",d.PREMIUM_MESSAGE="mp4.premiumMessage",d.YOY_MESSAGE="mp4.yoyMessage",d.PADRES_TV_MESSAGE="mp4.padrestvMessage",d.EXEC_MESSAGE="mp4.execMessage",d.EMC_MESSAGE="mp4.emcMessage",d.PROMO_FREE_TRIAL_MESSAGE="mp4.promoFreeTrialMessage",d.SINGLE_TEAM_ENTITLED="mp4.singleTeamEntitled",d.SHERATON_ENTITLED="mp4.sheratonEntitled",d.FYT_ENTITLED="cp.fytEntitled",d.FYT_RSN="cp.fytRsn",d}),define("auth-media-gateway/subclasses/UserTypeEnum",["require","exports","module"],function(a,b,c){function d(){}return d.USER_TYPE_OTHER="OTHER",d.USER_TYPE_FREE="FREE",d.USER_TYPE_PAID="PAID",d.USER_TYPE_EMC="EMC",d.USER_TYPE_PROMO_FREE_TRIAL="PROMOFREETRIAL",d}),define("auth-media-gateway/subclasses/MediaFrameworkResponseHelper",["require","exports","module","auth-media-gateway/subclasses/Utils","auth-media-gateway/subclasses/FeaturesEnum","auth-media-gateway/subclasses/UserTypeEnum","bam.url/url"],function(a,b,c){function d(a,b){var c=this;this.authConfig=b,this.rsns=b&&this.authConfig.rsns?this.authConfig.rsns:[],this.IS_FYT_SUB=!1,this.IS_FYT_AUTH=!1,this.FYT_RSN,this.FYT_SYNDICATED=!1,this.FYT_AUTH_EXPIRED=!1,this.mediaResponse=a,this.features=[];try{var g=this.mediaResponse.user_verified_event.user_verified_content.features;"undefined"!=typeof g&&null!=g&&"undefined"!=typeof g.feature&&null!=g.feature&&(this.features=p(g.feature))}catch(s){e.log("MediaFrameworkResponseHelper constructor: error analyzing features")}this.isFree=function(a){("undefined"==typeof a||null===a||""===a)&&(a="video");var b=!1,c=p(this.mediaResponse.user_verified_event.user_verified_content);if(c&&c.length>0){var d,e;for(j in c)if(d=c[j],d&&d.type===a){var g=d.features;if("undefined"!=typeof g&&null!=g&&"undefined"!=typeof g.feature&&null!=g.feature){e=p(g.feature);for(var h in e)if(h===f.FREE_GAME||h===f.FREE_EVENT){b=!0;break}}}}return b},this.isSheratonEntitled=function(){var a=!1,b=p(this.mediaResponse.user_verified_event.user_verified_content);if(("undefined"==typeof mediaItemType||null===mediaItemType||""===mediaItemType)&&(mediaItemType="video"),b&&b.length>0){var c,d;for(var e in b)if(c=b[e],c&&c.type===mediaItemType){var g=c.features;if("undefined"!=typeof g&&null!=g&&"undefined"!=typeof g.feature&&null!=g.feature){d=p(g.feature);for(var h in d)if(d[h]===f.SHERATON_ENTITLED){a=!0;break}}}}return a},this.isFYTSub=function(a){var b=_.first(_.filter(p(a),function(a){return"video"===a.type}));return this.IS_FYT_SUB=b&&b.features&&b.features.feature&&_.contains(b.features.feature,f.FYT_ENTITLED)},this.isFYTAuth=function(a,b){if(!a)return!1;var c=this.getVideoContentItems(b),d=_.reduce(c,function(a,b){return _.union(a,p(b.user_verified_media_item))},[]);return this.IS_FYT_AUTH=q(d)&&r(d)},this.getFYTRsn=function(a){var b;if(a&&a.features&&a.features.feature){var c=a.features.feature;_.each(c,function(a){a.indexOf(f.FYT_RSN)>-1&&(b=a.split(".")[2])})}return b},this.getVideoContentItems=function(a){var b=_.filter(p(a),function(a){return"video"===a.type});return b},this.contentItemContainsRsn=function(a,b){var c;_.find(b.domain_specific_attributes.domain_attribute,function(b){return"call_letters"===b.name&&b.value.toLowerCase().indexOf(a.toLowerCase())>-1?c=!0:void 0});return c},this.getCallLettersFromContentItem=function(a){if(!a)return null;var b=a.domain_specific_attributes.domain_attribute,c=_.find(b,function(a){return"call_letters"===a.name?!0:void 0},this);return c.value.replace(o,"")},this.getNonBlackedOutContentItem=function(a){var b=this.getVideoContentItems(a),c=_.find(b,function(a){return r(a.user_verified_media_item)});return c},this.getFytTeamIdFromFeatures=function(a){if(a){var b,c,d=null,e=/([0-9])+/g,f=p(a)[0],g=f.features.feature||[];return b=_.find(g,function(a){return a.indexOf("cp.fyt.team")>-1?!0:void 0},this),b&&b.length&&(c=e.exec(b)||[],d=c[0]),d}},this.getCallLettersForNonBlackedOutContent=function(a){var b=this.getNonBlackedOutContentItem(a);return this.getCallLettersFromContentItem(b)},this.checkForSyndicatedPlayer=function(a){var b=h.Location(window.location),c="true"===b.getParam("syndicated"),d="true"===b.getParam("embed"),e=b.getParam("callLetters");return c&&d&&a===e},this.isFYTAuthExpired=function(a,b){var d,d=!0;if(a&&!c.IS_FYT_AUTH){var e=this.getVideoContentItems(b);_.each(e,function(a){var b=this.getCallLettersFromContentItem(a);d=d&&_.where(this.rsns,{id:b}).length>0},this)}else d=!1;return d},this.isFYTSyndicated=function(a,b){var d;if(b=p(b),a&&c.IS_FYT_AUTH){var e=this.getCallLettersForNonBlackedOutContent(b);this.checkForSyndicatedPlayer(e)||(d=_.where(this.rsns,{id:e}).length>0)}return d},this.userType=function(){var a=d.determineUserType(this.features);return a},this.isAuthorized=function(a){("undefined"==typeof a||null===a||""===a)&&(a="video");var b,c=!1,d=p(this.mediaResponse.user_verified_event.user_verified_content);if(d&&d.length>0){var e,f,g,h;for(j in d)if(e=d[j],e&&(h=p(e.user_verified_media_item),h.length>0))for(g in h){f=h[g];for(b in f.auth_status)if(b===i){c=!0;break}}}return c},this.isLoginRequired=function(a){("undefined"==typeof a||null===a||""===a)&&(a="video");var b,c=!0,d=p(this.mediaResponse.user_verified_event.user_verified_content);if(d&&d.length>0){var e,f;for(j in d)if(e=d[j]){f=$.isArray(e.user_verified_media_item)?e.user_verified_media_item[0]:e.user_verified_media_item;for(b in f.auth_status)if("loginRequiredStatus"!==b){c=!1;break}}}return c},this.isVideoBlackedOut=function(a){return a!==m&&a!==n},this.isLocationUndetermined=function(a){return a==l},this.getBlackoutStatus=function(a,b){a!==!0&&(a=!1),("undefined"==typeof b||null===b)&&(b=null);var c=null,d=null,f=p(this.mediaResponse.user_verified_event.user_verified_content);if(f&&f.length>0){var g,h;for(j in f)if(g=f[j]){if("audio"===g.type&&a===!1)continue;h=p(g.user_verified_media_item)[0];for(c in h.blackout_status){if(c===m||c===i)return e.log("MediaFrameworkResponseHelper getBlackoutStatus: contentItem["+j+"].blackoutStatus = "+c+" so return 'none'"),m;if(c===k){e.log("MediaFrameworkResponseHelper getBlackoutStatus: contentItem["+j+"].blackoutStatus = "+c+" so get the actual blackoutStatus from the child node");var l=p(h.blackout_status[c])[0];d=l.blackout}}}}return e.log("MediaFrameworkResponseHelper getBlackoutStatus: blackoutStatus = "+c+", blackedOutStatusValue = "+d),null!==d&&(c=d),null===c&&(c=b?b:n),e.log("MediaFrameworkResponseHelper getBlackoutStatus: return blackoutStatus = "+c),c}}var e=a("auth-media-gateway/subclasses/Utils"),f=a("auth-media-gateway/subclasses/FeaturesEnum"),g=a("auth-media-gateway/subclasses/UserTypeEnum"),h=a("bam.url/url"),i="successStatus",k="blackedOutStatus",l="locationCannotBeDeterminedStatus",m="none",n="unknown",o=/(\+|-).*$/g,p=function(a){return a instanceof Array?a:"undefined"!=typeof a?[a]:[]},q=function(a){return _.some(a,function(a){return a.blackout_status&&void 0!==a.blackout_status.blackedOutStatus})},r=function(a){return _.some(a,function(a){return a.blackout_status&&void 0!==a.blackout_status.successStatus})};return d.prototype={mediaResponse:null},d.isOneFeatureFound=function(a,b){if(a&&a.length>0&&b&&b.length>0){for(var c,d={},e=0;e<b.length;e++)c=b[e],c&&(d[c]=!0);for(var f=0;f<a.length;f++){var g=a[f];if(d[g])return!0}}return!1},d.isFreeGame=function(a){return d.isOneFeatureFound(a,[f.FREE_GAME])},d.isFreeEvent=function(a){return d.isOneFeatureFound(a,[f.FREE_EVENT])},d.isPayingUser=function(a){var b=[f.PREMIUM_MESSAGE,f.BASIC_MESSAGE,f.BASIC_AR_MESSAGE,f.EXEC_MESSAGE,f.SINGLE_TEAM_ENTITLED];return d.isOneFeatureFound(a,b)},d.isEmcUser=function(a){return d.isOneFeatureFound(a,[f.EMC_MESSAGE])},d.isSponsoredPromoFreeTrialUser=function(a){return d.isOneFeatureFound(a,[f.PROMO_FREE_TRIAL_MESSAGE])},d.determineUserType=function(a){var b=g.USER_TYPE_OTHER;if(a&&a.length>0){var c=!1;if(c=d.isPayingUser(a))b=g.USER_TYPE_PAID;else if(d.isEmcUser(a))b=g.USER_TYPE_EMC;else if(d.isSponsoredPromoFreeTrialUser(a))b=g.USER_TYPE_PROMO_FREE_TRIAL;else{var f=!c;if(f){var h=d.isFreeGame(a)||d.isFreeEvent(a);h&&(b=g.USER_TYPE_FREE)}}}return e.log("MediaFrameworkResponseHelper determineUserType: userType="+b),b},d.getDomainAttributesObject=function(a){var b={};try{var c=[],d=a.domain_specific_attributes;if("undefined"!=typeof d&&null!=d&&"undefined"!=typeof d.domain_attribute&&null!=d.domain_attribute){c=p(d.domain_attribute);var f,g,h;for(f in c)if(g=c[f].name,h=c[f].value,"undefined"==typeof b[g]||null===b[g])b[g]=h;else if(b[g]instanceof Array)b[g].push(h);else{var i=b[g];b[g]=[i,h]}}}catch(j){e.log("MediaFrameworkResponseHelper getDomainAttributesObject: error analyzing domain_specific_attributes")}return b},d.getFreeWheelDynamicParams=function(a,b,c,d){var f={};f.customId=a.content_id,f.contentId=a.content_id,window.Krux||(window.Krux={}),f.ksg=window.Krux.segments,f.kuid=window.Krux.user;var g=a.domainAttributes;"undefined"!=typeof g&&null!==g&&(f.gamePk=g.game_pk,f.gameId=g.game_id,f.awayTeamId=g.away_team_id,f.homeTeamId=g.home_team_id,f.calendarEventId=g.calendar_event_id);try{var h=$.isArray(a.user_verified_media_item)?a.user_verified_media_item[0]:a.user_verified_media_item;f.authRequired="true"===h.media_item.auth_required}catch(i){e.log("MediaFrameworkResponseHelper getFreeWheelDynamicParams: error analyzing user_verified_media_item.media_item.auth_required")}return f.userType=b,f.fyt_sub=c,f.fyt_auth=d,f},d}),define("auth-media-gateway/vo/MediaCatalogResponseVO",["require","exports","module","auth-media-gateway/subclasses/MediaFrameworkResponseHelper"],function(a,b,c){function d(a,b,c){var d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=c,v=a.user_verified_event.event_id,w=new e(a,u);d=w.isAuthorized(),g=w.isLoginRequired(),m=w.isSheratonEntitled(),i=w.getBlackoutStatus(),h=w.isVideoBlackedOut(i),k=w.getBlackoutStatus(!0),j=w.isVideoBlackedOut(k),l=w.isLocationUndetermined(i)&&d&&!j;var x=f(a.user_verified_event.user_verified_content);if(n=w.isFYTSub(x),n&&(o=w.isFYTAuth(n,x),p=w.isFYTAuthExpired(n,x),q=w.isFYTSyndicated(n,x),r=w.getCallLettersForNonBlackedOutContent(x),s=w.getFytTeamIdFromFeatures(x)),x&&x.length>0){var y;for(t in x)y=x[t],y&&(y.domainAttributes=e.getDomainAttributesObject(y))}this.calendarEventId=v,this.isAuthorized=d,this.isLoginRequired=g,this.isSheratonEntitled=m,this.isNotBlackedOut=!h,this.isAVSRequired=l,this.videoBlackoutStatus=i,this.isAllContentNotBlackedOut=!j,this.allContentBlackoutStatus=i,this.isFytSub=n,this.isFytAuth=o,this.isFytAuthExpired=p,this.isFytSyndicated=q,this.fytCallLetters=r,this.fytTeamId=s,this.mediaServiceVO=a,this.profile=b,this.mediaFrameworkResponseHelper=w}var e=a("auth-media-gateway/subclasses/MediaFrameworkResponseHelper"),f=function(a){return a instanceof Array?a:"undefined"!=typeof a?[a]:[]};return d}),define("auth-media-gateway/vo/MediaItemResponseVO",["require","exports","module","auth-media-gateway/subclasses/MediaFrameworkResponseHelper","auth-media-gateway/subclasses/Utils"],function(a,b,c){function d(a,b,c){var d,h,i,j,k,l,m,n=[],o=new e(a);h=o.isAuthorized(),i=o.isLoginRequired(),k=o.getBlackoutStatus(),j=!o.isVideoBlackedOut(k),l=o.isLocationUndetermined(k)&&h&&!j,n=o.features;var p=o.userType(),q=$.isArray(a.user_verified_event.user_verified_content)?a.user_verified_event.user_verified_content[0]:a.user_verified_event.user_verified_content;d=$.isArray(q.user_verified_media_item)?q.user_verified_media_item[0]:q.user_verified_media_item,q.domainAttributes=e.getDomainAttributesObject(q),q.freewheelProps=e.getFreeWheelDynamicParams(q,p,b,c),m=d.url;var r=[];try{var s=a.session_info.session_attributes;"undefined"!=typeof s&&null!=s&&"undefined"!=typeof s.session_attribute&&null!=s.session_attribute&&(r=g(s.session_attribute))}catch(t){f.log("MediaItemResponseVO constructor: error grabbing cookie values from the response")}this.url=m,this.isAuthorized=h,this.isLoginRequired=i,this.isNotBlackedOut=j,this.isAVSRequired=l,this.videoBlackoutStatus=k,this.mediaItem=d.media_item,this.mediaServiceVO=a,this.features=n,this.mfCookies=r,this.userType=p}var e=a("auth-media-gateway/subclasses/MediaFrameworkResponseHelper"),f=a("auth-media-gateway/subclasses/Utils"),g=function(a){return a instanceof Array?a:"undefined"!=typeof a?[a]:[]};return d}),define("auth-media-gateway/serviceClients/accountAlertsDelegate",["require","exports","module","soap/soap","auth-media-gateway/config/Config","./registrationServiceUtils","bindable/jquery.bindable","xml/xml","../subclasses/SoapObject"],function(a,b,c){var d=a("soap/soap"),e=(a("auth-media-gateway/config/Config"),a("./registrationServiceUtils"),a("bindable/jquery.bindable")),f=(a("xml/xml"),a("../subclasses/SoapObject")),g=function(){var a,b="/pubajaxws/services/account-alerts",c="/pubajaxws/services/account-alerts",h={successResponse:function(a,b){g.handleSuccessResponse(b)},errorResponse:function(a,b){g.handleErrorResponse(b)},handleSuccessResponse:function(a){var b=this.soapToAlert(a);this.savedData=b,this.trigger(g.ALERTS_SUCCESS,b)},handleErrorResponse:function(a){var b=a;this.trigger(g.ALERTS_ERROR,b)},request:function(e){if(void 0!=a)return void this.trigger(g.ALERTS_SUCCESS,data);var h="https://secure.mlb.com";e.secureHost&&(h=e.secureHost);var i=h+b,j=h+c;d.SOAPClient.Proxy=i,d.SOAPClient.SOAPServer=j;var k=new f("scma:find-request");k.ns="http://www.bamnetworks.com/account/alerts/schema/1.1",k.attr("xmlns:scma","http://www.bamnetworks.com/account/alerts/schema/1.1"),k.appendChild(new f("scma:identity-point-id").val(e.identityPointId)),k.appendChild(new f("scma:fingerprint").val(e.fingerprint)),k.appendChild(new f("scma:category-name").val("MLBTV_SUBSCRIPTIONS"));var l={"SOAP-ENV":"http://schemas.xmlsoap.org/soap/envelope/",xs:"http://www.w3.org/2001/XMLSchema",xsi:"http://www.w3.org/2001/XMLSchema-instance"},m=new d.SOAPRequest({action:"find-request",ns:l},k);m.settings.action="findByCategory";var n=new d.SOAPClient({proxy:i,ws:j});this.fixSoapClient(n),n.request=m,n.request.toString=function(){return'<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><SOAP-ENV:Body>'+this.envelope["soapenv:Body"].ToXML(this.envelope["soapenv:Body"])+"</SOAP-ENV:Body></SOAP-ENV:Envelope>"},n.bind(n.events.onSOAPResponse,this.successResponse),n.bind(n.events.onSOAPError,this.errorResponse),n.sendRequest()},soapToAlert:function(a){a=a.replace(/find\-response/g,"findresponse");var b=jQuery.parseXML(a),c=$(b).find("account-alert").find("message").first(),d={categoryName:c.find("category-name").text(),active:c.find("active").text(),name:c.find("name").text(),categoryName:c.find("category-name").text(),message:c.find("message").text()};return d},fixSoapClient:function(a){a.sendRequest=function(a){if(this.request=a||this.request,this.request){var b,c=this,d=this.settings,e=this.request,f=e.toString(),g=new $.Deferred;return $.ajax({type:d.type,url:d.proxy||d.ws,dataType:"xml",contentType:d.contentType+'; charset="'+d.charSet+'"',processData:!1,crossDomain:!0,data:f,xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("SOAPAction",e.settings.action)},complete:function(a,d){b=a.responseText,"success"==d?(g.resolve(b),c.trigger(c.events.onSOAPResponse,b,null)):(g.reject(b),c.trigger(c.events.onSOAPError,b,null))}}),g.promise()}}}};return e(h),h}();return g.ALERTS_SUCCESS="AccountAlertsDelegate.ALERTS_SUCCESS",g.ALERTS_ERROR="AccountAlertsDelegate.ALERTS_ERROR",e(g),g}),function(a,b){"function"==typeof define&&define.amd?define("client/client",[],b):"object"==typeof exports?module.exports=b():a.bamClient=b()}(this,function(){"use strict";function a(a){var b=window.screen[a];return c.isAndroid&&!c.isChrome&&(b/=c.devicePixelRatio),b}function b(){var a=d(),b=e();return Math.max(a,b)}var c={},d=a.bind(null,"width"),e=a.bind(null,"height");"undefined"==typeof window&&(window={navigator:{userAgent:"node"},devicePixelRatio:1,screen:{width:1,height:1}});var f=window.navigator.userAgent;return c.isIPhone=!!f.match(/iPhone|iPod/),c.isIPad=!!f.match(/iPad/),c.isIOS=c.isIPhone||c.isIPad,c.isAndroid=!!f.match(/Android/),
c.isWindowsPhone=!!f.match(/IEMobile/),c.isKindle=!!f.match(/Silk/),c.isBlackberry=!!f.match(/BB\d\d/),c.isOldBlackberry=!!f.match(/BlackBerry/),c.isPlaybook=!!f.match(/PlayBook/),c.isVizio=!!f.match(/Vizio/),c.isGoogleTV=!!f.match(/GoogleTV/),c.isAppleTV=!!f.match(/AppleTV/),c.isTV=c.isVizio||c.isAppleTV||c.isGoogleTV,c.isMacOS=!!f.match(/Mac OS X/),c.isWindows=!!f.match(/Windows NT/),c.isWindowsRT=!!f.match(/Windows NT[^;]+; ARM;/),c.isWebKit=!!f.match(/WebKit/),c.isGecko=!!f.match(/Gecko/),c.isTrident=c.isIE=!!f.match(/Trident/),c.isChrome=!!f.match(/Chrome/),c.devicePixelRatio=window.devicePixelRatio||1,c.isTouch="ontouchmove"in window,c.isRetina=c.devicePixelRatio>=1.5,c.isMobile=b()<1024,c.isTablet=!c.isMobile&&c.isTouch,c.isDesktop=!c.isMobile&&!c.isTablet,c.isMobile?c.typeString="mobile":c.isTablet?c.typeString="tablet":c.typeString="desktop",c.screen={width:d(),height:e()},"onorientationchange"in window&&window.addEventListener("onorientationchange",function(){c.screen.width=d(),c.screen.height=e()}),c}),define("auth-media-gateway/AuthenticatedMediaGateway",["require","exports","module","auth-media-gateway/subclasses/LoginDelegate","auth-media-gateway/serviceClients/mediaService","auth-media-gateway/subclasses/Utils","bam.url/url","bam.cookies/cookies","bindable/jquery.bindable","bam.xdomainrequest/bam.xdomainrequest","auth-media-gateway/vo/MediaCatalogResponseVO","auth-media-gateway/vo/MediaItemResponseVO","auth-media-gateway/serviceClients/accountAlertsDelegate","client/client"],function(a,b,c){var d=a("auth-media-gateway/subclasses/LoginDelegate"),e=a("auth-media-gateway/serviceClients/mediaService"),f=a("auth-media-gateway/subclasses/Utils"),g=a("bam.url/url"),h=a("bam.cookies/cookies"),j=a("bindable/jquery.bindable"),k=(a("bam.xdomainrequest/bam.xdomainrequest"),a("auth-media-gateway/vo/MediaCatalogResponseVO")),l=a("auth-media-gateway/vo/MediaItemResponseVO"),m=a("auth-media-gateway/serviceClients/accountAlertsDelegate"),n=null,o=function(){function b(){ld=new d(E);var a=ld.isLoggedIn(),b=c(),e=o();f.log("AuthenticatedMediaGateway beginLoginAuthFlow: isLoggedIn = "+a+", isLoginRequired = "+b),D.partner_token||!b?t():b&&!a?e?p():s():q()}function c(){f.log("AuthenticatedMediaGateway loginRequired:");var a=!0;return E.bypassLogin?a=!1:"undefined"!=typeof D.authorization?a=D.authorization:"undefined"!=typeof D.login&&(a=D.login),f.log("AuthenticatedMediaGateway loginRequired: return isRequired = "+a),a}function o(){var a,b=g.Location(window.location),c="true"===b.getParam("syndicated"),d="true"===b.getParam("embed"),e=b.getParam("callLetters");return a=c&&d&&void 0!==e}function p(){try{var a=JSON.stringify({type:B.LOGIN_CHALLENGE});parent.postMessage(a,"*")}catch(b){console.error("Error: sendSyndicatedEmbedMessage()",b)}}function q(){var a=H&&(!I||!J);f.log("AuthenticatedMediaGateway verifyLoginStatusInBackground: shouldCallIdentityPointService="+a),ld.isLoggedIn(r,a)}function r(a){var b=a.isLoggedIn;"undefined"!=typeof a.profile&&(n=a.profile,J=!0),f.log("AuthenticatedMediaGateway handleVerifyLoginStatusResult: isLoggedIn = "+b),b?t():s()}function s(){f.log("AuthenticatedMediaGateway presentLoginScreen:"),B.trigger(B.LOGIN_CHALLENGE)}function t(){f.log("AuthenticatedMediaGateway callMediaService:"),e.one("requestMedia:success",u),e.one("requestMedia:error",z),L&&(D.session_key=unescape(L)),e.requestMedia(D)}function u(a,b){f.log("AuthenticatedMediaGateway handleMediaRequestSuccess:"),G?v(a,b):w(a,b)}function v(a,b){f.log("AuthenticatedMediaGateway handleCatalogRequestSuccess:");var c;try{c=new k(b,n,E),E.fytSub=c.isFytSub,E.fytAuth=c.isFytAuth}catch(d){return f.log("AuthenticatedMediaGateway handleCatalogRequestSuccess: there was an error parsing the response, so trigger an error event and return"),void B.trigger(B.MEDIA_CATALOG_ERROR,b)}x(b),c.isLoginRequired?s():c.isAuthorized?c.isAVSRequired?B.trigger(B.MEDIA_CATALOG_AVS_REQUIRED,c):B.trigger(B.MEDIA_CATALOG_SUCCESS,c):B.trigger(B.MEDIA_CATALOG_NOT_AUTHORIZED,c)}function w(a,b){f.log("AuthenticatedMediaGateway handlePlaybackUrlRequestSuccess:");var c;try{c=new l(b,E.fytSub,E.fytAuth)}catch(d){return void B.trigger(B.MEDIA_ITEM_ERROR,b)}y(c),x(b),c.isLoginRequired?s():c.isAuthorized&&c.isNotBlackedOut?B.trigger(B.MEDIA_ITEM_PLAYABLE,c):c.isAuthorized?c.isAVSRequired?B.trigger(B.MEDIA_ITEM_AVS_REQUIRED,c):c.isNotBlackedOut?B.trigger(B.MEDIA_ITEM_ERROR,c):B.trigger(B.MEDIA_ITEM_BLACKOUT,c):B.trigger(B.MEDIA_ITEM_NOT_AUTHORIZED,c)}function x(a){a.session_key&&(L=a.session_key,h.set({name:K,value:L,path:"/",expires:new Date((new Date).getTime()+36e5)}))}function y(b){var c=a("client/client"),d=c.isChrome;if(d===!0)try{var e=b.mfCookies;if(e&&e.length>0){var g,j=window.location.hostname.split("."),k="."+j[j.length-2]+"."+j[j.length-1];for(i in e)g=e[i],g&&h.set({name:g.name,value:g.value,domain:k,path:"/"})}}catch(l){f.log("AuthenticatedMediaGateway setMediaFrameworkSessionCookies: error grabbing cookie values from the mediaItemResponseVO")}}function z(a,b){return f.log("AuthenticatedMediaGateway handleMediaRequestError:"),"-3000"===b.code?void s():(L=null,h.remove({name:K,path:"/"}),void B.trigger(B.MEDIA_ITEM_ERROR,b))}function A(){f.log("AuthenticatedMediaGateway getAccountAlertsForUser: ");var a={};E.secureHost&&(a.secureHost=E.secureHost),a.identityPointId=h.get("ipid"),a.fingerprint=h.get("fprt"),m.request(a)}var B,C,D,E={},F=!1,G=!1,H=!0,I=!0,J=!1,K="mssk",L=h.get(K);return L&&(L=unescape(L)),B=C={requestMedia:function(a){G=!1,D=a,D.frameworkURL=E.frameworkURL,D.frameworkEndPoint=E.frameworkEndPoint,b()},requestMediaCatalog:function(a){G=!0,D=a,D.frameworkURL=E.frameworkURL,D.frameworkEndPoint=E.frameworkEndPoint,b()},getAccountAlerts:function(){m.bind(m.ALERTS_SUCCESS,this.handleAccountAlertsSuccess),m.bind(m.ALERTS_ERROR,this.handleAccountAlertsError),A()},handleAccountAlertsSuccess:function(a,b){f.log("AuthenticatedMediaGateway handleAccountAlertsSuccess:"),F=b,B.trigger(C.ACCOUNT_ALERTS_SUCCESS,b,b)},handleAccountAlertsError:function(a,b){f.log("AuthenticatedMediaGateway handleAccountAlertsError:"),B.trigger(C.ACCOUNT_ALERTS_ERROR,b,b)},configure:function(a){E=a}},j(C),C}();return o.LOGIN_CHALLENGE="AuthenticatedMediaGateway.LOGIN_DISPLAY",o.LOGIN_SUCCESS="AuthenticatedMediaGateway.LOGIN_SUCCESS",o.LOGIN_ERROR="AuthenticatedMediaGateway.LOGIN_ERROR",o.MEDIA_CATALOG_SUCCESS="AuthenticatedMediaGateway.MEDIA_CATALOG_SUCCESS",o.MEDIA_CATALOG_ERROR="AuthenticatedMediaGateway.MEDIA_CATALOG_ERROR",o.MEDIA_CATALOG_NOT_AUTHORIZED="AuthenticatedMediaGateway.MEDIA_CATALOG_NOT_AUTHORIZED",o.MEDIA_CATALOG_AVS_REQUIRED="AuthenticatedMediaGateway.MEDIA_CATALOG_AVS_REQUIRED",o.MEDIA_ITEM_PLAYABLE="AuthenticatedMediaGateway.MEDIA_ITEM_PLAYABLE",o.MEDIA_ITEM_ERROR="AuthenticatedMediaGateway.MEDIA_ITEM_ERROR",o.MEDIA_ITEM_BLACKOUT="AuthenticatedMediaGateway.MEDIA_ITEM_BLACKOUT",o.MEDIA_ITEM_AVS_REQUIRED="AuthenticatedMediaGateway.MEDIA_ITEM_AVS_REQUIRED",o.MEDIA_ITEM_NOT_AUTHORIZED="AuthenticatedMediaGateway.MEDIA_ITEM_NOT_AUTHORIZED",o.ACCOUNT_ALERTS_SUCCESS="AuthenticatedMediaGateway.ACCOUNT_ALERTS_SUCCESS",o.ACCOUNT_ALERTS_ERROR="AuthenticatedMediaGateway.ACCOUNT_ALERTS_ERROR",{getInstance:function(){return o}}}),define("mp5/vpm/VPMEvents",["require","exports","module"],function(a,b,c){var d={SELECTED_HIGHLIGHT_INFO_UPDATED:"SELECTED_HIGHLIGHT_INFO_UPDATED",STREAM_SELECTION_OPTIONS_UPDATED:"STREAM_SELECTION_OPTIONS_UPDATED",SELECTED_FEED_UPDATED:"SELECTED_FEED_UPDATED",CHANGE_FEED:"CHANGE_FEED",MEDIA_CATALOG_RESPONSE:"MEDIA_CATALOG_RESPONSE",MEDIA_PLAYABLE:"MEDIA_PLAYABLE",MEDIA_CATALOG_SUCCESS:"MEDIA_CATALOG_SUCCESS",UPDATE_USER_PROFILE:"UPDATE_USER_PROFILE",LOGIN_CHALLENGE:"LOGIN_CHALLENGE",GAME_DATA_LOADED:"GAME_DATA_LOADED",PLAYER_LOADED:"PLAYER_LOADED",FLASH_PLAYER_READY:"FLASH_PLAYER_READY",FLASH_PLAYER_READY_ERROR:"FLASH_PLAYER_READY_ERROR",PLAY_CONTENT_CALLED:"PLAY_CONTENT_CALLED",SELECTED_MEDIA_SLOT_CHANGED:"SELECTED_MEDIA_SLOT_CHANGED",VIDEO_AREA_LAYOUT_STATE_CHANGED:"VIDEO_AREA_LAYOUT_STATE_CHANGED",ENABLE_CLOSED_CAPTIONS:"ENABLE_CLOSED_CAPTIONS",DISABLE_CLOSED_CAPTIONS:"DISABLE_CLOSED_CAPTIONS",ENTER_MINI_MODE:"ENTER_MINI_MODE",EXIT_MINI_MODE:"EXIT_MINI_MODE",CLOSE_HIGHLIGHT:"CLOSE_HIGHLIGHT",PLAYBACK_STARTED:"PLAYBACK_STARTED",TIMECODE_UPDATE:"TIMECODE_UPDATE",SEEK_COMPLETE:"SEEK_COMPLETE",ERROR_MESSAGE:"ERROR_MESSAGE",FREEWHEEL_AD_STARTED:"FREEWHEEL_AD_STARTED",FREEWHEEL_AD_ENDED:"FREEWHEEL_AD_ENDED",PLAYER_LAUNCH_LOGGED_IN:"PLAYER_LAUNCH_LOGGED_IN",PLAYER_LAUNCH_UPGRADE_OFFER:"PLAYER_LAUNCH_UPGRADE_OFFER"};return d}),define("mp5/vpm/VideoMessage",["require","exports","module","mp5/vpm/VPMEvents"],function(a,b,c){return VideoMessage={VPMEvents:a("mp5/vpm/VPMEvents"),error:function(a,b,c,d){VPM.trigger(this.VPMEvents.ERROR_MESSAGE,{error:a,errorMsg:b,messageData:d})}},VideoMessage}),define("mp5/vpm/mediaselection/MediaSelectionMessageEnum",["require","exports","module"],function(a,b,c){function d(){}return d.IN_MARKET="IN_MARKET",d.OUT_OF_MARKET="OUT_OF_MARKET",d.BLACKED_OUT="BLACKED_OUT",d.BLACKED_OUT_UPSELL="BLACKEDOUT_UPSELL",d.BLACKED_OUT_NO_AUDIO="BLACKED OUT - NO AUDIO",d.TBYB="TBYB",d.SELECTION_SUCCESS="SUCCESS",d.UPSELL_VIDEO="UPSELL_VIDEO",d.CONTENT_ID_INVALID="CONTENT_ID_INVALID",d.TBYB_BLACKED_OUT="TBYB_BLACKED_OUT",d.NOT_AUTHORIZED="NOT_AUTHORIZED",d.NO_CONTENT_AVAILABLE="NO_CONTENT_AVAILABLE",d.AUDIO_ONLY_EVENT="AUDIO_ONLY_EVENT",d.DROPPED_AUDIO_USER="DROPPED_AUDIO_USER",d.DROPPED_FMS_UNAVAILABLE="DROPPED_FMS_UNAVAILABLE",d.DROPPED_VIDEO_UNAVAILABLE="DROPPED_VIDEO_UNAVAILABLE",d.REDIRECTED_SINGLE_TEAM_SUBSCRIPTION="REDIRECTED_SINGLE_TEAM_SUBSCRIPTION",d.HLS_ONLY_AVAILABLE="NEXDEF_ONLY_AVAILABLE",d.HLS_ONLY_AVAILABLE_NO_AUDIO_FALLBACK="NEXDEF_ONLY_AVAILABLE_NO_AUDIO_FALLBACK",d.LIVE_CONTENT_JUST_ENDED="LIVE_CONTENT_JUST_ENDED",d.FYT_SWAP_FEED="FYT_SWAP_FEED",d.FYT_FEED_SELECTOR_SWAP_FEED="FYT_FEED_SELECTOR_SWAP_FEED",d.FYT_SYNDICATED="FYT_SYNDICATED",d.FYT_AUTH_EXPIRED="FYT_AUTH_EXPIRED",d}),define("mp5/vpm/models/StreamSelectionOptions",["require","exports","module"],function(a,b,c){function d(a){this.calendarEventId=null,this.contentFeeds=[]}return d}),define("mp5/vpm/models/ContentFeed",["require","exports","module"],function(a,b,c){function d(a){this.isVisible=!0,this.isSelected=!1,this.isAuthorized=!1,this.isBlackout=!1,this.contentId=null,this.mediaType=null,this.mediaState=null,this.teamId=null,this.callLetters=null,this.language=null,this.feedAssociation=null,this.coverageType=null,this.isAlternateAudioAvailable=!1,this.alternateAudioOverlays=[],this.isEnhancedFeed=!1}return d}),define("mp5/vpm/models/AudioTrack",["require","exports","module"],function(a,b,c){function d(a){this.isSelected=!1,this.description=null,this.type=null,this.language=null,this.channel=0}return d}),define("mp5/vpm/mediaselection/MediaSelectionResponse",["require","exports","module"],function(a,b,c){function d(){return{mediaItem:null,contentId:null,features:null,message:null,messageBlackoutStatus:null,mediaType:null,isHlsAvailable:!1,isDynamicFmsAvailable:!1,isStandardFmsAvailable:!1,isInMarket:!1}}return d}),define("mp5/vpm/mediaselection/BlackoutStatus",["require","exports","module"],function(a,b,c){function d(a){var b=d.NONE,c=[];this.status=function(){return b},this.blackedOutStatus=function(){return c};var e=function(a){b=d.NONE,c=[];var e,f;for(e in a)f=e;if("successStatus"===f)b=d.SUCCESS;else if("canNotDetermineLocation"===f||"locationCannotBeDeterminedStatus"===f)b=d.LOCATION_CAN_NOT_BE_DETERMINED;else if("blackedOutStatus"===f){var g,h=a[f];for(e in h)g=h[e],g&&c.push(g);c.length>0?(g=c[0],b=g===d.KEYWORD_MLB_NATIONAL_BLACKOUT||g===d.NATIONAL?d.NATIONAL:g===d.KEYWORD_MLB_AWAY_TEAM_BLACKOUT||g===d.KEYWORD_MLB_HOME_TEAM_BLACKOUT||g===d.LOCAL?d.LOCAL:g===d.KEYWORD_TOPRANK_NON_NORTH_AMERICA_BLACKOUT||g===d.NON_NORTH_AMERICA?d.NON_NORTH_AMERICA:d.UNKNOWN):b=d.UNKNOWN}};e(a)}return d.prototype={},d.KEYWORD_MLB_AWAY_TEAM_BLACKOUT="MLB_AWAY_TEAM_BLACKOUT",d.KEYWORD_MLB_HOME_TEAM_BLACKOUT="MLB_HOME_TEAM_BLACKOUT",d.KEYWORD_MLB_NATIONAL_BLACKOUT="MLB_NATIONAL_BLACKOUT",d.KEYWORD_MLB_APSN_BLACKOUT="MLB_APSN_BLACKOUT",d.KEYWORD_TOPRANK_NON_NORTH_AMERICA_BLACKOUT="TOPRANK_NON_NORTH_AMERICA_BLACKOUT",d.UNKNOWN="unknown",d.NONE="none",d.LOCAL="local",d.NATIONAL="national",d.INTERNATIONAL="international",d.NON_NORTH_AMERICA="nonNorthAmerica",d.LOCATION_CAN_NOT_BE_DETERMINED="locationCanNotBeDetermined",d.SUCCESS="success",d}),define("mp5/vpm/mediaselection/PlaybackScenarioBitrateSet",["require","exports","module","mp5/vpm/mediaselection/PlaybackScenarioChooser"],function(a,b,c){function d(b,c){function d(a){return a===h.AUDIO_SCENARIO_FMS||a===h.AUDIO_SCENARIO_FMS_2009?!0:!1}function e(a){return k[a]}function f(a){var b=a.lastIndexOf("_");b-=1;var c=a.slice(0,b),d=c.lastIndexOf("_"),e=c.substring(d+1),f=parseInt(e);return f}function g(a){var b,c,e=[],g=a.length;for(b=0;g>b;b++)if(c=a[b],!d(c))if(h.isHlsScenario(c))i=!0;else if(h.isFMSDynamicStreamingScenario(c))j=!0;else{var l=f(c),m={scenario:c,bitrateKbps:l};e.push(m)}k=e.sort(function(a,b){return parseFloat(a.bitrateKbps)-parseFloat(b.bitrateKbps)})}var h=a("mp5/vpm/mediaselection/PlaybackScenarioChooser"),i=!1,j=!1,k=[];this.getAllPlaybackScenarios=function(){var a=this.getStandardFmsPlaybackScenarios();return i&&a.push(h.HLS_SCENARIO),j&&a.push(h.FMS_DYNAMIC_STREAMING_SCENARIO),a},this.getStandardFmsPlaybackScenarios=function(){for(var a=new Array(k.length),b=0;b<k.length;b++)a[b]=e(b).playbackScenario;return a},this.getNonHlsBitratesKbps=function(){for(var a=new Array(k.length),b=0;b<k.length;b++)a[b]=e(b).bitrateKbps;return a},this.getBitrateKbpsFromPlaybackScenario=function(a){for(var b=0;b<k.length;b++){var c=e(b);if(a==c.playbackScenario)return c.bitrateKbps}return 0},this.isHlsAvaiable=function(){return i},this.isFmsDynamicStreamingAvailable=function(){return j},g(b)}return d.prototype={},d}),define("mp5/vpm/mediaselection/PlaybackScenarioChooser",["require","exports","module","mp5/vpm/mediaselection/MediaSelectionResponse","mp5/vpm/mediaselection/MediaSelectionMessageEnum","mp5/vpm/mediaselection/BlackoutStatus","mp5/vpm/mediaselection/PlaybackScenarioBitrateSet"],function(a,b,c){function d(){}a("mp5/vpm/mediaselection/MediaSelectionResponse"),a("mp5/vpm/mediaselection/MediaSelectionMessageEnum"),a("mp5/vpm/mediaselection/BlackoutStatus"),a("mp5/vpm/mediaselection/PlaybackScenarioBitrateSet");return d.prototype={},d.HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_SUPPORT="HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_SUPPORT",d.HLS_SCENARIO="HTTP_CLOUD_WIRED_WEB",d.FMS_DYNAMIC_STREAMING_SCENARIO="FMS_CLOUD",d.AUDIO_SCENARIO_FMS_2009="MLB_FMS_AUDIO_32K_STREAM",d.AUDIO_SCENARIO_FMS="AUDIO_FMS_32K",d.AUDIO_SCENARIO_HLS_TS="HTTP_CLOUD_AUDIO_TS",d.containsHlsScenario=function(a){if("undefined"!=typeof a&&a instanceof Array){var b,c;for(b in a)if(c=d.isHlsScenario(a[b]))return!0}return!1},d.isHlsScenario=function(a){return"undefined"!=typeof a&&null!==a&&a.indexOf("HTTP_CLOUD")>=0?!0:!1},d.containsFmsDynamicScenario=function(a){if("undefined"!=typeof a&&a instanceof Array){var b,c;for(b in a)if(c=d.isFMSDynamicStreamingScenario(a[b]))return!0}return!1},d.isFMSDynamicStreamingScenario=function(a){return"undefined"!=typeof a&&null!==a&&a.indexOf("FMS_CLOUD")>=0?(d.FMS_DYNAMIC_STREAMING_SCENARIO=a,!0):!1},d.choosePlaybackScenario=function(a,b,c,e,f,g){("undefined"==typeof b||null===b)&&(b=!1),("undefined"==typeof c||null===c)&&(c=!1),("undefined"==typeof e||null===e)&&(e=!1),("undefined"==typeof f||null===f)&&(f=!1),("undefined"==typeof g||null===g)&&(g=!1),console.log("PlaybackScenarioChooser choosePlaybackScenario: isHlsAuthorized = "+b+", isDynamicFmsAuthorized = "+c+", isHlsPreferred = "+e);try{if("undefined"==typeof a||null===a)return null;var h=a.getAllPlaybackScenarios();if(!h||0==h.length)return console.log("PlaybackScenarioChooser choosePlaybackScenario: there are no playback options so return null"),null;var i=!1,j=a.isHlsAvaiable();if(console.log("PlaybackScenarioChooser choosePlaybackScenario: isHlsPlaybackEnabled = "+f+", isNativeHlsSupported = "+g),f===!1||g===!1)console.log("PlaybackScenarioChooser choosePlaybackScenario: HLS Playback is disabled so don't consider HLS an option"),e=!1;else if(console.log("PlaybackScenarioChooser choosePlaybackScenario: isHlsContentAvailable = "+j+", isHlsAuthorized = "+b+", isHlsPreferred = "+e),i=j&&b&&f&&g,console.log("PlaybackScenarioChooser choosePlaybackScenario: isHlsContentAvailable = "+j+", isNativeHlsAnOption = "+i+" (based on isHlsAuthorized = "+b+", isNativeHlsSupported = "+g+", isHlsPreferred = "+e+")"),e&&i)return console.log("PlaybackScenarioChooser choosePlaybackScenario: Chose HLS ("+d.HLS_SCENARIO+") because isHlsPreferred==true and isNativeHlsAnOption==true"),d.HLS_SCENARIO;var k=a.isFmsDynamicStreamingAvailable()&&c;if(console.log("PlaybackScenarioChooser choosePlaybackScenario: isFmsDynamicStreamingAnOption = "+k+" (based on isDynamicFmsAuthorized = "+c+" and if FMS_DYNAMIC_STREAMING_SCENARIO present)"),k)return console.log("PlaybackScenarioChooser choosePlaybackScenario: Chose FMS MBR ("+d.FMS_DYNAMIC_STREAMING_SCENARIO+") because isFmsDynamicStreamingAnOption==true"),d.FMS_DYNAMIC_STREAMING_SCENARIO;h=a.getStandardFmsPlaybackScenarios();var l=h.slice(0);if(0==l.length)return j?i?(console.log("PlaybackScenarioChooser choosePlaybackScenario: NexDef wasn't preferred but returning it because no FMS options are available"),d.HLS_SCENARIO):d.HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_NEXDEF:(console.log("PlaybackScenarioChooser choosePlaybackScenario: No FMS options available"),null);console.log("PlaybackScenarioChooser choosePlaybackScenario: Choose an FMS playbackScenario because we fell past all other options");var m=d.chooseFmsPlaybackScenario(a,l);return console.log("PlaybackScenarioChooser choosePlaybackScenario: Chose FMS (playbackScenario="+m+") because we fell past all other options"),null===m&&j?d.HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_SUPPORT:m}catch(n){return console.log("choosePlaybackScenario: An error occurred when trying to choose a playback scenario!"),console.log("choosePlaybackScenario: "+n),null}return console.log("choosePlaybackScenario: Application error in playback selection code!"),null},d.chooseFmsPlaybackScenario=function(a,b){return"undefined"!=typeof b&&null!==b&&b instanceof Array&&0!=b.length?b[b.length]:null},d}),define("mp5/vpm/models/UserProfile",[],function(){var a,b=function(b){this.setDefaultValues(),b&&"undefined"!==b&&this.translateProfileObject(b),a=this};return b.getInstance=function(){return a||new b},b.prototype={hideScores:null,browserFullScreen:null,showClosedCaptions:null,favoriteTeams:null,highlightAlertBubble:null,highlightNotification:null,mediaLanguage:null,playLiveGameFromStart:null,playerTrackerAlert:null,preferStandardVideo:null,setDefaultValues:function(){this.hideScores=!1,this.browserFullScreen=!1,this.showClosedCaptions=null,this.favoriteTeams=[],this.highlightAlertBubble=!1,this.highlightNotification=!1,this.mediaLanguage="en",this.playLiveGameFromStart=!1,this.playerTrackerAlert=!1,this.preferStandardVideo=!1},translateProfileObject:function(a){var b=this;_.each(a,function(a,c){switch("T"===a?a=!0:"F"===a&&(a=!1),c){case"archiveSpoiler":b.hideScores=!a;break;case"closedCaptions":b.showClosedCaptions=a;break;case"playLiveGameFromStart":b.playLiveGameFromStart=a;break;case"preferNexDef":b.preferStandardVideo=!a;break;case"favoriteTeam":var d;d=a.constructor!==Array?a.split(","):a,b.favoriteTeams=d;break;default:b[c]=a}},b)}},b}),define("mp5/vpm/mediaselection/MediaItemSelectionManager",["require","exports","module","mp5/vpm/mediaselection/MediaSelectionResponse","mp5/vpm/mediaselection/MediaSelectionMessageEnum","mp5/vpm/mediaselection/BlackoutStatus","mp5/vpm/mediaselection/PlaybackScenarioChooser","mp5/vpm/mediaselection/PlaybackScenarioBitrateSet","mp5/config/Config","mp5/vpm/models/UserProfile","underscore"],function(a,b,c){function d(a,b){function c(a){for(var b=0;b<U.length;b++){var c=U[b];if(c.content_id.toString()===a)return c}return null}function e(a){for(var b,c,e,f=!1,g=!1,h=!0,i=!1,m=!0,n=!0,o=!0,p=0;p<U.length;p++)for(var r=U[p],s=q(r.user_verified_media_item),t=0;t<s.length;t++){var u=s[t];if(r.type===d.VIDEO_TYPE){f=!0,u.authStatus===d.AUTH_STATUS_SUCCESS&&(h=!1);var v=u.blackoutStatus.status()===k.SUCCESS;u.authStatus===d.AUTH_STATUS_SUCCESS&&v&&d.isMediaItemPlayable(u.media_item,!0)?(l.isHlsScenario(u.media_item.playback_scenario)&&(b=!0),l.isFMSDynamicStreamingScenario(u.media_item.playback_scenario)&&(c=!0)):(n=!1,l.isHlsScenario(u.media_item.playback_scenario)||(o=!1)),!v||r.domainAttributes.coverage_type!==d.OUT_OF_MARKET&&r.domainAttributes.coverage_type!==d.NATIONAL||(m=!1)}else r.type!==d.AUDIO_TYPE||u.media_item.playback_scenario!==l.AUDIO_SCENARIO_FMS_2009&&u.media_item.playback_scenario!==l.AUDIO_SCENARIO_FMS||(g=!0,u.authStatus===d.AUTH_STATUS_SUCCESS&&(i=!0))}return e=i&&!f?j.AUDIO_ONLY_EVENT:i&&h?j.DROPPED_AUDIO_USER:!b||c||o||m?n||!i||m?!h||i||m?j.BLACKED_OUT:j.NOT_AUTHORIZED:j.DROPPED_VIDEO_UNAVAILABLE:j.DROPPED_FMS_UNAVAILABLE}function f(a){if(a){var b=-1;a.subject&&(b=a.subject.indexOf(d.MULTI_ANGLE_SUBJECT));var c,e=q(a.user_verified_media_item),f=e[0],g=f.blackoutStatus.status()===k.SUCCESS;return g||(c=!0),b>=0&&!c?!0:!1}return!1}function g(){for(var a=new Array,b=0;b<U.length;b++){var c=U[b];c.type===d.AUDIO_TYPE&&a.push(c)}return a}function n(a,b){console.log("MediaItemSelectionManager getAudioResponseByLanguage: language="+b);for(var c=new i,e=null,f=0;f<a.length;f++){e=a[f];var g=D(e.user_verified_media_item);null!==g&&(e.domainAttributes.language===b&&g.authStatus===d.AUTH_STATUS_SUCCESS?(c.contentId=e.content_id,c.features=e.features,e.domainAttributes.coverage_type===d.IN_MARKET&&(c.isInMarket=!0),c.mediaType=e.type,c.mediaItem=g):""===e.domainAttributes.language&&g.authStatus===d.AUTH_STATUS_SUCCESS&&(c.contentId=e.content_id,c.features=e.features,e.domainAttributes.coverage_type===d.IN_MARKET&&(c.isInMarket=!0),c.mediaType=e.type,c.mediaItem=g))}return c}function y(a,b){if((null===b||"undefined"==typeof b)&&(b=!0),null==a)return console.log("MediaItemSelectionManager getMediaItemFromContentId: content==null so get out of here"),null;console.log("MediaItemSelectionManager getMediaItemFromContentId: Get MediaItem for contentId="+a.content_id+", checkBlackOut="+b);var c,e=new Array,f=0,g=0,h=0,i=0;if("undefined"!=typeof a.user_verified_media_item&&null!==a.user_verified_media_item){var j,n=q(a.user_verified_media_item),p=n.length,s=!1;console.log("MediaItemSelectionManager getMediaItemFromContentId: Loop over "+p+" UserVerifiedMediaItems and determine potential MediaItems to play");for(var t=0;p>t;t++)if(j=n[t],s=d.isMediaItemPlayable(j.media_item,r),b){var u=j.blackoutStatus.status()===k.SUCCESS;u&&j.authStatus===d.AUTH_STATUS_SUCCESS?(console.log("MediaItemSelectionManager getMediaItemFromContentId: MediaItem["+t+"] not blacked out and user is authorized"),s?l.isHlsScenario(j.media_item.playback_scenario)?(console.log("MediaItemSelectionManager getMediaItemFromContentId: MediaItem["+t+"] playbackScenario="+j.media_item.playback_scenario+" so isHlsScenario"),$=!0,e.push(j.media_item.playback_scenario)):l.isFMSDynamicStreamingScenario(j.media_item.playback_scenario)?(console.log("MediaItemSelectionManager getMediaItemFromContentId: MediaItem["+t+"] playbackScenario="+j.media_item.playback_scenario+" so isFMSDynamicStreamingScenario"),_=!0,e.push(j.media_item.playback_scenario)):(console.log("MediaItemSelectionManager getMediaItemFromContentId: MediaItem["+t+"] playbackScenario="+j.media_item.playback_scenario),aa=!0,e.push(j.media_item.playback_scenario)):(console.log("MediaItemSelectionManager getMediaItemFromContentId: MediaItem["+t+"] not in a playable state, state="+j.media_item.state),d.MEDIA_STATE_DONE===j.media_item.state&&da++,h++)):console.log("MediaItemSelectionManager getMediaItemFromContentId: MediaItem["+t+"] is blacked out or user is unauthorized"),i++,j.authStatus!==d.AUTH_STATUS_SUCCESS&&g++}else if(console.log("MediaItemSelectionManager getMediaItemFromContentId: MediaItem["+t+"] This is the case when checkBlackOut=false"),a.type===d.VIDEO_TYPE){i++;var u=j.blackoutStatus.status()===k.SUCCESS;u||f++}}if(console.log("MediaItemSelectionManager getMediaItemFromContentId: videoCount="+i+", unAuthCount="+g+", unavailableCount="+h+", blackOutCount="+f+", checkBlackOut="+b),f!==i||b||(_isTYBYBlackedOut=!0),g===i&&b&&(X=!0),h===i&&b&&(Y=!0),0!==g&&0!==h&&g+h===i&&b&&(Y=!0),console.log("MediaItemSelectionManager getMediaItemFromContentId: There are "+e.length+" Available Playable MediaItems"),0===e.length&&b)return console.log("MediaItemSelectionManager getMediaItemFromContentId: everything is blacked out so return null"),null;var v=new m(e,!0),w=!1;l.containsHlsScenario(e)&&(console.log("MediaItemSelectionManager getMediaItemFromContentId: set isHlsAuthorized = true"),w=!0);var x=!1;l.containsFmsDynamicScenario(e)&&(console.log("MediaItemSelectionManager getMediaItemFromContentId: set isDynamicFmsAuthorized = true"),x=!0);var y=!0,z=o.getInstance().preferStandardVideo;z===!0&&(console.log("MediaItemSelectionManager getMediaItemFromContentId: set isHlsPreferred = false"),y=!1),console.log("MediaItemSelectionManager getMediaItemFromContentId: call PlaybackScenarioChooser.choosePlaybackScenario() _isHlsPlaybackEnabled="+ba+", _isNativeHlsSupported="+ca);var A=l.choosePlaybackScenario(v,w,x,y,ba,ca);console.log("MediaItemSelectionManager getMediaItemFromContentId: preferredPlayBack="+A),null===A?Y=!0:A===l.HLS_SCENARIO_ONLY_AVAILABLE_BUT_USER_DOES_NOT_HAVE_NEXDEF&&(Y=!1,Z=!0,A=null);for(var B=0;B<n.length;B++){var C=n[B];C.media_item.playback_scenario===A&&(c=C,console.log("MediaItemSelectionManager getMediaItemFromContentId: Return MediaItem with playbackScenario="+A))}return c}function z(){for(var a=null,b=0;b<U.length;b++){var c=U[b];if(c.type===d.VIDEO_TYPE){if(c.domainAttributes.coverage_type===CoverageTypeEnum.NATIONAL)return a=c;isNaN(Number(c.domainAttributes.coverage_association))&&(c.domainAttributes.coverage_association="0"),c.domainAttributes.coverage_association===c.domainAttributes.home_team_id?a=c:null===a&&(a=c)}}return a}function A(a){(null===a||"undefined"==typeof a)&&(a=!0);for(var b=null,c=0;c<U.length;c++){var e=U[c];if(e.type===d.VIDEO_TYPE){if(!a)return e;if(B(e))return e}}return b}function B(a,b){(null===b||"undefined"==typeof b)&&(b=!1);for(var c=!1,e=q(a.user_verified_media_item),f=0;f<e.length;f++){var g=e[f];if(g.authStatus===d.AUTH_STATUS_SUCCESS){var h=d.isMediaItemPlayable(g.media_item,r);if(h&&(!b||g.blackoutStatus.status()===k.SUCCESS))return!0}}return c}function C(a,b){console.log("MediaItemSelectionManager defaultAudioResponse: Try to find audio content, message="+a);var c=new i;return c.mediaItem=S(),null!==c.mediaItem&&"undefined"!=typeof c.mediaItem?(c.contentId=V.content_id,c.features=V.features,V.domainAttributes.coverage_type===d.IN_MARKET&&(c.isInMarket=!0),c.mediaType=V.type,c.message=a):c.message=null===b||"undefined"==typeof b?j.BLACKED_OUT_NO_AUDIO:b,c}function c(a){for(var b=0;b<U.length;b++){var c=U[b];if(c.content_id.toString()===a)return c}return null}function D(a){for(var b,c=q(a),e=0;e<c.length;e++)if(b=c[e],(l.AUDIO_SCENARIO_FMS===b.media_item.playback_scenario||l.AUDIO_SCENARIO_FMS_2009===b.media_item.playback_scenario)&&b.authStatus===d.AUTH_STATUS_SUCCESS){var f=d.isMediaItemPlayable(b.media_item,r);if(f)return b}return null}function E(){for(var a=new Array,b=0;b<U.length;b++){var c=U[b];(c.domainAttributes.coverage_type===d.OUT_OF_MARKET||c.domainAttributes.coverage_type===d.NATIONAL||v)&&a.push(c)}U=a}function F(){for(var a=!1,b=0;b<U.length;b++){var c=U[b],e=q(c.user_verified_media_item);if(c.type===d.VIDEO_TYPE)for(var f=0;f<e.length;f++){var g=e[f];if(g.blackoutStatus.status()===k.SUCCESS)return!0}}return a}function G(){var a=!0;if(v)return!1;for(var b=0;b<U.length;b++){var c=U[b];if(c.type===d.VIDEO_TYPE&&c.domainAttributes.coverage_type===d.OUT_OF_MARKET)for(var e=q(c.user_verified_media_item),f=0;f<e.length;f++){var g=e[f],h=g.blackoutStatus.status()===k.SUCCESS;if(h&&g.authStatus===d.AUTH_STATUS_SUCCESS)return!1}}return a}function H(){for(var a=null,b=0;b<U.length;b++){var c=U[b];if(c.type===d.VIDEO_TYPE&&c.domainAttributes.coverage_type===d.IN_MARKET)for(var e=q(c.user_verified_media_item),f=0;f<e.length;f++){var g=e[f];if(g.blackoutStatus.status()===k.SUCCESS)return c}}return a}function I(){var a;if(w)console.log("MediaItemSelectionManager selectContentBySpecialRules: isBaseballUX so try to find a valid Baseball ContentItem"),a=J();else{var b=!1;b&&(console.log("MediaItemSelectionManager selectContentBySpecialRules: isBaseballUX==false so try to get the first valid video ContentItem by StreamPriority that is not blacked out"),a=T(!0)),(null===a||"undefined"==typeof a)&&(console.log("MediaItemSelectionManager selectContentBySpecialRules: isBaseballUX==false so try to get the first valid video ContentItem"),a=A())}return a}function J(){console.log("MediaItemSelectionManager selectContentByBaseballCoverageAssociation: isBaseballUX so try to find a valid ContentItem using keywords");var a,b=U[0],c=b.domainAttributes.home_team_id,e=b.domainAttributes.away_team_id;console.log("MediaItemSelectionManager selectContentByBaseballCoverageAssociation: homeTeam="+c+" and awayTeam="+e);var f=L(),g=N(f,e),h=N(f,c),i=[];h&&g?(console.log("MediaItemSelectionManager selectContentByBaseballCoverageAssociation: homeTeam="+c+" and awayTeam="+e+" are in the user's favorite teams so prefer those teams' streams first"),i=[c,e,d.COVERAGE_ASSOCIATION_NATIONAL]):g?(console.log("MediaItemSelectionManager selectContentByBaseballCoverageAssociation: awayTeam="+e+" is one of the user's favorite teams so prefer that team's stream first"),i=[e,d.COVERAGE_ASSOCIATION_NATIONAL,c]):h?(console.log("MediaItemSelectionManager selectContentByBaseballCoverageAssociation: homeTeam="+c+" is one of the user's favorite teams so prefer that team's stream first"),i=[c,d.COVERAGE_ASSOCIATION_NATIONAL,e]):(console.log("MediaItemSelectionManager selectContentByBaseballCoverageAssociation: home and away teams are not in the user's favorite teams so prefer the NATIONAL broadcast stream first"),i=[d.COVERAGE_ASSOCIATION_NATIONAL,c,e]);var j=0;return M(j)&&(console.log("MediaItemSelectionManager selectContentByBaseballCoverageAssociation: a launchTeam="+j+" was provided so prefer that team's stream first"),i.unshift(j.toString())),t?i.unshift(x):i.push(x),a=K(i,!0)}function K(a,b){(null===b||"undefined"==typeof b)&&(b=!1),console.log("MediaItemSelectionManager selectVideoContentByKeywordsCoverageAssociation: Try to find content by keywords="+a.toString());for(var c=0;c<a.length;c++)for(var e=0;e<U.length;e++){var f=U[e];if(("undefined"==typeof f.domainAttributes.coverage_association||null===f.domainAttributes.coverage_association||isNaN(parseInt(f.domainAttributes.coverage_association))||""===f.domainAttributes.coverage_association)&&(f.domainAttributes.coverage_association="0"),f.domainAttributes.coverage_association===a[c]&&f.type!==d.AUDIO_TYPE){if(!b)return f;if(B(f,!0))return f}}return null}function L(){return o.getInstance()&&o.getInstance().favoriteTeams?q(o.getInstance().favoriteTeams):new Array}function M(a){return"undefined"!=typeof a&&null!==a&&!isNaN(a)&&a>0}function N(a,b){if(a&&a.length>0)for(var c=0;c<a.length;c++)if(a[c].toString()===b)return console.log("MediaItemSelectionManager isTeamInFavoriteTeams: teamId="+b+" is one of the user's favorite teams"),!0;return console.log("MediaItemSelectionManager isTeamInFavoriteTeams: teamId="+b+" is not one of the user's favorite teams"),!1}function O(){var a=[],b=L();if(null!==b&&0!==b.length){for(var c=0;c<b.length;c++){var d=R(b[c]);null!==d&&a.push(d)}(0===a.length||2===a.length)&&(a=P())}else{var e=0;M(e)?(a=Q(e.toString()),0===a.length&&(a=P())):a=P()}return a}function P(){var a=p.filter(U,function(a){return a.type===d.AUDIO_TYPE;
}),b=p.sortBy(a,function(a){if(!a.domainAttributes)return!0;var b=a.domainAttributes.coverage_association===a.domainAttributes.home_team_id;return!b});return b}function Q(a){for(var b=[],c=0;c<U.length;c++){var e=U[c];e.type===d.AUDIO_TYPE&&e.domainAttributes.coverage_association===a&&b.push(e)}return b}function R(a){for(var b=null,c=0;c<U.length;c++){var e=U[c];e.type!==d.AUDIO_TYPE||e.domainAttributes.away_team_id!==a.toString()&&e.domainAttributes.home_team_id!==a.toString()||(b=e)}return b}function S(){console.log("MediaItemSelectionManager getHomeAudioMediaItem: Try to find audio content");for(var a=null,b=null,c=0;c<U.length;c++){var e=U[c];if(console.log("MediaItemSelectionManager getHomeAudioMediaItem: contentItem["+c+"] type = "+e.type),e.type===d.AUDIO_TYPE)for(var f=q(e.user_verified_media_item),g=0;g<f.length;g++){var h=f[g];if(h.authStatus===d.AUTH_STATUS_SUCCESS){if(e.domainAttributes.coverage_association===e.domainAttributes.home_team_id&&e.domainAttributes.language===d.ENGLISH_LANG)return console.log("MediaItemSelectionManager getHomeAudioMediaItem: contentItem["+c+"] - found audio content for the home team"),V=e,b=D(h);if(console.log("MediaItemSelectionManager getHomeAudioMediaItem:  contentItem["+c+"] - found audio content not for the home team"),(null===V||"undefined"==typeof V)&&(V=e),a=D(h))return a}}}return console.log("MediaItemSelectionManager getHomeAudioMediaItem: did not find audio content for the home team so return other audio or null"),a}function T(a){(null===a||"undefined"==typeof a)&&(a=!1),console.log("MediaItemSelectionManager selectVideoContentByStreamPriority: Try to find content by StreamPriority");for(var b,c=null,e=null,f=-1,g=0;g<U.length;g++)c=U[g],b=c.stream_priority,isNaN(b)||""===c.stream_priority?console.log("MediaItemSelectionManager selectVideoContentByStreamPriority: stream_priority is not defined for contentId="+c.content_id):(console.log("MediaItemSelectionManager selectVideoContentByStreamPriority: currentStreamPriority="+f+", stream_priority="+b+" for this content, contentId="+c.content_id),b>0&&(f>b||0>f)&&c.type!==d.AUDIO_TYPE&&(a?B(c,!0)&&(f=b,e=c,console.log("MediaItemSelectionManager selectVideoContentByStreamPriority: set currentStreamPriority=stream_priority="+b+" and use contentId="+c.content_id)):(f=b,e=c,console.log("MediaItemSelectionManager selectVideoContentByStreamPriority: set currentStreamPriority=stream_priority="+b+" and use contentId="+c.content_id))));return console.log("MediaItemSelectionManager selectVideoContentByStreamPriority: return contentItem with streamPriority="+f),e}r=a,s=b.isFree,t=b.preferEnhancedMedia,u=b.isEnhanced;var U,V=null,W=null,X=!1,Y=!1,Z=!1,$=!1,_=!1,aa=!1,ba=!1,ca=!1,da=0;this.selectMediaItem=function(a,b,e,f,g,i,l){ba="undefined"!=typeof g&&g===!0,ca="undefined"!=typeof i&&i===!0;var m;W={calendarEventId:b,contentId:e,mediaType:f},U=h(q(a.user_verified_content),l);var n,o,p,r,s,t=W.contentId&&c(W.contentId);for(n in U){o=U[n],r=q(o.user_verified_media_item);for(p in r){s=r[p],s.blackoutStatus=new k(s.blackout_status);var u,v="UNKNOWN";for(var w in s.auth_status)u=w;"loginRequiredStatus"===u?v=d.AUTH_STATUS_LOGIN_REQUIRED:"successStatus"===u?v=d.AUTH_STATUS_SUCCESS:"notAuthorizedStatus"===u&&(v=d.AUTH_STATUS_NOT_AUTHORIZED),s.authStatus=v}}return X=!1,$=!1,_=!1,aa=!1,Y=!1,Z=!1,da=0,console.log("MediaItemSelectionManager selectMediaItem: Select MediaItem for Event from MediaRequest with calendarEventId="+b),m=ea(),null===m||"undefined"==typeof m||"undefined"==typeof m.message?void console.log("MediaItemSelectionManager selectMediaItem: ERROR: selectMediaResponse() returned an undefined selectionResponse for calendarEventId="+b):(console.log("MediaItemSelectionManager selectMediaItem: selectMediaResponse() returned selectionResponse.message="+m.message+" for calendarEventId="+b),t&&!B(t)&&m.contentId!==W.contentId&&(m.message=j.REDIRECTED_SINGLE_TEAM_SUBSCRIPTION),null===m.message||"undefined"==typeof m.message?(console.log("MediaItemSelectionManager selectMediaItem: SELECTION_SUCCESS because selectMediaResponse() returned selectionResponse.message==null"),m.message=j.SELECTION_SUCCESS):!X||null!==m.mediaItem&&"undefined"!=typeof m.mediaItem?!Y||null!==m.mediaItem&&"undefined"!=typeof m.mediaItem||(da>0?(console.log("MediaItemSelectionManager selectMediaItem: LIVE_CONTENT_JUST_ENDED because isNotAvailable and selectionResponse.mediaItem==null and mediaDoneItemsCount>0"),m.message=j.LIVE_CONTENT_JUST_ENDED):(console.log("MediaItemSelectionManager selectMediaItem: NO_CONTENT_AVAILABLE because isNotAvailable and selectionResponse.mediaItem==null and mediaDoneItemsCount<=0"),m.message=j.NO_CONTENT_AVAILABLE)):(console.log("MediaItemSelectionManager selectMediaItem: NOT_AUTHORIZED because isNotAuthorized or selectionResponse.mediaItem==null"),m.message=j.NOT_AUTHORIZED),m.isHlsAvailable=$,m.isDynamicFmsAvailable=_,m.isStandardFmsAvailable=aa,(null===m.mediaItem||"undefined"==typeof m.mediaItem)&&m.mediaType===d.VIDEO_TYPE,console.log("MediaItemSelectionManager selectMediaItem: selectionResponse.message="+m.message+" for calendarEventId="+b),m)};var ea=function(){console.log("MediaItemSelectionManager selectMediaResponse: Generate MediaSelectionResponse for _mediaRequest.calendarEventId="+W.calendarEventId+", _mediaRequest.contentId="+W.contentId);var a=new i,b=null,h=null;if(""!==W.contentId&&null!==W.contentId){console.log("MediaItemSelectionManager selectMediaResponse: A contentId is specified, so try to find the ContentItem for _mediaRequest.contentId="+W.contentId);var k,l=c(W.contentId);if(null!==l&&(console.log("MediaItemSelectionManager selectMediaResponse: Found requestedContent for _mediaRequest.contentId="+W.contentId+", with requestedContent.domainAttributes.coverage_type="+l.domainAttributes.coverage_type),console.log("MediaItemSelectionManager selectMediaResponse: Populating selectionResponse with ContentId Selected, requestedContent.content_id="+l.content_id),a.contentId=l.content_id,a.features=l.features,l.domainAttributes.coverage_type===d.IN_MARKET&&(a.isInMarket=!0),a.mediaType=l.type,k=l.domainAttributes.coverage_type,l.type===d.VIDEO_TYPE?(console.log("MediaItemSelectionManager selectMediaResponse: Fetch VIDEO MediaItem for contentId="+a.contentId),a.mediaItem=y(l)):(console.log("MediaItemSelectionManager selectMediaResponse: Fetch AUDIO MediaItem for contentId="+a.contentId),a.mediaItem=D(l.user_verified_media_item))),null!==a.mediaItem)return console.log("MediaItemSelectionManager selectMediaResponse: We found a valid MediaIteam so return selectionResponse"),a;var m=f(l);if(m)return console.log("MediaItemSelectionManager selectMediaResponse: Multiangle Content is Available so return selectionResponse"),a;console.log("MediaItemSelectionManager selectMediaResponse: We did not find a valid mediaItem for the contentId so keep trying to find a valid MediaIteam (as if contentId wasn't passed in)")}else console.log("MediaItemSelectionManager selectMediaResponse: A contentId is not specified, so try to find the best available content");if(console.log("MediaItemSelectionManager selectMediaResponse: _mediaRequest.mediaType="+W.mediaType),(""===W.mediaType||null===W.mediaType||"undefined"==typeof W.mediaType)&&(F()?W.mediaType=d.VIDEO_TYPE:W.mediaType=d.AUDIO_TYPE),W.mediaType===d.AUDIO_TYPE){if(console.log("MediaItemSelectionManager selectMediaResponse: mediaType==audio so try to find a valid Audio-only MediaItem"),W.mediaType!==d.VIDEO_TYPE){console.log("MediaItemSelectionManager selectMediaResponse: mediaType!=video (meaning it's audio) so try to find audioContent");var o=null,p=[];if(p=w?O():g(),null!==o)console.log("MediaItemSelectionManager selectMediaResponse: use getAudioResponseByLanguage() to find audioContent for language="+d.SPANISH_LANG),a=n(p,d.SPANISH_LANG);else if(console.log("MediaItemSelectionManager selectMediaResponse: use getAudioResponseByLanguage() to find audioContent for language="+d.ENGLISH_LANG),a=n(p,d.ENGLISH_LANG),null===a.mediaItem||"undefined"==typeof a.mediaItem)if(console.log("MediaItemSelectionManager selectMediaResponse: If there's no English this will just grab first available audio content if that exists"),p.length>0){var r=p[0];a.contentId=r.content_id,a.features=r.features,r.domainAttributes.coverage_type===d.IN_MARKET&&(a.isInMarket=!0),a.mediaType=r.type,a.mediaItem=q(r.user_verified_media_item)[0],a.mediaItem&&a.mediaItem.authStatus===d.AUTH_STATUS_NOT_AUTHORIZED&&(a.message=j.NOT_AUTHORIZED,a.mediaItem=null)}else a.message=j.NOT_AUTHORIZED;return a}console.log("MediaItemSelectionManager selectMediaResponse: mediaType==video so try to find gdAuthorizedContent --- FIXME XXX WHAT IS THIS IF doing inside the other IF?!?!?!");var s=z();if(null!==s&&(console.log("MediaItemSelectionManager selectMediaResponse: Found Audio-only Content, gdAuthorizedContent.content_id="+s.content_id+", with gdAuthorizedContent.domainAttributes.coverage_type="+s.domainAttributes.coverage_type),a.contentId=s.content_id,a.features=s.features,s.domainAttributes.coverage_type===d.IN_MARKET&&(a.isInMarket=!0),a.mediaType=s.type,console.log("MediaItemSelectionManager selectMediaResponse: Fetch MediaItem for contentId="+a.contentId),a.mediaItem=y(s)),null!==a.mediaItem)return a;if(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response"),a=C(j.SELECTION_SUCCESS),null!==a.mediaItem)return a;a=new i,a.message=j.UPSELL_VIDEO,console.log("MediaItemSelectionManager selectMediaResponse: Video Item with only GD Audio Entitlement - sending to Upsell")}else if(W.mediaType===d.VIDEO_TYPE){console.log("MediaItemSelectionManager selectMediaResponse: mediaType==video so try to find a valid Video ContentIteam");var t=G();if(t){if(console.log("MediaItemSelectionManager selectMediaResponse: Try to find a valid ContentItem from In-Market pool of content"),b=H(),null!==b&&(console.log("MediaItemSelectionManager selectMediaResponse: Found In-Market Content, inMarketContent.content_id="+b.content_id+", with inMarketContent.domainAttributes.coverage_type="+b.domainAttributes.coverage_type),console.log("MediaItemSelectionManager selectMediaResponse: Populating selectionResponse with ContentId Selected, inMarketContent.content_id="+b.content_id),a.contentId=b.content_id,a.features=b.features,b.domainAttributes.coverage_type===d.IN_MARKET&&(a.isInMarket=!0),a.mediaType=b.type,console.log("MediaItemSelectionManager selectMediaResponse: Fetch MediaItem for contentId="+a.contentId),a.mediaItem=y(b),null!==a.mediaItem||X||Y?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem found so set selectionResponse.isInMarket = true"),a.isInMarket=!0):(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response"),a=C(j.BLACKED_OUT))),null===b||null===a.mediaItem&&(X||Y)){console.log("MediaItemSelectionManager selectMediaResponse: Didn't find an In-Market ContentItem, so check for available audio");var u=e(b);u!==j.NOT_AUTHORIZED?(console.log("MediaItemSelectionManager selectMediaResponse: call defaultAudioResponse("+u+")"),a=C(u)):(console.log("MediaItemSelectionManager selectMediaResponse: set selectionResponse.message="+u),a.message=u)}return a}if(console.log("MediaItemSelectionManager selectMediaResponse: Try to find a valid ContentItem from Out Of Market pool of content"),E(),h=I(),null!==h&&"undefined"!=typeof h)console.log("MediaItemSelectionManager selectMediaResponse: Found video content using keywords or just first authenticated video item, selectedContent.content_id="+h.content_id+", with selectedContent.domainAttributes.coverage_type="+h.domainAttributes.coverage_type),console.log("MediaItemSelectionManager selectMediaResponse: Populating selectionResponse with ContentId Selected, selectedContent.content_id="+h.content_id),a.contentId=h.content_id,a.features=h.features,h.domainAttributes.coverage_type===d.IN_MARKET&&(a.isInMarket=!0),a.mediaType=h.type,console.log("MediaItemSelectionManager selectMediaResponse: Fetch MediaItem for contentId="+a.contentId),a.mediaItem=y(h),console.log("MediaItemSelectionManager selectMediaResponse: selectionResponse.mediaItem="+a.mediaItem+", _isNotAuthorized="+X+", _isNotAvailable="+Y),null!==a.mediaItem||X||Y?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem has been found, the user is not authorized for the stream, or stream is not available"),null===a.mediaItem?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem was not found"),a.message=e(h)):(X||Y)&&console.log("MediaItemSelectionManager selectMediaResponse: the user is not authorized for the stream or stream is not available")):Z?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response -- display HLS_ONLY_AVAILABLE message because _isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled=true"),a=C(j.HLS_ONLY_AVAILABLE,j.HLS_ONLY_AVAILABLE_NO_AUDIO_FALLBACK)):(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response -- display BLACKED_OUT message because _isOnlyHlsAvailableForVideoButRequiredFlashVersionNotInstalled=false"),a=C(j.BLACKED_OUT));else{console.log("MediaItemSelectionManager selectMediaResponse: Didn't find ContentItem with keywords");var v=e(h);v!==j.NOT_AUTHORIZED?(console.log("MediaItemSelectionManager selectMediaResponse: MediaItem not found so use default audio response"),a=C(v)):(console.log("MediaItemSelectionManager selectMediaResponse: set selectionResponse.message="+v),a.message=v)}return a}return a}}function e(a){return a&&a.domainAttributes&&a.domainAttributes.subject&&p.some(a.domainAttributes.subject,function(a){return a===d.MULTI_ANGLE_SUBJECT})}function f(a){return p.filter(a,function(a){return!e(a)})}function g(a){return p.filter(a,e)}function h(a,b){if(b){var c=g(a);return c.length>0?c:f(a)}return f(a)}var i=a("mp5/vpm/mediaselection/MediaSelectionResponse"),j=a("mp5/vpm/mediaselection/MediaSelectionMessageEnum"),k=a("mp5/vpm/mediaselection/BlackoutStatus"),l=a("mp5/vpm/mediaselection/PlaybackScenarioChooser"),m=a("mp5/vpm/mediaselection/PlaybackScenarioBitrateSet"),n=a("mp5/config/Config"),o=a("mp5/vpm/models/UserProfile"),p=a("underscore"),q=function(a){return a instanceof Array?a:"undefined"!=typeof a?[a]:[]},r=!1,s=!1,t=!1,u=!1,v=n.MEDIA_SELECTION_DISABLE_BLACKOUT_LOGIC,w=n.MEDIA_SELECTION_IS_BASEBALL_UX,x="999";return d.prototype={},d.isMultiAngleItem=e,d.filterMultiAngleItems=h,d.getContentItemByIdAndSubject=function(a,b,c){var e=new Array;if(b&&c&&a){a=q(a);for(var f,g,h=0;h<a.length;h++)f=a[h],f.content_id===b&&(g=d.containsSubject(f,c),g&&e.push(f))}return e},d.getContentItemsWithoutSubject=function(a,b){var c=new Array;if(a){a=q(a);for(var e,f,g=0;g<a.length;g++)e=a[g],f=d.containsSubject(e,b),f||c.push(e)}return c},d.containsSubject=function(a,b){var c=-1;if(b&&a&&a.domainAttributes&&a.domainAttributes.subject){var d=q(a.domainAttributes.subject);c=$.inArray(b,d)}else c=-1;return-1!==c},d.isMediaItemPlayable=function(a,b){return null!==a&&"undefined"!=typeof b&&((null===b||"undefined"==typeof b)&&(b=!1),null!==a.state&&"undefined"!=typeof a.state&&(a.state===d.MEDIA_STATE_ON||a.state===d.MEDIA_STATE_ARCHIVE||b&&a.state===d.MEDIA_STATE_STAGING))?!0:!1},d.SPANISH_LANG="SP",d.ENGLISH_LANG="EN",d.NATIONAL_BLACKOUT="NATIONAL_BLACKOUT",d.LOCAL_BLACKOUT="LOCAL_BLACKOUT",d.GLOBAL_BLACKOUT="GLOBAL_BLACKOUT",d.VIDEO_TYPE="video",d.AUDIO_TYPE="audio",d.IN_MARKET="in-market",d.OUT_OF_MARKET="out-of-market",d.NATIONAL="national",d.MULTI_ANGLE_SUBJECT="MULTIANGLE_COVERAGE",d.MEDIA_PLATFORM_WEB="WEB_MEDIAPLAYER",d.AUTH_STATUS_LOGIN_REQUIRED="loginRequired",d.AUTH_STATUS_NOT_AUTHORIZED="notAuthorized",d.AUTH_STATUS_SUCCESS="success",d.COVERAGE_ASSOCIATION_HOME="home_team_id",d.COVERAGE_ASSOCIATION_AWAY="away_team_id",d.COVERAGE_ASSOCIATION_NATIONAL="0",d.MEDIA_STATE_STAGING="MEDIA_STAGING",d.MEDIA_STATE_ON="MEDIA_ON",d.MEDIA_STATE_ARCHIVE="MEDIA_ARCHIVE",d.MEDIA_STATE_SOON="MEDIA_SOON",d.MEDIA_STATE_DONE="MEDIA_DONE",d.MEDIA_STATE_OFF="MEDIA_OFF",d.MEDIA_STATE_DEAD="MEDIA_DEAD",d}),define("mp5/vpm/models/FeedSelectionModel",["require","exports","module","bindable/jquery.bindable","mp5/vpm/models/StreamSelectionOptions","mp5/vpm/models/ContentFeed","mp5/vpm/models/AudioTrack","mp5/vpm/VPMEvents","mp5/vpm/VideoMessage","mp5/vpm/mediaselection/MediaSelectionMessageEnum","mp5/vpm/mediaselection/MediaItemSelectionManager"],function(a,b,c){function d(){function a(a,b){return"undefined"!=typeof a&&null!==a&&"undefined"!=typeof a[b]&&null!==a?a[b]:null}function b(a,b,c){if("undefined"!=typeof a&&null!==a&&"undefined"!=typeof b&&null!==b&&"undefined"!=typeof c&&null!==c){if(a===b)return"home";if(a===c)return"away"}return"national"}function c(a){var b=[];if("undefined"!=typeof a&&null!==a){var c,d,e,f=k(a.audio_track);for(c=0;c<f.length;c++)d=f[c],e=new h,e.description=d.description,e.type=d.type,e.language=d.language,e.channel=d.channel,b.push(e)}return b}function d(a,b){var c=!1;return a&&(a===q||a===r||b===!0&&a===p)&&(c=!0),c}function l(e,h,i){if(e&&e.mediaServiceVO){var l=e.mediaServiceVO;("undefined"==typeof h||null===h)&&(h=!1);var m=new f;if(null!==l){m.calendarEventId=l.user_verified_event.event_id;var n=k(l.user_verified_event.user_verified_content);if(n=j.filterMultiAngleItems(n,i),m.isMultiAngle=n&&n[0]&&j.isMultiAngleItem(n[0]),n&&n.length>0){var p,q,r,s,t,u,v,w,x;for(q in n)if(t=n[q]){if(x=new g,x.contentId=t.content_id,x.mediaType=t.type,w=t.domainAttributes,"undefined"!=typeof w&&null!==w&&(x.teamId=a(w,"coverage_association"),x.isEnhancedFeed=x.teamId===o?!0:!1,x.callLetters=a(w,"call_letters")||"",x.language=a(w,"language"),x.feedAssociation=b(a(w,"coverage_association"),a(w,"home_team_id"),a(w,"away_team_id")),x.coverageType=a(w,"coverage_type")),u=k(t.user_verified_media_item),u.length>0){for(p in u){v=u[p],r="unknown";for(p in v.auth_status)r=p;if(x.isAuthorized="successStatus"===r,x.isAuthorized)break}s="unknown";for(p in v.blackout_status)s=p;x.isBlackout="successStatus"!==s,x.mediaState=v.media_item.state,x.alternateAudioOverlays=c(v.media_item),x.isAlternateAudioAvailable=h&&x.alternateAudioOverlays.length>0,x.mediaCatalog=e}d(x.mediaState)&&m.contentFeeds.push(x)}}}return m}}function m(a,b,c,d,e){if("undefined"!=typeof a&&null!==a&&a.calendarEventId===b){var f=a.contentFeeds;if("undefined"!=typeof f&&null!==f){var g,h;for(g=0;g<f.length;g++)if(h=f[g],h.contentId===c?h.isSelected=!0:h.isSelected=!1,h.isAlternateAudioAvailable=d&&h.alternateAudioOverlays.length>0,h.alternateAudioOverlays.length>0){var i,j,k,l,m=!1;for(i=0;i<h.alternateAudioOverlays.length;i++)j=h.alternateAudioOverlays[i],"TV"===j.type&&(l=j),k=!1,"undefined"!=typeof e&&null!==e&&j.description===e.description&&j.type===e.type&&j.language===e.language&&j.channel===e.channel&&(k=!0,m=!0),j.isSelected=k;!m&&l&&(l.isSelected=!0)}}}}var n=this,o="999";console.log("FeedSelectionModel.constructor()"),this.streamSelectionOptions=new f;var p="MEDIA_STAGING",q="MEDIA_ON",r="MEDIA_ARCHIVE";this.updateStreamSelectionOptions=function(a,b,c){this.streamSelectionOptions=l(a,b,c)},this.updateSelectedFeed=function(a,b,c,d){m(this.streamSelectionOptions,a,b,c,d)},this.changeAudioOverlay=function(a,b){console.log("FeedSelectionModel: changeAudioOverlay - contentFeed, altAudioOverlay = ",a,b),a.isAuthorized===!0&&a.isBlackout===!1&&$(this).trigger(i.CHANGE_FEED,{calendarEventId:n.streamSelectionOptions.calendarEventId,contentId:a.contentId,altAudioOverlay:b})},this.setAltAudioCapability=function(a){this.supportsHlsAltAudio=a},e(this)}var e=a("bindable/jquery.bindable"),f=a("mp5/vpm/models/StreamSelectionOptions"),g=a("mp5/vpm/models/ContentFeed"),h=a("mp5/vpm/models/AudioTrack"),i=a("mp5/vpm/VPMEvents"),j=(a("mp5/vpm/VideoMessage"),a("mp5/vpm/mediaselection/MediaSelectionMessageEnum"),a("mp5/vpm/mediaselection/MediaItemSelectionManager")),k=function(a){return a instanceof Array?a:"undefined"!=typeof a?[a]:[]};return d.prototype={},d}),define("mp5/vpm/models/VPMModel",["bam-video-bootstrap","mp5/vpm/models/FeedSelectionModel"],function(){var a=function(){console.log("VPMModel.constructor()");var a=require("bam-video-bootstrap");this.device=new a.DeviceDetection;var b=require("mp5/vpm/models/FeedSelectionModel");this.feedSelectionModel=new b,this.currentMediaItem=null;var c={};this.setCurrentTimecode=function(a,b){c[a]=b},this.getLastTimecode=function(a){var b=null;try{b=c[a]}catch(d){}return b}};return a.prototype={device:null,config:null,clip:null,playerType:null,playlist:null,video:null,mediaCatalog:null},a}),define("mp5/vpm/models/AudioOnlyDisplayVO",["require","exports","module"],function(a,b,c){function d(a,b,c){this.backgroundImageUrl=a,this.headline=b,this.description=c}return d}),define("mp5/vpm/models/MediaItem",["require","exports","module","mp5/vpm/models/AudioOnlyDisplayVO","mp5/vpm/models/FeedSelectionModel"],function(a,b,c){var d=a("mp5/vpm/models/AudioOnlyDisplayVO"),e=a("mp5/vpm/models/FeedSelectionModel"),f=function(a,b){this.playMediaRequestObject=a,this.currentPlaylistItem=a,this.feedSelectionModel=new e,this.isEnhanced=a.isEnhanced,this.preferEnhancedMedia=a.preferEnhancedMedia,this.isFree=a.isFree,this._considerHlsPlaybackInitialValue=b,this.resetErrorCounters(),this.audioOnlyDisplayVO=new d("","","")};return f.prototype={playMediaRequestObject:null,isMediaCatalogPath:!1,mediaCatalog:null,feedSelectionModel:null,currentPlaylistItem:null,clip:null,currentPlaybackScenario:null,isEnhanced:!1,preferEnhancedMedia:!1,isFree:!1,gameDate:void 0,currentPlaybackScenarioPreferenceList:null,considerHlsPlayback:!1,hlsErrorHasOccurred:!1,fmsCloudFailed:!1,totalFailures:0,hlsFailureCount:0,fmsCloudFailureCount:0,resetErrorCounters:function(){this.currentPlaybackScenarioPreferenceList=null,this.considerHlsPlayback=this._considerHlsPlaybackInitialValue,this.hlsErrorHasOccurred=!1,this.fmsCloudFailed=!1,this.totalFailures=0,this.hlsFailureCount=0,this.fmsCloudFailureCount=0},removePlaybackScenarioAsOption:function(a){this.currentPlaybackScenarioPreferenceList&&this.currentPlaybackScenarioPreferenceList.splice($.inArray(a,this.currentPlaybackScenarioPreferenceList),1)},hasFailedCompletely:function(){return this.currentPlaybackScenarioPreferenceList&&0==this.currentPlaybackScenarioPreferenceList.length||(!this.considerHlsPlayback||this.hlsErrorHasOccurred)&&this.fmsCloudFailed?!0:!1}},f}),define("mp5/utils/CommitUserPreferencesDelegate",["require","exports","module","bam.cookies/cookies","mp5/vpm/models/UserProfile"],function(a,b,c){function d(){this.getUserConfigData=function(){return{identityPointId:e.get("ipid"),fingerprint:e.get("fprt")}},this.commit=function(a){var b=this.getUserConfigData(),c="",d="";void 0!=a.hideScores&&(d=a.hideScores?"F":"T",c+="<tns:name>archiveSpoiler</tns:name><tns:value>"+d+"</tns:value>"),void 0!=a.showClosedCaptions&&(d=a.showClosedCaptions?"T":"F",c+="<tns:name>closedCaptions</tns:name><tns:value>"+d+"</tns:value>"),void 0!=a.playLiveGameFromStart&&(d=a.playLiveGameFromStart?"T":"F",c+="<tns:name>playLiveGameFromStart</tns:name><tns:value>"+d+"</tns:value>"),void 0!=a.preferStandardVideo&&(d=a.preferStandardVideo?"F":"T",c+="<tns:name>preferNexDef</tns:name><tns:value>"+d+"</tns:value>"),void 0!=a.playerTrackerAlert&&(d=a.playerTrackerAlert?"T":"F",c+="<tns:name>playerTrackerAlert</tns:name><tns:value>"+d+"</tns:value>");var e="<tns:profileProperty>"+c+"</tns:profileProperty>",f='<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><SOAP-ENV:Body><tns:profile_save_request xmlns:tns="http://services.bamnetworks.com/registration/types/1.3"><tns:identification type="fingerprint"><tns:id>'+b.identityPointId+"</tns:id><tns:fingerprint>"+b.fingerprint+"</tns:fingerprint></tns:identification><tns:profile>"+e+"</tns:profile></tns:profile_save_request></SOAP-ENV:Body></SOAP-ENV:Envelope>",g={async:!0,processData:!1,crossDomain:!0,method:"POST",contentType:'text/xml; charset="UTF-8"',data:f,dataType:"xml",headers:{SOAPAction:"http://services.bamnetworks.com/registration/profile/save"}},h="secure",i="https";window.location.search.indexOf("qa")>=0?(h="qa",i="http"):window.location.search.indexOf("beta")>=0?(h="beta",i="http"):window.location.search.indexOf("prod")>=0&&(h="secure",i="https");$.ajax(i+"://"+h+".mlb.com/pubajaxws/services/ProfileService",g).done(function(){console.log("VideoPlaybackManager commitUserPreference successful")}).fail(function(a,b){console.error("VideoPlaybackManager commitUserPreference error:"+b)})}}var e=a("bam.cookies/cookies");a("mp5/vpm/models/UserProfile");return d.prototype={},d}),define("mp5/utils/MP5Utils",["require","exports","module"],function(a,b,c){var d={qa:{static_server:"http://ui.qa.bamstatic.com",secure_domain:"https://qasecure.mlb.com",framework_domain:"mlb-qaws-mf.media.mlb.com",env_domain:"http://mqa.mlb.com",domain:"http://qa.mlb.com"},beta:{static_server:"http://ui.beta.bamstatic.com",secure_domain:"https://secure.mlb.com",framework_domain:"mlb-ws-mf.media.mlb.com",env_domain:"http://mbeta.mlb.com",domain:"http://beta.mlb.com"},prod:{static_server:"http://ui.bamstatic.com",secure_domain:"https://secure.mlb.com",framework_domain:"mlb-ws-mf.media.mlb.com",env_domain:"http://m.mlb.com",domain:"http://mlb.com"}};return MP5Utils={getEnvDomainByToken:function(a,b){return a&&""!==a&&"undefined"!=typeof d[a]?d[a][b]:d[this.urlEnv()][b]},urlEnv:function(){return window.location.hostname.indexOf("beta")>=0?"beta":window.location.hostname.indexOf("qa")>=0||window.location.hostname.indexOf("dev")>=0||window.location.hostname.indexOf("local")>=0?"qa":"prod"},replaceTokens:function(a,b){var c=/\$\{([a-zA-Z0-9|_]+)\}/g;return a.replace(c,function(){return b[arguments[1]]?b[arguments[1]]:""})}},MP5Utils}),define("mp5/vpm/eventcuepoints/model/EventCuePointsVO",["require","exports","module"],function(a,b,c){function d(a){function b(a,b){return f.getDurationInSeconds(a)}function c(a){var b=$(a).find("game"),c=b.attr("calendar_event_id"),d=b.attr("start_timecode"),e=b.attr("start_datetime"),g=b.attr("stream_start_datetime");c&&(f.calendar_event_id=c),d&&(f.start_timecode=d),e&&(f.start_datetime=e),g&&(f.stream_start_datetime=g)}function e(){f.start_timecode!==d.EMPTY_TIMECODE_STRING&&(g=b(f.start_timecode,d.INVALID_TIMECODE_NUMBER)),f.start_datetime!==d.EMPTY_TIMECODE_STRING&&(h=b(f.start_datetime,d.INVALID_TIMECODE_NUMBER)),f.stream_start_datetime!==d.EMPTY_TIMECODE_STRING&&(i=b(f.stream_start_datetime,d.INVALID_TIMECODE_NUMBER))}var f=this;this.calendar_event_id=null,this.start_timecode=d.EMPTY_TIMECODE_STRING;var g=d.INVALID_TIMECODE_NUMBER;this.start_datetime=d.EMPTY_TIMECODE_STRING;var h=d.INVALID_TIMECODE_NUMBER;this.stream_start_datetime=d.EMPTY_TIMECODE_STRING;var i=d.INVALID_TIMECODE_NUMBER;this.getEventStartTime=function(){return g},this.hasValidStartTime=function(){return g!==d.INVALID_TIMECODE_NUMBER},this.getStartDateTime=function(){return h},this.hasValidStartDateTime=function(){return h!==d.INVALID_TIMECODE_NUMBER},this.getStreamStartDateTime=function(){return i},this.hasValidStreamStartDateTime=function(){return i!==d.INVALID_TIMECODE_NUMBER},this.getEventStartTimeOffsetInSecs=function(){var a=new Date(f.stream_start_datetime),b=new Date(f.start_datetime),c=a.getTime(),d=b.getTime(),e=(d-c)/1e3;return e},c(a),e()}return d.prototype={getDurationInSeconds:function(a){for(var b=a.split(":").reverse(),c=0,d=0;b[c];)d+=0===c?parseInt(b[c],10):parseInt(b[c],10)*Math.pow(60,c),c++;return d}},d.EMPTY_TIMECODE_STRING="UNDEFINED",d.INVALID_TIMECODE_NUMBER=-1,d}),define("mp5/vpm/eventcuepoints/model/EventCuePointsModel",["require","exports","module","mp5/vpm/eventcuepoints/model/EventCuePointsVO"],function(a,b,c){var d,e=a("mp5/vpm/eventcuepoints/model/EventCuePointsVO"),f=function(){function a(a){b[a.calendar_event_id]=a}if(d)throw new Error("Cannot instantiate more than one EventCuePointsModel, use EventCuePointsModel.getInstance()");var b={};this.getEventCuePoints=function(a){return b[a]},this.fetchEventCuePoints=function(b){try{b=b.replace("mlb.mlb.com","m.mlb.com");var c=!1,d=null;if($.ajax({type:"GET",url:b,async:!1,dataType:"xml",success:function(a){d=a,c=!0},error:function(){console.error("EventCuePointsModel fetchEventCuePoints: There was a problem retrieving data for this endpointUrl = "+b),c=!1}}),c){var f=new e(d);a(f)}}catch(g){console.error("EventCuePointsModel fetchEventCuePoints: Error loading EventCuePointsVO",g)}}};return f.getInstance=function(){return d||(d=new f),d},f.prototype={},f}),define("mp5/vpm/models/MediaCatalog",["require","exports","module","bindable/jquery.bindable","mp5/vpm/mediaselection/MediaItemSelectionManager","mp5/vpm/mediaselection/MediaSelectionMessageEnum","mp5/vpm/models/UserProfile","bam.url/url","auth-media-gateway/subclasses/MediaFrameworkResponseHelper"],function(a,b,c){function d(a){function b(a,b,e){var g=e.isFytAuth,i=e.isFytSyndicated,j=e.isFytAuthExpired;return c(a,b,g)?f.FYT_SWAP_FEED:d(b,i)?f.FYT_SYNDICATED:h(b,g,j)?f.FYT_AUTH_EXPIRED:void 0}function c(a,b,c){return c&&(null===b.mediaItem||a!==b.contentId)}function d(a,b){return b&&a.message===f.SELECTION_SUCCESS}function h(a,b,c){return b&&c&&null===a.mediaItem}function i(){console.log("MediaCatalog logMediaCatalogData: isAuthorized="+j.mediaCatalogResponse.isAuthorized+", isNotBlackedOut="+j.mediaCatalogResponse.isNotBlackedOut)}var j=this;this.mediaCatalogResponse=a,this.mediaServiceVO=this.mediaCatalogResponse.mediaServiceVO,this.profile=this.mediaCatalogResponse.profile,i(),this.calendarEventId=this.mediaCatalogResponse.calendarEventId,this.performMediaSelection=function(a,c,d,f){console.log("MediaCatalog performMediaSelection:");var h=a.calendar_event_id?a.calendar_event_id:null,i=a.content_id?a.content_id:null,k=a.type?a.type:"video";console.log("MediaCatalog performMediaSelection: calendarEventId="+h+", requestedContentId="+i+", mediaType="+k);var l=g.Location(),m=!!l.getParam("considerMediaStaging"),n=new e(m,a),o=n.selectMediaItem(j.mediaCatalogResponse.mediaServiceVO.user_verified_event,h,i,k,c,d,f);if((!o.mediaType||"video"===o.mediaType)&&j.mediaCatalogResponse.isFytSub){var p=b(i,o,j.mediaCatalogResponse);p&&(o.message=p,o.callLetters=j.mediaCatalogResponse.fytCallLetters,o.calendarEventId=j.mediaCatalogResponse.calendarEventId,o.mediaItem=null)}return o}}var e=(a("bindable/jquery.bindable"),a("mp5/vpm/mediaselection/MediaItemSelectionManager")),f=a("mp5/vpm/mediaselection/MediaSelectionMessageEnum"),g=(a("mp5/vpm/models/UserProfile"),a("bam.url/url"));a("auth-media-gateway/subclasses/MediaFrameworkResponseHelper");return d.prototype={mediaCatalogResponse:null},d}),define("mp5/vpm/VideoAuthenticator",["require","exports","module","bindable/jquery.bindable","mp5/config/Config","bam-video-bootstrap","mp5/vpm/VideoMessage","mp5/vpm/models/MediaCatalog","auth-media-gateway/subclasses/AuthenticatedMediaParams","auth-media-gateway/AuthenticatedMediaGateway"],function(a,b,c){function d(b){var c=a("auth-media-gateway/AuthenticatedMediaGateway"),d=b.env;f=this,window.location.search.indexOf("qa")>=0?d="qaweb1":window.location.search.indexOf("beta")>=0?d="betaweb1":window.location.search.indexOf("prod")>=0&&(d="prodweb1");var j=new i.DeviceDetection,k="https://",l=!1;"IE"==j.browserName&&j.browserVersion<10&&(k="http://",l=!0);var m="prodweb1"===d?h.SECURE_SUB_DOMAIN_PROD:"betaweb1"===d?h.SECURE_SUB_DOMAIN_BETA:h.SECURE_SUB_DOMAIN_QA,n=k+m+h.SECURE_DOMAIN_DEFAULT,o="qaweb1"===d?h.MEDIA_FRAMEWORK_SUB_DOMAIN_QA:h.MEDIA_FRAMEWORK_SUB_DOMAIN_PROD,p=k+o+h.MEDIA_FRAMEWORK_DOMAIN_DEFAULT,q={secureHost:"undefined"!=typeof b.secureDomain?b.secureDomain:n,frameworkURL:"undefined"!=typeof b.mediaFrameworkDomain?k+b.mediaFrameworkDomain:p,frameworkEndPoint:"undefined"!=typeof b.mediaFrameworkEndPoint?b.mediaFrameworkEndPoint:null,profileServiceEndPoint:"undefined"!=typeof b.profileServiceEndPoint?b.profileServiceEndPoint:null,
bypassLogin:"undefined"!=typeof b.bypassLogin?b.bypassLogin:l,rsns:"undefined"!=typeof b.syndication?b.syndication.rsns:[]};e=c.getInstance(),e.configure(q),e.bind(e.LOGIN_CHALLENGE,f.handleLoginChallenge),e.bind(e.LOGIN_SUCCESS,f.handleLoginSuccess),e.bind(e.LOGIN_ERROR,f.handleLoginError),e.bind(e.MEDIA_CATALOG_SUCCESS,f.handleMediaCatalogSuccess),e.bind(e.MEDIA_CATALOG_ERROR,f.handleMediaCatalogError),e.bind(e.MEDIA_CATALOG_NOT_AUTHORIZED,f.handleMediaCatalogNotAuthorized),e.bind(e.MEDIA_CATALOG_AVS_REQUIRED,f.handleMediaCatalogAVSRequired),e.bind(e.MEDIA_ITEM_PLAYABLE,f.handleMediaItemPlayable),e.bind(e.MEDIA_ITEM_ERROR,f.handleMediaItemError),e.bind(e.MEDIA_ITEM_BLACKOUT,f.handleMediaItemBlackout),e.bind(e.MEDIA_ITEM_AVS_REQUIRED,f.handleMediaItemAVSRequired),e.bind(e.MEDIA_ITEM_NOT_AUTHORIZED,f.handleMediaItemNotAuthorized),e.bind(e.ACCOUNT_ALERTS_SUCCESS,f.handleAccountAlertsSuccess),e.bind(e.ACCOUNT_ALERTS_ERROR,f.handleAccountAlertsError),g(f)}var e,f,g=a("bindable/jquery.bindable"),h=a("mp5/config/Config"),i=a("bam-video-bootstrap"),j=a("mp5/vpm/VideoMessage"),k=a("mp5/vpm/models/MediaCatalog");a("auth-media-gateway/subclasses/AuthenticatedMediaParams");return d.prototype={requestMediaCatalog:function(a){i.utils.log("VideoAuthenticator requestMediaCatalog:"),e.requestMediaCatalog(a)},handleMediaCatalogSuccess:function(a,b){i.utils.log("VideoAuthenticator handleMediaCatalogSuccess: create new MediaCatalog from mediaCatalogResponse");var c=new k(b);f.trigger(d.EVENT_MEDIA_CATALOG_SUCCESS,c)},handleMediaCatalogError:function(a,b){i.utils.log("VideoAuthenticator handleMediaCatalogError:");var c=b.code,d=b.msg;f.showMediaError("mediaNotAvailable",d+" : "+c)},handleMediaCatalogNotAuthorized:function(a,b){i.utils.log("VideoAuthenticator handleMediaCatalogNotAuthorized:"),f.trigger(d.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED,b)},handleMediaCatalogAVSRequired:function(a,b){i.utils.log("VideoAuthenticator handleMediaCatalogAVSRequired:"),f.trigger(d.EVENT_MEDIA_CATALOG_AVS_REQUIRED)},requestMedia:function(a){i.utils.log("VideoAuthenticator requestMedia:"),e.requestMedia(a)},handleMediaItemPlayable:function(a,b){i.utils.log("VideoAuthenticator handleMediaItemPlayable: create new AuthenticatedClip for Media URL = "+b.url);var c=new i.AuthenticatedClip(b);f.trigger(d.EVENT_MEDIA_PLAYABLE,c)},handleMediaItemError:function(a,b){i.utils.log("VideoAuthenticator handleMediaItemError:");var c=b.code,d=b.msg;f.showMediaError("mediaNotAvailable",d+" : "+c)},handleMediaItemBlackout:function(a,b){i.utils.log("VideoAuthenticator handleMediaItemBlackout:"),f.showMediaError("blackout","handleMediaItemBlackout args : "+b)},handleMediaItemAVSRequired:function(a,b){i.utils.log("VideoAuthenticator handleMediaItemAVSRequired:"),f.trigger(d.EVENT_MEDIA_AVS_REQUIRED)},handleMediaItemNotAuthorized:function(a,b){f.trigger(d.EVENT_MEDIA_NOT_AUTHORIZED),i.utils.log("VideoAuthenticator handleMediaItemNotAuthorized:"),f.showMediaError("authorization","handleMediaItemNotAuthorized args : "+b)},handleLoginChallenge:function(a,b){i.utils.log("VideoAuthenticator handleLoginChallenge:"),f.trigger(d.EVENT_LOGIN_CHALLENGE)},handleLoginSuccess:function(a,b){i.utils.log("VideoAuthenticator handleLoginSuccess:")},handleLoginError:function(a,b){i.utils.log("VideoAuthenticator","handleLoginError");window.location;window.location.replace("/enterworkflow.do?flowId=account.login&t="+(new Date).getTime()+"&forwardUrl="+window.location.href)},getAccountAlerts:function(){i.utils.log("VideoAuthenticator getAccountAlerts:"),e.getAccountAlerts()},handleAccountAlertsSuccess:function(a,b){i.utils.log("VideoAuthenticator handleAccountAlertsSuccess:"),f.trigger(d.EVENT_ACCOUNT_ALERTS_SUCCESS,b)},handleAccountAlertsError:function(a,b){i.utils.log("VideoAuthenticator handleAccountAlertsError:"),f.trigger(d.EVENT_ACCOUNT_ALERTS_ERROR)},showMediaError:function(a,b){i.utils.log("VideoAuthenticator showMediaError:");var c="";j.error(a,b,c)}},d.EVENT_MEDIA_CATALOG_SUCCESS="MEDIA_CATALOG_SUCCESS",d.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED="EVENT_MEDIA_CATALOG_NOT_AUTHORIZED",d.EVENT_MEDIA_CATALOG_AVS_REQUIRED="EVENT_MEDIA_CATALOG_AVS_REQUIRED",d.EVENT_MEDIA_PLAYABLE="MEDIA_PLAYABLE",d.EVENT_MEDIA_AVS_REQUIRED="MEDIA_PLAYABLE_AVS_REQUIRED",d.EVENT_MEDIA_NOT_AUTHORIZED="EVENT_MEDIA_NOT_AUTHORIZED",d.EVENT_LOGIN_CHALLENGE="EVENT_LOGIN_CHALLENGE",d.EVENT_ACCOUNT_ALERTS_SUCCESS="EVENT_ACCOUNT_ALERTS_SUCCESS",d.EVENT_ACCOUNT_ALERTS_ERROR="EVENT_ACCOUNT_ALERTS_ERROR",d}),define("text!mp5/vpm/json/account_alerts.json",[],function(){return'{\n    "MANUAL_MLBTV_AR_FAILURE_BASIC_MON":\n        {   "unentitledMessageKey" : "autoRenewHardFailBasicMonthlyUnentitled",\n            "entitledMessageKey" : "NO_ACTION" },\n    "MANUAL_MLBTV_AR_FAILURE_PR_MON":\n        {   "unentitledMessageKey" : "autoRenewHardFailPremiumMonthlyUnentitled",\n            "entitledMessageKey" : "NO_ACTION" },\n    "MANUAL_MLBTV_AR_FAILURE_BASIC_SEA":\n        {   "unentitledMessageKey" : "autoRenewHardFailBasicSeasonUnentitled",\n            "entitledMessageKey" : "autoRenewHardFailBasicSeasonEntitled" },\n    "MANUAL_MLBTV_AR_FAILURE_PR_SEA":\n        {   "unentitledMessageKey" : "autoRenewHardFailPremiumSeasonUnentitled",\n            "entitledMessageKey" : "autoRenewHardFailPremiumSeasonEntitled" },\n    "MANUAL_MLBTV_AR_FAILURE_SOFT_BASIC_MON":\n        {   "unentitledMessageKey" : "autoRenewSoftFailBasicMonthlyUnentitled",\n            "entitledMessageKey" : "NO_ACTION" },\n    "MANUAL_MLBTV_AR_FAILURE_SOFT_PR_MON":\n        {   "unentitledMessageKey" : "autoRenewSoftFailPremiumMonthlyUnentitled",\n            "entitledMessageKey" : "NO_ACTION" },\n    "MANUAL_MLBTV_AR_FAILURE_SOFT_BASIC_SEA":\n        {   "unentitledMessageKey" : "autoRenewSoftFailBasicSeasonalUnentitled",\n            "entitledMessageKey" : "autoRenewSoftFailBasicSeasonalEntitled" },\n    "MANUAL_MLBTV_AR_FAILURE_SOFT_PR_SEA":\n        {   "unentitledMessageKey" : "autoRenewSoftFailPremiumSeasonalUnentitled",\n            "entitledMessageKey" : "autoRenewSoftFailPremiumSeasonalEntitled" },\n    "GDA_AR_FAILS_ALERT":\n        {   "unentitledMessageKey" : "autoRenewHardFailGDAUnentitled",\n            "entitledMessageKey" : "NO_ACTION" }\n\n}'}),define("mp5/vpm/VideoPlaybackManager",["require","exports","module","bindable/jquery.bindable","mp5/config/Config","bam.url/url","bam.cookies/cookies","auth-media-gateway/subclasses/AuthenticatedMediaParams","auth-media-gateway/AuthenticatedMediaGateway","mp5/vpm/VideoMessage","mp5/vpm/VPMEvents","mp5/vpm/mediaselection/MediaSelectionMessageEnum","mp5/vpm/models/VPMModel","mp5/vpm/models/AudioOnlyDisplayVO","mp5/vpm/models/MediaItem","mp5/vpm/models/UserProfile","mp5/utils/CommitUserPreferencesDelegate","mp5/utils/MP5Utils","mp5/vpm/models/FeedSelectionModel","mp5/vpm/eventcuepoints/model/EventCuePointsModel","bam-video-bootstrap","mp5/vpm/VideoAuthenticator","text!./json/account_alerts.json"],function(a,b,c){function d(b){function c(a){console.log("VideoPlaybackManager onLoginChallenge:"),$(Q).trigger(l.LOGIN_CHALLENGE)}function d(a,b){if(console.log("VideoPlaybackManager onMediaCatalogSuccess:"),!b.calendarEventId)return console.error("VideoPlaybackManager onMediaCatalogSuccess: returned MediaCatalog is missing calendarEventId, so we cannot proceed"),void Q.showMediaError("invalidCalendarEventId");var c=u(b);c.mediaCatalog=b,c.feedSelectionModel.updateStreamSelectionOptions(b,!0,f),$(Q).trigger(l.STREAM_SELECTION_OPTIONS_UPDATED,c.feedSelectionModel.streamSelectionOptions),R&&(R=!1,Q.profile=new q(b.profile),VPM.model.profile=Q.profile,Q.updateUserProfile(Q.profile),$(Q).trigger(l.PLAYER_LAUNCH_LOGGED_IN)),Q.authorized=!0,k(),$(Q).trigger(l.MEDIA_CATALOG_RESPONSE,b),c.resetErrorCounters(),c.currentPlaybackScenarioPreferenceList=e.vpm.preferredPlaybackScenarios.slice();var d=c.currentPlaylistItem;z(b,d)}function h(){Q.showMediaError("avsCheck")}function j(a,b){Q.authorized=!1,Q.mediaCatalogResponse=b,k()}function k(){if(console.log("VideoPlaybackManager loadAccountAlerts:"),null==Q.accountAlert)try{Q.authenticator.getAccountAlerts()}catch(a){console.error("VideoPlaybackManager loadAccountAlerts: error calling getAccountAlerts(), error=",a),o(null)}else r(Q.authorized)}function n(a,b){Q.accountAlert=b,r(Q.authorized)}function o(a,b){Q.accountAlert=null,r(Q.authorized)}function p(){var a="accountUpgradeFatal";return Q.mediaCatalogResponse.isSheratonEntitled&&(a="sheratonAuthFailure"),a}function r(a){console.log("VideoPlaybackManager showMessageForAccountAlert: accountAlert = ",Q.accountAlert);var b=null,c=null;if(Q.accountAlert){if(!Q.accountAlertsMap)return void t(a,Q);null!=Q.accountAlertsMap[Q.accountAlert.name]&&(b=Q.accountAlertsMap[Q.accountAlert.name])}a||(c=p(),"accountUpgradeFatal"===c&&$(Q).trigger(l.PLAYER_LAUNCH_UPGRADE_OFFER)),b&&(a?b.entitledMessageKey&&"NO_ACTION"!==b.entitledMessageKey&&(c=b.entitledMessageKey):b.unentitledMessageKey&&"NO_ACTION"!==b.unentitledMessageKey&&(c=b.unentitledMessageKey)),c&&Q.showMediaError(c)}function t(a,b){if(b.accountAlertsMap)return void r(a);try{var c=window.mp5Config.global.accountAlertsJson;if(!c)return b.accountAlertsMap=b.defaultAccountAlertMappgingsJson,void r(a);$.ajax({url:c,dataType:"json",success:function(a){b.accountAlertsMap=a},error:function(){b.accountAlertsMap=b.defaultAccountAlertMappgingsJson},complete:function(){r(a)},timeout:3e3})}catch(d){b.accountAlertsMap=b.defaultAccountAlertMappgingsJson,r(a)}}function u(a){return VPM.mediaInstances[a.content_id||a.contentId]||VPM.tempMediaInstances[a.calendar_event_id||a.calendarEventId]||_.find(VPM.mediaInstances,function(b){return b.currentPlaylistItem.calendar_event_id===(a.calendar_event_id||a.calendarEventId)})}function v(a){a.calendar_event_id&&a.content_id&&(VPM.mediaInstances[a.content_id]=u(a),delete VPM.tempMediaInstances[a.calendar_event_id])}function w(a,b){if(b){var c=u(a),d=c.considerHlsPlayback&&!c.hlsErrorHasOccurred,e=Q.flashPlayerVersionSupportsHls;return b.performMediaSelection(a,d,e,f)}}function x(a){return null===a.mediaItem||"undefined"==typeof a.mediaItem?(a.message===m.NOT_AUTHORIZED?(console.error("VideoPlaybackManager performMediaSelectionAndPlayContent: TODO user not authorized to watch stream, so redirect to the Product Chooser"),Q.showMediaError("accountUpgradeFatal")):console.error("VideoPlaybackManager performMediaSelectionAndPlayContent: TODO Error selecting stream, so dispatch an event to display proper messaging"),!0):!1}function y(a,b,c){var d=a.calendar_event_id,e=u(a);if(v(a),null===b||"undefined"==typeof b)return console.error("VideoPlaybackManager performMediaSelectionAndPlayContent: mediaSelectionResponse==null so we have a major issue here!"),void Q.showMediaError("error","could not find a valid MediaItem for this calendarEventId="+d);if(A(b.message,c),!x(b)){console.log("VideoPlaybackManager performMediaSelectionAndPlayContent: Got a valid mediaSelectionResponse so evaluate it for In-Market properties, mediaSelectionResponse.isInMarket="+b.isInMarket);var f=b.mediaItem.media_item.playback_scenario;e.currentPlaybackScenario=f;var g=b.contentId,h=Q.isPlaybackScenarioHls(f),i=a.altAudioOverlay;e.feedSelectionModel.updateSelectedFeed(d,g,h,i),$(Q).trigger(l.SELECTED_FEED_UPDATED,e.feedSelectionModel.streamSelectionOptions),console.log("VideoPlaybackManager performMediaSelectionAndPlayContent: attempt to play calendarEventId="+d+", contentId="+g+", playbackScenario="+f),Q.getTokenizedUrlFromMediaFramework(g,f)}}function z(a,b){console.log("VideoPlaybackManager performMediaSelectionAndPlayContent:");var c=w(b,a);b.content_id=c.contentId,y(b,c,a.mediaCatalogResponse)}function A(a,b){switch(console.log("VideoPlaybackManager displayMessage: mediaSelectionResponseMessage="+a),a){case m.DROPPED_AUDIO_USER:B();break;case m.DROPPED_FMS_UNAVAILABLE:case m.DROPPED_VIDEO_UNAVAILABLE:C();break;case m.BLACKED_OUT:D(b);break;case m.BLACKED_OUT_NO_AUDIO:E(b);break;case m.FYT_SWAP_FEED:G(b);break;case m.FYT_FEED_SELECTOR_SWAP_FEED:H(b);break;case m.FYT_SYNDICATED:I(b);break;case m.FYT_AUTH_EXPIRED:J(b);break;case m.REDIRECTED_SINGLE_TEAM_SUBSCRIPTION:K()}}function B(){Q.showMediaError("accountUpgrade")}function C(){Q.showMediaError("droppedToAudioMessage")}function D(a){var b=a.videoBlackoutStatus,c=L(b);c?Q.showMediaError(c):Q.showMediaError("blackout")}function E(a){var b=a.videoBlackoutStatus,c=L(b);c?Q.showMediaError(c+"NoAudio"):Q.showMediaError("blackoutFatal")}function F(a,b){var c=a.mediaFrameworkResponseHelper,d=a.mediaServiceVO.user_verified_event.user_verified_content,e=c.getNonBlackedOutContentItem(d),f={content_id:e.content_id,calendar_event_id:a.calendarEventId,call_letters:a.fytCallLetters,fyt_team_id:a.fytTeamId,appendRedirectUrl:b};return f}function G(a){Q.showMediaError("fytSwapFeed",null,null,F(a,!1))}function H(a){Q.showMediaError("fytFeedSelectorSwapFeed",null,null,F(a,!1))}function I(a){Q.showMediaError("fytSyndicated",null,null,F(a,!1))}function J(a){Q.showMediaError("fytAuthExpired",null,null,F(a,!0))}function K(){Q.showMediaError("redirectedSingleTeamSubscription")}function L(a){var b=null,c=e.vpm.blackoutStatusMap;return c&&(b=c[a]),b}function M(a,b){console.log("VideoPlaybackManager onMediaPlayable: the Media Framework returned a authenticatedClip with a valid playback URL so try to play it"),$(Q).trigger(l.MEDIA_PLAYABLE,b);var c=u(b);b.isHighlight=c.isHighlight,b.isWatchNow=c.isWatchNow;var d=c.clip;d&&(d.milestones&&"undefined"!=typeof d.milestones&&(b.milestones=d.milestones),"undefined"!=typeof d.startTimeOffset&&(b.startTimeOffset=d.startTimeOffset)),c.audioOnlyDisplayVO&&(b.audioOnlyDisplayVO=c.audioOnlyDisplayVO);try{if(b.metaData){var f=b.metaData.inning_index_location_xml;f&&s.getInstance().fetchEventCuePoints(f)}}catch(g){console.error("VideoPlaybackManager onMediaPlayable: Error loading EventCuePoints",g)}var h=!1;try{if(Q.profile&&Q.profile.playLiveGameFromStart===!0&&b.isLive){var i=!1;try{var j=b.mfResponse.mediaItem.playback_scenario;i=Q.isPlaybackScenarioHls(j)}catch(g){}if(i){var k=s.getInstance().getEventCuePoints(b.calendarEventId);if(k&&k.hasValidStartTime()){var m=k.getEventStartTimeOffsetInSecs(),n=k.start_timecode;isNaN(m)||(b.startTimeOffset=m,b.startTime=n,h=!0)}}}}catch(g){console.error("VideoPlaybackManager onMediaPlayable: Error determining playLiveGameFromStart value",g)}if(!h&&!b.isAudioOnly){var i=!1;try{var j=b.mfResponse.mediaItem.playback_scenario;i=Q.isPlaybackScenarioHls(j)}catch(g){}if(!b.isLive||i){var o=VPM.model.getLastTimecode(b.calendarEventId);o&&(b.startTime=o)}}e.videocore.playlist=[],e.videocore.playlist.push(b),e.state=d&&"error"==d.state?"error":"default",Q._internalPlay(b)}function N(a){console.log("VideoPlaybackManager: changeAudioChannel - newPlaylistItem = ",a);var b=!0,c=a.altAudioOverlay,d=a.content_id,e=a.calendar_event_id,f=u(a);f.feedSelectionModel.updateSelectedFeed(e,d,b,c),$(Q).trigger(l.SELECTED_FEED_UPDATED,f.feedSelectionModel.streamSelectionOptions);var g=c.channel;Q.video.changeAudioChannel(d,g)}function O(a){var b=i.Location(),c=b.getParam("considerHlsPlayback");if(null===c&&(c=b.getParam("hls")),null!==c){var d=!0;"false"===c&&(d=!1),a.considerHlsPlayback=d}}this.VC=a("bam-video-bootstrap"),this.events=l;var P=a("mp5/vpm/VideoAuthenticator"),Q=this,R=!0;this.authorized=null,this.profile=q.getInstance(),this.accountAlert=null,this.mediaCatalogResponse=void 0,e=b,f=e.global.isPSTV,this.setupVideoAuthenticator=function(){null===this.authenticator&&(this.authenticator=new P(e.vpm),this.authenticator.bind(P.EVENT_MEDIA_PLAYABLE,M),this.authenticator.bind(P.EVENT_MEDIA_NOT_AUTHORIZED,j),this.authenticator.bind(P.EVENT_MEDIA_CATALOG_SUCCESS,d),this.authenticator.bind(P.EVENT_LOGIN_CHALLENGE,c),this.authenticator.bind(P.EVENT_MEDIA_CATALOG_NOT_AUTHORIZED,j),this.authenticator.bind(P.EVENT_MEDIA_CATALOG_AVS_REQUIRED,h),this.authenticator.bind(P.EVENT_MEDIA_AVS_REQUIRED,h),this.authenticator.bind(P.EVENT_ACCOUNT_ALERTS_SUCCESS,n),this.authenticator.bind(P.EVENT_ACCOUNT_ALERTS_ERROR,o))},this.accountAlertsMap=null,this.defaultAccountAlertMappgingsJson=JSON.parse(a("text!./json/account_alerts.json")),this.getMediaItemProxy=function(a){return u(a)},this.performMediaSelectionProxy=function(a,b){w(a,b)},this.performMediaSelectionAndPlayContentProxy=function(a,b){z(a,b)},this.setupFeedSelectorListener=function(a){console.log("VideoPlaybackManager: setupFeedSelectorListener - feedSelectionModel = ",a),a.bind(l.CHANGE_FEED,function(a,b){Q.changeFeed(b.calendarEventId,b.contentId,b.altAudioOverlay)}),a.bind(l.ERROR_MESSAGE,function(a,b){A(b.mediaSelectionResponseMessage,b.mediaCatalogResponse)})},this.changeFeed=function(a,b,c){var d=u({calendar_event_id:a,content_id:b}),f=!1,g={};d.isWatchNow=!1,"undefined"!=typeof a&&null!==a&&(g.calendar_event_id=a),"undefined"!=typeof b&&null!==b&&(g.content_id=b),"undefined"!=typeof c&&null!==c&&(g.altAudioOverlay=c,f=!0),f?N(g):(d.currentPlaylistItem=g,d.resetErrorCounters(),d.currentPlaybackScenarioPreferenceList=e.vpm.preferredPlaybackScenarios.slice(),z(d.mediaCatalog,g))},O(e.vpm),this.propExistsOnConfig("considerHlsPlayback")&&(e.vpm.hlsPlaybackEnabled=e.vpm.considerHlsPlayback),this.updateHlsEvalProperties(),e&&e.vpm&&this.setupErrorHandlingConstants(e.vpm),VPM.model.config=e.vpm,g(this),this.init(e)}var e,f,g=a("bindable/jquery.bindable"),h=a("mp5/config/Config"),i=a("bam.url/url"),j=(a("bam.cookies/cookies"),a("auth-media-gateway/subclasses/AuthenticatedMediaParams")),k=(a("auth-media-gateway/AuthenticatedMediaGateway"),a("mp5/vpm/VideoMessage")),l=a("mp5/vpm/VPMEvents"),m=a("mp5/vpm/mediaselection/MediaSelectionMessageEnum"),n=a("mp5/vpm/models/VPMModel"),o=a("mp5/vpm/models/AudioOnlyDisplayVO"),p=a("mp5/vpm/models/MediaItem"),q=a("mp5/vpm/models/UserProfile"),r=a("mp5/utils/CommitUserPreferencesDelegate"),s=(a("mp5/utils/MP5Utils"),a("mp5/vpm/models/FeedSelectionModel"),a("mp5/vpm/eventcuepoints/model/EventCuePointsModel"));return d.prototype={VC:null,video:null,setConfig:function(a){return e=$.extend(!0,a,e)},getConfig:function(){return e},propExistsOnConfig:function(a){return!(null===e.vpm[a]||"undefined"==typeof e.vpm[a])},authenticator:null,skipEventIdLookup:0==h.VPM_SHOULD_VALIDATE_CALENDAR_EVENT,currentPlaybackScenario:null,considerHlsPlayback:!1,flashPlayerVersionSupportsHls:!1,flashPlayerVersionSupportsAltAudio:!1,authFlowRequired:function(a,b){console.log("VideoPlaybackManager authFlowRequired: auth flow required event - data = ",b),this.setupVideoAuthenticator();var c=b.clip,d=this.getMediaItemProxy(c);d.clip=c,d.resetErrorCounters(),d.currentPlaybackScenarioPreferenceList="undefined"!=typeof b.playbackScenarios?b.playbackScenarios.slice():e.vpm.preferredPlaybackScenarios.slice(),VPM.model.clip=c,this.playClipBasedOnContentMetadata(c)},playClipBasedOnContentMetadata:function(a){console.log("playClipBasedOnContentMetadata:");var b=this.getMediaItemProxy(a),c=this._getMetadataPlaybackScenarios(a.metaData),d=b,e=this.selectPlaybackScenario(a,c,d);return b.currentPlaybackScenario=e,null===e||"undefined"==typeof e?(console.error("VideoPlaybackManager playClipBasedOnContentMetadata: could not find a valid playbackScenario to use so abort"),void this.showMediaError("error","could not find a valid playbackScenario for this content")):void this.getTokenizedUrlFromMediaFramework(a.content_id,e)},_getMetadataPlaybackScenarios:function(a){var b=new Array,c=a.urls;if(c&&c.length>0)for(var d,e,f=0,g=c.length;g>=f;f++)d=c[f],e=$(d).attr("playback_scenario"),b.push(e);return b},getTokenizedUrlFromMediaFramework:function(a,b){console.log("VideoPlaybackManager getTokenizedUrlFromMediaFramework: attempt to play contentId="+a+", playbackScenario="+b);var c=new j;c.content_id=a,c.playback_scenario=b,this.addParamsFromObject(h.MEDIA_FRAMEWORK_PARAMS,c),this.authenticator.requestMedia(c)},loadCalendarEvent:function(a){console.log("VideoPlaybackManager: loadCalendarEvent - mediaCatalogRequest = ",a);var b=this.getMediaItemProxy(a);b&&(b.isMediaCatalogPath=!0,b.isHighlight=a.isHighlight,b.isWatchNow=a.isWatchNow,b.currentPlaylistItem=a),this.skipEventIdLookup===!0?this.loadMediaCatalog(a):this.validateCalendarEvent(a)},getDateWithOffset:function(a,b){var c=b>=0?"+":"-";return b=Math.abs(Math.floor(b)),b=(10>b?"0":"")+b+":00",a+c+b},validateCalendarEvent:function(a){var b=a.calendar_event_id;console.log("VideoPlaybackManager validateCalendarEvent: calendarEventId = "+b);var c=this,d=!1,e=null;if(b&&$.ajax({type:"GET",url:"/lookup/json/named.schedule_pk.bam?calendar_event_id='"+b+"'",async:!1,dataType:"json",success:function(a){e=a,d=e&&e.schedule_pk&&e.schedule_pk.queryResults&&"0"!==e.schedule_pk.queryResults.totalSize},error:function(){console.error("VideoPlaybackManager validateCalendarEvent: There was a problem retrieving data for this calendarEventId = "+b),d=!1}}),d){var f=e.schedule_pk.queryResults.row.game_time_local,g=e.schedule_pk.queryResults.row.local_offset,h=this.getDateWithOffset(f,g),i=e.schedule_pk.queryResults.row.home_name_full,j=e.schedule_pk.queryResults.row.away_name_full,k=e.schedule_pk.queryResults.row.venue_id,m=e.schedule_pk.queryResults.row.venue_name,n="http://mlb.mlb.com/mlb/images/devices/ballpark/";try{var p=j.indexOf(" All-Stars");p>0&&(j=j.substring(0,p));var q=i.indexOf(" All-Stars");q>0&&(i=i.substring(0,q))}catch(r){}var s=n+k+".jpg",t=j+" vs "+i,u="at "+m,v=new o(s,t,u),w=this.getMediaItemProxy(a);w&&(w.audioOnlyDisplayVO=v);var x={awayTeam:j,homeTeam:i,venue:m,message:"",imageUrl:s,gameDate:h};VPM.model.currentMediaItem.gameDate=h,$(c).trigger(l.GAME_DATA_LOADED,x),c.loadMediaCatalog(a)}else c.showMediaError("invalidCalendarEventId")},loadMediaCatalog:function(a){console.log("VideoPlaybackManager loadMediaCatalog:"),this.setupVideoAuthenticator();var b=new j;b.event_id=a.calendar_event_id,this.addParamsFromObject(h.MEDIA_FRAMEWORK_PARAMS,b),this.authenticator.requestMediaCatalog(b)},addParamsFromObject:function(a,b){if(a&&b)for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])},updateHlsEvalProperties:function(){var a=!1,b=!1;this.propExistsOnConfig("considerHlsPlayback")&&(a=e.vpm.considerHlsPlayback,a===!0&&(b=this.VC.utils.doesFlashPlayerVersionSupportHls())),this.considerHlsPlayback=a,this.flashPlayerVersionSupportsHls=b},determineHlsAltAudioCapability:function(){VPM.model.feedSelectionModel.setAltAudioCapability(this.VC.utils.doesFlashPlayerVersionSupportHlsAltAudio())},selectPlaybackScenario:function(a,b,c){console.log("VideoPlaybackManager selectPlaybackScenario:");var d;if(b&&b.length>0){var e=c.currentPlaybackScenarioPreferenceList,f=!1;c.considerHlsPlayback===!0&&this.flashPlayerVersionSupportsHls===!0&&(f=!c.hlsErrorHasOccurred);for(var g=0,h=e.length;h>g;g++){var i=e[g];if(f||!this.isPlaybackScenarioHls(i)){var j=$.inArray(i,b);if(-1!==j){d=i;break}}}}return console.log("VideoPlaybackManager selectPlaybackScenario: use playbackScenario="+d),d},isPlaybackScenarioHls:function(a){return a.indexOf("HTTP_CLOUD")>=0},isPlaybackScenarioFmsCloud:function(a){return"FMS_CLOUD"===a},updateUserProfile:function(a){console.log("VideoPlaybackManager updateUserProfile: profile = ",a);try{this.trigger(this.events.UPDATE_USER_PROFILE,a)}catch(b){console.error("VideoPlaybackManager updateUserProfile: UPDATE_USER_PROFILE event dispatch turned into an error")}this.video.bind(this.VC.events.PLAYER_LOADED,function(b,c){console.log("VideoPlaybackManager _internalPlay FLASH_VIDEO_LOADED: data = ",c),this.updateUserProfile(a)})},updateUserPreference:function(a){if(this.video.updateUserPreference(a),null!=a.hideScores&&(this.profile.hideScores=a.hideScores),null!=a.playLiveGameFromStart&&(this.profile.playLiveGameFromStart=a.playLiveGameFromStart),null!=a.showClosedCaptions){if(a.showClosedCaptions==this.profile.showClosedCaptions)return;this.profile.showClosedCaptions=a.showClosedCaptions}null!=a.preferStandardVideo&&(this.profile.preferStandardVideo=a.preferStandardVideo);var b=new r;b.commit(a)},HLS_MAX_CONNECT_ATTEMPTS:3,FMS_MAX_CONNECT_ATTEMPTS:2,setupErrorHandlingConstants:function(a){this.propExistsOnConfig("hlsMaxConnectAttempts")&&(this.HLS_MAX_CONNECT_ATTEMPTS=e.vpm.hlsMaxConnectAttempts),this.propExistsOnConfig("fmsCloudMaxConnectAttempts")&&(this.FMS_MAX_CONNECT_ATTEMPTS=e.vpm.fmsCloudMaxConnectAttempts)},errorEventHandler:function(a,b){if(console.log("VideoPlaybackManager errorEventHandler: data="+b),null!==b.errorType&&"undefined"!=typeof b.errorType){var c=b.errorType;console.error("VideoPlaybackManager errorEventHandler: errorType="+c),this.showMediaError("error",c)}},mediaErrorEventHandler:function(a,b){if(console.log("VideoPlaybackManager mediaErrorEventHandler: data=",b),null!==b.errorType&&"undefined"!=typeof b.errorType){var c=b.errorType;console.error("VideoPlaybackManager mediaErrorEventHandler: errorType="+c)}var d=this.getMediaItemProxy({calendar_event_id:b.calendarEventId,content_id:b.uniqueId});d.totalFailures+=1,this.handleErrorAndRetry(d)},handleErrorAndRetry:function(a){console.log("VideoPlaybackManager: handleErrorAndRetry - failedMediaItem = ",a);var b=a.currentPlaybackScenario;console.log("VideoPlaybackManager handleErrorAndRetry: failedPlaybackScenario="+b);var c=!0;if(this.isPlaybackScenarioHls(b)&&(a.hlsFailureCount++,a.hlsFailureCount===this.HLS_MAX_CONNECT_ATTEMPTS?(console.log("VideoPlaybackManager handleErrorAndRetry: failedMediaItem.hlsFailureCount === "+this.HLS_MAX_CONNECT_ATTEMPTS+", so set hlsErrorHasOccurred = true"),a.hlsErrorHasOccurred=!0):(console.log("VideoPlaybackManager handleErrorAndRetry: failedPlaybackScenario="+b+" and hlsFailureCount="+a.hlsFailureCount+" so try this playbackScenario one more time"),c=!1)),this.isPlaybackScenarioFmsCloud(b)&&(a.fmsCloudFailureCount++,a.fmsCloudFailureCount===this.FMS_MAX_CONNECT_ATTEMPTS?(console.log("VideoPlaybackManager handleErrorAndRetry: failedMediaItem.fmsCloudFailureCount === "+this.FMS_MAX_CONNECT_ATTEMPTS+", so set fmsCloudFailed = true"),a.fmsCloudFailed=!0):(console.log("VideoPlaybackManager handleErrorAndRetry: failedPlaybackScenario="+b+" and fmsCloudFailureCount="+a.fmsCloudFailureCount+" so try this playbackScenario one more time"),c=!1)),c&&(console.log("VideoPlaybackManager handleErrorAndRetry: failedPlaybackScenario="+b+", so remove this playbackScenario as an option"),a.removePlaybackScenarioAsOption(b)),a.clip.state="error",null!==this.authenticator&&"undefined"!=typeof this.authenticator)if(console.log("VideoPlaybackManager handleErrorAndRetry: Try to connect to a different playbackScenario for the content (or retry if reconnectAttempts max not yet reached)"),a.isMediaCatalogPath){if(a.hasFailedCompletely())return console.error("VideoPlaybackManager handleErrorAndRetry: could not find a valid playbackScenario to use so abort"),void this.showMediaError("error","could not find a valid playbackScenario for this content");this.performMediaSelectionAndPlayContentProxy(a.mediaCatalog,a.currentPlaylistItem)}else this.playClipBasedOnContentMetadata(a.clip);else console.error("VideoPlaybackManager handleErrorAndRetry: The error that occurred is based on a Media Error that occurred on a stream that does not require auth"),this.showMediaError("error","could not find a valid playbackScenario for this content")},showMediaError:function(a,b,c,d){k.error(a,b,c,d)},playbackStartedHandler:function(a,b){console.log("VideoPlaybackManager playbackStartHandler: ",a),$(this).trigger(l.PLAYBACK_STARTED,b)},timecodeEventHandler:function(a,b){var c=b.timecode,d=b.gameId;if(console.log("VideoPlaybackManager timecodeEventHandler: timecode="+c+", uniqueId="+b.uniqueId+", gameId="+d),null!==c&&"undefined"!=typeof c){var e=this.getDurationInSeconds(c);console.log("VideoPlaybackManager timecodeEventHandler: currentStreamTimecode="+e);var f=this.getMediaItemProxy({calendar_event_id:b.calendarEventId,content_id:b.uniqueId});if(f&&f.isMediaCatalogPath){var g=f.mediaCatalog.calendarEventId;VPM.model.setCurrentTimecode(g,c.substring(0,8)),console.log("VideoPlaybackManager timecodeEventHandler: Add eventId to the event payload eventId="+g),b.eventId=g;try{b.gameId=f.clip.metaData.game_id,console.log("VideoPlaybackManager timecodeEventHandler: revising gameId to be gameId="+b.gameId)}catch(h){}$(this).trigger(l.TIMECODE_UPDATE,b)}}},seekCompleteHandler:function(a,b){var c=b.timecode,d=b.gameId;if(console.log("VideoPlaybackManager seekCompleteHandler: timecode="+c+", uniqueId="+b.uniqueId+", gameId="+d),null!==c&&"undefined"!=typeof c){var e=this.getDurationInSeconds(c);console.log("VideoPlaybackManager seekCompleteHandler: currentStreamTimecode="+e);var f=this.getMediaItemProxy({calendar_event_id:b.calendarEventId,content_id:b.uniqueId});if(f&&f.isMediaCatalogPath){var g=f.mediaCatalog.calendarEventId;VPM.model.setCurrentTimecode(g,c.substring(0,8)),console.log("VideoPlaybackManager seekCompleteHandler: Add eventId to the event payload eventId="+g),b.eventId=g;try{b.gameId=f.clip.metaData.game_id,console.log("VideoPlaybackManager seekCompleteHandler: revising gameId to be gameId="+b.gameId)}catch(h){}$(this).trigger(l.TIMECODE_UPDATE,b),$(this).trigger(l.SEEK_COMPLETE,b)}}},closeHighlightHandler:function(a,b){$(this).trigger(l.CLOSE_HIGHLIGHT,b)},mediaSlotChanged:function(a,b){console.log("VideoPlaybackManager: mediaSlotChanged data = ",b);for(var c=void 0,d=b.metrics.slots.length,e=0;d>e;e++){var f=b.metrics.slots[e];if(""!==f.uniqueId){var g=this.getMediaItemProxy({calendar_event_id:f.calendarEventId,content_id:f.uniqueId});g&&g.clip&&g.clip.metaDate&&g.clip.metaData.game_id&&(f.gameId=g.clip.metaData.game_id),"true"===f.isSelected&&(c=g)}}console.log("VideoPlaybackManager: mediaSlotChanged - selectedMediaItem = ",c),VPM.model.currentMediaItem=c;try{if(c){var h=c.feedSelectionModel&&c.feedSelectionModel.streamSelectionOptions;if(h.contentFeeds=_.map(h.contentFeeds,function(a){return _.extend(a,{isSelected:a.contentId===c.currentPlaylistItem.content_id})}),c.currentPlaylistItem&&c.currentPlaylistItem.isHighlight){var i=c.currentPlaylistItem.metaData,j={isHighlight:c.currentPlaylistItem.isHighlight,duration:i.duration,date:i.date,headline:i.headline};$(this).trigger(this.events.SELECTED_HIGHLIGHT_INFO_UPDATED,j)}else $(this).trigger(this.events.STREAM_SELECTION_OPTIONS_UPDATED,c.feedSelectionModel.streamSelectionOptions)}else $(this).trigger(this.events.STREAM_SELECTION_OPTIONS_UPDATED,null)}catch(k){console.error("VideoPlaybackManager: error upstream in STREAM_SELECTION_OPTIONS_UPDATED or SELECTED_HIGHLIGHT_INFO_UPDATED event handler, error=",k)}try{$(this).trigger(this.events.SELECTED_MEDIA_SLOT_CHANGED,b)}catch(k){console.error("VideoPlaybackManager: error upstream in SELECTED_MEDIA_SLOT_CHANGED event handler, error=",k)}},videoAreaLayoutStateChanged:function(a,b){$(this).trigger(this.events.VIDEO_AREA_LAYOUT_STATE_CHANGED,b)},getDurationInSeconds:function(a){for(var b=a.split(":").reverse(),c=0,d=0;b[c];)d+=0===c?parseInt(b[c],10):parseInt(b[c],10)*Math.pow(60,c),c++;return d},playMedia:function(a){console.log("VideoPlaybackManager playMedia: mediaRequest = ",a),this._playMediaInternal(a)},playMediaInNextAvailableSlot:function(a){console.log("VideoPlaybackManager playMediaInNextAvailableSlot: mediaRequest = ",a),this._playMediaInternal(a)},clearContentByUniqueId:function(a){console.log("VideoPlaybackManager clearContentByUniqueId: uniqueId = ",a),this.video&&this.video.clearContentByUniqueId(a)},_playMediaInternal:function(a){if(console.log("VideoPlaybackManager _playMediaInternal: mediaRequest = ",a),"undefined"==typeof a.content_id&&"undefined"==typeof a.calendar_event_id)return void console.log("VideoPlaybackManager _playMediaInternal: TODO Major Error! calendar_event_id and/or content_id not provided");var b=new p(a,this.considerHlsPlayback);this.setupFeedSelectorListener(b.feedSelectionModel),a.content_id&&(VPM.mediaInstances[a.content_id]=b),a.calendar_event_id&&(VPM.tempMediaInstances[a.calendar_event_id]=b),VPM.model.currentMediaItem=b,console.log("VideoPlaybackManager: playMedia - VPM.model.currentMediaItem = ",VPM.model.currentMediaItem),
void 0!==a.calendar_event_id&&null!==a.calendar_event_id?(console.log("VideoPlaybackManager _playMediaInternal: mediaRequest.calendar_event_id = "+a.calendar_event_id+" so call loadMediaCatalog()"),a.loadMetaData=!1,this.loadCalendarEvent(a)):(console.log("VideoPlaybackManager _playMediaInternal: mediaRequest.calendar_event_id not present so try to play the content"),a.loadMetaData=!0,this._internalPlay(a))},_internalPlay:function(a){var b=this;this.currentClip=a,console.log("VideoPlaybackManager: _internalPlay - clip = ",a);var c=this.getMediaItemProxy(a);c&&(c.clip=a,a.totalFailures=c.totalFailures);try{console.log("VideoPlaybackManager _internalPlay: clip.content_id = "+a.content_id)}catch(d){}this.video?(console.log("VideoPlaybackManager _internalPlay: this.video exists so remove current bindings/eventListeners and re-add them"),this.video.unbind("playbackTechError"),this.video.unbind(this.VC.events.MEDIA_ERROR),this.video.unbind(this.VC.events.ERROR),this.video.unbind(this.VC.events.CLIP_START),this.video.unbind(this.VC.events.AUTHFLOW_REQUIRED),this.video.unbind(this.VC.events.TIMECODE),this.video.unbind(this.VC.events.SEEK_COMPLETE),this.video.unbind(this.VC.events.CLOSE_HIGHLIGHT),this.video.unbind(this.VC.events.FLASH_PLAYER_READY),this.video.unbind(this.VC.events.FLASH_PLAYER_READY_ERROR),this.video.unbind(this.VC.events.PLAYBACK_STARTED),this.video.unbind(this.VC.events.SELECTED_MEDIA_SLOT_CHANGED),this.video.unbind(this.VC.events.VIDEO_AREA_LAYOUT_STATE_CHANGED),this.video.unbind(this.VC.events.ENABLE_CLOSED_CAPTIONS),this.video.unbind(this.VC.events.DISABLE_CLOSED_CAPTIONS),this.video.unbind(this.VC.events.ENTER_MINI_MODE),this.video.unbind(this.VC.events.EXIT_MINI_MODE)):(console.log("VideoPlaybackManager _internalPlay: create this.video = new Video()"),this.video=new this.VC.Video(e)),console.log("VideoPlaybackManager _internalPlay: add bindings/eventListeners"),this.video.bind("playbackTechError",function(a,b){k.error("playbackTechError")}),this.video.bind(this.VC.events.MEDIA_ERROR,function(a,c){console.log("VideoPlaybackManager: MEDIA_ERROR"),b.mediaErrorEventHandler(a,c)}),this.video.bind(this.VC.events.ERROR,function(a,c){console.log("VideoPlaybackManager: ERROR"),b.errorEventHandler(a,c)}),this.video.bind(this.VC.events.CLIP_START,function(a,b){console.log("VideoPlaybackManager _internalPlay CLIP_START handler: clip = ",b),VPM.model.clip=b}),this.video.bind(this.VC.events.TIMECODE,function(a,c){b.timecodeEventHandler(a,c)}),this.video.bind(this.VC.events.FLASH_PLAYER_READY,function(a,c){$(b).trigger(b.events.FLASH_PLAYER_READY,c)}),this.video.bind(this.VC.events.FLASH_PLAYER_READY_ERROR,function(a,c){$(b).trigger(b.events.FLASH_PLAYER_READY_ERROR,c)}),this.video.bind(this.VC.events.PLAYBACK_STARTED,function(a,c){b.playbackStartedHandler(a,c)}),this.video.bind(this.VC.events.SEEK_COMPLETE,function(a,c){b.seekCompleteHandler(a,c)}),this.video.bind(this.VC.events.CLOSE_HIGHLIGHT,function(a,c){b.closeHighlightHandler(a,c)}),this.video.bind(this.VC.events.FREEWHEEL_AD_STARTED,function(a,c){console.log("VideoPlaybackManager _internalPlay FREEWHEEL_AD_STARTED: data = ",c),$(b).trigger(b.events.FREEWHEEL_AD_STARTED,c)}),this.video.bind(this.VC.events.FREEWHEEL_AD_ENDED,function(a,c){console.log("VideoPlaybackManager _internalPlay FREEWHEEL_AD_STARTED: data = ",c),$(b).trigger(b.events.FREEWHEEL_AD_ENDED,c)}),this.video.bind(this.VC.events.SELECTED_MEDIA_SLOT_CHANGED,function(a,c){console.log("VideoPlaybackManager _internalPlay SELECTED_MEDIA_SLOT_CHANGED: data = ",c),b.mediaSlotChanged(a,c)}),this.video.bind(this.VC.events.VIDEO_AREA_LAYOUT_STATE_CHANGED,function(a,c){console.log("VideoPlaybackManager _internalPlay VIDEO_AREA_LAYOUT_STATE_CHANGED: data = ",c),b.videoAreaLayoutStateChanged(a,c)}),this.video.bind(this.VC.events.ENABLE_CLOSED_CAPTIONS,function(a,c){console.log("VideoPlaybackManager _internalPlay ENABLE_CLOSED_CAPTIONS: data = ",c),$(b).trigger(b.events.ENABLE_CLOSED_CAPTIONS,c)}),this.video.bind(this.VC.events.DISABLE_CLOSED_CAPTIONS,function(a,c){console.log("VideoPlaybackManager _internalPlay DISABLE_CLOSED_CAPTIONS: data = ",c),$(b).trigger(b.events.DISABLE_CLOSED_CAPTIONS,c)}),this.video.bind(this.VC.events.ENTER_MINI_MODE,function(a,c){console.log("VideoPlaybackManager _internalPlay ENTER_MINI_MODE: data = ",c),$(b).trigger(b.events.ENTER_MINI_MODE,c)}),this.video.bind(this.VC.events.EXIT_MINI_MODE,function(a,c){console.log("VideoPlaybackManager _internalPlay EXIT_MINI_MODE: data = ",c),$(b).trigger(b.events.EXIT_MINI_MODE,c)}),this.video.bind(this.VC.events.PLAYER_LOADED,function(a,c){console.log("VideoPlaybackManager _internalPlay PLAYER_LOADED: data = ",c),b.determineHlsAltAudioCapability(),$(b).trigger(b.events.PLAYER_LOADED,c)}),a.path||this.video.bind(this.VC.events.AUTHFLOW_REQUIRED,function(a,c){b.authFlowRequired(a,c)}),this.video.play([a],b.profile),$(b).trigger(this.events.PLAY_CONTENT_CALLED,a)},init:function(a){return console.log("VideoPlaybackManager init:"),this.video||(console.log("VideoPlaybackManager init: create new VC.Video, params = ",a),this.video=new this.VC.Video(a),VPM.model.video=this.video),!0}},window.VPM=window.VPM||{},g(window.VPM),window.VPM.mediaInstances=VPM.mediaInstances||{},window.VPM.tempMediaInstances=VPM.tempMediaInstances||{},window.VPM.model=window.VPM.model?window.VPM.model:new n,window.VPM.events=l,d}),define("mp5/utils/MP5Config",["require","exports","module","mp5/utils/MP5Utils"],function(a,b,c){var d=a("mp5/utils/MP5Utils"),e=function(a,b,c){var e,f=b;return this.load=function(a){var b=this;$.ajax({url:a,xhrFields:{withCredentials:!0},dataType:"json",success:function(a){b.parse(a)},error:function(){}})},this.parse=function(a){var g=JSON.stringify(a),h=(navigator.userAgent.match(/msie/i)||!window.ActiveXObject&&"ActiveXObject"in window,{static_server:d.getEnvDomainByToken(b.env,"static_server"),date_time:(new Date).getTime()+"",secure_domain:d.getEnvDomainByToken(b.env,"secure_domain"),env_domain:d.getEnvDomainByToken(b.env,"env_domain"),framework_domain:d.getEnvDomainByToken(b.env,"framework_domain")}),i=$.extend(h,f);a.videocore&&a.videocore.flash&&a.videocore.flash.release&&(h.videocore_flash_release=a.videocore.flash.release),e=JSON.parse(d.replaceTokens(g,i)),$.extend(e.vpm,e.global),$.extend(e.videocore,e.global),$.extend(e.groovy,e.global),e.videocore.metaUtil.regex=new RegExp(e.videocore.metaUtil.regex),c&&c(e)},"string"==typeof a?this.load(a):"object"==typeof a&&this.parse(a),e};return e}),define("mlb-tv-app/app/model/ContentId",["backbone","mlb-tv-app/app/model/Configuration"],function(a,b){var c=a.Model.extend({defaults:{ContentId_id:void 0,title:void 0,shortText:void 0,description:void 0,page_number:void 0,images:void 0,type:void 0,video_id:void 0,tags:void 0,ContentId_start_date_gmt:void 0,media_playback_urls:void 0,duration:void 0,data_cards:void 0,time_difference:void 0,time_difference_unit:void 0,isSearchResult:void 0,published_date:void 0},parse:function(a,b){var c;return c=a.isSearchResult?{content_id:a.contentid,description:a.summary,title:a.name,shortText:a.shortTitle,images:a.images,type:"vod",published_date:a.publisheddate}:a},url:function(){console.log("Content_Id",this.get("ContentId"));var a=this.get("ContentId").toString();void 0===a&&(a=b.get("defaultContentID").toString());var c=a.slice(-6,-3),d=a.slice(-3);console.log("second",d);var e=b.get("services").ContentId.replace("{1}",c).replace("{2}",d).replace("{3}",a);return console.log("theURL",e),e}});return c}),define("mlb-tv-app/app/model/UserSession",["jquery","backbone","mlb-tv-app/app/model/AppConfig"],function(a,b,c){"use strict";var d=b.Model.extend({defaults:{userType:void 0,features:[],clientIP:void 0,isOnLimitedWan:!1},initialize:function(){console.log("UserSession initialized!"),this.bind("change:clientIP",this.onChangeClientIP)},parseMFResponse:function(a){this.attributes.userType=a.userType,this.attributes.features=this.getFeaturesFromMediaServiceVO(a.mediaServiceVO)},getFeaturesFromMediaServiceVO:function(a){var b;try{var c=a.user_verified_event.user_verified_content;b=c.features.feature}catch(d){console.error("UserSession: There was an error retrieving features from the mediaService VO")}return b},onChangeClientIP:function(a,b,d){try{var e=ipaddr.parseCIDR(c.getValue("app.limitBitrateByNetwork.wanRange")),f=ipaddr.parse(b),g=f.match(e);this.set("isOnLimitedWan",g)}catch(h){console.log(h)}}});return new d}),define("mlb-tv-app/app/enums/Broadcasters",[],function(){"use strict";return{DEFAULT:"DEFAULT",TBS:"TBS",FOX:"FOX",TNT:"TNT",FS1:"FS1",ESPN:"ESPN",MLBN:"MLBN",SN:"SN"}}),define("mlb-tv-app/app/model/Game",["jquery","backbone","mlb-tv-app/app/enums/Broadcasters"],function(a,b,c){"use strict";function d(a,b){var c,d,e=0;b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,""),c=b.split("."),d=c.length;try{for(e;d>e;++e){var f=c[e];if(!(f in a))return null;a=a[f]}}catch(g){return console.error('There was an error retrieving a value for path: "'+b+'"',g),null}return a}var e=b.Model.extend({defaults:{id:void 0,calendar_event_id:void 0,ampm:void 0,away:void 0,away_probable:void 0,basesCSS:void 0,batter:void 0,challengeAwayCSS:void 0,challengeHomeCSS:void 0,challenge_team:void 0,css:void 0,description:void 0,double_header_sw:void 0,due_up_batter:void 0,due_up_inhole:void 0,due_up_ondeck:void 0,fulltime:void 0,gameMediaObj:void 0,game_media:void 0,game_number:void 0,game_pk:void 0,game_type:void 0,gameday:void 0,gameday_sw:void 0,has_resumption:void 0,home:void 0,home_probable:void 0,if_necessary:void 0,inhole:void 0,inningHalf:void 0,is_doubleheader:void 0,is_featured:void 0,is_gotd:void 0,is_free_gotd:void 0,is_enhanced_gotd:void 0,is_resumption:void 0,is_tbd:void 0,league:void 0,leagueAreaKey:void 0,linescore:void 0,links:void 0,losing_pitcher:void 0,message:void 0,ondeck:void 0,original_date:void 0,original_date_formatted:void 0,outsCSS:void 0,pbp:void 0,pitcher:void 0,rawGame:void 0,resume_date:void 0,resume_date_formatted:void 0,runners_on_base:void 0,save_pitcher:void 0,scheduled_innings:void 0,score_changed:void 0,season:void 0,ser_games:void 0,ser_home_nbr:void 0,series:void 0,status:void 0,teams:void 0,time:void 0,type:void 0,video_thumbnail:void 0,video_thumbnails:void 0,winning_pitcher:void 0,broadcaster:void 0},isGOTD:function(){return this.get("is_gotd")},isFree:function(){return this.get("is_free_gotd")},isEnhanced:function(){return this.get("is_enhanced_gotd")},isWBC:function(){return"WBC"==this.get("league")},setCurrentBroadcasterFromMFClipResponse:function(a){var b;b=d(a,"mediaServiceVO.user_verified_event.user_verified_content.domainAttributes.call_letters"),b&&this.set("broadcaster",b)},set:function(a,c){return a.hasOwnProperty("gameMediaObj")&&void 0!==a.gameMediaObj&&a.gameMediaObj.hasOwnProperty("calendar_event_id")&&(a.calendar_event_id=a.gameMediaObj.calendar_event_id),b.Model.prototype.set.call(this,a,c)}});return e}),define("mlb-tv-app/app/collection/GamesCollection",["jquery","backbone","mlb-tv-app/app/model/Game"],function(a,b,c){"use strict";var d=b.Collection.extend({model:c,isGameEnhanced:function(a){var b=this.getGameByCalendarEventId(a);return b?b.isEnhanced():!1},getGameByCalendarEventId:function(a){return this.findWhere({calendar_event_id:a})},getGameById:function(a){return this.findWhere({id:a})},getGOTD:function(){return this.findWhere({is_gotd:!0})},getFreeGame:function(){return this.findWhere({is_free_gotd:!0})},getEnhancedGame:function(){return this.findWhere({is_enhanced_gotd:!0})}});return new d}),define("mlb-tv-app/app/util/RedirectUtil",["backbone","underscore","bam.cookies/cookies"],function(a,b,c){var d=a.View.extend({defaults:{}},{appendRedirectUrl:function(a,b){if(a){var c=a.indexOf("?")>-1?"&":"?";a+=c+"forwardUrl="+this.getRedirectUrl(b)}return a},getRedirectUrl:function(a){var b=this.getRedirectUrlUnencoded(a);return encodeURIComponent(b)},getRedirectUrlUnencoded:function(a){var b=window.location,c=b.pathname,d=c.indexOf("PSTV")>-1,e=d?"/tv/PSTV/e":"/tv/e",f=d?"/tv/PSTV":"/tv";a&&-1===c.indexOf(e)&&(c=c.split(f).join(e+a));var g=b.protocol+"//"+b.hostname+c+b.search;return g},replaceRedirectTokens:function(a){var b="@@REDIRECT_URL@@";return a&&a.indexOf(b)>-1&&(a=a.split(b).join(this.getRedirectUrl())),a},setCommerceRedirectUrlCookie:function(){var a=new Date;a.setDate(a.getDate()+1),c.set({name:"mp5fwdurl",value:this.getRedirectUrlUnencoded(),domain:".mlb.com",expires:a,secure:!1})}});return d}),define("mlb-tv-app/app/util/ContentUrlUtil",["backbone","underscore","bam.url/url"],function(a,b,c){var d=a.View.extend({defaults:{}},{defaultPath:"/tv",formatContentUrl:function(a){var b=c.Location(window.location),d=/(\/tv\/PSTV|\/tv)/gi,e=b.pathname.match(d)[0],f=c.Location(window.location).getParams();return f.calendar_event_id&&delete f.calendar_event_id,e+="/e"+a.calendarEventId,f.topic_id&&delete f.topic_id,e+="/v"+a.contentId,f.content_id&&delete f.content_id,a.optString&&(e+="/"+this.slugify(a.optString)),$.isEmptyObject(f)||(e+="?"+$.param(f)),e},slugify:function(a){var b=a.trim().toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-");return b},removeParam:function(a){a=a.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var b=location.search.match(new RegExp("[?&]"+a+"=([^&]+)(&|$)"));if(b&&b.length>0){var c=b[0].replace("?",""),d=location.href.replace(c,"&");history.pushState({},null,d)}}});return d}),define("mlb-tv-app/app/marketing/MarketingMessagingManager",["underscore","jquery","ensureArray/ensureArray","bam.cookies/cookies","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/enums/events/MarketingEvents"],function(a,b,c,d,e,f){function g(){}return b.extend(g.prototype,{userType:void 0,userFeatures:void 0,messages:void 0,activeMessage:void 0,autoCloseTimeout:void 0,nextMessages:[],initTime:void 0,initialize:function(a,b,c){if(void 0===this.initTime){this.userType=a,this.userFeatures=b,this.initTime=(new Date).getTime();var d={};for(var g in c){var h=c[g];h.type===this.MARKETING_MESSAGE_TYPE&&(h.key=g,d[g]=h)}this.messages=d,e.on(f.MESSAGE_CLOSE,this.onMessageClose,this),e.on(f.MESSAGE_TRIGGER,this.triggerMessage,this),this.beginEngine()}},beginEngine:function(){for(var a in this.messages){var b,c,d=this.messages[a];d.targetedUserTypes&&""!==d.targetedUserTypes&&(b=this.userIsTargeted(d.targetedUserTypes)),d.targetedFeatures&&""!==d.targetedFeatures&&(c=this.featureIsTargeted(d.targetedFeatures)),d.isActive&&(b||c)&&this.queueMessage(d)}},queueMessage:function(a){var b=this;setTimeout(function(){b.triggerMessage(a)},a.delay)},triggerMessage:function(a){var b=0,c=d.get(this.COOKIE_PREFIX+a.key);if(c&&!a.ignoreLastDisplay){var e=parseInt(c);if(e>this.initTime)b=-1;else{var f=(new Date).getTime(),g=f-e,h=60*a.minimumMinutesBetweenDisplays*1e3;h>g&&(b=h-g)}}if(b>0){var i=this;setTimeout(function(){i.triggerMessage(a)},b)}else 0===b&&this.showNext(a)},showNext:function(a){this.activeMessage?this.nextMessages.unshift(a):this.show(a)},show:function(a){if(this.ENABLE_COOKIES&&!a.ignoreLastDisplay&&d.set({name:this.COOKIE_PREFIX+a.key,value:(new Date).getTime(),path:this.COOKIE_PATH}),e.trigger(f.MESSAGE_SHOW,a),this.activeMessage=a,a.autoClose>0){var b=this;this.autoCloseTimeout=setTimeout(function(){b.autoClose(a)},a.autoClose)}},autoClose:function(a){e.trigger(f.MESSAGE_AUTO_CLOSE,a),this.onMessageClose(a)},onMessageClose:function(){if(this.autoCloseTimeout&&clearTimeout(this.autoCloseTimeout),this.activeMessage=void 0,this.autoCloseTimeout=void 0,this.nextMessages.length>0){var a=this.nextMessages.pop();this.show(a)}},featureIsTargeted:function(b){var c,d=b.split(",");return b===this.TARGETED_USER_WILDCARD&&(c=!0),a.each(d,function(b){a.each(this.userFeatures,function(a){b===a&&(c=!0)},this)},this),c},userIsTargeted:function(a){return a===this.TARGETED_USER_WILDCARD||0===a.length||a===this.userType||-1!==b.inArray(this.userType,a)},MARKETING_MESSAGE_TYPE:"marketing",TARGETED_USER_WILDCARD:"*",COOKIE_PREFIX:"MP5_TOASTER_",COOKIE_PATH:"/",ENABLE_COOKIES:!0}),new g}),define("hgn!mlb-tv-app/app/templates/minimode/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="'),d.b(d.v(d.f("id",a,b,0))),d.b('" class="minimodePanel">'),d.b("\n"+c),d.b('	<div class="top">'),d.b(d.t(d.f("top",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b('	<div class="bottom">'),d.b(d.t(d.f("bottom",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/minimode/miniGames",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="meta">'),d.b("\n"+c),d.b("	<p>"),d.b("\n"+c),d.s(d.f("showStartTime",a,b,1),a,b,0,44,283,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.s(d.f("startTimeTBD",a,b,1),a,b,0,65,110,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('				<span class="header-text">TBD</span>'),d.b("\n"+c)}),a.pop()),d.s(d.f("startTimeTBD",a,b,1),a,b,1,0,0,"")||(d.b('				<span class="header-text">'),d.b(d.v(d.d("linescore.home_time",a,b,0))),d.b(" "),d.b(d.v(d.d("linescore.home_ampm",a,b,0))),d.b(" "),d.b(d.v(d.f("formattedHomeTimeZone",a,b,0))),d.b("</span>"),d.b("\n"+c))}),a.pop()),d.b("\n"+c),d.s(d.f("showStartTime",a,b,1),a,b,0,323,417,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.s(d.f("miniGamestate",a,b,1),a,b,0,345,396,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('				<span class="header-bullet">&#8226;</span>'),d.b("\n"+c)}),a.pop())}),a.pop()),d.b("\n"+c),d.s(d.f("miniGamestate",a,b,1),a,b,0,457,555,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('			<span id="minigamestate" class="header-text '),d.b(d.v(d.f("minigamestateCSS",a,b,0))),d.b('">'),d.b(d.v(d.f("miniGamestate",a,b,0))),d.b(" </span>"),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.s(d.f("gameInProgress",a,b,1),a,b,0,596,975,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.s(d.f("miniGamestate",a,b,1),a,b,0,618,677,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('            <span class="header-bullet">&#8226;</span>'),d.b("\n"+c)}),a.pop()),d.b('			<span class="header-text">'),d.b(d.v(d.f("inningState",a,b,0))),d.b(" of the "),d.b(d.v(d.f("inningNumberWithOrdinal",a,b,0))),d.b(" inning </span>"),d.b("\n"+c),d.s(d.f("isBetweenInnings",a,b,1),a,b,1,0,0,"")||(d.b('			<span class="header-bullet">&#8226;</span>'),d.b("\n"+c),d.b('			<span class="header-text"> '),d.b(d.v(d.d("play.outs",a,b,0))),d.b(" out"),d.s(d.f("onlyOneOut",a,b,1),a,b,1,0,0,"")||d.b("s"),d.b("</span>"),d.b("\n"+c))}),a.pop()),d.b("\n"+c),d.b("	</p>"),d.b("\n"+c),d.b('	<p class="header-featured">'),d.b("\n"+c),d.b("		"),d.b(d.v(d.d("game.away.name_full",a,b,0))),d.b("&nbsp;"),d.b("\n"),d.b("\n"+c),d.s(d.f("gameInProgress",a,b,1),a,b,0,1085,1121,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("			"),d.b(d.v(d.d("boxscore.away_runs",a,b,0))),d.b(",&nbsp;"),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.s(d.f("gameOver",a,b,1),a,b,0,1157,1193,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("			"),d.b(d.v(d.d("boxscore.away_runs",a,b,0))),d.b(",&nbsp;"),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.s(d.f("gameInProgress",a,b,1),a,b,1,0,0,"")||d.s(d.f("gameOver",a,b,1),a,b,1,0,0,"")||(d.b("				"),d.b(d.v(d.f("vsString",a,b,0))),d.b("\n"+c)),d.b("\n"+c),d.b("		"),d.b(d.v(d.d("game.home.name_full",a,b,0))),d.b("&nbsp;"),d.b("\n"),d.b("\n"+c),d.s(d.f("gameInProgress",a,b,1),a,b,0,1358,1387,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("			"),d.b(d.v(d.d("boxscore.home_runs",a,b,0))),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.s(d.f("gameOver",a,b,1),a,b,0,1423,1452,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("			"),d.b(d.v(d.d("boxscore.home_runs",a,b,0))),d.b("\n"+c)}),a.pop()),d.b("		</p>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/minimode/miniHighlights",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="meta">'),d.b("\n"+c),d.b('	<p class="text-current-game">'),d.b("\n"+c),d.s(d.d("gameday.gameInProgress",a,b,1),a,b,0,79,579,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.s(d.d("slot.isLive",a,b,1),a,b,0,227,410,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<span class="current-live">LIVE</span>'),d.b("\n"+c),d.b('		<span id="minigamestate" class="header-text '),d.b(d.v(d.f("minigamestateCSS",a,b,0))),d.b('">'),d.b(d.v(d.f("miniGamestate",a,b,0))),d.b(" </span>"),d.b("\n"+c),d.b('		<span class="header-bullet">&#8226;</span>'),d.b("\n"+c)}),a.pop()),d.b('		<span class="current-score">'),d.b(d.v(d.d("gameday.game.away.abbrev",a,b,0))),d.b(" "),d.b(d.v(d.d("gameday.play.away_runs",a,b,0))),d.b(", "),d.b(d.v(d.d("gameday.game.home.abbrev",a,b,0))),d.b(" "),d.b(d.v(d.d("gameday.play.home_runs",a,b,0))),d.b("</span>"),d.b("\n"+c)}),a.pop()),d.s(d.d("gameday.gameInProgress",a,b,1),a,b,1,0,0,"")||(d.b('		<div class="current-score-placeholder"></div> <!-- This element just maintains the spacing from top of the below elements -->'),d.b("\n"+c)),d.b("	</p>"),d.b("\n"+c),d.b('	<p class="text-highlight-header">'),d.b("\n"+c),d.b('		<span class="highlight-headline">'),d.b(d.v(d.d("metadata.headline",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('		<span class="highlight-date">'),d.b(d.v(d.d("metadata.date",a,b,0))),d.b(" | "),d.b(d.v(d.d("metadata.duration",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("	</p>"),d.b("\n"+c),d.b('	<p class="highlight-featured">'),d.b("\n"+c),d.s(d.d("metadata.truncatedBlurb",a,b,1),a,b,1,0,0,"")||(d.b("			"),d.b(d.v(d.d("metadata.blurb",a,b,0))),d.b("\n"+c)),d.s(d.d("metadata.truncatedBlurb",a,b,1),a,b,0,1132,1166,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("			"),d.b(d.v(d.d("metadata.truncatedBlurb",a,b,0))),d.b("\n"+c)}),a.pop()),d.b("	</p>"),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b("	"),d.b("\n"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/minimode/widgetsNav",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.s(d.f("includeBranding",a,b,1),a,b,0,20,67,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('<div class="fgotd-branding fgotd-mini"></div>'),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.b('<ul class="widgetNav">'),d.b("\n"+c),d.s(d.f("gamedayEnabled",a,b,1),a,b,0,132,247,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<li><a href="#gameday-widget" class="miniNavBtn" data-target="gameday-widget">'),d.b(d.v(d.f("gameday-widget-title",a,b,0))),d.b("</a></li>"),d.b("\n"+c)}),a.pop()),d.s(d.f("highlightsEnabled",a,b,1),a,b,0,290,414,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<li><a href="#highlights-widget" class="miniNavBtn" data-target="highlights-widget">'),d.b(d.v(d.f("highlights-widget-title",a,b,0))),d.b("</a></li>"),d.b("\n"+c)}),a.pop()),d.s(d.f("fantasyEnabled",a,b,1),a,b,0,457,572,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<li><a href="#fantasy-widget" class="miniNavBtn" data-target="fantasy-widget">'),d.b(d.v(d.f("fantasy-widget-title",a,b,0))),d.b("</a></li>"),d.b("\n"+c)}),a.pop()),d.b("<!--"),d.b("\n"+c),d.s(d.f("socialEnabled",a,b,1),a,b,0,616,727,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<li><a href="social-widget" class="miniNavBtn" data-target="social-widget">'),d.b(d.v(d.f("social-widget-title",a,b,0))),d.b("</a></li>"),d.b("\n"+c)}),a.pop()),d.b("-->"),d.b("\n"+c),d.b("</ul>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/brandingbug",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<a href='http://pubads.g.doubleclick.net/gampad/jump?iu=/2605/mlb.mlb/tv&sz="),d.b(d.v(d.f("width",a,b,0))),d.b("x"),d.b(d.v(d.f("height",a,b,0))),d.b("&t=userType%3D"),d.b(d.v(d.f("userType",a,b,0))),d.b("%26pos%3D1&c="),d.b(d.v(d.f("timestampCacheBuster",a,b,0))),d.b("' target='_blank'>"),d.b("\n"+c),d.b("	<img src='http://pubads.g.doubleclick.net/gampad/ad?iu=/2605/mlb.mlb/tv&sz="),d.b(d.v(d.f("width",a,b,0))),d.b("x"),d.b(d.v(d.f("height",a,b,0))),d.b("&t=userType%3D"),d.b(d.v(d.f("userType",a,b,0))),d.b("%26pos%3D1&c="),d.b(d.v(d.f("timestampCacheBuster",a,b,0))),d.b("'/>"),d.b("\n"+c),d.b("</a>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/marketing/FreeGameBrandingManager",["jquery","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MediaMetrics","hgn!mlb-tv-app/app/templates/brandingbug"],function(a,b,c,d,e){function f(){}return f.FREE_USER="FREE",f.BUG_MODELS={"fgotd-feedsel":{width:210,height:30},"fgotd-mini":{width:210,height:15}},a.extend(f.prototype,{shouldShowBranding:!1,userType:void 0,isBrandingVisible:!1,initialize:function(a){this.userType=a,this.renderAds()},renderAds:function(d){if(!c.get("isEnhancedGame")&&this.userType===f.FREE_USER){this.shouldShowBranding=!0;for(var g in f.BUG_MODELS){var h=f.BUG_MODELS[g];h.userType=this.userType,(d||0===a(".fgotd-branding."+g).children().length)&&a(".fgotd-branding."+g).html(e(h))}0===a("#rails-canvas").children().length&&b.trigger("doubleclick:render"),b.on("gamedaywidget:update",this.ensureCurrentState,this),this.showBranding()}},ensureCurrentState:function(){this.isBrandingVisible&&this.showBranding()},onSelectedSlotChange:function(){"EMPTY"===d.get("slotState")?this.hideBranding():this.showBranding()},showBranding:function(){this.shouldShowBranding&&(a(".fgotd-branding").show(),this.isBrandingVisible=!0)},hideBranding:function(){a(".fgotd-branding").hide(),this.isBrandingVisible=!1},showComponent:function(){a("#usertype-page-branding-container").show(),this.showBranding()},hideComponent:function(){a("#usertype-page-branding-container").hide(),this.hideBranding()}}),new f}),define("mlb-tv-app/app/marketing/SponsorshipDisplayManager",["jquery","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/marketing/FreeGameBrandingManager","mlb-tv-app/app/marketing/FreewheelCompanionBannerManager"],function(a,b,c,d,e){function f(){}return a.extend(f.prototype,{onSelectedSlotChange:function(a){var b=!1;try{a&&"true"===a.inCommercialBreak&&(b=!0)}catch(c){}this.updateDisplay(b)},onCommercialBreakBegin:function(a){a=parseInt(a);var b=c.get("selectedSlot");a===b&&this.updateDisplay(!0)},onCommercialBreakEnd:function(a){a=parseInt(a);var d=c.get("selectedSlot");a===d&&this.updateDisplay(!1),b.trigger("companion:resetSlotByIndex",{slotIndex:a})},updateDisplay:function(a){a?(d.hideComponent(),e.showComponent()):(e.hideComponent(),d.showComponent())},renderAds:function(){d.renderAds()}}),new f}),define("mlb-tv-app/app/view/components/VideoPlayer",["jquery","backbone","bam.url/url","bam.cookies/cookies","scrollMonitor/scrollMonitor","lazyLoadImages/lazyLoadImages","mlbtv-flashblock-detector/flashblock-detector","mp5/vpm/VideoPlaybackManager","mp5/utils/MP5Config","bandwagon/bandwagon","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/Configuration","mlb-tv-app/app/model/AppConfig","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/WidgetsManifest","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/model/GamedayUpdate","mlb-tv-app/app/model/ContentId","mlb-tv-app/app/model/UserSession","mlb-tv-app/app/model/Game","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/collection/GamesCollection","mlb-tv-app/app/util/GameIdUtil","mlb-tv-app/app/util/RedirectUtil","mlb-tv-app/app/util/ContentUrlUtil","mlb-tv-app/app/tracking/TrackingManager","mlb-tv-app/app/marketing/MarketingMessagingManager","hgn!mlb-tv-app/app/templates/minimode/container","hgn!mlb-tv-app/app/templates/minimode/miniGames","hgn!mlb-tv-app/app/templates/minimode/miniHighlights","hgn!mlb-tv-app/app/templates/minimode/miniModeNoData","hgn!mlb-tv-app/app/templates/minimode/widgetsNav","mlb-tv-app/app/marketing/SponsorshipDisplayManager","mlb-tv-app/app/marketing/FreeGameBrandingManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K){var L,M,N=l.extend({el:"#app",contentContainer:void 0,freeGameCheck:!1,freeGameData:null,loginCheck:!1,vpm:void 0,player:void 0,VC:void 0,minWidth:960,minHeight:540,isMobile:void 0,metaDataLoaded:void 0,devicePlatform:void 0,deviceDPR:void 0,deviceType:void 0,adStartWaiting:void 0,adStartInterval:void 0,counter:0,comscoreID:"",comscoreName:"",config:{},miniMode:void 0,activeNav:void 0,playerLoaded:!1,playerContentCalled:!1,highlightClicked:!1,watcher:void 0,cookie:d,ccBandwagonBus:void 0,isCasting:!1,playerContainer:void 0,initialize:function(b){L=this,this.MlbtvAppEvents=k.getMlbtvAppEvents(),this.MediaMetricsEvents=k.getMediaMetricsEvents(),this.VideoPlayerEvents=k.getVideoPlayerEvents(),this.MarketingEvents=k.getMarketingEvents(),this.contentContainer=a("#primary_content_container"),this.identifyDevice(),this.setMP5Config(),q.setEnabledComponents(o.getValue("app.components")),C.initialize(this.config),m.trigger("init:mp5config",this.config),this.config.page={},this.playerContainer=o.getValueOr("videocore.container",window.mp5Config.videocore.container),this.bandwagonBus=j.getInstanceByKey(this.playerContainer),this.initListeners(),this.render()},determineDevice:function(){this.determineDevice();var a=window.devicePixelRatio||1;this.deviceType=getStartupDeviceTypeString(),this.isMobile="phone"===this.deviceType||"tablet"===this.deviceType,a>1&&(this.config.page.retinaDisplay=!0)},setMP5Config:function(){var a=c.Location().getParam("env");this.config=new i(o.getMP5Config(),{env:a}),p.get("isEmbed")&&(this.config.videocore.flash.multiview=!1),this.config.videocore.isOnLimitedWan=v.get("isOnLimitedWan");var b=o.getValue("app.limitBitrateByNetwork");b&&b.enabled&&v.get("isOnLimitedWan")&&(this.config.videocore.initialKbps=b.initialKbps,this.config.videocore.miniModeMinKbps=b.minKbps,this.config.videocore.miniModeMaxKbps=b.maxKbps,this.config.videocore.standardSizeRegularMinKbps=b.minKbps,this.config.videocore.standardSizeRegularMaxKbps=b.maxKbps,this.config.videocore.fullScreenRegularMinKbps=b.minKbps,this.config.videocore.fullScreenRegularMaxKbps=b.maxKbps),p.set("mp5Config",this.config)},identifyDevice:function(){this.deviceDPR=window.devicePixelRatio||1,this.deviceType=getStartupDeviceTypeString(),window.navigator.userAgent.match(/Android/)?this.devicePlatform="android":window.navigator.userAgent.match(/iPhone|iPad|iPod/i)&&(this.devicePlatform="ios")},initListeners:function(){this.bandwagonBus.on("WATCH_NOW_CLICKED",this.playInNextAvailableSlot.bind(this)),this.bandwagonBus.on(this.VideoPlayerEvents.SCROLLED_WIDGET_UPDATE,this.updateScrolledWidget.bind(this)),r.on("change",this.onPlayMedia,this),this.listenTo(m,this.VideoPlayerEvents.MINIMODE_ENTER,this.enterMiniMode),this.listenTo(m,this.VideoPlayerEvents.MINIMODE_EXIT,this.exitMiniMode),this.listenTo(m,this.VideoPlayerEvents.MEDIAMETRICS_FETCH,this.fetchMediaMetrics),this.listenTo(m,this.VideoPlayerEvents.USER_PREFERENCE_UPDATE,this.updateUserPreference),this.listenTo(m,this.VideoPlayerEvents.USER_PROFILE_UPDATE,this.updateProfile),this.listenTo(m,this.VideoPlayerEvents.GAMEDAY_WIDGET_LOADING,this.setMiniModeToLoading),this.listenTo(m,this.VideoPlayerEvents.SET_MINIMODE_TO_EMPTY_SLOT,this.setMiniModeToEmptySlot),this.listenTo(m,this.VideoPlayerEvents.HIGHLIGHT_PLAYING,this.updateMiniModePanel),this.listenTo(m,this.VideoPlayerEvents.GAMEDAY_WIDGET_UPDATE,this.updateMiniModePanel),this.listenTo(m,this.VideoPlayerEvents.GAMEDAY_DATA_CHANGE,this.updateMiniModePanel),this.listenTo(m,this.VideoPlayerEvents.MINIMODE_UPDATE_PANEL,this.updateMiniModePanel),this.listenTo(m,this.VideoPlayerEvents.FREE_GAME_EVAL_COMPLETE,this.onFreeGameEvalComplete),this.listenTo(m,this.VideoPlayerEvents.TOGGLE_DAY_PICKER,this.resetMinimodeScrollTrigger),this.listenTo(m,this.VideoPlayerEvents.MESSAGES_CHANGE,this.resetMinimodeScrollTrigger),this.listenTo(m,this.VideoPlayerEvents.APP_STATE_INIT_COMPLETE,this.setFeedSelectorListener),
this.listenTo(x,this.MediaMetricsEvents.SLOTS_CHANGE,this.handleMediaMetricsSlotsChanged),this.listenToOnce(m,this.VideoPlayerEvents.SCOREBOARD_LOAD_COMPLETE,this.handleScoreboardLoadComplete),this.listenTo(m,this.VideoPlayerEvents.HIGHLIGHTS_UPDATE_SELECTED,this.updateSelectedHighlights)},updateScrolledWidget:function(a){var b='[data-target="'+a+'"]',c=this.$el.find(".miniNavBtn");c.filter(b).addClass("active"),c.not(b).removeClass("active")},renderPoster:function(){},redirectToCommerceUrl:function(a){A.setCommerceRedirectUrlCookie(),console.log("redirect user to ",a),window.location.replace(a)},checkWbcRedirect:function(){var a=!1,b=y.getGameByCalendarEventId(r.get("calendar_event_id"));if(b&&(a=b.isWBC()),a){console.log("[WBC] redirect the user to the interstitial");var d=!1,e=c.Location(),f=e.getParam("interstitialVisit");if(f&&(d=!0),!d){console.log("[WBC] WBC game selected, but need to send them to the interstitial");var g=p.get("env"),h="http://qa.mlb.com";switch(g){case"beta":h="https://betasecure.mlb.com";break;case"prod":h="https://securea.mlb.com"}var i=h+"/mlbtv/worldbaseballclassic/interstitial/index.jsp";return i}console.log("[WBC] WBC game selected, but they came from the interstitial, so don't send them back there")}else console.log("[WBC] Not a WBC game, but they may still need to log in.");return void 0},freeGameLoginCheck:function(){if(this.freeGameCheck&&this.loginCheck){var a,b=p.get("env"),c="https://qasecure.mlb.com";if(a=this.checkWbcRedirect())return void this.redirectToCommerceUrl(a);switch(b){case"beta":c="https://betasecure.mlb.com";break;case"prod":c="https://securea.mlb.com"}var d=null!==this.freeGameData&&this.freeGameData.free?"mp5free":"mp5default",e=c+"/enterworkflow.do?flowId=registration.dynaindex&template="+d;p.get("isPSTV")&&(e+="&pstv=true"),e+=this.getLoginMediaTypeTemplateParam(),a=A.appendRedirectUrl(e,r.get("calendar_event_id")),this.redirectToCommerceUrl(a)}},getLoginMediaTypeTemplateParam:function(a){var b=c.Location(),d=b.getParam("media_type");return d?"&mediaTypeTemplate="+d:""},onFreeGameCheckTimeout:function(){this.freeGameCheck||(this.freeGameCheck=!0,this.freeGameLoginCheck())},onMetaDataChanged:function(a){console.log("meta data changed"),console.log(s)},onFreeGameEvalComplete:function(a){this.freeGameCheck=!0,this.freeGameData=a,this.freeGameLoginCheck()},fetchMediaMetrics:function(){if(this.VC&&"mvp"===this.config.videocore.flash.name){var a=this.VC.utils.getCurrentMediaMetrics();return x.set(a),a}},updateProfile:function(a){return console.log("updateProfile()",a),a},updateUserPreference:function(a){this.vpm.updateUserPreference(a)},reRenderMiniHighlights:function(){m.trigger("activewidget:update")},completeInit:function(){this.playerLoaded&&this.playerContentCalled&&m.trigger(this.VideoPlayerEvents.APP_STATE_INIT_COMPLETE)},render:function(){return this.vpm=new h(this.config),this.VC=this.vpm.VC,"desktop"!==this.deviceType||this.VC.utils.isFlashPlaybackSupported()?(a(document).on("click",".owl-item",this.onHighlightClick),this.vpm.video.bind(this.VC.events.META_DATA_LOADED,this.onMetaDataLoaded.bind(this)),this.vpm.bind(this.vpm.events.UPDATE_USER_PROFILE,this.onUpdateUserProfile.bind(this)),this.vpm.bind(this.vpm.events.GAME_DATA_LOADED,this.onGameDataLoaded.bind(this)),this.vpm.bind(this.vpm.events.TIMECODE_UPDATE,this.onTimecodeUpdate.bind(this)),this.vpm.bind(this.vpm.events.SEEK_COMPLETE,this.onSeekComplete.bind(this)),this.vpm.bind(this.vpm.events.SELECTED_HIGHLIGHT_INFO_UPDATED,this.onSelectedHighlightInfoUpdated.bind(this)),this.vpm.bind(this.vpm.events.PLAYER_LOADED,this.onPlayerLoaded.bind(this)),this.vpm.bind(this.vpm.events.FLASH_PLAYER_READY,this.onFlashPlayerReady.bind(this)),this.vpm.bind(this.vpm.events.FLASH_PLAYER_READY_ERROR,this.onFlashPlayerReadyError.bind(this)),this.vpm.bind(this.vpm.events.DISABLE_CLOSED_CAPTIONS,this.onDisableClosedCaptions.bind(this)),this.vpm.bind(this.vpm.events.ENABLE_CLOSED_CAPTIONS,this.onEnableClosedCaptions.bind(this)),this.vpm.bind(this.vpm.events.ENTER_MINI_MODE,this.onEnterMiniMode.bind(this)),this.vpm.bind(this.vpm.events.EXIT_MINI_MODE,this.onExitMiniMode.bind(this)),this.vpm.bind(this.vpm.events.PLAY_CONTENT_CALLED,this.onPlaycontentCalled.bind(this)),this.vpm.bind(this.vpm.events.SELECTED_FEED_UPDATED,this.onSelectedFeedUpdated.bind(this)),this.vpm.bind(this.vpm.events.MEDIA_PLAYABLE,this.onMediaPlayable.bind(this)),this.vpm.bind(this.vpm.events.PLAYBACK_STARTED,this.onPlaybackStarted.bind(this)),this.vpm.bind(this.vpm.events.PLAYER_LAUNCH_UPGRADE_OFFER,this.onPlayerLaunchUpgradeOffer.bind(this)),this.vpm.bind(this.vpm.events.STREAM_SELECTION_OPTIONS_UPDATED,this.onStreamSelectionOptionsUpdated.bind(this)),this.vpm.bind(this.vpm.events.LOGIN_CHALLENGE,this.onLoginChallenge.bind(this)),this.vpm.bind(this.vpm.events.PLAYER_LAUNCH_LOGGED_IN,this.onPlayerLaunchLoggedIn.bind(this)),this.vpm.bind(this.vpm.events.SELECTED_MEDIA_SLOT_CHANGED,this.onSelectedMediaSlotChanged.bind(this)),this.vpm.bind(this.vpm.events.MEDIA_SLOT_STATE_CHANGED,this.onMediaSlotStateChanged.bind(this)),this.vpm.bind(this.vpm.events.VIDEO_AREA_LAYOUT_STATE_CHANGED,this.onVideoAreaLayoutStateChanged.bind(this)),this.vpm.bind(this.vpm.events.CLOSE_HIGHLIGHT,this.onCloseHighlight.bind(this)),this.vpm.bind(this.vpm.events.FREEWHEEL_AD_STARTED,this.onFreewheelAdStarted.bind(this)),this.vpm.bind(this.vpm.events.FREEWHEEL_AD_ENDED,this.onFreewheelAdEnded.bind(this)),VPM.bind(this.vpm.events.ERROR_MESSAGE,this.onErrorMessage.bind(this)),this.setupMiniMode(),this):void m.trigger("capability:noflash")},onFlashPlayerReady:function(a,b){g.init(this.playerContainer,{browser:window.deviceBootstrap().browser,timeout:o.getValueOr("videocore.flashblockCheckTimeout",5e3)},function(a){"blocked"===a&&m.trigger("capability:noflash")})},onFlashPlayerReadyError:function(a,b){m.trigger("capability:noflash")},onHighlightClick:function(b){b.preventDefault(),x.set("selectedGame",""),L.highlightClicked=!0,setTimeout(function(){L.highlightClicked=!1},2e3),s.attributes.isHighlight=!0,t.attributes.highlightPlaying=!0,t.attributes.minisetup=!1;var c=a(this).find("a").data("contentid").toString();L.playInNextAvailableSlot({contentId:c,isHighlight:!0});var d=x.get("currentSlots");x.set("previousSlots",d);var e=x.get("slotState");"EMPTY"!==e&&(x.set("metricsNeedUpdate",!0),m.trigger(L.VideoPlayerEvents.MEDIAMETRICS_FETCH))},onUpdateUserProfile:function(a,b){console.log("User profile data = ",b),m.trigger(this.VideoPlayerEvents.USER_PROFILE_UPDATE,b)},setClosedCaptions:function(a){var b={};b.showClosedCaptions=a,m.trigger(this.VideoPlayerEvents.USER_PREFERENCE_UPDATE,b)},onDisableClosedCaptions:function(a){console.log("VideoPlayer: DISABLE_CLOSED_CAPTIONS"),this.setClosedCaptions(!1)},onEnableClosedCaptions:function(a){console.log("VideoPlayer: ENABLE_CLOSED_CAPTIONS"),this.setClosedCaptions(!0)},onMetaDataLoaded:function(a,b){b.metaData&&(console.log("META_DATA_LOADED",b),console.log("browser history replace disabled"),m.trigger("service:parsemetadata",b),b&&!b.isHighlight&&this.replaceHistory(b.calendarEventId,b.metaData.content_id,b.metaData.title))},onSelectedMediaSlotChanged:function(a,b){console.log("=========VideoPlayer: SELECTED_MEDIA_SLOT_CHANGED: data = ",b),x.set(b.metrics);var c=x.getSelectedSlot();x.get("unformattedSelectedGame")||x.set("unformattedSelectedGame",c.gameId),p.set({isEnhancedGame:y.isGameEnhanced(c.calendarEventId),videoAreaLayoutState:b.metrics.videoAreaLayoutState}),s.updateSelectedSlotMetaDataProperties(c),this.bandwagonBus.publish(this.MlbtvAppEvents.HANDLE_SLOT_CHANGE),m.trigger(this.vpm.events.SELECTED_MEDIA_SLOT_CHANGED,b)},onMediaSlotStateChanged:function(a,b){console.log("VideoPlayer: MEDIA_SLOT_STATE_CHANGED: data = ",b);var c=b.metrics.slots[b.selectedSlot].mediaSlotState;x.get("slotState")!==c&&x.set("slotState",c),m.trigger("updateGamestripButtonState")},onVideoAreaLayoutStateChanged:function(a,b){console.log("VideoPlayer: VIDEO_AREA_LAYOUT_STATE_CHANGED: data = ",b),p.set("videoAreaLayoutState",b.metrics.videoAreaLayoutState),x.set(b.metrics);var c=x.getSelectedSlot();r.set("calendar_event_id",c.calendarEventId,{silent:!0}),this.updateSelectedHighlights()},onFreewheelAdStarted:function(a,b){console.log("FREEWHEEL_AD_STARTED : uniqueId="+b.uniqueId+", slotPosition="+b.slotPosition+", selectedSlotPosition="+b.selectedSlotPosition),J.onCommercialBreakBegin(b.slotPosition)},onFreewheelAdEnded:function(a,b){console.log("FREEWHEEL_AD_ENDED : uniqueId="+b.uniqueId+", slotPosition="+b.slotPosition+", selectedSlotPosition="+b.selectedSlotPosition),J.onCommercialBreakEnd(b.slotPosition)},onClipComplete:function(a,b){console.log("CLIP_COMPLETE"),m.trigger("display:eov")},onPlaylistLoaded:function(a,b){var c=b.clip;(""===c.path||""===c.videoPath||!c.path&&!c.videoPath)&&(self.destroy(),m.trigger("display:no-video",b.videoElement[0].outerHTML)),console.log("PLAYLIST_LOADED")},onEnterMiniMode:function(b){console.log("ENTER_MINI_MODE");var c=a("#gameday-widget").offset().top-175;a("html, body").animate({scrollTop:c},400)},onExitMiniMode:function(a){console.log("EXIT_MINI_MODE")},onCloseHighlight:function(a,b){var c=this;console.log("highlight closed",b),this.removeHighlightSelectedState(b),setTimeout(function(){c.removeHighlightSelectedState(b),m.trigger(c.VideoPlayerEvents.FEED_SELECTOR_UPDATE)},500)},onPlayerLoaded:function(a){console.log("VideoPlayer: PLAYER_LOADED"),this.playerLoaded=!0,this.completeInit(),m.trigger("player:loaded")},onPlaycontentCalled:function(a){console.log("VideoPlayer: PLAY_CONTENT_CALLED"),this.playerContentCalled=!0,this.completeInit(),"audio"===n.param("media_type")&&B.removeParam("media_type")},onLoginChallenge:function(a){var b=this;if(console.log("JJ VideoPlayer: LOGIN_CHALLENGE"),C.trackByImpressionKey(C.PLAYER_LAUNCH_NOT_LOGGED_IN),this.loginCheck=!0,this.freeGameLoginCheck(),!this.freeGameCheck){var c=3;setTimeout(function(){b.onFreeGameCheckTimeout()},1e3*c)}},onPlayerLaunchLoggedIn:function(){C.trackByImpressionKey(C.PLAYER_LAUNCH_LOGGED_IN)},onPlayerLaunchUpgradeOffer:function(){C.trackByImpressionKey(C.PLAYER_LAUNCH_UPGRADE_OFFER)},onMediaPlayable:function(a,b){v.parseMFResponse(b.mfResponse)},onGameDataLoaded:function(a,b){console.log("VideoPlayer: GAME_DATA_LOADED"),m.trigger("show:gameData",b)},onPlaybackStarted:function(a,b){console.log("PLAYBACK_STARTED",b),m.trigger(L.MarketingEvents.MESSAGE_BEGIN),this.updateMiniModePanel(),x.updateActiveGames(),this.fetchMediaMetrics(),m.trigger(" updateGamestripButtonState"),m.trigger(this.vpm.events.PLAYBACK_STARTED,b)},onTimecodeUpdate:function(a,b){console.log("VideoPlayer: TIMECODE_UPDATE - eventId = ",b.eventId),console.log("VideoPlayer: TIMECODE_UPDATE - uniqueId = ",b.uniqueId),console.log("VideoPlayer: TIMECODE_UPDATE - gameId = ",b.gameId),console.log("VideoPlayer: TIMECODE_UPDATE - timecode = ",b.timecode),x.setTimecodeForSlot(b.uniqueId,b.timecode);var c=z.formatIdForUI(b.gameId),d=z.formatIdForUI(s.get("game_id")),e=z.formatIdForUI(p.get("gamedaySub")),f=x.getSelectedSlot();f.uniqueId!==b.uniqueId||c!==d||d!==e&&""!==e||m.trigger("gameday:timecode",b.timecode)},onSeekComplete:function(b,c){console.log("VideoPlayer: SEEK_COMPLETE - eventId = ",c.eventId),console.log("VideoPlayer: SEEK_COMPLETE - uniqueId = ",c.uniqueId),console.log("VideoPlayer: SEEK_COMPLETE - gameId = ",c.gameId),console.log("VideoPlayer: SEEK_COMPLETE - timecode = ",c.timecode),x.setTimecodeForSlot(c.uniqueId,c.timecode),m.trigger("hotswapGameday",{gameId:c.gameId,timecode:c.timecode}),a(".nano-content").html(""),m.trigger("gamedayEvents:reset")},onStreamSelectionOptionsUpdated:function(a,b){console.log("VideoPlayer: STREAM_SELECTION_OPTIONS_UPDATED mfResp = ",b),m.trigger("feedselector:load",b),J.renderAds()},onSelectedHighlightInfoUpdated:function(a,b){console.log("SELECTED_HIGHLIGHT_INFO_UPDATED"),m.trigger("feedselector:loadHighlight",b)},onSelectedFeedUpdated:function(a,b){console.log("SELECTED_FEED_UPDATED"),m.trigger("feedselector:load",b)},onErrorMessage:function(a,b){m.trigger("errormessage:show",b)},updateSelectedHighlights:function(){a(".owl-item").removeClass("selected-highlight");for(var b=x.get("highlightIds"),c=0;4>c;c++)if(b[c].isHighlight){var d=b[c].contentId;a('.owl-item a[data-contentid="'+d+'"]').closest(".owl-item").addClass("selected-highlight")}},removeHighlightSelectedState:function(b){var c=b.uniqueId;a('.owl-item a[data-contentid="'+c+'"]').closest(".owl-item").removeClass("selected-highlight")},determineIfHighlight:function(a){return"false"==a.isHighlight?(s.set("isHighlight",!1),t.set("highlightPlaying",!1),!1):(s.set("isHighlight",!0),t.set("highlightPlaying",!0),!0)},setMiniModeToLoading:function(){console.log("setMiniModeToLoading()");var b=t.attributes.minimodeId;a("#"+b+" .top").html("<img id='minimode-loading-spinner' src='/sections/tv/images/spinner.gif' />")},setMiniModeToEmptySlot:function(){var b=t.attributes.minimodeId;a("#"+b+" .top").html(""),a("#"+b+" .bottom ul").css("border-top","none")},setupMiniMode:function(){console.log("setupMiniMode()");var a=this.el;this.watcher=e.create(a,-200),this.watcher.lock(),this.watcher.enterViewport(function(){m.trigger(L.VideoPlayerEvents.MINIMODE_EXIT)}),this.watcher.exitViewport(function(){m.trigger(L.VideoPlayerEvents.MINIMODE_ENTER)})},setFeedSelectorListener:function(){a("#feeds-container").on("feedSelectorToggleCompleted",function(){L.resetMinimodeScrollTrigger()})},resetMinimodeScrollTrigger:function(){var b=a(L.watcher.watchItem);b.hasClass("minimode")||(L.watcher.unlock(),L.watcher.recalculateLocation(),L.watcher.lock())},resetMinimodeScrollTriggerOnTimeout:function(){this.setScrollBlocker(),setTimeout(function(){L.resetMinimodeScrollTrigger(),setTimeout(function(){L.removeScrollBlocker()},300)},1e3)},setScrollBlocker:function(){a(document).on("scroll",function(){var b=200;a(window).scrollTop()>b?a(window).scrollTop(b):""})},removeScrollBlocker:function(){a(document).off("scroll")},setMinHeightForMinimode:function(){var b=a("#app").height();a("#mlbtv-wrap").css("min-height",b)},resetMinimodeMinHeightToDefault:function(){a("#mlbtv-wrap").css("min-height","708px")},enterMiniMode:function(){if(console.log("enterMiniMode()"),!p.get("isCasting")){if(this.setMinHeightForMinimode(),"mvp"===this.config.videocore.flash.name){if(p.get("mode")!==p.APP_MODE_MINI)try{console.log("enterMiniMode()"),p.set("mode",p.APP_MODE_MINI),console.log("mvp only: fetchMediaMetrics()"),this.fetchMediaMetrics(),a(this.el).addClass("minimode"),this.vpm.video.enterMiniMode(320,180)}catch(b){this.counter<3?(this.counter++,setTimeout(function(){L.enterMiniMode()},1e3)):this.counter=0}}else console.log("minimode is only supported in mvp");K.ensureCurrentState(),this.updateMiniModePanel()}},exitMiniMode:function(){if(this.resetMinimodeMinHeightToDefault(),console.log("exiting minimode"),"mvp"===this.config.videocore.flash.name){if(p.get("mode")!==p.APP_MODE_FULL){console.log("exitMiniMode()"),p.set("mode",p.APP_MODE_FULL),a(this.el).removeClass("minimode");var b=588,c=960;try{c=window.mp5Config.videocore.width,b=window.mp5Config.videocore.height}catch(d){console.error("VideoPlayer.exitMiniMode(): There was an error getting window.mp5Config.videocore.width/height")}this.vpm.video.exitMiniMode(c,b),self.activeNav=void 0}}else console.log("minimode is only supported in mvp");this.resetMinimodeScrollTrigger()},previousUniqueId:void 0,currentSlotDataForHighlight:void 0,updateMiniModePanel:function(b){if(p.get("mode")===p.APP_MODE_MINI){var c=x.getSelectedSlot();return c&&"EMPTY"===c.mediaSlotState?void a("#"+t.get("minimodeId")+" .top").html(""):void(c&&(c.isHighlight||c.gameId===p.get("gamedaySub"))&&(c.isHighlight||(this.currentSlotDataForHighlight=c),console.log("updateMiniModePanel()"),c.isHighlight?(this.updateMiniModeHighlight(),a("#app").removeClass("game-playing").addClass("highlight-playing")):c.isAudioOnly&&!c.isLive?this.updateMiniModeNoData():(this.updateMiniModeGameday(),a("#app").removeClass("highlight-playing").addClass("game-playing")),a("#"+self.activeNav).addClass("active")))}},updateMiniModeHighlight:function(a){var b,c=this.currentSlotDataForHighlight;if(c&&"EMPTY"!==c.mediaSlotState){if(console.log("updateMiniModeHighlight()"),p.set("noDataAvailable",!1),b=s.toJSON(),b.date&&(b.date=b.date.replace(/\-/g,"/")),b.duration){var d=b.duration,e=d.split(":");1===e[0].length&&(e[0]="0"+e[0]),b.duration=e.join(":")}var f={gameday:t.toJSON(),metadata:b,slot:c};t.attributes.minisetup=!0,this.renderMiniModePanel(G(f))}},updateMiniModeNoData:function(){var a=x.getSelectedSlot();a&&"EMPTY"!==a.mediaSlotState&&(console.log("updateMiniModeNoData()"),this.renderMiniModePanel(H(t.toJSON())))},previousMiniModeData:void 0,updateMiniModeGameday:function(a){var b=x.getSelectedSlot(),c=t.toJSON();if(this.previousUniqueId!==b.uniqueId&&(this.previousUniqueId=b.uniqueId),b&&"EMPTY"!==b.mediaSlotState){console.log("updateMiniModeGameday()");var d=b.formattedGameId;this.previousMiniModeData=c,!b.isLive&&c.miniGamestate&&"live"===c.miniGamestate.toLowerCase()&&(c.miniGamestate=!1),c.slot=b,d?(t.attributes.minisetup=!0,L.renderMiniModePanel(F(c))):m.trigger(this.VideoPlayerEvents.GAMEDAY_WIDGET_LOADING)}},previousTopContent:void 0,renderMiniModePanel:function(b){if(console.log("renderMiniModePanel"),this.previousTopContent!==b){if(this.previousTopContent=b,this.miniMode)a("#"+t.get("minimodeId")+" .top").html(b);else{L.miniMode=E({id:t.attributes.minimodeId,top:b,bottom:I(q.toJSON())}),a("#mlb-tv-container").append(this.miniMode),J.renderAds();x.get("slotState");a(".widgetNav a").click(function(b){b.preventDefault();var c=a(this).data("target");console.log("topNavTarget = "+c),self.activeNav=c;var d=a(".secondary-content").find("#"+c).offset().top-175;console.log("navTargetLoc = "+d),a("html, body").animate({scrollTop:d},800)}),a(".exitMiniBtn").off("click").on("click",function(b){b.preventDefault(),a("html, body").animate({scrollTop:0},800)})}p.get("isEnhancedGame")?a(".top .meta").append(a('<span class="egotd-label">'+p.getEgotdConfig().brandingLabelText+"</span>")):a(".egotd-label").remove(),this.updateScrolledWidget(q.get("scrolledWidget"))}},removeLoadingIndicator:function(){this.contentContainer.hasClass("loading")&&this.contentContainer.removeClass("loading")},showGetTheApp:function(){"phone"!=this.deviceType&&"tablet"!=this.deviceType||"android"!=this.devicePlatform||m.trigger("mobile:showGetAndroidApp")},replaceHistory:function(a,b,c){if(history.replaceState){var d={calendarEventId:a,contentId:b,title:c},e=B.formatContentUrl(d),f="Video: "+c+" | "+n.PARTNERNAME;history.replaceState("",f,e)}},handleMediaMetricsSlotsChanged:function(){this.updateMiniModePanel(),this.updateChromecastMetadata()},handleMetaDataChanged:function(){x.updateSelectedSlotMetaDataProperties(s),this.updateMiniModePanel()},handleScoreboardLoadComplete:function(a){p.get("initialPlay")&&(p.set("initialPlay",!1),this.onPlayMedia())},onStateChange:function(){p.off("change",this.onStateChange,this)},onPlayMedia:function(){r._changing&&r.changed.calendar_event_id&&!r.changed.content_id&&r.set({content_id:void 0},{silent:!0}),p.get("noVideoMode")&&(m.trigger("display:init-video"),m.trigger("scoreboard:load"));var a=y.getGameByCalendarEventId(r.get("calendar_event_id"));a&&(r.set({isEnhanced:a.isEnhanced(),preferEnhancedMedia:p.getEgotdConfig().preferEnhancedGameMedia,isFree:a.isFree()},{silent:!0}),p.set("isEnhancedGame",a.isEnhanced())),this.vpm.playMedia(r.toJSON())},playInCurrentSlot:function(a){this.vpm.playMedia({content_id:a.contentId,type:"video"})},playInNextAvailableSlot:function(a){this.vpm.playMediaInNextAvailableSlot({content_id:a.contentId,calendar_event_id:a.calendarEventId,type:"video",isHighlight:a.isHighlight,isWatchNow:a.isWatchNow}),t.attributes.highlightPlaying=!0,t.attributes.minisetup=!1,a.isHighlight?m.trigger(this.VideoPlayerEvents.HIGHLIGHT_PLAYING):a.isWatchNow&&m.trigger("watchNow:playing"),console.log("playInNextAvailableSlot")},_initChromecast:function(){M=window.VideoPlayerManager.chromecast,this.ccBandwagonBus=j.getInstanceByKey("#video-player"),this.ccBandwagonBus.on(M.events.CHROMECAST_CONNECTED,this.onChromecastConnected.bind(this)),this.ccBandwagonBus.on(M.events.CHROMECAST_DISCONNECTED,this.onChromecastDisconnected.bind(this)),this.ccBandwagonBus.on(M.events.CHROMECAST_CONNECTING,this.onChromecastConnecting.bind(this))},onChromecastConnecting:function(a){p.set("isCasting",!0),this.exitMiniMode()},onChromecastDisconnected:function(a){p.set("isCasting",!1)},onChromecastConnected:function(a){p.set("isCasting",!0);var b=x.getSelectedSlot();b&&(b.muted?M.muteMedia():M.unmuteMedia(),M.setVolume(b.volume))},updateChromecastMetadata:function(){if(console.log("updateChromecastMetadata()"),window.VideoPlayerManager&&window.VideoPlayerManager.chromecast&&window.chrome){M||this._initChromecast();var a=x.getSelectedSlot();M.setMetadata?(M.setMetadata({fprt:d.get("fprt"),ipid:d.get("ipid"),streamType:chrome.cast.media.StreamType.BUFFERED,contentId:a.contentId,playbackContentId:a.contentId,isLive:a.isLive,muted:a.muted,volume:a.volume}),M.connected&&M.rejoinSession&&M.connected()&&M.rejoinSession()):console.log("updateChromecastMetadata() 'chrome' unavailable")}},destroy:function(){this.remove(),this.unbind(),this.VC=null,this.vpm=null,a("#videoContainer object").remove()}});return N}),function(a,b){"function"==typeof define&&define.amd?define("deepObject/util",[],b):"object"==typeof exports?module.exports=b():a.bamDeepUtil=b()}(this,function(){"use strict";var a=/\[(\d+)\]/g,b=/^\./;return{getProps:function(c){return c.replace(a,".$1").replace(b,"").split(".")}}}),function(a,b){"function"==typeof define&&define.amd?define("deepObject/get",["./util"],b):"object"==typeof exports?module.exports=b(require("./util")):a.bamDeepObjectGet=b(a.bamDeepUtil)}(this,function(a){"use strict";return function(b,c){var d,e,f=a.getProps(c),g=0;for(d=f.length;"undefined"!=typeof(b=b[f[g]])&&++g<d;);return e=b}}),function(a){"function"==typeof define&&define.amd?define("events/paperboy",a):"object"==typeof module&&module.exports?module.exports=a():window.paperboy=a()}(function(){"use strict";function a(a,b){for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function b(a,b,c){window.console&&(console[e]("Error in callback for "+a+" event. "+b.message),console.log(b))}var c={},d=Array.prototype.slice,e=window.console&&console.error?"error":"log";return c.mixin=function(c,e,f){function g(a,b){throw new Error("tried to "+a+" a non-existent event type: "+b+". Options are: "+e.join(", "))}function h(a,b,c,d,e){e=!!e,b&&!a[c]?g("add",c):a[c]||(a[c]=[]),a[c].push({callback:d,isOne:e})}function i(a,b,c,d){if(b&&!a[c])g("remove",c);else if(!a[c])return;for(var e,f=0;e=a[c][f];f+=1)if(e.callback===d)return void a[c].splice(f,1)}function j(a,d,e){var f=e[0];if(d&&!a[f])g("trigger",f);else if(!a[f]&&0===a["*"].length)return;for(var h=a["*"].slice(),j=0;j<h.length;j++){try{h[j].callback.apply(c,e)}catch(k){b("*",k,h[j].callback)}h[j].isOne&&c.off(f,h[j].callback)}if(a[f]){e.shift(),h=a[f].slice();for(var j=0;j<h.length;j++){try{h[j].callback.apply(c,e)}catch(k){b(f,k,h[j].callback)}h[j].isOne&&i(a,!1,f,h[j].callback)}}}var k={"*":[]},l=!!e,m={"*":[]},n={"*":[]},o={},p={},q=!!f;if(e)for(var r=0;r<e.length;r+=1)k[e[r]]=[];if(f)for(var r=0;r<f.length;r+=1)m[f[r]]=[],n[f[r]]=[];c.on=function(a,b,c){h(k,l,a,b,c)},c.one=function(a,b){c.on(a,b,!0)},c.off=c.on.remove=function(a,b){i(k,l,a,b)},c.is=function(a,b,d){o[a]&&(b.apply(c,p[a]),d)||h(m,q,a,b,d)},c.is.one=function(a,b){c.is(a,b,!0)},c.is.remove=function(a,b){i(m,l,a,b)},c.not=function(a,b,d){(o[a]||(b.apply(c,p[a]||[]),!d))&&h(n,q,a,b,d)},c.not.one=function(a,b){c.not(a,b,!0)},c.not.remove=function(a,b){i(n,l,a,b)};var s=function(){var a=d.call(arguments);j(k,l,a)};return s.is=function(a){if(!o[a]){var b=d.call(arguments);o[a]=!0,p[a]=b.slice(1),j(m,q,b)}},s.not=function(a){if(o[a]){var b=d.call(arguments);o[a]=!1,p[a]=b.slice(1),j(n,q,b)}},c.on.accepts=function(b){return l?-1!==a(e,b):!0},c.is.accepts=function(b){return q?-1!==a(f,b):!0},s.repeat=function(a,b,e){if(b)for(var f=0;f<b.length;f+=1)!c.on.accepts||c.on.accepts(b[f])?!function(b){a.on(b,function(){var a=d.call(arguments);a.unshift(b),s.apply(c,a)})}(b[f]):g("repeat",b[f]);else a.on("*",function(){s.apply(c,arguments)});if(e)for(var f=0;f<e.length;f+=1)c.is.accepts(e[f])?!function(b){a.is(b,function(){var a=d.call(arguments);a.unshift(b),s.is.apply(c,a)}),a.not(b,function(){var a=d.call(arguments);a.unshift(b),s.not.apply(c,a)})}(e[f]):g("repeat state",b[f]);else e!==!1&&a.is&&a.is.accepts&&(a.is("*",function(){s.is.apply(c,arguments)}),a.not("*",function(){s.not.apply(c,arguments)}))},s},c.emitter=function(a){var b={};return b.trigger=c.mixin(b,a),b},c}),function(a,b){"function"==typeof define&&define.amd?define("formatDate/formatDate",["require","exports","module"],function(a,c,d){d.exports=b()}):"object"==typeof exports?module.exports=b():a.bamFormatDate=b()}(this,function(){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b=["January","February","March","April","May","June","July","August","September","October","November","December"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],f=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],g=["dom","lun","mar","mi&eacute;","jue","vie","s&aacute;b"],h=["domingo","lunes","martes","mi&eacute;rcoles","jueves","viernes","s&aacute;bado"],i={},j={ShortDate:"MM/dd/yyyy",FullDateTime:"EEEE, dd MMMM yyyy HH:mm:ss",YMD:"yyyyMMdd"};return i.formatDate=function(){var i=/d{1,2}|E{3,4}|M{1,4}|yy(?:yy)?|([HhmsAa])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,k=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,l=/[^-+\dA-Z]/g,m=function(a){return(10>a?"0":"")+a};return function(n,o,p,q){if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(o=n,n=void 0),n=n?new Date(n):new Date,isNaN(n))throw new SyntaxError("invalid date");o=String(j[o]||o||j.FullDateTime),"UTC:"==o.slice(0,4)&&(o=o.slice(4),p=!0);var r=p?"getUTC":"get",s=n[r+"Date"](),t=n[r+"Day"](),u=n[r+"Month"](),v=n[r+"FullYear"](),w=n[r+"Hours"](),x=n[r+"Minutes"](),y=n[r+"Seconds"](),z=n[r+"Milliseconds"](),A=p?0:n.getTimezoneOffset(),B={d:s,dd:m(s),EEE:q?g[t]:c[t],EEEE:q?h[t]:d[t],M:u+1,MM:m(u+1),MMM:q?e[u]:a[u],MMMM:q?f[u]:b[u],yy:String(v).slice(2),yyyy:v,h:w%12||12,hh:m(w%12||12),H:w,HH:m(w),m:x,mm:m(x),s:y,ss:m(y),S:m(z>99?Math.round(z/10):z),a:12>w?"am":"pm",A:12>w?"AM":"PM",Z:p?"UTC":(String(n).match(k)||[""]).pop().replace(l,""),o:(A>0?"-":"+")+m(100*Math.floor(Math.abs(A)/60)+Math.abs(A)%60,4),P:["th","st","nd","rd"][s%10>3?0:(s%100-s%10!=10)*s%10]};return o.replace(i,function(a){return a in B?B[a]:a.slice(1,a.length-1)})}}(),i.toCustomFormat=function(a,b){return a instanceof Date?i.formatDate(a,b):void 0},i.toShortDate=function(a){return a instanceof Date?i.formatDate(a,j.ShortDate):void 0},i.toYMD=function(a){return a instanceof Date?i.formatDate(a,j.YMD):void 0},i}),function(a,b){"function"==typeof define&&define.amd?define("ordinal/ordinal",[],b):"object"==typeof exports?module.exports=b():a.bamOrdinal=b()}(this,function(){"use strict";var a={};return a.en=function(a){var b=a.toString(),c=b.charAt(b.length-1),d=a>20?c:b;switch(d){case"1":return"st";case"2":return"nd";case"3":return"rd";default:return"th"}},a.es=function(a){var b=a.toString();switch(b){case"1":case"3":return"ra";case"2":return"da";case"4":case"5":case"6":return"ta";case"7":case"10":case"12":return"ma";case"8":return"va";case"9":return"na";case"11":return"mo";default:return"to"}},a}),function(a,b){"function"==typeof define&&define.amd?define("clubProperties/clubProperties",[],b):"object"==typeof exports?module.exports=b():a.bamClubProperties=b()}(this,function(){"use strict";return{ana:{mobile_url_base:"angels.mlb.com",url_cache:"losangeles.angels.mlb.com",club_common_url:"angels.com"},ari:{mobile_url_base:"dbacks.mlb.com",url_cache:"arizona.diamondbacks.mlb.com",club_common_url:"dbacks.com"},atl:{mobile_url_base:"braves.mlb.com",url_cache:"atlanta.braves.mlb.com",club_common_url:"braves.com"},bal:{mobile_url_base:"orioles.mlb.com",url_cache:"baltimore.orioles.mlb.com",club_common_url:"orioles.com"},bos:{mobile_url_base:"redsox.mlb.com",url_cache:"boston.redsox.mlb.com",club_common_url:"redsox.com"},chc:{mobile_url_base:"cubs.mlb.com",url_cache:"chicago.cubs.mlb.com",club_common_url:"cubs.com"},cin:{mobile_url_base:"reds.mlb.com",url_cache:"cincinnati.reds.mlb.com",club_common_url:"reds.com"},cle:{mobile_url_base:"indians.mlb.com",url_cache:"cleveland.indians.mlb.com",club_common_url:"indians.com"},col:{mobile_url_base:"rockies.mlb.com",url_cache:"colorado.rockies.mlb.com",club_common_url:"Rockies.com"},cws:{mobile_url_base:"whitesox.mlb.com",url_cache:"chicago.whitesox.mlb.com",club_common_url:"whitesox.com"},det:{mobile_url_base:"tigers.mlb.com",url_cache:"detroit.tigers.mlb.com",club_common_url:"tigers.com"},hou:{mobile_url_base:"astros.mlb.com",url_cache:"houston.astros.mlb.com",club_common_url:"astros.com"},kc:{mobile_url_base:"royals.mlb.com",url_cache:"kansascity.royals.mlb.com",club_common_url:"royals.com"},la:{mobile_url_base:"dodgers.mlb.com",url_cache:"losangeles.dodgers.mlb.com",club_common_url:"dodgers.com"},mia:{mobile_url_base:"marlins.mlb.com",url_cache:"miami.marlins.mlb.com",club_common_url:"marlins.com"},mil:{mobile_url_base:"brewers.mlb.com",url_cache:"milwaukee.brewers.mlb.com",club_common_url:"brewers.com"},min:{mobile_url_base:"twins.mlb.com",url_cache:"minnesota.twins.mlb.com",club_common_url:"twinsbaseball.com"},mlb:{mobile_url_base:"mlb.com",url_cache:"mlb.mlb.com",club_common_url:"MLB.com"},nym:{mobile_url_base:"mets.mlb.com",url_cache:"newyork.mets.mlb.com",club_common_url:"mets.com"},nyy:{mobile_url_base:"yankees.mlb.com",url_cache:"newyork.yankees.mlb.com",club_common_url:"yankees.com"},oak:{mobile_url_base:"athletics.mlb.com",url_cache:"oakland.athletics.mlb.com",club_common_url:"athletics.com"},phi:{mobile_url_base:"phillies.mlb.com",url_cache:"philadelphia.phillies.mlb.com",club_common_url:"phillies.com"},pit:{mobile_url_base:"pirates.mlb.com",url_cache:"pittsburgh.pirates.mlb.com",club_common_url:"pirates.com"},sd:{mobile_url_base:"padres.mlb.com",url_cache:"sandiego.padres.mlb.com",club_common_url:"padres.com"},sea:{mobile_url_base:"mariners.mlb.com",url_cache:"seattle.mariners.mlb.com",club_common_url:"Mariners.com"},sf:{mobile_url_base:"giants.mlb.com",url_cache:"sanfrancisco.giants.mlb.com",club_common_url:"SFGiants.com"},stl:{mobile_url_base:"cardinals.mlb.com",url_cache:"stlouis.cardinals.mlb.com",club_common_url:"cardinals.com"},tb:{mobile_url_base:"rays.mlb.com",url_cache:"tampabay.rays.mlb.com",club_common_url:"raysbaseball.com"},tex:{mobile_url_base:"rangers.mlb.com",url_cache:"texas.rangers.mlb.com",club_common_url:"texasrangers.com"},tor:{mobile_url_base:"bluejays.mlb.com",url_cache:"toronto.bluejays.mlb.com",club_common_url:"bluejays.com"},was:{mobile_url_base:"nationals.mlb.com",url_cache:"washington.nationals.mlb.com",club_common_url:"nationals.com"}}}),function(a,b){"function"==typeof define&&define.amd?define("gamedayLauncher/configs",[],b):"object"==typeof exports?module.exports=b():a.bamGamedayLauncherConfigs=b()}(this,function(){"use strict";var a={};return a.versions={2005:{url:"/mlb/gameday/gd2005.html?",options:"location=no,menubar=no,scrollbars=no,status=no,toolbar=no,resizable=yes",w:770,h:600},"2005_milb":{url:"http://www.milb.com/milb/gameday/y2005/gdmilb.html?",options:"location=no,menubar=no,scrollbars=no,status=no,toolbar=no,resizable=yes",w:770,h:600},2006:{url:"/mlb/gameday/y2006/gd.html?",options:"location=no,menubar=no,scrollbars=no,status=no,toolbar=no,resizable=yes",
w:770,h:600},"2007_milb":{url:"http://www.milb.com/milb/gameday/y2007/gd.html?",options:"location=no,menubar=no,scrollbars=no,status=no,toolbar=no,resizable=yes",w:980,h:600},2007:{url:"/mlb/gameday/y2007/gd.html?",options:"location=no,menubar=no,scrollbars=no,status=no,toolbar=no,resizable=yes",w:980,h:600},v4:{url:"/mlb/gameday/y2009/index.jsp?gid=",w:990,h:576},v4_mini:{url:"/mlb/gameday/mini.jsp?gid=",options:"location=no,menubar=no,scrollbars=no,status=no,toolbar=no,resizable=yes",w:300,h:368},v5:{url:"http://www.mlb.com/r/game?gid=",w:990,h:576},v6_wbc2013:{url:"/wbc/2013/gameday/index.jsp?gid=",w:990,h:576}},a.inferVersion=function(a,b){var c=b.substring(0,4);c=+c;var d="sport_code"in a&&"mlb"!==a.sport_code&&"int"!==a.sport_code;switch(!0){case"mini"===a.mode&&(2008===c||2009===c):return"v4_mini";case 2012===c&&"int"===a.sport_code:case 2013===c&&"int"===a.sport_code:return"v6_wbc2013";case c>=2010||2e3>=c:return"v5";case 2009===c:case 2008===c:return"v4";case 2005===c&&d:case 2007===c&&d:return c.toString()+"_milb";default:return c.toString()}},a.getWindowName=function(a,b){switch(a){case"2005":case"2006":case"2007":return"GamedayWin";case"v4_mini":return"gdmini_"+b;default:return"gd_"+b}},a.shouldUsePopup=function(a,b){switch(!0){case"preview"===b.mode:case"v5"===a:case"v6_wbc2013"===a:return!1;default:return!0}},a}),function(a){"undefined"!=typeof define&&define.amd?define("deep-equal/index",[],a):"undefined"!=typeof module&&module.exports?module.exports=a():window.deepEqual=a()}(function(){function a(a){return null===a||void 0===a}function b(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function c(c,g){if(a(c)||a(g))return!1;if(c.prototype!==g.prototype)return!1;if(b(c))return b(g)?(c=d.call(c),g=d.call(g),f(c,g)):!1;try{var h,i,j=e(c),k=e(g)}catch(l){return!1}if(j.length!=k.length)return!1;for(j.sort(),k.sort(),i=j.length-1;i>=0;i--)if(j[i]!=k[i])return!1;for(i=j.length-1;i>=0;i--)if(h=j[i],!f(c[h],g[h]))return!1;return!0}var d=Array.prototype.slice,e="function"==typeof Object.keys?Object.keys:function(a){var b=[];for(var c in a)b.push(c);return b},f=function(a,b){return a===b?!0:a instanceof Date&&b instanceof Date?a.getTime()===b.getTime():"object"!=typeof a&&"object"!=typeof b?a==b:c(a,b)};return f}),function(a,b){"function"==typeof define&&define.amd?define("gamedayLauncher/gamedayLauncher",["jquery","./configs","pageMeta/pageMeta","deep-equal/index"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("./configs"),require("pageMeta/pageMeta"),require("deep-equal/index")):a.bamGamedayLauncher=b(a.jQuery,a.bamGamedayLauncherConfigs,a.bamPageMeta,a.deepEqual)}(this,function(a,b,c,d){"use strict";function e(a,b){var d="";return Object.keys(b).forEach(function(a){d+="&"+a+"="+b[a]}),c.isMilb&&(d+="&sid="+(c.sid||"milb")),a+d}function f(a,b,c){var d=Math.min(screen.width,c.w),e=Math.min(screen.height,c.h),f=Math.round((screen.width-d)/2),g=Math.round((screen.height-e)/2);window.open(a,b,"width="+d+",height="+e+",left="+f+",top="+g+","+c.options)}var g={},h={};return h.getUrl=function(c,f){0===c.indexOf("gid_")&&(c=c.substr(4));var i;if(i="string"==typeof f?{mode:f}:f||{},i.sport_code||(i.sport_code=c.substring(21,24)),g[c]){var j=g[c].filter(function(a){return d(i,a.params)})[0];if(j)return j.url}var k=b.inferVersion(i,c),l=b.versions[k];if(!l)throw new Error("Tried open gameday version "+k+", which does not have a config.");var m=e(c,i),n=l.url+m;return g[c]||(g[c]=[]),g[c].push({url:n,params:i}),a(document.body).on("click",'a[href$="'+n+'"]',function(a){a.isDefaultPrevented()||(a.preventDefault(),h.launch(c,i))}),n},h.launch=function(a,c){var d=h.getUrl(a,c),e=b.inferVersion(c,a);if(b.shouldUsePopup(e,c)){var g=b.getWindowName(e,a);f(d,g,c)}else window.location.href=d},h}),function(a,b){"function"==typeof define&&define.amd?define("mediaLauncher/mediaLauncher",["jquery","deep-equal/index","client/client","pageMeta/pageMeta","bam.cookies/cookies"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("deep-equal/index"),require("client/client"),require("pageMeta/pageMeta"),require("bam.cookies/cookies")):a.bamMediaLauncher=b(a.jQuery,a.deepEqual,a.bamClient,a.bamPageMeta,a.bamCookies)}(this,function($,deepEqual,client,pageMeta,cookies){"use strict";function createUrl(a){var b="/shared/flash/mediaplayer/MP4.jsp?",c=[];return $.each(a,function(a,b){c.push(a+"="+b)}),b+=c.join("&")}function getMediaPlayerUrl(a){if(a=$.extend({},defaultParams,a),useMP5){var b=pageMeta.mobile_url||"http://m.mlb.com",c=b+"/tv/";a.calendar_event_id&&(c+="e"+a.calendar_event_id+"/"),a.content_id&&(c+="v"+a.content_id+"/");var d=[];return a.media_type&&"audio"===a.media_type&&d.push("media_type="+a.media_type),a.clickOrigin&&d.push("clickOrigin="+a.clickOrigin),a.team&&d.push("team="+a.team),a.debug&&d.push("&debug="+a.debug),a.environment&&d.push("env="+a.environment),d.length>0&&(c+="?"+d.join("&")),c}var e=createUrl(a);return e}var $html=$("html"),mpfiveSupportedBrowser=!$html.hasClass("ie9")&&!$html.hasClass("lt-ie9"),mpfiveBetaCookie=cookies.get("mpfiveBetaCookie"),mpfiveAccess="true"===mpfiveBetaCookie||mpfiveBetaCookie===!0,useMP5=!0,exports={},alreadyCreated=[],defaultParams={source:"MLB",sponsor:"MLB",clickOrigin:"MSB",affiliateId:"MSB",team:"mlb"};return exports.launchWithParams=function(a){var b=getMediaPlayerUrl(a);if(useMP5)window.location=b;else{var c=660;client.isChrome&&client.isMacOS&&(c+=30),window.open(b,"mp4","height="+c+",width=960,resizable=0")}},exports.getUrl=function(a,b){if(!client.isDesktop)return"http://m.mlb.com/game/"+b.gameday;var c=getMediaPlayerUrl(a);if(!useMP5){var d=alreadyCreated.filter(function(b){return deepEqual(b.params,a)});if(d[0])return d[0].url;$(document.body).on("click",'a[href$="'+c+'"]',function(b){b.preventDefault(),exports.launchWithParams(a)}),alreadyCreated.push({params:a,url:c})}return c},exports.getUrlFromLegacyString=function(str,game){var firstParen=str.indexOf("(");-1!==firstParen&&(str=str.substr(firstParen));var params=eval(str);return exports.getUrl(params,game)},exports}),function(a,b){"function"==typeof define&&define.amd?define("MasterScoreboard/MasterScoreboard",["require","exports","module","jquery","deepObject/get","ensureArray/ensureArray","ensureDate/ensureDate","events/paperboy","formatDate/formatDate","ordinal/ordinal","clubProperties/clubProperties","gamedayLauncher/gamedayLauncher","mediaLauncher/mediaLauncher"],function(a,c,d){d.exports=b(a("jquery"),a("deepObject/get"),a("ensureArray/ensureArray"),a("ensureDate/ensureDate"),a("events/paperboy"),a("formatDate/formatDate"),a("ordinal/ordinal"),a("clubProperties/clubProperties"),a("gamedayLauncher/gamedayLauncher"),a("mediaLauncher/mediaLauncher"))}):"object"==typeof exports?module.exports=b(require("jquery"),require("deepObject/get"),require("ensureArray/ensureArray"),require("ensureDate/ensureDate"),require("events/paperboy"),require("formatDate/formatDate"),require("ordinal/ordinal"),require("clubProperties/clubProperties"),require("gamedayLauncher/gamedayLauncher"),require("mediaLauncher/mediaLauncher")):a.bamMasterScoreboard=b(a.jQuery,a.bamDeepObjectGet,a.bamEnsureArray,a.bamEnsureDate,a.paperboy,a.bamFormatDate,a.bamOrdinal,a.bamClubProperties,a.bamGamedayLauncher,a.bamMediaLauncher)}(this,function(a,b,c,d,e,f,g,h,i,j){function k(a,b){for(a+="";a.length<(b||2);)a="0"+a;return a}function l(a){return f.formatDate(new Date(a),"MMM. d")}function m(b){this.options=a.extend(!0,{interval:15e3},b),this.trigger=n(this,["success","refresh","error"]),this.timers=[],this.gameDates={}}var n=e.mixin,o=g.en,p=g.es,q=i.getUrl,r=j.getUrlFromLegacyString,s=15e3,t={qa:"//gd.qa.mlb.com",beta:"//gdx.mlb.com",prod:"//gdx.mlb.com"},u=!1,v=!1,w="mlb",x="AL",y="NL",z="CL",A="GL",B="WBC",C={103:x,104:y,114:z,115:A},D=/^(\d{4}\/\d{2}\/\d{2}).*$/,E=/^(home|away)_(.*)$/;return m.prototype={scoreUpdatedHash:{},runnersHash:{},epgSortOrder:{during:1,before:2,after:3,nixed:4,"":5},extendGameTime:function(a,b){a.current_date=b,a.original_date=a.id.match(D,"$1")[1],a.season=a.original_date.substr(0,4),a.is_tbd="3:33"===a.time&&"AM"===a.ampm},extendGameType:function(a){var b=a.game_type,c={is_regular_season:"R"===b,is_wildcard:"F"===b,is_division_series:"D"===b,is_league_series:"L"===b,is_world_series:"W"===b,is_all_star_game:"A"===b,is_spring_training:"S"===b,is_exhibition:"E"===b,is_19th_century:"N"===b,is_intrasquad:"I"===b};c.is_pre_season=c.is_spring_training||c.is_exhibition,c.is_post_season=c.is_wildcard||c.is_division_series||c.is_league_series||c.is_world_series,a.type=c},extendGameStatus:function(a){var b=a.status,c=b.ind.charAt(0),d=b.ind.charAt(1);if(b.is_scheduled="S"===c,b.is_pre_game="P"===c&&""===d,b.is_delayed_start="P"===c&&""!==d&&"W"!==d,b.is_warmup="P"===c&&"W"===d,b.is_in_progress="I"===c&&""===d,b.is_instant_replay="I"===c&&"H"===d,b.is_manager_challenge="M"===c,b.is_umpire_challenge="N"===c,b.is_delayed="I"===c&&""!==d,b.is_suspended="U"===c||"T"===c,b.is_over="O"===c&&""===d,b.is_final="F"===c&&(""===d||"T"===d),b.is_tied="F"===c&&"T"===d,b.is_completed_early=!("O"!==c&&"F"!==c||b.is_over||b.is_final),b.is_forfeit="R"===c||"Q"===c,b.is_postponed="D"===c,b.is_cancelled="C"===c,b.is_before_game=b.is_scheduled||b.is_pre_game,b.is_during_game=b.is_warmup||b.is_in_progress||b.is_instant_replay||b.is_delayed||b.is_delayed_start||b.is_manager_challenge||b.is_umpire_challenge,b.is_after_game=b.is_over||b.is_completed_early||b.is_final||b.is_forfeit,b.is_nixed=b.is_postponed||b.is_cancelled,b.is_suspended){var e=!!a.resume_date,f=a.current_date===a.resume_date;a.has_resumption=e&&!f,a.is_resumption=e&&f,a.has_resumption?a.resume_date_formatted=l(a.resume_date):a.is_resumption&&(a.original_date_formatted=l(a.original_date)),a.is_resumption?b.is_before_game=!0:b.is_after_game=!0}b.is_top_of_inning="Y"===b.top_inning,b.is_bottom_of_inning="N"===b.top_inning,b.epg=b.is_before_game?"before":b.is_during_game?"during":b.is_after_game?"after":b.is_nixed?"nixed":"",b.epgSortOrder=this.epgSortOrder[b.epg],b.is_perfect_game="Y"===b.is_perfect_game,b.is_no_hitter="Y"===b.is_no_hitter,b.inning&&(b.inning_ordinal=o(b.inning),b.inning_ordinal_es=p(b.inning)),b.is_instant_replay&&(a.description="Instant Replay",b.status="Replay",b.reason="Review")},extendGameTeams:function(b){var c,d,e={away:{},home:{}};for(c in b)b.hasOwnProperty(c)&&(d=c.match(E),null!==d&&"home_runs"!==c&&(e[d[1]][d[2]]=b[c],delete b[c]));a.each(e,function(a,b){b.is_major_league=b.sport_code===w,b.league_code=C[b.league_id_spring||b.league_id],b.sport_code===w&&b.file_code in h&&(b.url_cache="http://"+h[b.file_code].url_cache,b.url=b.url_cache+"/index.jsp?c_id="+b.file_code),b.links={stats:"/stats/sortable_player_stats.jsp?c_id="+b.file_code,news:"/news/index.jsp?c_id="+b.file_code,fantasy:"/mlb/fantasy/wsfb/news/index.jsp?team_id="+b.team_id,schedule:"/schedule/index.jsp?c_id="+b.file_code,more:"/index.jsp?c_id="+b.file_code}}),b.status.is_top_of_inning?(e.pitching=e.home,e.batting=e.away):(e.pitching=e.away,e.batting=e.home),b.teams=e},reGotD:/\b(ALL|WEB_MEDIAPLAYER)\b/,extendGameMedia:function(a){for(var d=b(a,"game_media.media"),e=c(d),f=0,g=e.length;g>f;++f){var h=b(e,f.toString());h&&"game"===h.type&&(d=h)}a.is_free_gotd=d&&this.reGotD.test(d.free),a.is_enhanced_gotd=d&&"Y"===d.enhanced,a.is_gotd=a.is_free_gotd||a.is_enhanced_gotd,a.calendar_event_id=d?d.calendar_event_id:void 0},sortHomeRuns:function(a,b){return+a.inning>+b.inning},extendHomeRuns:function(a){var d,e,f,g=a.teams.away,h=a.teams.home,i={},j=c(b(a,"home_runs.player"));for(i[g.code]=g.home_runs=[],i[h.code]=h.home_runs=[],d=0,e=j.length;e>d;++d)f=j[d],"undefined"!=typeof i[f.team_code]&&i[f.team_code].push(f);g.home_runs.sort(this.sortHomeRuns),h.home_runs.sort(this.sortHomeRuns)},extendLinescore:function(a){a.linescore=a.linescore||{r:{},h:{},e:{}},a.linescore.inning=c(a.linescore.inning)},extendDoubleheader:function(a){a.game_number=a.id.substr(-1),a.is_doubleheader="2"===a.game_number},extendLinks:function(a){var b,c=a.links||{},d=a.status,e=a.gameday,f=(a.gameday_sw,a.teams);a.is_minor_league?b="&sid="+(pageMeta.sid||"milb"):(b="",c.away_audio=c.away_audio&&r(c.away_audio,a),c.home_audio=c.home_audio&&r(c.home_audio,a),c.audio=c.home_audio||c.away_audio,c.press="/mlb/presspass/gamenotes.jsp?c_id=mlb",c.probables="/news/probable_pitchers/index.jsp?c_id=mlb&date="+a.original_date+"#"+f.away.name_abbrev+"@"+f.home.name_abbrev),a.type.is_post_season?c.buyMLBTV="/mediacenter/index.jsp?affiliateId=mlbSCOREBOARD&tcid=mlb_scoreboard"+b:c.buyMLBTV="/mlb/subscriptions/index.jsp?product=mlbtv"+b,c.mlbtv=c.mlbtv&&r(c.mlbtv,a),c.postseason_tv=c.postseason_tv&&r(c.postseason_tv,a),e&&(c.genericGameday=q(e),c.gamedayVideo=q(e,"video"),c.preview=q(e,"preview"),c.preview_es=q(e,{mode:"preview",lang:"es"}),c.probables=c.preview,c.probables_es=c.preview_es,c.gameday=q(e,"gameday"),c.gameday_es=q(e,{mode:"gameday",lang:"es"}),c.classic=q(e,"classic"),c.atbat=q(e,"atbat"),c.wrapup=c.wrapup&&q(e,"wrap"),d.is_pre_game||d.is_during_game?a.is_minor_league?c.boxscore="/milb/stats/stats.jsp?t=g_box&gid="+a.gameday+b:c.boxscore="/news/boxscore.jsp?gid="+a.gameday:d.is_after_game&&(a.is_minor_league?c.boxscore="/milb/stats/stats.jsp?t=g_box&gid="+a.gameday+b:c.boxscore=q(e,"box")),d.is_during_game&&(c.gameday_audio=q(e,"audio")),(d.is_pre_game||d.is_during_game||d.is_after_game)&&(c.boxscore_es="/news/boxscore_es.jsp?gid="+a.gameday+b)),d.is_after_game&&(c.highlights="//m.mlb.com/video/?game_pk="+a.game_pk),a.links=c},extendGameScoreUpdated:function(a){if(a.status.is_during_game){var c=this.scoreUpdatedHash[a.gameday],d=b(a,"linescore.r.away")+"-"+b(a,"linescore.r.home");a.score_changed=c&&c!==d,this.scoreUpdatedHash[a.gameday]=d}},extendGameRunners:function(a){if(a.runners_on_base=a.runners_on_base||{},a.status.is_during_game){var b,c,d,e=this.runnersHash[a.gameday],f=a.status.inning+a.status.top_inning,g=a.runners_on_base;if(e&&e.inningKey===f)for(b=e.runnersOnBase,c=1;3>=c;++c)d="runner_on_"+c+"b",g[d]&&(g[d].previous=b[d],b[d]&&g[d].id===b[d].id||(g[d].moved=!0));this.runnersHash[a.gameday]={inningKey:f,runnersOnBase:g}}},extendLeagueTypeArea:function(a){var b=a.teams.home.league_code,c=a.teams.away.league_code,d=b||c;a.is_major_league=a.teams.away.is_major_league||a.teams.home.is_major_league,a.type.is_exhibition?a.leagueAreaKey="E":a.type.is_world_series?a.leagueAreaKey="WS_"+d:a.type.is_all_star_game?a.leagueAreaKey="AS_"+d:"undefined"==typeof d?a.leagueAreaKey=null:d===B||(d===A||d===z?a.leagueAreaKey=d:b===c?a.leagueAreaKey=d:a.leagueAreaKey="X_"+d)},addTeamToPlayer:function(a,b){a.team=b,a.id&&b.is_major_league&&(a.link="/team/player.jsp?player_id="+a.id)},extendPlayers:function(a){var d,e,f,g,h,i=a.teams.away,j=a.teams.home,k={},l=c(b(a,"home_runs.player"));for(k[i.code]=i,k[j.code]=j,d=0,e=l.length;e>d;++d)f=l[d],f.team_code&&f.team_code in k&&this.addTeamToPlayer(f,k[f.team_code]);for(g in k)h=k[g],h.probable_pitcher&&(h.probable_pitcher.last=h.probable_pitcher.last||h.probable_pitcher.last_name,h.probable_pitcher.last&&this.addTeamToPlayer(h.probable_pitcher,h));a.pitcher&&a.teams.pitching&&this.addTeamToPlayer(a.pitcher,a.teams.pitching),a.batter&&a.teams.batting&&this.addTeamToPlayer(a.batter,a.teams.batting),a.winning_pitcher&&a.teams.winning&&this.addTeamToPlayer(a.winning_pitcher,a.teams.winning),a.losing_pitcher&&a.teams.losing&&this.addTeamToPlayer(a.losing_pitcher,a.teams.losing),a.save_pitcher&&a.teams.winning&&this.addTeamToPlayer(a.save_pitcher,a.teams.winning)},extendWinningTeams:function(a){var b=a.teams,c=b.away,d=b.home,e=a.linescore.r,f=+e.away,g=+e.home;f>g?(b.winning=c,b.losing=d):g>f&&(b.winning=d,b.losing=c)},sortByGameStatus:function(a){if(0===a.length)return[];var b,c,d,e={during:[],before:[],after:[],nixed:[]};for(b=0,c=a.length;c>b;++b)d=a[b],d.status.epg&&e[d.status.epg].push(d);return[].concat(e.during,e.before,e.after,e.nixed)},extendPlayByPlay:function(a){var b=a.pbp;a.pbp&&b.last&&(b.last=b.last.replace(/\s+/g," "),b.last_truncated=b.last.substr(0,120))},extendPostseason:function(a,b){var c=a.type,d=+a.series_num,e=a.teams,f=e.away,g=e.home,h=new Date(b).getFullYear(),i=a.series={series:a.series,num:d};c.is_division_series&&"2012"==h?3===d||4===d||5===d?(i.home=g,i.away=f):(i.home=f,i.away=g):c.is_division_series?1===d||2===d||5===d?(i.home=g,i.away=f):(i.home=f,i.away=g):(c.is_league_series||c.is_world_series)&&(1===d||2===d||6===d||7===d?(i.home=g,i.away=f):(i.home=f,i.away=g)),f.win>g.win?(i.leading=f,i.trailing=g):g.win>f.win&&(i.leading=g,i.trailing=f)},trimProperties:function(a){var b={ampm:a.ampm,calendar_event_id:a.calendar_event_id,away:a.teams.away,away_probable:a.teams.away.probable_pitcher,batter:a.batter,challenge_team:a.status.challenge_team_brief,description:a.description,double_header_sw:a.double_header_sw,due_up_batter:a.due_up_batter,due_up_ondeck:a.due_up_ondeck,due_up_inhole:a.due_up_inhole,gameday:a.gameday,gameday_sw:a.gameday_sw,game_media:a.game_media,game_number:a.game_number,game_pk:a.game_pk,game_type:a.game_type,has_resumption:a.has_resumption,home:a.teams.home,home_probable:a.teams.home.probable_pitcher,id:a.id,if_necessary:a.if_necessary,inhole:a.inhole,is_doubleheader:a.is_doubleheader,is_featured:a.is_featured,is_gotd:a.is_gotd,is_free_gotd:a.is_free_gotd,is_enhanced_gotd:a.is_enhanced_gotd,is_resumption:a.is_resumption,is_tbd:a.is_tbd,league:a.league,leagueAreaKey:a.leagueAreaKey,linescore:a.linescore,links:a.links,losing_pitcher:a.losing_pitcher,ondeck:a.ondeck,original_date:a.original_date,original_date_formatted:a.original_date_formatted,pbp:a.pbp,pitcher:a.pitcher,resume_date:a.resume_date,resume_date_formatted:a.resume_date_formatted,runners_on_base:a.runners_on_base,save_pitcher:a.save_pitcher,season:a.season,scheduled_innings:a.scheduled_innings,score_changed:a.score_changed,series:a.series,ser_games:a.ser_games,ser_home_nbr:a.ser_home_nbr,status:a.status,status_text:a.status_text,teams:a.teams,time:a.time,type:a.type,video_thumbnails:a.video_thumbnails,video_thumbnail:a.video_thumbnail,winning_pitcher:a.winning_pitcher,rawGame:a};return b},sortByGameType:function(a){if(0===a.length)return[];var b,c,d,e={A:[],R:[],S:[],E:[],F:[],D:[],L:[],W:[]};for(b=0,c=a.length;c>b;++b)d=a[b],d.game_type&&e[d.game_type].push(d);return[].concat(e.A,e.R,e.S,e.E,e.F,e.D,e.L,e.W)},extendGame:function(a,b){return this.extendGameTime(a,b),this.extendGameType(a),this.extendGameStatus(a),this.extendGameTeams(a),this.extendGameMedia(a),this.extendHomeRuns(a),this.extendLinescore(a),this.extendDoubleheader(a),this.extendLinks(a),this.extendGameScoreUpdated(a),this.extendGameRunners(a),this.extendLeagueTypeArea(a),this.extendPlayByPlay(a),this.extendPostseason(a,b),a.status.is_after_game&&this.extendWinningTeams(a),this.extendPlayers(a),a=this.trimProperties(a)},getUrlForDate:function(a,b,c){var b=b?b:"mlb",d="";return c||(d+="/gdcross/components/game/"+b),d+="/year_"+a.getFullYear()+"/month_"+k(a.getMonth()+1)+"/day_"+k(a.getDate())+"/master_scoreboard.json"},load:function(b,c){var e=this.gameDates,f=d(b),g=this.getDataSourceUrl(f,c);e[b]=g,this.url=a.map(e,function(a,b){return a}),this.get(),this.start()},getDataSourceUrl:function(a,b){var c=b?b.sport_code:"",d=b?b.excludeGdcrossAndSportCode:!1,e=this.getUrlForDate(a,c,d);if(b&&b.enableGdxDomain&&(u=!0),b&&b.isQA&&(v=!0,u=!0),u){var f=v?"qa":"prod",g=b.gdxDomains?b.gdxDomains:t,h=g[f];e=h+e}return e},get:function(){function d(d){a.getJSON(d).done(function(d){var f=b(d,"data.games"),g=[f.year,f.month,f.day].join("/"),h=a.map(c(f.game),function(a,b){return e.extendGame(a,g)});h=e.sortByGameType(h);var i={date:g,games:e.sortByGameStatus(h)};e.trigger("success",i)}).fail(function(){e.trigger("error")})}var e=this,f=this.url,g=this.gameDates;for(var h in g)g.hasOwnProperty(h)&&(f=g[h],d(f))},start:function(){function a(){b.get(),b.start()}var b=this,c=this.url;c.forEach(function(){clearTimeout(b.timers[arguments[1]]),b.timers[arguments[1]]=setTimeout(a,s)})},stop:function(){this.timers.forEach(function(a){clearTimeout(a),delete a})},destroy:function(){this.stop(),this.url=[],this.gameDates={}}},m}),define("ticketingService/ticketingService",["require","exports","module","jquery","deepObject/get","ensureArray/ensureArray","ensureDate/ensureDate","events/paperboy","formatDate/formatDate"],function(a,b,c){function d(a){this.options=e.extend({i18n:"en"},a),this.trigger=i(this,["loadSuccess"]),this.timer}var e=a("jquery"),f=a("deepObject/get"),g=a("ensureArray/ensureArray"),h=a("ensureDate/ensureDate"),i=a("events/paperboy").mixin,j=a("formatDate/formatDate"),k=/^(\d{4})(\d{2})(\d{2})/,l="$1/$2/$3",m=1e5;return d.prototype={load:function(){var a=h(this.options.date),b=j.toYMD(a),c=this;return e.ajax({url:"/ticketing-client/json/Game.tiksrv",dataType:"text",data:{sport_id:1,site_section:"'DEFAULT'",ticket_category:"'TICKETS'",begin_date:b,end_date:b,year:a.getFullYear()},dataFilter:function(a){var b=g(f(e.parseJSON(a),"events.game")),d=e.map(b,function(a){var b=a.ticket_link;return b.game_pk=a.schedule_id,b.schedule_id=a.schedule_id,b.away_or_home=b.team_id===a.home_team_id&&"home"||b.team_id===a.away_team_id&&"away",b.on_sale_start_date=b.on_sale_start_date&&b.on_sale_start_date.replace(k,l),b.on_sale_end_date=b.on_sale_end_date&&b.on_sale_end_date.replace(k,l),b});return c.trigger("loadSuccess",d),d}})},start:function(){function a(){b.load(),b.start()}var b=this;this.timer=setTimeout(a,m)},stop:function(){clearTimeout(this.timer),delete this.timer}},d}),define("GameModel/GameModel",["require","exports","module","MasterScoreboard/MasterScoreboard","ticketingService/ticketingService","events/paperboy","floorDate/floorDate","flipDate/flipDate","ensureArray/ensureArray","jquery"],function(a,b,c){function d(a){return j("day","undefined"==typeof a?k.today():a)}function e(a,b){return b.removeExhibitionGames?a.filter(function(a){return"E"!=a.game_type?a:void 0}):a}function f(a){this.options=n(!0,{isQA:!1,enableGdxDomain:!1,removeExhibitionGames:!0,date:void 0,enableTicketing:!1,enableLookin:!1},a);this.events=["refresh","loadSuccess","loadError","empty"],this.trigger=i.mixin(this,this.events),this.msb=new this.MasterScoreboard}var g=a("MasterScoreboard/MasterScoreboard"),h=a("ticketingService/ticketingService"),i=a("events/paperboy"),j=a("floorDate/floorDate"),k=a("flipDate/flipDate"),l=a("ensureArray/ensureArray"),m=a("jquery"),n=m.extend;f.prototype={MasterScoreboard:g,init:function(){var a=this;a.options.enableTicketing&&a.initTickets(),a.initMasterScoreboard()},initGameService:function(){var a=this,b=this.options,c=this.gameService=GameService,f=this.trigger,g=d(b.date),h=this.options.isQA;c.setQA(h),this.games=[],c.loadDay(g).done(function(c){c.on("update",function(c){a.games=e(l(c.games),b),a.extendGames(a.games),a.games&&a.games.length?f("refresh",a.games):(f("empty"),f("refresh",a.games))}),a.games=e(l(c.games),b),a.extendGames(a.games),a.games&&a.games.length?f("loadSuccess",a.games):(f("empty"),f("loadSuccess",a.games))})},initMasterScoreboard:function(){var a=this,b=this.options,c=d(b.date),f=this.msb,g=this.trigger;f.on("success",function(c){c.games=e(l(c.games),b),a.extendGames(c.games),c.games&&c.games.length?g("loadSuccess",c):(g("empty"),g("loadSuccess",c))}),f.on("error",function(){g("loadError")}),f.load(c,b),f.start()},load:function(a){var b=this.msb;this.options.date=a,b.stop(),b.load(a,this.options),b.start(),this.options.enableTicketing&&this.initTickets()},initTickets:function(){var a=this,b=this.options.date,c=this.ticketService=new h({date:b});m.Deferred();c.start(),c.on("loadSuccess",function(b){b&&b.length?a.options.extender&&(a.options.extender.setTicketCache(b),a.games&&a.games.length&&(a.extendGames(a.games),a.trigger("refresh",a.games))):c.stop()}),c.load()},setLookInData:function(a){this.options.extender&&this.options.extender.setLookin(a)},clearLookInData:function(){this.options.extender&&this.options.extender.clearLookin()},extendGames:function(a){if(this.options.extender){var b=this.options.extender;a.forEach(function(a){b.extendGame(a)})}},destroy:function(){this.msb.destroy(),this.ticketService&&(this.ticketService.stop(),this.ticketService=null)}},f.createModel=function(a){var b=m.Deferred(),c=this;return m.when(new c(a)).done(function(a){b.resolve(a)}),b.promise()},c.exports=f}),function(){!function(a){var b=this||(0,eval)("this"),c=b.document,d=b.navigator,e=b.jQuery,f=b.JSON;!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(module.exports||exports):"function"==typeof define&&define.amd?define("knockout/index",["exports"],a):a(b.ko={})}(function(g){function h(a,b){return null===a||typeof a in m?a===b:!1}function i(b,c){var d;return function(){d||(d=setTimeout(function(){d=a,b()},c))}}function j(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function k(a,b,c,d){l.d[a]={init:function(a,e,f,g,h){var i,j;return l.ba(function(){var f=l.a.c(e()),g=!c!=!f,k=!j;(k||b||g!==i)&&(k&&l.ca.fa()&&(j=l.a.lb(l.e.childNodes(a),!0)),g?(k||l.e.U(a,l.a.lb(j)),l.gb(d?d(h,f):h,a)):l.e.da(a),i=g)},null,{G:a}),{controlsDescendantBindings:!0}}},l.g.aa[a]=!1,l.e.Q[a]=!0}var l="undefined"!=typeof g?g:{};l.b=function(a,b){for(var c=a.split("."),d=l,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},l.s=function(a,b,c){a[b]=c},l.version="3.1.0",l.b("version",l.version),l.a=function(){function g(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function h(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function i(a,b){return a.__proto__=b,a}var j={__proto__:[]}instanceof Array,k={},m={};k[d&&/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],k.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),g(k,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)m[b[c]]=a});var n={propertychange:!0},o=c&&function(){for(var b=3,d=c.createElement("div"),e=d.getElementsByTagName("i");d.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",e[0];);return b>4?b:a}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},l:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},hb:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d))return a[d];return null},ma:function(a,b){var c=l.a.l(a,b);c>0?a.splice(c,1):0===c&&a.shift()},ib:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)0>l.a.l(b,a[c])&&b.push(a[c]);return b},ya:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d],d));return c},la:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d],d)&&c.push(a[d]);return c},$:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},Y:function(a,b,c){var d=l.a.l(l.a.Sa(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},na:j,extend:h,ra:i,sa:j?i:h,A:g,Oa:function(a,b){if(!a)return a;var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=b(a[c],c,a));return d},Fa:function(a){for(;a.firstChild;)l.removeNode(a.firstChild)},ec:function(a){a=l.a.R(a);for(var b=c.createElement("div"),d=0,e=a.length;e>d;d++)b.appendChild(l.M(a[d]));return b},lb:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var f=a[c].cloneNode(!0);e.push(b?l.M(f):f)}return e},U:function(a,b){if(l.a.Fa(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},Bb:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(f=0,g=c.length;g>f;f++)l.removeNode(c[f])}},ea:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.shift();if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},Db:function(a,b){7>o?a.setAttribute("selected",b):a.selected=b},ta:function(b){return null===b||b===a?"":b.trim?b.trim():b.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oc:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;f>e;e++){var g=l.a.ta(d[e]);""!==g&&c.push(g)}return c},kc:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},Sb:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},Ea:function(a){return l.a.Sb(a,a.ownerDocument.documentElement)},eb:function(a){return!!l.a.hb(a,l.a.Ea)},B:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},q:function(a,b,c){var d=o&&n[b];if(!d&&e)e(a).bind(b,c);else if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var f=function(b){c.call(a,b)},g="on"+b;a.attachEvent(g,f),l.a.u.ja(a,function(){a.detachEvent(g,f)})}else a.addEventListener(b,c,!1)},ha:function(a,d){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var f;if("input"===l.a.B(a)&&a.type&&"click"==d.toLowerCase()?(f=a.type,f="checkbox"==f||"radio"==f):f=!1,e&&!f)e(a).trigger(d);else if("function"==typeof c.createEvent){if("function"!=typeof a.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");f=c.createEvent(m[d]||"HTMLEvents"),f.initEvent(d,!0,!0,b,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(f)}else if(f&&a.click)a.click();else{if("undefined"==typeof a.fireEvent)throw Error("Browser doesn't support triggering events");a.fireEvent("on"+d)}},c:function(a){return l.v(a)?a():a},Sa:function(a){return l.v(a)?a.o():a},ua:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];l.a.r(b.match(d),function(a){l.a.Y(e,a,c)}),a.className=e.join(" ")}},Xa:function(b,c){var d=l.a.c(c);(null===d||d===a)&&(d="");var e=l.e.firstChild(b);!e||3!=e.nodeType||l.e.nextSibling(e)?l.e.U(b,[b.ownerDocument.createTextNode(d)]):e.data=d,l.a.Vb(b)},Cb:function(a,b){if(a.name=b,7>=o)try{a.mergeAttributes(c.createElement("<input name='"+a.name+"'/>"),!1)}catch(d){}},Vb:function(a){o>=9&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},Tb:function(a){if(o){var b=a.style.width;a.style.width=0,a.style.width=b}},ic:function(a,b){a=l.a.c(a),b=l.a.c(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},R:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},mc:6===o,nc:7===o,oa:o,ob:function(a,b){for(var c=l.a.R(a.getElementsByTagName("input")).concat(l.a.R(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},fc:function(a){return"string"==typeof a&&(a=l.a.ta(a))?f&&f.parse?f.parse(a):new Function("return "+a)():null},Ya:function(a,b,c){if(!f||!f.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return f.stringify(l.a.c(a),b,c)},gc:function(a,b,d){d=d||{};var e=d.params||{},f=d.includeFields||this.mb,h=a;if("object"==typeof a&&"form"===l.a.B(a))for(var h=a.action,i=f.length-1;i>=0;i--)for(var j=l.a.ob(a,f[i]),k=j.length-1;k>=0;k--)e[j[k].name]=j[k].value;b=l.a.c(b);var m=c.createElement("form");m.style.display="none",m.action=h,m.method="post";for(var n in b)a=c.createElement("input"),a.name=n,a.value=l.a.Ya(l.a.c(b[n])),m.appendChild(a);g(e,function(a,b){var d=c.createElement("input");d.name=a,d.value=b,m.appendChild(d)}),c.body.appendChild(m),d.submitter?d.submitter(m):m.submit(),setTimeout(function(){m.parentNode.removeChild(m)},0)}}}(),l.b("utils",l.a),l.b("utils.arrayForEach",l.a.r),l.b("utils.arrayFirst",l.a.hb),l.b("utils.arrayFilter",l.a.la),l.b("utils.arrayGetDistinctValues",l.a.ib),l.b("utils.arrayIndexOf",l.a.l),
l.b("utils.arrayMap",l.a.ya),l.b("utils.arrayPushAll",l.a.$),l.b("utils.arrayRemoveItem",l.a.ma),l.b("utils.extend",l.a.extend),l.b("utils.fieldsIncludedWithJsonPost",l.a.mb),l.b("utils.getFormFields",l.a.ob),l.b("utils.peekObservable",l.a.Sa),l.b("utils.postJson",l.a.gc),l.b("utils.parseJson",l.a.fc),l.b("utils.registerEventHandler",l.a.q),l.b("utils.stringifyJson",l.a.Ya),l.b("utils.range",l.a.ic),l.b("utils.toggleDomNodeCssClass",l.a.ua),l.b("utils.triggerEvent",l.a.ha),l.b("utils.unwrapObservable",l.a.c),l.b("utils.objectForEach",l.a.A),l.b("utils.addOrRemoveItem",l.a.Y),l.b("unwrap",l.a.c),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);return a=c.shift(),function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),l.a.f=new function(){function b(b,f){var g=b[d];if(!g||"null"===g||!e[g]){if(!f)return a;g=b[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=b(c,!1);return e===a?a:e[d]},set:function(c,d,e){(e!==a||b(c,!1)!==a)&&(b(c,!0)[d]=e)},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},L:function(){return c++ +d}}},l.b("utils.domData",l.a.f),l.b("utils.domData.clear",l.a.f.clear),l.a.u=new function(){function b(b,c){var e=l.a.f.get(b,d);return e===a&&c&&(e=[],l.a.f.set(b,d,e)),e}function c(a){var d=b(a,!1);if(d)for(var d=d.slice(0),e=0;e<d.length;e++)d[e](a);if(l.a.f.clear(a),l.a.u.cleanExternalData(a),g[a.nodeType])for(d=a.firstChild;a=d;)d=a.nextSibling,8===a.nodeType&&c(a)}var d=l.a.f.L(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{ja:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},Ab:function(c,e){var f=b(c,!1);f&&(l.a.ma(f,e),0==f.length&&l.a.f.set(c,d,a))},M:function(a){if(f[a.nodeType]&&(c(a),g[a.nodeType])){var b=[];l.a.$(b,a.getElementsByTagName("*"));for(var d=0,e=b.length;e>d;d++)c(b[d])}return a},removeNode:function(a){l.M(a),a.parentNode&&a.parentNode.removeChild(a)},cleanExternalData:function(a){e&&"function"==typeof e.cleanData&&e.cleanData([a])}}},l.M=l.a.u.M,l.removeNode=l.a.u.removeNode,l.b("cleanNode",l.M),l.b("removeNode",l.removeNode),l.b("utils.domNodeDisposal",l.a.u),l.b("utils.domNodeDisposal.addDisposeCallback",l.a.u.ja),l.b("utils.domNodeDisposal.removeDisposeCallback",l.a.u.Ab),function(){l.a.Qa=function(a){var d;if(e){if(e.parseHTML)d=e.parseHTML(a)||[];else if((d=e.clean([a]))&&d[0]){for(a=d[0];a.parentNode&&11!==a.parentNode.nodeType;)a=a.parentNode;a.parentNode&&a.parentNode.removeChild(a)}}else{var f=l.a.ta(a).toLowerCase();for(d=c.createElement("div"),f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],a="ignored<div>"+f[1]+a+f[2]+"</div>","function"==typeof b.innerShiv?d.appendChild(b.innerShiv(a)):d.innerHTML=a;f[0]--;)d=d.lastChild;d=l.a.R(d.lastChild.childNodes)}return d},l.a.Va=function(b,c){if(l.a.Fa(b),c=l.a.c(c),null!==c&&c!==a)if("string"!=typeof c&&(c=c.toString()),e)e(b).html(c);else for(var d=l.a.Qa(c),f=0;f<d.length;f++)b.appendChild(d[f])}}(),l.b("utils.parseHtmlFragment",l.a.Qa),l.b("utils.setHtml",l.a.Va),l.w=function(){function b(a,c){if(a)if(8==a.nodeType){var d=l.w.xb(a.nodeValue);null!=d&&c.push({Rb:a,cc:d})}else if(1==a.nodeType)for(var d=0,e=a.childNodes,f=e.length;f>d;d++)b(e[d],c)}var c={};return{Na:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return c[b]=a,"<!--[ko_memo:"+b+"]-->"},Hb:function(b,d){var e=c[b];if(e===a)throw Error("Couldn't find any memo with ID "+b+". Perhaps it's already been unmemoized.");try{return e.apply(null,d||[]),!0}finally{delete c[b]}},Ib:function(a,c){var d=[];b(a,d);for(var e=0,f=d.length;f>e;e++){var g=d[e].Rb,h=[g];c&&l.a.$(h,c),l.w.Hb(d[e].cc,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},xb:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}(),l.b("memoization",l.w),l.b("memoization.memoize",l.w.Na),l.b("memoization.unmemoize",l.w.Hb),l.b("memoization.parseMemoText",l.w.xb),l.b("memoization.unmemoizeDomNodeAndDescendants",l.w.Ib),l.Ga={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return l.h({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},rateLimit:function(a,b){var c,d,e;"number"==typeof b?c=b:(c=b.timeout,d=b.method),e="notifyWhenChangesStop"==d?j:i,a.Ma(function(a){return e(a,c)})},notify:function(a,b){a.equalityComparer="always"==b?null:h}};var m={undefined:1,"boolean":1,number:1,string:1};l.b("extenders",l.Ga),l.Fb=function(a,b,c){this.target=a,this.za=b,this.Qb=c,this.sb=!1,l.s(this,"dispose",this.F)},l.Fb.prototype.F=function(){this.sb=!0,this.Qb()},l.N=function(){l.a.sa(this,l.N.fn),this.H={}};var n="change";g={V:function(a,b,c){var d=this;c=c||n;var e=new l.Fb(d,b?a.bind(b):a,function(){l.a.ma(d.H[c],e)});return d.o&&d.o(),d.H[c]||(d.H[c]=[]),d.H[c].push(e),e},notifySubscribers:function(a,b){if(b=b||n,this.qb(b))try{l.k.jb();for(var c,d=this.H[b].slice(0),e=0;c=d[e];++e)c.sb||c.za(a)}finally{l.k.end()}},Ma:function(a){var b,c,d,e=this,f=l.v(e);e.ia||(e.ia=e.notifySubscribers,e.notifySubscribers=function(a,b){b&&b!==n?"beforeChange"===b?e.bb(a):e.ia(a,b):e.cb(a)});var g=a(function(){f&&d===e&&(d=e()),b=!1,e.Ka(c,d)&&e.ia(c=d)});e.cb=function(a){b=!0,d=a,g()},e.bb=function(a){b||(c=a,e.ia(a,"beforeChange"))}},qb:function(a){return this.H[a]&&this.H[a].length},Wb:function(){var a=0;return l.a.A(this.H,function(b,c){a+=c.length}),a},Ka:function(a,b){return!this.equalityComparer||!this.equalityComparer(a,b)},extend:function(a){var b=this;return a&&l.a.A(a,function(a,c){var d=l.Ga[a];"function"==typeof d&&(b=d(b,c)||b)}),b}},l.s(g,"subscribe",g.V),l.s(g,"extend",g.extend),l.s(g,"getSubscriptionsCount",g.Wb),l.a.na&&l.a.ra(g,Function.prototype),l.N.fn=g,l.tb=function(a){return null!=a&&"function"==typeof a.V&&"function"==typeof a.notifySubscribers},l.b("subscribable",l.N),l.b("isSubscribable",l.tb),l.ca=l.k=function(){function a(a){d.push(c),c=a}function b(){c=d.pop()}var c,d=[],e=0;return{jb:a,end:b,zb:function(a){if(c){if(!l.tb(a))throw Error("Only subscribable things can act as dependencies");c.za(a,a.Kb||(a.Kb=++e))}},t:function(c,d,e){try{return a(),c.apply(d,e||[])}finally{b()}},fa:function(){return c?c.ba.fa():void 0},pa:function(){return c?c.pa:void 0}}}(),l.b("computedContext",l.ca),l.b("computedContext.getDependenciesCount",l.ca.fa),l.b("computedContext.isInitial",l.ca.pa),l.m=function(a){function b(){return 0<arguments.length?(b.Ka(c,arguments[0])&&(b.P(),c=arguments[0],b.O()),this):(l.k.zb(b),c)}var c=a;return l.N.call(b),l.a.sa(b,l.m.fn),b.o=function(){return c},b.O=function(){b.notifySubscribers(c)},b.P=function(){b.notifySubscribers(c,"beforeChange")},l.s(b,"peek",b.o),l.s(b,"valueHasMutated",b.O),l.s(b,"valueWillMutate",b.P),b},l.m.fn={equalityComparer:h};var o=l.m.hc="__ko_proto__";l.m.fn[o]=l.m,l.a.na&&l.a.ra(l.m.fn,l.N.fn),l.Ha=function(b,c){return null===b||b===a||b[o]===a?!1:b[o]===c?!0:l.Ha(b[o],c)},l.v=function(a){return l.Ha(a,l.m)},l.ub=function(a){return"function"==typeof a&&a[o]===l.m||"function"==typeof a&&a[o]===l.h&&a.Yb?!0:!1},l.b("observable",l.m),l.b("isObservable",l.v),l.b("isWriteableObservable",l.ub),l.T=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return a=l.m(a),l.a.sa(a,l.T.fn),a.extend({trackArrayChanges:!0})},l.T.fn={remove:function(a){for(var b=this.o(),c=[],d="function"!=typeof a||l.v(a)?function(b){return b===a}:a,e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.P(),c.push(f),b.splice(e,1),e--)}return c.length&&this.O(),c},removeAll:function(b){if(b===a){var c=this.o(),d=c.slice(0);return this.P(),c.splice(0,c.length),this.O(),d}return b?this.remove(function(a){return 0<=l.a.l(b,a)}):[]},destroy:function(a){var b=this.o(),c="function"!=typeof a||l.v(a)?function(b){return b===a}:a;this.P();for(var d=b.length-1;d>=0;d--)c(b[d])&&(b[d]._destroy=!0);this.O()},destroyAll:function(b){return b===a?this.destroy(function(){return!0}):b?this.destroy(function(a){return 0<=l.a.l(b,a)}):[]},indexOf:function(a){var b=this();return l.a.l(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.P(),this.o()[c]=b,this.O())}},l.a.r("pop push reverse shift sort splice unshift".split(" "),function(a){l.T.fn[a]=function(){var b=this.o();return this.P(),this.kb(b,a,arguments),b=b[a].apply(b,arguments),this.O(),b}}),l.a.r(["slice"],function(a){l.T.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),l.a.na&&l.a.ra(l.T.fn,l.m.fn),l.b("observableArray",l.T);var p="arrayChange";l.Ga.trackArrayChanges=function(a){function b(){if(!c){c=!0;var b=a.notifySubscribers;a.notifySubscribers=function(a,c){return c&&c!==n||++e,b.apply(this,arguments)};var f=[].concat(a.o()||[]);d=null,a.V(function(b){if(b=[].concat(b||[]),a.qb(p)){var c;(!d||e>1)&&(d=l.a.Aa(f,b,{sparse:!0})),c=d,c.length&&a.notifySubscribers(c,p)}f=b,d=null,e=0})}}if(!a.kb){var c=!1,d=null,e=0,f=a.V;a.V=a.subscribe=function(a,c,d){return d===p&&b(),f.apply(this,arguments)},a.kb=function(a,b,f){function g(a,b,c){return h[h.length]={status:a,value:b,index:c}}if(c&&!e){var h=[],i=a.length,j=f.length,k=0;switch(b){case"push":k=i;case"unshift":for(b=0;j>b;b++)g("added",f[b],k+b);break;case"pop":k=i-1;case"shift":i&&g("deleted",a[k],k);break;case"splice":b=Math.min(Math.max(0,0>f[0]?i+f[0]:f[0]),i);for(var i=1===j?i:Math.min(b+(f[1]||0),i),j=b+j-2,k=Math.max(i,j),m=[],n=[],o=2;k>b;++b,++o)i>b&&n.push(g("deleted",a[b],b)),j>b&&m.push(g("added",f[o],b));l.a.nb(n,m);break;default:return}d=h}}}},l.ba=l.h=function(a,b,c){function d(){n=!0,l.a.A(u,function(a,b){b.F()}),u={},v=0,j=!1}function e(){var a=g.throttleEvaluation;a&&a>=0?(clearTimeout(w),w=setTimeout(f,a)):g.wa?g.wa():f()}function f(){if(!k&&!n){if(s&&s()){if(!m)return void t()}else m=!1;k=!0;try{var a=u,c=v;l.k.jb({za:function(b,d){n||(c&&a[d]?(u[d]=a[d],++v,delete a[d],--c):u[d]||(u[d]=b.V(e),++v))},ba:g,pa:!v}),u={},v=0;try{var d=b?o.call(b):o()}finally{l.k.end(),c&&l.a.A(a,function(a,b){b.F()}),j=!1}g.Ka(i,d)&&(g.notifySubscribers(i,"beforeChange"),i=d,g.wa&&!g.throttleEvaluation||g.notifySubscribers(i))}finally{k=!1}v||t()}}function g(){if(0<arguments.length){if("function"!=typeof p)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return p.apply(b,arguments),this}return j&&f(),l.k.zb(g),i}function h(){return j||v>0}var i,j=!0,k=!1,m=!1,n=!1,o=a;if(o&&"object"==typeof o?(c=o,o=c.read):(c=c||{},o||(o=c.read)),"function"!=typeof o)throw Error("Pass a function that returns the value of the ko.computed");var p=c.write,q=c.disposeWhenNodeIsRemoved||c.G||null,r=c.disposeWhen||c.Da,s=r,t=d,u={},v=0,w=null;b||(b=c.owner),l.N.call(g),l.a.sa(g,l.h.fn),g.o=function(){return j&&!v&&f(),i},g.fa=function(){return v},g.Yb="function"==typeof c.write,g.F=function(){t()},g.ga=h;var x=g.Ma;return g.Ma=function(a){x.call(g,a),g.wa=function(){g.bb(i),j=!0,g.cb(g)}},l.s(g,"peek",g.o),l.s(g,"dispose",g.F),l.s(g,"isActive",g.ga),l.s(g,"getDependenciesCount",g.fa),q&&(m=!0,q.nodeType&&(s=function(){return!l.a.Ea(q)||r&&r()})),!0!==c.deferEvaluation&&f(),q&&h()&&q.nodeType&&(t=function(){l.a.u.Ab(q,t),d()},l.a.u.ja(q,t)),g},l.$b=function(a){return l.Ha(a,l.h)},g=l.m.hc,l.h[g]=l.m,l.h.fn={equalityComparer:h},l.h.fn[g]=l.h,l.a.na&&l.a.ra(l.h.fn,l.N.fn),l.b("dependentObservable",l.h),l.b("computed",l.h),l.b("isComputed",l.$b),function(){function b(e,f,g){if(g=g||new d,e=f(e),"object"!=typeof e||null===e||e===a||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean)return e;var h=e instanceof Array?[]:{};return g.save(e,h),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":h[c]=d;break;case"object":case"undefined":var i=g.get(d);h[c]=i!==a?i:b(d,f,g)}}),h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[],this.ab=[]}l.Gb=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(a,function(a){for(var b=0;l.v(a)&&10>b;b++)a=a();return a})},l.toJSON=function(a,b,c){return a=l.Gb(a),l.a.Ya(a,b,c)},d.prototype={save:function(a,b){var c=l.a.l(this.keys,a);c>=0?this.ab[c]=b:(this.keys.push(a),this.ab.push(b))},get:function(b){return b=l.a.l(this.keys,b),b>=0?this.ab[b]:a}}}(),l.b("toJS",l.Gb),l.b("toJSON",l.toJSON),function(){l.i={p:function(b){switch(l.a.B(b)){case"option":return!0===b.__ko__hasDomDataOptionValue__?l.a.f.get(b,l.d.options.Pa):7>=l.a.oa?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case"select":return 0<=b.selectedIndex?l.i.p(b.options[b.selectedIndex]):a;default:return b.value}},X:function(b,c,d){switch(l.a.B(b)){case"option":switch(typeof c){case"string":l.a.f.set(b,l.d.options.Pa,a),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c;break;default:l.a.f.set(b,l.d.options.Pa,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"==typeof c?c:""}break;case"select":(""===c||null===c)&&(c=a);for(var e,f=-1,g=0,h=b.options.length;h>g;++g)if(e=l.i.p(b.options[g]),e==c||""==e&&c===a){f=g;break}(d||f>=0||c===a&&1<b.size)&&(b.selectedIndex=f);break;default:(null===c||c===a)&&(c=""),b.value=c}}}}(),l.b("selectExtensions",l.i),l.b("selectExtensions.readValue",l.i.p),l.b("selectExtensions.writeValue",l.i.X),l.g=function(){function a(a){a=l.a.ta(a),123===a.charCodeAt(0)&&(a=a.slice(1,-1));var b,c,g=[],h=a.match(d),i=0;if(h){h.push(",");for(var j,k=0;j=h[k];++k){var m=j.charCodeAt(0);if(44===m){if(0>=i){b&&g.push(c?{key:b,value:c.join("")}:{unknown:b}),b=c=i=0;continue}}else if(58===m){if(!c)continue}else if(47===m&&k&&1<j.length)(m=h[k-1].match(e))&&!f[m[0]]&&(a=a.substr(a.indexOf(j)+1),h=a.match(d),h.push(","),k=-1,j="/");else if(40===m||123===m||91===m)++i;else if(41===m||125===m||93===m)--i;else if(!b&&!c){b=34===m||39===m?j.slice(1,-1):j;continue}c?c.push(j):c=[j]}}return g}var b=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,d=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),e=/[\])"'A-Za-z0-9_$]+$/,f={"in":1,"return":1,"typeof":1},g={};return{aa:[],W:g,Ra:a,qa:function(d,e){function f(a,d){var e,k=l.getBindingHandler(a);(k&&k.preprocess?d=k.preprocess(d,a,f):1)&&((k=g[a])&&(e=d,0<=l.a.l(b,e)?e=!1:(k=e.match(c),e=null===k?!1:k[1]?"Object("+k[1]+")"+k[2]:e),k=e),k&&i.push("'"+a+"':function(_z){"+e+"=_z}"),j&&(d="function(){return "+d+" }"),h.push("'"+a+"':"+d))}e=e||{};var h=[],i=[],j=e.valueAccessors,k="string"==typeof d?a(d):d;return l.a.r(k,function(a){f(a.key||a.unknown,a.value)}),i.length&&f("_ko_property_writers","{"+i.join(",")+" }"),h.join(",")},bc:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},va:function(a,b,c,d,e){a&&l.v(a)?!l.ub(a)||e&&a.o()===d||a(d):(a=b.get("_ko_property_writers"))&&a[c]&&a[c](d)}}}(),l.b("expressionRewriting",l.g),l.b("expressionRewriting.bindingRewriteValidators",l.g.aa),l.b("expressionRewriting.parseObjectLiteral",l.g.Ra),l.b("expressionRewriting.preProcessBindings",l.g.qa),l.b("expressionRewriting._twoWayBindings",l.g.W),l.b("jsonExpressionRewriting",l.g),l.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",l.g.qa),function(){function a(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function b(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&(f--,0===f))return g;g.push(e),a(e)&&f++}if(!d)throw Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function e(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=c&&"<!--test-->"===c.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,i={ul:!0,ol:!0};l.e={Q:{},childNodes:function(b){return a(b)?d(b):b.childNodes},da:function(b){if(a(b)){b=l.e.childNodes(b);for(var c=0,d=b.length;d>c;c++)l.removeNode(b[c])}else l.a.Fa(b)},U:function(b,c){if(a(b)){l.e.da(b);for(var d=b.nextSibling,e=0,f=c.length;f>e;e++)d.parentNode.insertBefore(c[e],d)}else l.a.U(b,c)},yb:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},rb:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):l.e.yb(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},Xb:a,lc:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},wb:function(c){if(i[l.a.B(c)]){var d=c.firstChild;if(d)do if(1===d.nodeType){var f;f=d.firstChild;var g=null;if(f)do if(g)g.push(f);else if(a(f)){var h=e(f,!0);h?f=h:g=[f]}else b(f)&&(g=[f]);while(f=f.nextSibling);if(f=g)for(g=d.nextSibling,h=0;h<f.length;h++)g?c.insertBefore(f[h],g):c.appendChild(f[h])}while(d=d.nextSibling)}}}}(),l.b("virtualElements",l.e),l.b("virtualElements.allowedBindings",l.e.Q),l.b("virtualElements.emptyNode",l.e.da),l.b("virtualElements.insertAfter",l.e.rb),l.b("virtualElements.prepend",l.e.yb),l.b("virtualElements.setDomNodeChildren",l.e.U),function(){l.J=function(){this.Nb={}},l.a.extend(l.J.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return l.e.Xb(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingAccessors:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a,{valueAccessors:!0}):null},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return l.e.lc(a);default:return null}},parseBindingsString:function(a,b,c,d){try{var e,f=this.Nb,g=a+(d&&d.valueAccessors||"");if(!(e=f[g])){var h,i="with($context){with($data||{}){return{"+l.g.qa(a,d)+"}}}";h=new Function("$context","$element",i),e=f[g]=h}return e(b,c)}catch(j){throw j.message="Unable to parse bindings.\nBindings value: "+a+"\nMessage: "+j.message,j}}}),l.J.instance=new l.J}(),l.b("bindingProvider",l.J),function(){function c(a){return function(){return a}}function d(a){return a()}function f(a){return l.a.Oa(l.k.t(a),function(b,c){return function(){return a()[c]}})}function g(a,b){return f(this.getBindings.bind(this,a,b))}function h(a,b,c){var d,e=l.e.firstChild(b),f=l.J.instance,g=f.preprocessNode;if(g){for(;d=e;)e=l.e.nextSibling(d),g.call(f,d);e=l.e.firstChild(b)}for(;d=e;)e=l.e.nextSibling(d),i(a,d,c)}function i(a,b,c){var d=!0,e=1===b.nodeType;e&&l.e.wb(b),(e&&c||l.J.instance.nodeHasBindings(b))&&(d=k(b,null,a,c).shouldBindDescendants),d&&!n[l.a.B(b)]&&h(a,b,!e)}function j(a){var b=[],c={},d=[];return l.a.A(a,function e(f){if(!c[f]){var g=l.getBindingHandler(f);g&&(g.after&&(d.push(f),l.a.r(g.after,function(b){if(a[b]){if(-1!==l.a.l(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.length--),b.push({key:f,pb:g})),c[f]=!0}}),b}function k(b,c,e,f){var h=l.a.f.get(b,o);if(!c){if(h)throw Error("You cannot apply bindings multiple times to the same element.");l.a.f.set(b,o,!0)}!h&&f&&l.Eb(b,e);var i;if(c&&"function"!=typeof c)i=c;else{var k=l.J.instance,m=k.getBindingAccessors||g,n=l.h(function(){return(i=c?c(e,b):m.call(k,b,e))&&e.D&&e.D(),i},null,{G:b});i&&n.ga()||(n=null)}var p;if(i){var q=n?function(a){return function(){return d(n()[a])}}:function(a){return i[a]},r=function(){return l.a.Oa(n?n():i,d)};r.get=function(a){return i[a]&&d(q(a))},r.has=function(a){return a in i},f=j(i),l.a.r(f,function(c){var d=c.pb.init,f=c.pb.update,g=c.key;if(8===b.nodeType&&!l.e.Q[g])throw Error("The binding '"+g+"' cannot be used with virtual elements");try{"function"==typeof d&&l.k.t(function(){var c=d(b,q(g),r,e.$data,e);if(c&&c.controlsDescendantBindings){if(p!==a)throw Error("Multiple bindings ("+p+" and "+g+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");p=g}}),"function"==typeof f&&l.h(function(){f(b,q(g),r,e.$data,e)},null,{G:b})}catch(h){throw h.message='Unable to process binding "'+g+": "+i[g]+'"\nMessage: '+h.message,h}})}return{shouldBindDescendants:p===a}}function m(a){return a&&a instanceof l.I?a:new l.I(a)}l.d={};var n={script:!0};l.getBindingHandler=function(a){return l.d[a]},l.I=function(b,c,d,e){var f,g=this,h="function"==typeof b&&!l.v(b),i=l.h(function(){var a=h?b():b,f=l.a.c(a);return c?(c.D&&c.D(),l.a.extend(g,c),i&&(g.D=i)):(g.$parents=[],g.$root=f,g.ko=l),g.$rawData=a,g.$data=f,d&&(g[d]=f),e&&e(g,c,f),g.$data},null,{Da:function(){return f&&!l.a.eb(f)},G:!0});i.ga()&&(g.D=i,i.equalityComparer=null,f=[],i.Jb=function(b){f.push(b),l.a.u.ja(b,function(b){l.a.ma(f,b),f.length||(i.F(),g.D=i=a)})})},l.I.prototype.createChildContext=function(a,b,c){return new l.I(a,this,b,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),c&&c(a)})},l.I.prototype.extend=function(a){return new l.I(this.D||this.$data,this,null,function(b,c){b.$rawData=c.$rawData,l.a.extend(b,"function"==typeof a?a():a)})};var o=l.a.f.L(),p=l.a.f.L();l.Eb=function(a,b){return 2!=arguments.length?l.a.f.get(a,p):(l.a.f.set(a,p,b),void(b.D&&b.D.Jb(a)))},l.xa=function(a,b,c){return 1===a.nodeType&&l.e.wb(a),k(a,b,m(c),!0)},l.Lb=function(a,b,d){return d=m(d),l.xa(a,"function"==typeof b?f(b.bind(null,d,a)):l.a.Oa(b,c),d)},l.gb=function(a,b){1!==b.nodeType&&8!==b.nodeType||h(m(a),b,!0)},l.fb=function(a,c){if(!e&&b.jQuery&&(e=b.jQuery),c&&1!==c.nodeType&&8!==c.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");c=c||b.document.body,i(m(a),c,!0)},l.Ca=function(b){switch(b.nodeType){case 1:case 8:var c=l.Eb(b);if(c)return c;if(b.parentNode)return l.Ca(b.parentNode)}return a},l.Pb=function(b){return(b=l.Ca(b))?b.$data:a},l.b("bindingHandlers",l.d),l.b("applyBindings",l.fb),l.b("applyBindingsToDescendants",l.gb),l.b("applyBindingAccessorsToNode",l.xa),l.b("applyBindingsToNode",l.Lb),l.b("contextFor",l.Ca),l.b("dataFor",l.Pb)}();var q={"class":"className","for":"htmlFor"};l.d.attr={update:function(b,c){var d=l.a.c(c())||{};l.a.A(d,function(c,d){d=l.a.c(d);var e=!1===d||null===d||d===a;e&&b.removeAttribute(c),8>=l.a.oa&&c in q?(c=q[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString()),"name"===c&&l.a.Cb(b,e?"":d.toString())})}},function(){l.d.checked={after:["value","attr"],init:function(b,c,d){function e(){return d.has("checkedValue")?l.a.c(d.get("checkedValue")):b.value}function f(){var a=b.checked,f=m?e():a;if(!l.ca.pa()&&(!i||a)){var g=l.k.t(c);j?k!==f?(a&&(l.a.Y(g,f,!0),l.a.Y(g,k,!1)),k=f):l.a.Y(g,f,a):l.g.va(g,d,"checked",f,!0)}}function g(){var a=l.a.c(c());b.checked=j?0<=l.a.l(a,e()):h?a:e()===a}var h="checkbox"==b.type,i="radio"==b.type;if(h||i){var j=h&&l.a.c(c())instanceof Array,k=j?e():a,m=i||j;i&&!b.name&&l.d.uniqueName.init(b,function(){return!0}),l.ba(f,null,{G:b}),l.a.q(b,"click",f),l.ba(g,null,{G:b})}}},l.g.W.checked=!0,l.d.checkedValue={update:function(a,b){a.value=l.a.c(b())}}}(),l.d.css={update:function(a,b){var c=l.a.c(b());"object"==typeof c?l.a.A(c,function(b,c){c=l.a.c(c),l.a.ua(a,b,c)}):(c=String(c||""),l.a.ua(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,l.a.ua(a,c,!0))}},l.d.enable={update:function(a,b){var c=l.a.c(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},l.d.disable={update:function(a,b){l.d.enable.update(a,function(){return!l.a.c(b())})}},l.d.event={init:function(a,b,c,d,e){var f=b()||{};l.a.A(f,function(f){"string"==typeof f&&l.a.q(a,f,function(a){var g,h=b()[f];if(h){try{var i=l.a.R(arguments);d=e.$data,i.unshift(d),g=h.apply(d,i)}finally{!0!==g&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===c.get(f+"Bubble")&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},l.d.foreach={vb:function(a){return function(){var b=a(),c=l.a.Sa(b);return c&&"number"!=typeof c.length?(l.a.c(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:l.K.Ja}):{foreach:b,templateEngine:l.K.Ja}}},init:function(a,b){return l.d.template.init(a,l.d.foreach.vb(b))},update:function(a,b,c,d,e){return l.d.template.update(a,l.d.foreach.vb(b),c,d,e)}},l.g.aa.foreach=!1,l.e.Q.foreach=!0,l.d.hasfocus={init:function(a,b,c){function d(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;if("activeElement"in e){var f;try{f=e.activeElement}catch(g){f=e.body}d=f===a}e=b(),l.g.va(e,c,"hasfocus",d,!0),a.__ko_hasfocusLastValue=d,a.__ko_hasfocusUpdating=!1}var e=d.bind(null,!0),f=d.bind(null,!1);l.a.q(a,"focus",e),l.a.q(a,"focusin",e),l.a.q(a,"blur",f),l.a.q(a,"focusout",f)},update:function(a,b){var c=!!l.a.c(b());a.__ko_hasfocusUpdating||a.__ko_hasfocusLastValue===c||(c?a.focus():a.blur(),l.k.t(l.a.ha,null,[a,c?"focusin":"focusout"]))}},l.g.W.hasfocus=!0,l.d.hasFocus=l.d.hasfocus,l.g.W.hasFocus=!0,l.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){l.a.Va(a,b())}},k("if"),k("ifnot",!1,!0),k("with",!0,!1,function(a,b){return a.createChildContext(b)});var r={};l.d.options={init:function(a){if("select"!==l.a.B(a))throw Error("options binding applies only to SELECT elements");for(;0<a.length;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return l.a.la(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(a,c){if(m.length){var d=0<=l.a.l(m,l.i.p(c[0]));l.a.Db(c[0],d),n&&!d&&l.k.t(l.a.ha,null,[b,"change"])}}var h=0!=b.length&&b.multiple?b.scrollTop:null,i=l.a.c(c()),j=d.get("optionsIncludeDestroyed");c={};var k,m;m=b.multiple?l.a.ya(e(),l.i.p):0<=b.selectedIndex?[l.i.p(b.options[b.selectedIndex])]:[],i&&("undefined"==typeof i.length&&(i=[i]),k=l.a.la(i,function(b){return j||b===a||null===b||!l.a.c(b._destroy)}),d.has("optionsCaption")&&(i=l.a.c(d.get("optionsCaption")),null!==i&&i!==a&&k.unshift(r)));var n=!1;c.beforeRemove=function(a){b.removeChild(a)},i=g,d.has("optionsAfterRender")&&(i=function(b,c){g(0,c),l.k.t(d.get("optionsAfterRender"),null,[c[0],b!==r?b:a])}),l.a.Ua(b,k,function(c,e,g){return g.length&&(m=g[0].selected?[l.i.p(g[0])]:[],n=!0),e=b.ownerDocument.createElement("option"),c===r?(l.a.Xa(e,d.get("optionsCaption")),l.i.X(e,a)):(g=f(c,d.get("optionsValue"),c),l.i.X(e,l.a.c(g)),c=f(c,d.get("optionsText"),g),l.a.Xa(e,c)),[e]},c,i),l.k.t(function(){d.get("valueAllowUnset")&&d.has("value")?l.i.X(b,l.a.c(d.get("value")),!0):(b.multiple?m.length&&e().length<m.length:m.length&&0<=b.selectedIndex?l.i.p(b.options[b.selectedIndex])!==m[0]:m.length||0<=b.selectedIndex)&&l.a.ha(b,"change")}),l.a.Tb(b),h&&20<Math.abs(h-b.scrollTop)&&(b.scrollTop=h)}},l.d.options.Pa=l.a.f.L(),l.d.selectedOptions={after:["options","foreach"],init:function(a,b,c){l.a.q(a,"change",function(){var d=b(),e=[];l.a.r(a.getElementsByTagName("option"),function(a){a.selected&&e.push(l.i.p(a))}),l.g.va(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=l.a.B(a))throw Error("values binding applies only to SELECT elements");var c=l.a.c(b());c&&"number"==typeof c.length&&l.a.r(a.getElementsByTagName("option"),function(a){var b=0<=l.a.l(c,l.i.p(a));l.a.Db(a,b)})}},l.g.W.selectedOptions=!0,l.d.style={update:function(a,b){var c=l.a.c(b()||{});l.a.A(c,function(b,c){c=l.a.c(c),a.style[b]=c||""})}},l.d.submit={init:function(a,b,c,d,e){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");l.a.q(a,"submit",function(c){var d,f=b();try{d=f.call(e.$data,a)}finally{!0!==d&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},l.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){l.a.Xa(a,b())}},l.e.Q.text=!0,l.d.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++l.d.uniqueName.Ob;l.a.Cb(a,c)}}},l.d.uniqueName.Ob=0,l.d.value={after:["options","foreach"],init:function(a,b,c){function d(){g=!1;var d=b(),e=l.i.p(a);l.g.va(d,c,"value",e)}var e=["change"],f=c.get("valueUpdate"),g=!1;f&&("string"==typeof f&&(f=[f]),l.a.$(e,f),e=l.a.ib(e)),!l.a.oa||"input"!=a.tagName.toLowerCase()||"text"!=a.type||"off"==a.autocomplete||a.form&&"off"==a.form.autocomplete||-1!=l.a.l(e,"propertychange")||(l.a.q(a,"propertychange",function(){g=!0}),l.a.q(a,"focus",function(){g=!1}),l.a.q(a,"blur",function(){g&&d()})),l.a.r(e,function(b){var c=d;l.a.kc(b,"after")&&(c=function(){setTimeout(d,0)},b=b.substring(5)),l.a.q(a,b,c)})},update:function(a,b,c){var d=l.a.c(b());if(b=l.i.p(a),d!==b)if("select"===l.a.B(a)){var e=c.get("valueAllowUnset");c=function(){l.i.X(a,d,e)},c(),e||d===l.i.p(a)?setTimeout(c,0):l.k.t(l.a.ha,null,[a,"change"])}else l.i.X(a,d)}},l.g.W.value=!0,l.d.visible={update:function(a,b){var c=l.a.c(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},function(a){l.d[a]={init:function(b,c,d,e,f){return l.d.event.init.call(this,b,function(){var b={};return b[a]=c(),b},d,e,f)}}}("click"),l.C=function(){},l.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},l.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},l.C.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||c;var d=b.getElementById(a);if(!d)throw Error("Cannot find template with ID "+a);return new l.n.j(d)}if(1==a.nodeType||8==a.nodeType)return new l.n.Z(a);throw Error("Unknown template type: "+a)},l.C.prototype.renderTemplate=function(a,b,c,d){return a=this.makeTemplateSource(a,d),this.renderTemplateSource(a,b,c)},l.C.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")},l.C.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c),b=b(a.text()),a.text(b),a.data("isRewritten",!0)},l.b("templateEngine",l.C),l.Za=function(){function a(a,b,c,d){a=l.g.Ra(a);for(var e=l.g.aa,f=0;f<a.length;f++){var g=a[f].key;if(e.hasOwnProperty(g)){var h=e[g];if("function"==typeof h){if(g=h(a[f].value))throw Error(g)}else if(!h)throw Error("This template engine does not support the '"+g+"' binding within its templates")}}return c="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+l.g.qa(a,{valueAccessors:!0})+" } })()},'"+c.toLowerCase()+"')",d.createJavaScriptEvaluatorBlock(c)+b}var b=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,c=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ub:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return l.Za.dc(a,b)},c)},dc:function(d,e){return d.replace(b,function(b,c,d,f,g){return a(g,c,d,e)}).replace(c,function(b,c){return a(c,"<!-- ko -->","#comment",e)})},Mb:function(a,b){return l.w.Na(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&l.xa(e,a,d)})}}}(),l.b("__tr_ambtns",l.Za.Mb),function(){l.n={},l.n.j=function(a){this.j=a},l.n.j.prototype.text=function(){var a=l.a.B(this.j),a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.j[a];
var b=arguments[0];"innerHTML"===a?l.a.Va(this.j,b):this.j[a]=b};var b=l.a.f.L()+"_";l.n.j.prototype.data=function(a){return 1===arguments.length?l.a.f.get(this.j,b+a):void l.a.f.set(this.j,b+a,arguments[1])};var c=l.a.f.L();l.n.Z=function(a){this.j=a},l.n.Z.prototype=new l.n.j,l.n.Z.prototype.text=function(){if(0==arguments.length){var b=l.a.f.get(this.j,c)||{};return b.$a===a&&b.Ba&&(b.$a=b.Ba.innerHTML),b.$a}l.a.f.set(this.j,c,{$a:arguments[0]})},l.n.j.prototype.nodes=function(){return 0==arguments.length?(l.a.f.get(this.j,c)||{}).Ba:void l.a.f.set(this.j,c,{Ba:arguments[0]})},l.b("templateSources",l.n),l.b("templateSources.domElement",l.n.j),l.b("templateSources.anonymousTemplate",l.n.Z)}(),function(){function b(a,b,c){var d;for(b=l.e.nextSibling(b);a&&(d=a)!==b;)a=l.e.nextSibling(d),c(d,a)}function c(a,c){if(a.length){var d=a[0],e=a[a.length-1],f=d.parentNode,g=l.J.instance,h=g.preprocessNode;if(h){if(b(d,e,function(a,b){var c=a.previousSibling,f=h.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),a.length=0,!d)return;d===e?a.push(d):(a.push(d,e),l.a.ea(a,f))}b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||l.fb(c,a)}),b(d,e,function(a){1!==a.nodeType&&8!==a.nodeType||l.w.Ib(a,[c])}),l.a.ea(a,f)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(a,b,e,g,h){h=h||{};var i=a&&d(a),i=i&&i.ownerDocument,j=h.templateEngine||f;if(l.Za.Ub(e,j,i),e=j.renderTemplate(e,g,h,i),"number"!=typeof e.length||0<e.length&&"number"!=typeof e[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(i=!1,b){case"replaceChildren":l.e.U(a,e),i=!0;break;case"replaceNode":l.a.Bb(a,e),i=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b)}return i&&(c(e,g),h.afterRender&&l.k.t(h.afterRender,null,[e,g.$data])),e}var f;l.Wa=function(b){if(b!=a&&!(b instanceof l.C))throw Error("templateEngine must inherit from ko.templateEngine");f=b},l.Ta=function(b,c,g,h,i){if(g=g||{},(g.templateEngine||f)==a)throw Error("Set a template engine before calling renderTemplate");if(i=i||"replaceChildren",h){var j=d(h);return l.h(function(){var a=c&&c instanceof l.I?c:new l.I(l.a.c(c)),f=l.v(b)?b():"function"==typeof b?b(a.$data,a):b,a=e(h,i,f,a,g);"replaceNode"==i&&(h=a,j=d(h))},null,{Da:function(){return!j||!l.a.Ea(j)},G:j&&"replaceNode"==i?j.parentNode:j})}return l.w.Na(function(a){l.Ta(b,c,g,a,"replaceNode")})},l.jc=function(b,d,f,g,h){function i(a,b){c(b,k),f.afterRender&&f.afterRender(b,a)}function j(a,c){k=h.createChildContext(a,f.as,function(a){a.$index=c});var d="function"==typeof b?b(a,k):b;return e(null,"ignoreTargetNode",d,k,f)}var k;return l.h(function(){var b=l.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]),b=l.a.la(b,function(b){return f.includeDestroyed||b===a||null===b||!l.a.c(b._destroy)}),l.k.t(l.a.Ua,null,[g,b,j,f,i])},null,{G:g})};var g=l.a.f.L();l.d.template={init:function(a,b){var c=l.a.c(b());return"string"==typeof c||c.name?l.e.da(a):(c=l.e.childNodes(a),c=l.a.ec(c),new l.n.Z(a).nodes(c)),{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var h,i=c();c=l.a.c(i),d=!0,e=null,"string"==typeof c?c={}:(i=c.name,"if"in c&&(d=l.a.c(c["if"])),d&&"ifnot"in c&&(d=!l.a.c(c.ifnot)),h=l.a.c(c.data)),"foreach"in c?e=l.jc(i||b,d&&c.foreach||[],c,b,f):d?(f="data"in c?f.createChildContext(h,c.as):f,e=l.Ta(i||b,f,c,b)):l.e.da(b),f=e,(h=l.a.f.get(b,g))&&"function"==typeof h.F&&h.F(),l.a.f.set(b,g,f&&f.ga()?f:a)}},l.g.aa.template=function(a){return a=l.g.Ra(a),1==a.length&&a[0].unknown||l.g.bc(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"},l.e.Q.template=!0}(),l.b("setTemplateEngine",l.Wa),l.b("renderTemplate",l.Ta),l.a.nb=function(a,b,c){if(a.length&&b.length){var d,e,f,g,h;for(d=e=0;(!c||c>d)&&(g=a[e]);++e){for(f=0;h=b[f];++f)if(g.value===h.value){g.moved=h.index,h.moved=g.index,b.splice(f,1),d=f=0;break}d+=f}}},l.a.Aa=function(){function a(a,b,c,d,e){var f,g,h,i,j,k=Math.min,m=Math.max,n=[],o=a.length,p=b.length,q=p-o||1,r=o+p+1;for(f=0;o>=f;f++)for(i=h,n.push(h=[]),j=k(p,f+q),g=m(0,f-1);j>=g;g++)h[g]=g?f?a[f-1]===b[g-1]?i[g-1]:k(i[g]||r,h[g-1]||r)+1:g+1:f+1;for(k=[],m=[],q=[],f=o,g=p;f||g;)p=n[f][g]-1,g&&p===n[f][g-1]?m.push(k[k.length]={status:c,value:b[--g],index:g}):f&&p===n[f-1][g]?q.push(k[k.length]={status:d,value:a[--f],index:f}):(--g,--f,e.sparse||k.push({status:"retained",value:b[g]}));return l.a.nb(m,q,10*o),k.reverse()}return function(b,c,d){return d="boolean"==typeof d?{dontLimitMoves:d}:d||{},b=b||[],c=c||[],b.length<=c.length?a(b,c,"added","deleted",d):a(c,b,"deleted","added",d)}}(),l.b("utils.compareArrays",l.a.Aa),function(){function b(b,c,d,e,f){var g=[],h=l.h(function(){var a=c(d,f,l.a.ea(g,b))||[];0<g.length&&(l.a.Bb(g,a),e&&l.k.t(e,null,[d,a,f])),g.length=0,l.a.$(g,a)},null,{G:b,Da:function(){return!l.a.eb(g)}});return{S:g,h:h.ga()?h:a}}var c=l.a.f.L();l.a.Ua=function(d,e,f,g,h){function i(a,b){u=m[b],r!==b&&(x[a]=u),u.Ia(r++),l.a.ea(u.S,d),p.push(u),t.push(u)}function j(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&l.a.r(b[c].S,function(d){a(d,c,b[c].ka)})}e=e||[],g=g||{};var k=l.a.f.get(d,c)===a,m=l.a.f.get(d,c)||[],n=l.a.ya(m,function(a){return a.ka}),o=l.a.Aa(n,e,g.dontLimitMoves),p=[],q=0,r=0,s=[],t=[];e=[];for(var u,v,w,x=[],n=[],y=0;v=o[y];y++)switch(w=v.moved,v.status){case"deleted":w===a&&(u=m[q],u.h&&u.h.F(),s.push.apply(s,l.a.ea(u.S,d)),g.beforeRemove&&(e[y]=u,t.push(u))),q++;break;case"retained":i(y,q++);break;case"added":w!==a?i(y,w):(u={ka:v.value,Ia:l.m(r++)},p.push(u),t.push(u),k||(n[y]=u))}j(g.beforeMove,x),l.a.r(s,g.beforeRemove?l.M:l.removeNode);for(var z,y=0,k=l.e.firstChild(d);u=t[y];y++){for(u.S||l.a.extend(u,b(d,f,u.ka,h,u.Ia)),q=0;o=u.S[q];k=o.nextSibling,z=o,q++)o!==k&&l.e.rb(d,o,z);!u.Zb&&h&&(h(u.ka,u.S,u.Ia),u.Zb=!0)}j(g.beforeRemove,e),j(g.afterMove,x),j(g.afterAdd,n),l.a.f.set(d,c,p)}}(),l.b("utils.setDomNodeChildrenFromArrayMapping",l.a.Ua),l.K=function(){this.allowTemplateRewriting=!1},l.K.prototype=new l.C,l.K.prototype.renderTemplateSource=function(a){var b=(9>l.a.oa?0:a.nodes)?a.nodes():null;return b?l.a.R(b.cloneNode(!0).childNodes):(a=a.text(),l.a.Qa(a))},l.K.Ja=new l.K,l.Wa(l.K.Ja),l.b("nativeTemplateEngine",l.K),function(){l.La=function(){var a=this.ac=function(){if(!e||!e.tmpl)return 0;try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(b,d,f){if(f=f||{},2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var g=b.data("precompiled");return g||(g=b.text()||"",g=e.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),b.data("precompiled",g)),b=[d.$data],d=e.extend({koBindingContext:d},f.templateOptions),d=e.tmpl(g,b,d),d.appendTo(c.createElement("div")),e.fragments={},d},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){c.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},a>0&&(e.tmpl.tag.ko_code={open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},l.La.prototype=new l.C;var a=new l.La;0<a.ac&&l.Wa(a),l.b("jqueryTmplTemplateEngine",l.La)}()})}()}(),define("knockout-mapping-viewModel/KOMappingViewModel",["require","jquery","knockout/index"],function(a){function b(a,b){b.removeAll();var c=b();if(a&&a.length){for(var d=a.length;d--;)c.unshift(a[d]);b.valueHasMutated()}}function c(a,b){for(var c=b().length,d=b();c--;)d[c]=a[c];b.valueHasMutated()}function d(a,b){this.games=f.observableArray(),this.options=i(!0,{},b),this.element=e(a),this.isNewDate,this.element.addClass(h).attr("id",this.element.attr("id")||h+"-"+ ++g),this.afterRenderItem=function(b,c){e(a).trigger("after-render-item",[b,c])},this.afterAddItem=function(b,c,d){e(a).trigger("after-add-item",[b,c,d])},f.applyBindings(this,this.element[0])}var e=a("jquery"),f=a("knockout/index"),g=0,h="bam-minisb",i=e.extend;return d.prototype={init:function(a){var c=a.games,d=a.date;this.checkDate(d),this.isNewDate?b(c,this.games):this.refresh(c)},refresh:function(a){c(a,this.games)},checkDate:function(a){this.date?(this.isNewDate=new Date(a).getTime()!==new Date(this.date).getTime(),this.date=a):(this.date=a,this.isNewDate=!0)}},d}),define("Core-Scoreboard-Controller/ScoreboardController",["require","jquery","GameModel/GameModel","knockout-mapping-viewModel/KOMappingViewModel","floorDate/floorDate","flipDate/flipDate","events/paperboy"],function(a){function b(a,b){var c=this.options=l(!0,{},b);this.initViewModel(a),this.initModel(c)}var c=a("jquery"),d=a("GameModel/GameModel"),e=a("knockout-mapping-viewModel/KOMappingViewModel"),f=(a("floorDate/floorDate"),a("flipDate/flipDate"),a("events/paperboy")),g="scoreboard_Refresh",h="scoreboard_Load",i="scoreboard_Error",j="scoreboard_Empty",k=f.emitter([g,h,j,i]),l=c.extend;return b.prototype={Model:d,ViewModel:e,initModel:function(a){var b=this;this.Model.createModel(a).done(function(a){b.model=a,a.on("loadSuccess",function(a){b.init(a),k.trigger(h,a)}),a.on("loadError",function(){k.trigger(i)}),a.on("empty",function(){k.trigger(j)}),a.on("refresh",function(a){b.refresh(a),k.trigger(g,a)}),a.init()})},initViewModel:function(a){this.viewModel=new this.ViewModel(a)},init:function(a){this.viewModel.init(a)},refresh:function(a){this.viewModel.refresh(a)},load:function(a){this.model.load(a)},destroy:function(){this.model.destroy()},emitter:k,SCOREBOARD_LOAD:h,SCOREBOARD_REFRESH:g,SCOREBOARD_EMPTY:j,SCOREBOARD_ERROR:i},b}),define("mlbtv-scoreboard-extender/mlbtvScoreboardExtender",["require","bam.url/url"],function(a){function b(a){this.date=a;var b=d.Location();this.considerMediaStaging=!!b.getParam("considerMediaStaging")}function c(a,b){var c=!1;return a&&(a===e||a===f||b===!0&&a===g)&&(c=!0),c}var d=a("bam.url/url"),e="media_on",f="media_archive",g="media_staging";return b.prototype={addFullGameTime:function(a){a.is_tbd?a.is_doubleheader?a.fulltime="Gm "+a.game_number:a.fulltime="TBD":a.fulltime="3:33"===a.time?"TBD":a.time+" "+a.ampm},addCSSHooks:function(a){var b=[],c="game",d="",e="",f="",g=this.date;a.status.is_suspended&&(a.resume_date&&new Date(a.resume_date).getTime()!==new Date(g).getTime()?d="has_resumption":a.resume_date&&new Date(a.resume_date).getTime()===new Date(g).getTime()&&(d="is_resumption")),a.gameMediaObj&&("ALL"===a.gameMediaObj.free&&(e="freeGame"),a.is_enhanced_gotd&&(f="enhanced")),b.push(c),b.push(a.status.epg),b.push(a.status.status.replace(/\W/g,"").toLowerCase()),b.push(d),b.push(e),b.push(f),a.css=b.join(" ")},addInningCSS:function(a){a.inningHalf="",a.inningHalf=a.status.is_top_of_inning?"inning top":"inning bottom"},addChallengeCSS:function(a){var b;a.rawGame&&(b=a.rawGame.review),a.challengeHomeCSS=b&&"0"!==b.challenges_home_remaining?"challenge home":"challenge home thrown",a.challengeAwayCSS=b&&"0"!==b.challenges_away_remaining?"challenge away":"challenge away thrown"},addOutsCSS:function(a){a.outsCSS="out ",a.status.is_during_game&&a.status.o?a.outsCSS+="outs-"+a.status.o:a.outsCSS+="outs-0"},addBasesCSS:function(a){a.basesCSS="bases ",a.status.is_during_game&&"3"!==a.status.o?a.basesCSS+="bases-"+a.runners_on_base.status:a.basesCSS+="bases-0"},ensureMediaObj:function(a){var b,d=a.game_media?a.game_media:{},e=!1;d&&($.isArray(d.media)?(a.gameMediaObj=d.media[0],b=d.media[0].media_state?d.media[0].media_state:e=!0):a.game_media&&(a.gameMediaObj=a.game_media.media?a.game_media.media:e=!0,e||(b=a.gameMediaObj.media_state)),e&&(a.gameMediaObj={},b="MEDIA_OFF")),c(b,this.considerMediaStaging)?a.gameMediaObj.isPlayable="true":a.gameMediaObj?a.gameMediaObj.isPlayable="false":(a.gameMediaObj={},a.gameMediaObj.isPlayable="false"),a.gameMediaObj.isPlayable||(a.gameMediaObj.isPlayable="false")},addMessage:function(a){a.message=a.status.status,a.status.is_postponed&&(a.message="PPD"),a.status.is_after_game&&(a.message=a.status.inning>9?"F/"+a.status.inning:"Final"),a.status.is_completed_early&&(a.message="F/"+a.status.inning),a.status.is_cancelled&&(a.message="CANCL"),a.status.is_suspended&&(a.message="SUSP"),(a.status.is_delayed||a.status.is_delayed_start)&&(a.message="DELAY"),a.status.is_forfeit&&(a.message="FORFT"),a.status.is_umpire_challenge&&(a.message="UMP REV"),a.status.is_manager_challenge&&(a.message=a.status.challenge_team_abbrev+" CHAL"),a.status.is_instant_replay&&(a.message="REVIEW")},extendGame:function(a){this.ensureMediaObj(a),this.addBasesCSS(a),this.addFullGameTime(a),this.addCSSHooks(a),this.addMessage(a),this.addInningCSS(a),this.addOutsCSS(a),this.addChallengeCSS(a)}},b}),define("mlbtv-scoreboard/Scoreboard",["require","Core-Scoreboard-Controller/ScoreboardController","mlbtv-scoreboard-extender/mlbtvScoreboardExtender"],function(a){function b(a,b){b.extender=new d(b.date),this.controller=new c(a,b)}var c=a("Core-Scoreboard-Controller/ScoreboardController"),d=a("mlbtv-scoreboard-extender/mlbtvScoreboardExtender");return b}),function(a,b){"function"==typeof define&&define.amd?define("multi-angle-epg/MultiAngleEpg",["jquery","ensureDate/ensureDate"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("ensureDate/ensureDate")):a.PSTVMasterScoreboard=b(a.jQuery,a.bamEnsureDate)}(this,function(a,b){"use strict";function c(){var a=new Date;return[a.getFullYear(),a.getMonth()+1,a.getDate()].join("/")}function d(a,b){for(a+="";a.length<(b||2);)a="0"+a;return a}var e={qa:"//gd.qa.mlb.com",beta:"//gdx.mlb.com",prod:"//gdx.mlb.com"},f={date:c(),enableGdxDomain:!0,isQA:!1},g=function(a){this.initialize(a)};return g.prototype=a.extend(g.prototype,{config:null,date:null,multiAngleURL:null,gameData:null,timers:null,initialize:function(b){this.config=a.extend(f,b),this.date=this.config.date},load:function(c,d){this.config=a.extend(this.config||f,d),c=b(c),this.multiAngleURL=this.getMultiAngleUrlForDate(c,d?d.sport_code:""),this.getMultiAngle()},getMultiAngleUrlForDate:function(a,b){var b=b?b:"mlb",c="/gdcross/components/game/"+b+"/year_"+a.getFullYear()+"/month_"+d(a.getMonth()+1)+"/day_"+d(a.getDate())+"/multi_angle_epg.json";if(this.config.enableGdxDomain){var f=this.config.isQA?"qa":"prod",g=e[f];c=g+c}return c},getMultiAngle:function(){var b=this;a.getJSON(this.multiAngleURL).done(function(c){a(b).trigger("success",c)}).fail(function(){a(b).trigger("error")})}}),g}),define("mlb-tv-app/app/util/MultiAngleFeedUtil",["underscore","mlb-tv-app/app/collection/GamesCollection"],function(a,b){function c(){}var d=function(a){return b.getGameByCalendarEventId(a)},e=function(a){return a&&a.get("angles")&&a.get("angles").angle},f=function(a){return"WEB_MEDIAPLAYER"===a.platform&&a.media_state&&"media_on"===a.media_state.toLowerCase()},g=function(b){return a.find(b.angle_media.media,f)},h=function(b){return a.some(b.angle_media.media,f)},i=function(b){return a.filter(b,function(a){return h(a)})},j=function(a){var b=g(a);return b&&b.content_id},k=function(b,c){return a.some(b.angle_media.media,function(a){return a.content_id===c})},l=function(b,c){return a.find(b,function(a){return k(a,c)})},m=function(b,c){return a.map(b,function(b){return a.extend(b,{angle:l(c,b.contentId)})})},n=function(b){return a.sortBy(b,function(a){return a&&a.angle&&a.angle.id&&parseInt(a.angle.id)})},o=function(b,c){if(!b||!b.length||!c)return b;var d=a.first(b),e=a.filter(b,function(b){return a.some(c,function(a){return b.angle&&b.angle.id===a.id})});if(e.length===c.length)return e;var f=a.filter(c,function(b){return!a.some(e,function(a){return a.angle&&a.angle.id===b.id})});return e.concat(a.map(f,function(b){return a.extend(a.clone(d),{contentId:j(b),isSelected:!1,isVisible:!1,angle:b})}))};return c.prototype.findGame=d,c.prototype.getAnglesFromGame=e,c.prototype.getMediaFromAngle=g,c.prototype.hasUsableAngleMedia=h,c.prototype.filterAnglesByAngleMedia=i,c.prototype.getContentIdFromAngle=j,c.prototype.angleHasContentId=k,c.prototype.getAngleWithContentId=l,c.prototype.matchFeedsWithAngles=m,c.prototype.sortByAngle=n,c.prototype.mergeFeedsAndAngles=o,new c}),define("hgn!mlb-tv-app/app/templates/scoreboard/returnToDetails",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("<div id='returnToggle' style='display: none;' class='return viewall'><a class='backToStrip gameview' href='#'>Back To Game</a></div>	"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/scoreboard/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="scoreboard">'),d.b("\n"+c),d.b('	<div class="'),d.b(d.v(d.f("class",a,b,0))),d.b('" data-bind="template:{name:\'main-template\'}">'),d.b("\n"+c),d.b("	"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.b('<div class="gamestripPlaceholder"></div>'),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/scoreboard/empty.container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="'),d.b(d.v(d.f("id",a,b,0))),d.b('" class="no-games">'),d.b("\n"+c),d.b("	No games available on this date. Please select another date."),d.b("\n"+c),d.b("</div> "),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/Scoreboard",["jquery","underscore","backbone","ensureArray/ensureArray","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/AppConfig","mlb-tv-app/app/model/Configuration","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/model/GamedayUpdate","mlbtv-scoreboard/Scoreboard","multi-angle-epg/MultiAngleEpg","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/model/Preferences","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/collection/GamesCollection","mlb-tv-app/app/util/GameIdUtil","mlb-tv-app/app/util/MultiAngleFeedUtil","mlb-tv-app/app/tracking/TrackingManager","hgn!mlb-tv-app/app/templates/scoreboard/returnToDetails","hgn!mlb-tv-app/app/templates/scoreboard/container","hgn!mlb-tv-app/app/templates/scoreboard/empty.container"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(a,b){for(a+="";a.length<(b||2);)a="0"+a;return a}function z(a){return a+="",2==a.length&&(a="20"+a),a}function A(a,c){var d,e=!1;return a&&(d=b.find(a,function(a){var b=a.startDate,d=a.endDate;return B(b,d,c)?e=!0:void 0})),console.log("[jcc]datesInRange",d),d&&d.length>0}function B(a,b,c){var d=a.split("/"),e=b.split("/"),f=c.split("/"),g=new Date(z(d[2]),parseInt(d[0],10)-1,d[1]).getTime(),h=new Date(z(e[2]),parseInt(e[0],10)-1,e[1]).getTime(),i=new Date(z(f[2]),parseInt(f[0],10)-1,f[1]).getTime();return i>=g&&h>=i}var C,D={currentBalls:void 0,currentStrikes:void 0,currentPitcher:void 0,currentBatter:void 0,homeTeam:void 0,homeChallengeRemains:void 0,awayChallengeRemains:void 0},E=h.extend({WEB_MEDIAPLAYER_ANGLE_MEDIA_TYPE:"WEB_MEDIAPLAYER",viewName:"ScoreboardWidgetView",tagName:"div",activeGameId:"",emptyScoreboardId:"empty-scoreboard",activeGameModel:{},games:null,playerLoaded:void 0,mediaStateAssessed:0,maepg:null,events:{},initialize:function(){window.initialPlaylist&&window.initialPlaylist.calendar_event_id?window.initialPlaylist.calendar_event_id:null;C=this,this.initListeners(),this.deviceType=getStartupDeviceTypeString();try{this.enabled=window.mp5Config.app.components.scoreboard.enabled}catch(a){console.error("ScoreboardWidgetView: There was an error getting config: "+this.e)}this.enabled&&this.render()},initListeners:function(){this.listenTo(e,"scoreboard:refresh",this.scoreboardRefresh),this.listenTo(e,"scoreboard:load",this.scoreboardLoad),this.listenTo(e,"scoreboard:change",this.scoreboardChange),this.listenTo(e,"scoreboard:empty",this.scoreboardEmpty),this.listenTo(e,"scoreboard:destroy",this.scoreboardDestroy),this.listenTo(e,"scoreboard:render",this.render),this.listenTo(e,"scoreboard:show",this.showScoreboard),this.listenTo(e,"scoreboard:hide",this.hideScoreboard),this.listenTo(e,"render:scoreboardCarousel",this.evaluateNeedForScoreboardCarousel),this.listenTo(e,"repositionCarouselButton",this.repositionCarouselButton),this.listenTo(e,"updateGamestripButtonState",this.updateGamestripButtonState),this.listenTo(e,"ticker:livelookin",this.scoreboardLiveLookIn),this.listenTo(e,"ticker:highlights",this.scoreboardActiveHighlights),this.listenTo(e,"player:loaded",this.onPlayerLoaded),this.listenTo(e,"preferences:spoilerschange",this.applySpoilersPreference),this.listenTo(k,"change",this.handleMetaDataUpdate),this.listenTo(o,"change:slots",this.updateActiveGames),this.listenTo(i,"change:videoAreaLayoutState",this.handleVideoAreaLayoutStateChanged),a(document).on("click",".mlb-tv-epg ul > li",function(b,c){var d="true"===a(this).attr("data-isPlayable");if(d&&i.get("isPSTV")){var f=a(this).attr("id"),g=C.doesGameHaveAngleData(f);!g&&d&&(e.trigger("errormessage:show",{error:"unavailablePlayoffGame"}),d=g)}if(i.set("noDataAvailable",!1),d){o.set("metricsNeedUpdate",!0);var h=o.get("selectedGame");h&&(a("#"+h).removeClass("active"),o.removeOldGame(h)),u.trackByImpressionKey(u.TODAYS_GAME_GAME_SELECT),e.trigger("gamedaywidget:loading");var j=C.checkDaypickerIsOpen();j&&e.trigger("daypicker:toggle");var k=a(this).attr("id"),m={gameId:k,calendarEventId:a(this).attr("data-calendar-id"),gameStartTime:a(this).attr("data-start-time")};l.set({highlightPlaying:!1,minisetup:!1},{slient:!0}),q.set("isHighlight",!1,{slient:!0}),o.addActiveGame(k),q.set("game_id",s.formatIdForData(k)),i.set("selectedGame",k),o.set("selectedGame",k);var n=this,p=function(){return n.className.indexOf("inprogress")>=0||n.className.indexOf("warmup")>=0?!0:!1}(),r=a(this).attr("data-start-time"),t=C.createTimecode(p,r);o.setTimecodeForSelectedGame(k,t),e.trigger("hotswapGameday",{gameId:s.formatIdForData(k),timecode:t}),e.trigger("scoreboard:change",m),a(this).addClass("active"),C.setSelectedGame(k)}}),a(document).on("click","#mlbtv-epg #returnToggle",function(a){a.preventDefault(),e.trigger("scoreboard:hide"),u.trackByImpressionKey(u.TODAYS_GAME_BACK_TO_GAME)})},doesGameHaveAngleData:function(a){var b=r.getGameById(s.formatIdForData(a)),c=b.get("angles");return!!(c&&c.angle&&c.angle.length)},createTimecode:function(a,b){if(a){var c=p.get("playLiveGameFromStartPref");("undefined"==typeof c||c===!0)&&(a=!1)}var d;if(a){var e=6e4,f=(new Date).getTime()-e,g=new Date(f).toUTCString(),h=g.substr(17,8);d=h.replace(/[^0-9]/g,"")}else{if(!b){var i="Game is not live and a start time was not specified";throw console.error("SCOREBOARD: Error: "+i),new Error(i)}var j,k=b.replace(/[^0-9]/g,"");j=3==k.length?"0"+k+"00":k+"00";var l=j.substr(2,1)+"000";switch(j.substr(0,2)){case"08":d="00"+l;break;case"09":d="01"+l;break;case"10":d="02"+l;break;case"11":d="03"+l;break;case"12":d="16"+l;break;default:var m=j.substr(0,2),n=(parseInt(m,10)+16).toString();d=1==n.length?"0"+n.toString()+l:n+l}}return d},handleVideoAreaLayoutStateChanged:function(a,b){this.updateActiveGames(),this.setSelectedGame(o.get("selectedGame"))},updateActiveGames:function(){var b=o.get("slots");if(b&&b.length){var c=b.length;a("li","#mlbtv-epg").removeClass("active");for(var d=0;c>d;d++){var e=b[d];"EMPTY"!==e.mediaSlotState&&""!==e.gameId&&a("#"+s.formatIdForUI(e.gameId)).addClass("active")}}},setSelectedGame:function(b){if(!q.get("isHighlight")){var c=i.get("videoAreaLayoutState"),d=a("#"+b);c!==i.LAYOUT_STATE_STANDARD?d.addClass("selected"):d.removeClass("selected")}},checkDaypickerIsOpen:function(){var b=a("#daypicker-view").height();return 10>b?!1:!0},scoreboardEmpty:function(b){i.get("dayPickerEnabled")&&(this.scoreboardDestroy(),a(".scoreboard").append(x({id:this.emptyScoreboardId})),e.trigger("updateGamestripButtonState"),i.set("scoreboardCarouselRendered",!1))},scoreboardChange:function(a){this.activeGameModel=a,j.set("calendar_event_id",a.calendarEventId)},scoreboardActiveHighlights:function(a){console.log("show active highlights in scoreboard",a)},scoreboardLiveLookIn:function(a){console.log("show active live lookins in scoreboard",a)},scoreboardRefresh:function(a){console.log("scoreboardRefresh()"),this.scoreboardDestroy(),i.set("scoreboardState","scoreboard"),this.render(),e.trigger("scoreboard:show")},scoreboardDestroy:function(){console.log("scoreboard destroy()"),this.scoreboard.controller.destroy(),a(".scoreboard").html(""),a("#scoreboard-prev, #scoreboard-next").remove(),i.set("scoreboardCarouselRendered",!1)},onPlayerLoaded:function(){this.playerLoaded=!0,this.scoreboardLoad()},scoreboardLoad:function(a){a?this.games=a.games:a={games:this.games},a.games&a.games.length&&this.removeEmptyScoreboard(),i.get("isPSTV")?this.loadAndMergeMultiViewData(a):this.manageGameDataForApp(a)},manageGameDataForApp:function(b){b.games&&(r.set(b.games),i.set("gameDataAvail",!0));var c=o.get("isFreeGameEvalComplete");c||!b||i.get("noVideoMode")||this.isFreeGameEval(b.games);var d=o.get("initGamedayComplete");d||this.createInitTimecode(b.games),this.playerLoaded&&e.trigger("mediametrics:fetch"),this.updateActiveGames();var f=q.get("isHighlight");if(!f){var g=o.get("initialGame");if(!g){var h=i.get("gamedaySub"),j=s.formatIdForUI(h);o.set("initialGame",j),void 0===g&&e.trigger("scoreboard:show")}var k=o.get("activeGameIds");if(k.length<=0&&j){o.addActiveGame(j),o.set("selectedGame",j);var l="active";i.get("videoAreaLayoutState")!==i.LAYOUT_STATE_STANDARD&&(l+=" selected"),a("#"+j).addClass(l)}}var m=(o.get("activeGameIds"),o.get("selectedSlot"));m?console.log("SELECTED SLOT in scoreboardLoad() = "+m):m=0;var n=o.get("selectedGame");n||o.previous("initialGame")||(n=o.get("initialGame")),this.setSelectedGame(n),this.applySpoilersPreference(),this.checkForExtraInningGames(),e.trigger("scoreBoardLoadComplete"),this.setEnhancedLabel()},checkSelectedMultiAngleByContentId:function(a,c){var d=this;b.each(c,function(c){var e=c.angles?c.angles.angle:[];b.each(e,function(c){var e=b.filter(c.angle_media.media,function(b){return b.platform===d.WEB_MEDIAPLAYER_ANGLE_MEDIA_TYPE&&b.content_id===a});c.isSelected=e.length>0})})},loadAndMergeMultiViewData:function(c){var e=function(a,e){console.log("Multi-angle Data",e);var f;try{f=e.data.epg.game}catch(g){console.error("There was an error with the multi-angle data",g)}var h=o.getSelectedSlot();h&&h.contentId&&this.checkSelectedMultiAngleByContentId(h.contentId,f),c.games=b.map(c.games,function(a){return b.extend(a,b.findWhere(d(f),{id:a.id}))}),this.manageGameDataForApp(c)},f=function(a){console.log("There was a error loading multi-angle data",a),this.manageGameDataForApp(c)},g=function(b){var c=a(b);c.off("success"),c.off("error"),c.one("success",e.bind(this)),c.one("error",f.bind(this))},h=c.date,j="qa"===i.get("env")||"dev"===i.get("env");if(!this.maepg){var k={date:h,enableGdxDomain:!0,isQA:j};this.maepg=new n(k)}g.bind(this)(this.maepg),this.maepg.load(h)},isDateInExhibitionDateRange:function(a){var b=y(a.getMonth()+1)+"/"+y(a.getDate())+"/"+a.getFullYear(),c=f.getValue("app.components.scoreboard.exhibitionGameDates"),d=A(c,b);return console.log("scoreboard.isDateInExhibitionDateRange() "+b+" isDateInRange="+d),d},addConfigOptionsForExhibitionGames:function(a){var c=!1,d={removeExhibitionGames:c};return b.extend(a,d)},isDateInInternationalDateRange:function(a){var b=y(a.getMonth()+1)+"/"+y(a.getDate())+"/"+a.getFullYear(),c=f.getValue("app.components.scoreboard.internationalGameDates"),d=A(c,b);return console.log("scoreboard.isDateInInternationalDateRange() "+b+" isDateInRange="+d),d},addConfigOptionsForInternationalGames:function(a){var c,d={sport_code:c};return b.extend(a,d)},isDateDuringWBC:function(a){var b=y(a.getMonth()+1)+"/"+y(a.getDate())+"/"+a.getFullYear(),c=f.getValue("app.components.scoreboard.wbcGameDates"),d=A(c,b);return console.log("scoreboard.isDateDuringWBC() "+b+" isDateInRange="+d),d},addConfigOptionsForWBC:function(a){var c={qa:"//engage-combined-scoreboards-qa.mlb.com",beta:"//engage-combined-scoreboards-prod.mlb.com",prod:"//engage-combined-scoreboards-prod.mlb.com"},d={gdxDomains:c,excludeGdcrossAndSportCode:!0};return b.extend(a,d)},setEnhancedLabel:function(){var b=i.getEgotdConfig(),c=b.scoreboardRolloverText;a(".enhanced .game-overlay").attr("data-enhanced",c)},applySpoilersPreference:function(){a("#scoreboard-ul").show();var b=p.get("spoilersPref");b?a(".runs").addClass("hide-scores"):void 0!==b&&a(".runs").removeClass("hide-scores")},checkForExtraInningGames:function(){for(var b=a("#scoreboard-ul > li").length,c=0;b>c;c++){var d=a("#scoreboard-ul > li")[c];a(d).hasClass("after")&&a(d).find(".message").text("FINAL")}},handleMetaDataUpdate:function(a){var b=i.get("gamedaySub");if(!k.get("isHighlight")){var c=this.checkGamedayData(l.toJSON());!c||!b||k.get("isAudioOnly")&&!k.get("isLive")?"scoreboard"!==i.get("scoreboardState")&&(i.set("scoreboardState","scoreboard"),e.trigger("scoreboard:show")):"gameview"!==i.get("scoreboardState")&&(i.set("scoreboardState","gameview"),e.trigger("scoreboard:hide")),e.trigger("updateGamestripButtonState")}},checkGamedayData:function(a){return a&&a.play&&a.play.balls&&a.play.strikes&&a.linescore&&a.play.batter&&a.play.pitcher&&(D.currentBalls!==a.play.balls||D.currentStrikes!==a.play.strikes||D.currentInning!==a.linescore.inning||D.inningState!==a.linescore.inning_state||D.homeTeam!==a.linescore.home_file_code||D.currentBatter!==a.play.batter.pid||D.currentPitcher!==a.play.pitcher.pid||D.homeChallengeRemains!==a.play.home_challenges_remain||D.awayChallengeRemains!==a.play.away_challenges_remain)?(D=a,!0):!1},isFreeGameEval:function(a){var b,c={},d=document.URL;if(i.get("noVideoMode"))c={free:!1,url:d},b=!1;else{c.redirectURL=d;for(var f=window.initialPlaylist?window.initialPlaylist.calendar_event_id:j.get("calendar_event_id"),g=a.length,h=0;g>h;h++)if(a[h].gameMediaObj.calendar_event_id===f){var k=a[h].gameMediaObj.free;b="ALL"===k}c.free=b}o.set({gameIsFree:b,isFreeGameEvalComplete:c},{silent:!0}),e.trigger("isFreeGameEvalComplete",c)},createInitTimecode:function(a){if(window.initialPlaylist){var c=window.initialPlaylist.calendar_event_id,d=b.find(a,function(a){return a.gameMediaObj.calendar_event_id===c});if(!d){var f="Game not found for calendar event Id: "+c;console.error("SCOREBOARD: Error: "+f);var g="XXX Temp fix to return instead of throw - else WBC games don't load in QA";return void console.warn("SCOREBOARD: Warning: "+g)}var h="media_archive"!=d.gameMediaObj.media_state,i=C.createTimecode(h,d.time);q.set("game_id",d.id,{silent:!0}),o.set("initGamedayComplete",!0,{silent:!0}),e.trigger("gameday:timecode",i)}},updateGamestripButtonState:function(){var a="gameview"!==i.get("scoreboardState"),b=k.get("isAudioOnly"),c=k.get("isLive");if(a){var d=k.get("isHighlight"),f=C.checkDaypickerIsOpen();if(b&&!c)C.hideGameDetailsButton(),C.hideViewAllButton();else if(!d&&!f){var g=o.getSelectedSlot(),h=g?g.mediaSlotState:"EMPTY";("EMPTY"!==h||"EMPTY"===h&&o.get("previouslySeletectedSlot")!==o.get("selectedSlot"))&&C.showGameDetailsButton(),C.hideViewAllButton()}}else C.showViewAllButton(),C.hideGameDetailsButton();e.trigger("repositionCarouselButton"),this.evaluateNeedForScoreboardCarousel()},setReturnToGameDetails:function(){a("#returnToggle").length||a("#mlbtv-epg").append(v())},showGameDetailsButton:function(){console.log("scoreboard.showGameDetailsButton()"),a("#returnToggle").show()},hideGameDetailsButton:function(){console.log("scoreboard.hideGameDetailsButton()"),a("#returnToggle").hide()},showViewAllButton:function(){a(".return").parent(".viewall").show()},hideViewAllButton:function(){a(".return").parent(".viewall").hide()},hideAnimation:void 0,hideScoreboard:function(){a("#activeGameStrip").show(),a("#scoreboard-prev, #scoreboard-next").remove(),i.set("scoreboardState","gameview"),e.trigger("gamedaywidget:gamestrip"),this.showAnimation&&this.showAnimation.stop(),
C.hideAnimation=a(".scoreboard").animate({left:"1000px"},400,"swing",function(){a(".scoreboard").hide(),C.hideAnimation=void 0}),this.updateGamestripButtonState()},showAnimation:void 0,showScoreboard:function(){i.set("scoreboardState","scoreboard"),this.hideViewAllButton(),a("#activeGameStrip").hide(),this.hideAnimation&&this.hideAnimation.stop(),C.showAnimation=a(".scoreboard").show().animate({left:"0px"},400,"swing",function(){a("#activeGameStrip").hide(),C.showAnimation=void 0}),e.trigger("render:scoreboardCarousel"),e.trigger("repositionCarouselButton"),this.updateGamestripButtonState()},render:function(){console.log("scoreboard.render()");var b=("qa"===i.get("env"),i.get("scoreboardState"));console.log("scoreboardState: "+b),"gameview"!==b?(i.get("isEmbed")||(a(g.defaults.epgContainer).html(w({"class":"mlb-tv-epg"})),this.setReturnToGameDetails(),e.trigger("updateGamestripButtonState"),this.evaluateNeedForScoreboardCarousel()),this.initializeScoreboardComponent()):(console.log("bypassing scoreboard.render(), scoreboardState is "+b),e.trigger("updateGamestripButtonState"))},evaluateNeedForScoreboardCarousel:function(){var b=i.get("gameDataAvail");b&&setTimeout(function(){var b=a("#scoreboard-ul > li").length;b>15||15==b&&a("#returnToggle").is(":visible")?C.renderScoreboardCarousel():a("#scoreboard-next").hide()},500)},initializeScoreboardComponent:function(){var b=i.get("date");b instanceof Date||(b=new Date(b));var c={date:b,enableGdxDomain:!0,enableTicketing:!1,isQA:"dev"===i.get("env")||"qa"===i.get("env")};this.isDateInExhibitionDateRange(b)&&(c=this.addConfigOptionsForExhibitionGames(c)),this.isDateDuringWBC(b)&&(c=this.addConfigOptionsForWBC(c)),this.scoreboard=sbInstance=new m(a(".mlb-tv-epg")[0],c);var d=this.scoreboard.controller;d.emitter.on(d.SCOREBOARD_LOAD,function(a){e.trigger("scoreboard:load",a)}),d.emitter.on(d.SCOREBOARD_EMPTY,function(){e.trigger("scoreboard:empty")}),d.emitter.on(d.SCOREBOARD_ERROR,function(){e.trigger("scoreboard:empty")})},renderScoreboardCarousel:function(){if(!a("#scoreboard-prev").length&&!a("#scoreboard-next").length){a("#mlbtv-epg").append('<div id="scoreboard-prev"></div>').append('<div id="scoreboard-next"></div>');var b=a("#scoreboard-ul > li").length,c=66*b;a("#scoreboard-ul").css("width",c);var d=function(){return 15==b?"66px":16==b?"132px":17==b?"198px":18==b?"264px":19==b?"330px":void 0}(),e=0-parseInt(d,10)+"px";a("#scoreboard-next").click(function(){a("#scoreboard-next").fadeOut("fast"),a("#scoreboard-ul").removeAttr("style").css({display:"block",width:c}).animate({display:"block",position:"absolute",right:d}),setTimeout(function(){a("#scoreboard-prev").fadeIn("fast")},250)}),a("#scoreboard-prev").click(function(){a("#scoreboard-prev").fadeOut("fast"),a("#scoreboard-ul").removeAttr("style").css({display:"block",left:e,width:c}).animate({display:"block",position:"absolute",left:"0px"}),setTimeout(function(){C.repositionCarouselButton()},250)}),this.repositionCarouselButton()}},repositionCarouselButton:function(){var b=function(){return a("#returnToggle").length&&a("#returnToggle").is(":visible")?"66px":"0"},c=a("#scoreboard-ul > li").length;a("#scoreboard-prev").is(":hidden")&&(c>15||15==c&&a("#returnToggle").is(":visible"))&&a("#scoreboard-next").css("right",b).fadeIn("fast")}});return E}),define("GameAlertsService/GameAlertsService",["require","jquery","deepObject/get","ensureArray/ensureArray","events/paperboy"],function(a){function b(a){this.opts=d.extend(!0,{dataURL:"/gdcross/components/game/mlb/notifications.json",interval:15e3},a),this.trigger=g(this,["loadSuccess"]),this.timer}function c(a){for(var b=[],c=0,f=a.length;f>c;c++){var g;if(e(a[c],"alert").length){g=e(a[c],"alert");for(var h=0,i=g.length;i>h;h++){var j=e(g[h],"type");"status"===j&&b.push(d.extend(a[c],{alert:g[h]}))}}else b.push(a[c])}return b}var d=a("jquery"),e=a("deepObject/get"),f=a("ensureArray/ensureArray"),g=a("events/paperboy").mixin;return b.prototype={init:function(){this.load(),this.start()},load:function(){var a=this,b=this.opts.dataURL;d.getJSON(b).done(function(b){var d=f(e(b,"data.alerts.game"));a.trigger("loadSuccess",c(d))})},start:function(){function a(){b.load(),b.start()}var b=this,c=this.opts.interval;this.timer=setTimeout(a,c)},stop:function(){clearTimeout(this.timer),delete this.timer}},b}),define("LiveLookin/lookin-player",["require","exports","module","jquery","jqueryui-amd/jqueryui/draggable"],function(a,b){function c(){var a="";return r.companionAd.show&&(a='<div class="zPlayerCompAd"><div id="videoCompanionAd"></div></div>'),a}function d(){var a,b,c;r.companionAd.show&&(b=r.getDefaultCompanionAd(),a=b.data,c=q("#videoCompanionAd"),c.append(a))}function e(){l.remove(),n.remove(),o=null,p=!1}function f(a){r=q.extend(r,a);var b,d,e,f='<div id="'+r.containerId+'"><div class="zPlayerInner"><div class="zPlayerClipInfo"><div class="zPlayerHeadline">'+r.headline+'</div><a class="zPlayerCloseBtn">Close</a></div><div id="'+r.playerContainerId+'" class="zPlayer_flvContainer"></div><div class="zPlayer_leaveBehind"></div>'+c()+"</div></div>";n=q('<div id="overlay"></div>'),q(f).appendTo("body"),n.appendTo("body"),p=!0,b=r.content_id,d="mlb/multimedia/livelookin",e="http://mlb.mlb.com/shared/video/embed/m-internal-embed.html?content_id="+b+"&property=mlb&autoplay="+r.autoplay+"&hashmode="+!a.isDesktop+"&preroll=false&siteSection="+d,l=q('<iframe id="video-player" class="video-iframe" scrolling="no" src="'+e+'" width="'+r.playerDims.w+'" height="'+r.playerDims.h+'"></iframe>'),q("#"+r.playerContainerId).append(l),o=q("#video-player")}function g(a){q.extend(r,a),m=q("#"+r.containerId);var b=parseInt(q("body").innerWidth(),10),c=parseInt(m.css("width"),10),e=b/2-c/2+r.hOffset,f=q(document).scrollTop()+r.vOffset;m.css({top:f+"px",left:e+"px"}).show(),m.find(".zPlayerInner").animate({width:r.zoomEndDims.w,height:r.zoomEndDims.h,opacity:1},"slow",function(){m.css({"background-image":"url("+r.bgImageUrl+")"}).find(".zPlayerInner").css({border:"none","background-color":"transparent"}),r.draggable&&"function"==typeof q.fn.draggable&&(m.draggable({containment:"document",cancel:"#"+r.playerContainerId+", .zPlayer_leaveBehind, .zPlayerCloseBtn"}),m.find(".zPlayerClipInfo").hover(function(){q(this).css({cursor:"move"})},function(){q(this).css({cursor:"default"})})),d()})}function h(){m.animate({width:r.zoomStartDims.w,height:r.zoomStartDims.h,opacity:0},"fast").remove()}function i(){j()}function j(){e(),h()}function k(a){"playlistComplete"===a.data&&setTimeout(i,1e3)}var l,m,n,o=null,p=!1,q=a("jquery"),r=(a("jqueryui-amd/jqueryui/draggable"),{replayImgUrl:"../images/000000.gif",bgImageUrl:"../images/lookin/bg.png",containerId:"LiveLookinPlayer",playerContainerId:"LiveLookinPlayer_flvContainer",width:640,height:400,hOffset:window.club&&"mlb"===club&&window.section&&"homepage"===section?-60:0,vOffset:95,draggable:!0,playerFlavor:"None",companionAd:{show:!1,w:728,h:90},playerDims:{w:640,h:400},zoomStartDims:{w:"0px",h:"0px"},zoomEndDims:{w:"660px",h:"450px"},debugMode:!1,MESSAGES:{errorLoadingRelatedContent:"Related content is temporarily unavailable."}});return window.addEventListener?window.addEventListener("message",k,!1):window.attachEvent&&window.attachEvent("onmessage",k),b.build=f,b.destroy=e,b.finish=j,b.showPlayer=g,b}),define("LiveLookin/tracking",["require","exports","module"],function(a,b){function c(a){var b=new h.OmnitureAsync(a);b.assign(),b.fire()}function d(){c({isDynamic:!1,dynamic_component:"Live Look-In Messenger",dynamic_componentAction:"Live Look-In Impression",actionGen:!1})}function e(){c({isDynamic:!1,dynamic_component:"Live Look-In",dynamic_componentAction:"Live Look-In Play",actionGen:!1})}function f(){c({isDynamic:!1,dynamic_component:"Live Look-In",dynamic_componentAction:"Live Look-In Auto Play Enabled",actionGen:!0})}function g(){c({isDynamic:!1,dynamic_component:"Live Look-In",dynamic_componentAction:"Live Look-In Auto Play Disabled",actionGen:!0})}var h=window.Curveball&&window.Curveball.Tracking;return b.trackImpression=d,b.trackPlay=e,b.trackEnableAutoplay=f,b.trackDisableAutoplay=g,b}),define("LiveLookin/lookin",["require","exports","module","./lookin-player","jquery","bam.cookies/cookies","./tracking"],function(a,b){function c(){return!m.get(j)}function d(){c()||(m.remove(j),i.enableTracking&&n.trackEnableAutoplay())}function e(){if(c()){var a=new Date;m.set({name:j,value:"1",expires:new Date(a.getFullYear(),a.getMonth(),a.getDate()+i.autoplayCookieDuration)}),i.enableTracking&&n.trackDisableAutoplay()}}function f(a){function b(){return g.addClass(i.autoplayDisabledCSS).attr("title","Click to enable video autoplay")}function f(){return g.removeClass(i.autoplayDisabledCSS).attr("title","Click to disable video autoplay")}var g=l('<a href="#"/>');return c()?f():b(),g.addClass(i.autoplayToggleCSS),g.click(function(a){a.preventDefault(),g.hasClass(i.autoplayDisabledCSS)?(d(),f()):(e(),b())}),g}function g(){var a=l(".zPlayerCloseBtn");a.next().is(".autoplay")||a.after(f()),a.on("click",function(){k.finish()})}function h(a){"playlistStart"===a.data&&i.enableTracking&&n.trackPlay()}var i,j,k=a("./lookin-player"),l=a("jquery"),m=a("bam.cookies/cookies"),n=a("./tracking");window.addEventListener?window.addEventListener("message",h,!1):window.attachEvent&&window.attachEvent("onmessage",h),b.init=function(a){i=l.extend(b.defaultCfg,{autoplay:!0,autoplayCookiePrefix:"LLI_",autoplayCookieDuration:30,autoplayToggleCSS:"autoplay",autoplayDisabledCSS:"autoplay-disabled",forceLaunch:!1,enableTracking:!0},a),j=i.autoplayCookiePrefix+"mlb",i.autoplay=c(),(i.forceLaunch||i.autoplay)&&(k.build(i),g(),b.play(i)),i.enableTracking&&n.trackImpression()},b.play=function(a){k.showPlayer(a)},b.defaultCfg={autoplay:!0,autoplayCookiePrefix:"LLI_",autoplayCookieDuration:30,autoplayToggleCSS:"autoplay",autoplayDisabledCSS:"autoplay-disabled"}}),define("GameTickerViewModel/GameTickerViewModel",["require","exports","module","jquery","deepObject/get","events/paperboy","gamedayLauncher/gamedayLauncher","LiveLookin/lookin"],function(a,b){"use strict";function c(a){var b=q.find("a");(0===b.length||r.trim(b.text())!==r.trim(a.text))&&(q.empty(),o&&o.text?r(d(o)).css("display","none").appendTo(q).fadeIn():r(d(a)).css("display","none").appendTo(q).fadeIn(),h())}function d(a){var b;return"gameAlert"===a.type?b='<a href="#" class="gameAlert gameday" data-gameday-id="'+a.gameday+'">'+a.text+'<strong class="gamedayLink">Gameday &raquo;</strong></a>':"liveLookIn"===a.type&&(b='<a href="#" class="liveLookIn" data-calendar-event-id="'+a.calendar_event_id+'" data-link-origin="Scoreboard:GameAlert"><strong>LIVE LOOK-IN:</strong>'+a.text+' <strong class="watchNow">Watch Now &raquo;</strong></a>'),b}function e(){!m||m.length<1||(k=k>=m.length?0:k,l=m[k],l&&(c({type:"gameAlert",text:s(l,"alert.brief_text"),gameday:l.game_id.replace(/[\W]/g,"_")}),k+=1,i()))}function f(a){m=a,k=0,e()}function g(a){clearTimeout(n);var b=a;o={type:"liveLookIn",text:b.headline,calendar_event_id:b.calendar_event_id},c(o)}function h(){r("a.gameAlert").on("click",function(a){var b=r(this),c=b.attr("data-gameday-id");a.preventDefault(),c&&(window.location.href=u(c))}),r("a.liveLookIn").on("click",function(a){var b=r.extend({},{calendar_event_id:r(this).attr("data-calendar-event-id")},v.defaultCfg);v.init(b),a.preventDefault()})}function i(){n&&clearTimeout(n),n=setTimeout(e,p)}function j(a,b){q=r("#"+a),p=b||5e3,this.trigger=t(this,["tickerMode:alerts","tickerMode:liveLookIn"])}var k,l,m,n,o,p,q,r=a("jquery"),s=a("deepObject/get"),t=a("events/paperboy").mixin,u=a("gamedayLauncher/gamedayLauncher").getUrl,v=a("LiveLookin/lookin"),w="alerts";return j.prototype={init:function(){},displayAlerts:function(a){"alerts"!==w?(w="alerts",e(),this.trigger("tickerMode:alerts")):a&&a.length&&f(a)},displayLiveLookin:function(a){w="liveLookIn",g(a),o={},this.trigger("tickerMode:liveLookIn")}},j}),define("GameTicker/GameTicker",["require","jquery","GameAlertsService/GameAlertsService","GameTickerViewModel/GameTickerViewModel","events/paperboy"],function(a){function b(a){var b=this.options=c.extend(!0,{lookin:{},alerts:{},element:"sbTicker"},a),g=this.tickerViewModel=new e(b.element),h=this.alertsService=new d(b.alerts);this.hasLookin=!1,this.trigger=f(this,["hasLookin","empty"]),h.on("loadSuccess",function(a){this.hasLookin||g.displayAlerts(a)}),this.init()}var c=a("jquery"),d=a("GameAlertsService/GameAlertsService"),e=a("GameTickerViewModel/GameTickerViewModel"),f=a("events/paperboy").mixin;return b.prototype={init:function(){this.alertsService.init()},setLookinData:function(a){this.hasLookin=!0,this.alertsService.stop(),this.tickerViewModel.displayLiveLookin(a),this.trigger("hasLookin",a)},clearLookinData:function(){this.hasLookin=!1,this.alertsService.init(),this.trigger("empty"),console.log("clear")}},b}),define("hgn!mlb-tv-app/app/templates/ticker/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="alert-container"></div>'),d.b("\n"+c),d.b('<div id="game-alerts-container" class="game-alerts">'),d.b("\n"+c),d.b('    <div class="game-alerts__arrows">'),d.b("\n"+c),d.b('        <div class="game-alerts__arrow game-alerts__arrow--left">&lt;</div>'),d.b("\n"+c),d.b('        <div class="game-alerts__arrow game-alerts__arrow--right">&gt;</div>'),d.b("\n"+c),d.b("    </div>"),d.b("\n"+c),d.b('    <ul class="game-alerts__list"></ul>'),d.b("\n"+c),d.b('    <div class="game-alerts__close">&times;</div>'),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/Ticker",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/Configuration","GameTicker/GameTicker","hgn!mlb-tv-app/app/templates/ticker/container"],function(a,b,c,d,e,f,g,h){var i=c.extend({viewName:"TickerWidgetView",tagName:"div",events:{},initialize:function(){this.initListeners(),this.deviceType=getStartupDeviceTypeString();try{this.enabled=window.mp5Config.app.components.scoreboard.enabled}catch(a){console.error("TickerWidgetView: There was an error getting config: "+this.e)}this.enabled&&this.render()},triggerLiveLookIn:function(a){e.trigger("ticker:livelookin",a)},triggerActiveHighlights:function(a){e.trigger("ticker:highlights",a)},initListeners:function(){},render:function(){var b="qa"===d.get("env");a("#ticker").html(h());var c=new g({element:"tickerStrip",alerts:{enableGdxDomains:!0,isQA:b}});c.on("hasLookin",function(a){this.triggerLiveLookIn(a)})}});return i}),define("hgn!feedSelector/templates/feedSelector",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="feedStatus">'),d.b("\n"+c),d.b('    <div class="feed-highlight-status"></div>'),d.b("\n"+c),d.b('    <div class="status">'),d.b("\n"+c),d.b("        <!--"),d.b("\n"+c),d.b('        <div class="up"><span class="state"></span>Now Watching: <span class="video"><span class="icon"></span> : BAN-NANA </span></div>'),d.b("\n"+c),d.b('        <div class="down"><span class="state"></span>Your video feed is currently not working. <a href="#" class="helper">Troubleshoot ≫</a></div>'),d.b("\n"+c),d.b('        <div class="upsell"><span class="state"></span>To view more, upgrade your MLB.TV package.  <a href="#" class="helper"> Upgrade Now ≫</a></div>'),d.b("\n"+c),d.b("        -->"),d.b("\n"+c),d.b("    </div>"),d.b("\n"+c),d.b('    <a href="#" class="preferences"><!--Preferences--></a>'),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.b('<div id="feeds-container">'),d.b("\n"+c),d.b('    <div class="selectorWindow">'),d.b("\n"+c),d.b('        <div class="video media-active">'),d.b("\n"+c),d.b('            <span class="label">Video</span>'),d.b("\n"+c),d.b('            <ul id="video-feeds"></ul>'),d.b("\n"+c),d.b("        </div>"),d.b("\n"+c),d.b('        <div class="audio media-active" id="alt-audio-container">'),d.b("\n"+c),d.b('            <span class="label">Audio <span class="info">Overlay</span></span>'),d.b("\n"+c),d.b('            <ul id="alt-audio-feeds">'),d.b("\n"+c),d.b('                <li class="default"><span>Select a video feed to show audio overlay</span></li>'),d.b("\n"+c),d.b("            </ul>"),d.b("\n"+c),d.b("        </div>"),d.b("\n"+c),d.b('        <div class="audio-or-pipe"></div>'),d.b("\n"+c),d.b('        <div class="audio-only audio media-disabled">'),d.b("\n"+c),d.b('            <span class="label">Audio <span class="info">Only</span></span>'),d.b("\n"+c),d.b('            <ul id="audio-feeds">'),d.b("\n"+c),d.b("            </ul>"),d.b("\n"+c),d.b("        </div>"),d.b("\n"+c),d.b("    </div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!feedSelector/templates/status",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('	<div class="'),d.b(d.v(d.f("status",a,b,0))),d.b('">'),d.b("\n"+c),d.b('		<a href="#" class="feed-status" available="'),d.b(d.v(d.f("available",a,b,0))),d.b('">'),d.b("\n"+c),d.b('			<span class="state"></span>'),d.b(d.v(d.f("message",a,b,0))),d.b("\n"+c),d.b('			<span class="'),d.b(d.v(d.f("mediaType",a,b,0))),d.b('">'),d.b("\n"+c),d.b('				<span class="icon icon-toggle"></span>'),d.b("\n"+c),d.b("			</span>"),d.b("\n"+c),d.b('			<span class="feed-abbrev">'),d.b(d.v(d.f("currentFeed",a,b,0))),d.b(" "),d.s(d.f("currentAltAudio",a,b,1),a,b,0,280,416,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("</span>"),d.b("\n"+c),d.b('			<span class="audio">'),d.b("\n"+c),d.b('				<span class="icon icon-toggle"></span>'),d.b("\n"+c),d.b("			</span>"),d.b("\n"+c),d.b('			<span class="feed-abbrev">: '),d.b(d.v(d.f("currentAltAudio",a,b,0)))}),a.pop()),d.b(d.v(d.f("helperLink",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("		</a>"),d.b("\n"+c),d.b('		<div class="feed-toggler-div">'),d.b("\n"+c),d.s(d.f("isEnhancedFeed",a,b,1),a,b,0,529,609,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('            <span class="egotd-label">'),d.b(d.v(d.f("brandingLabelText",a,b,0))),d.b("</span>"),d.b("\n"+c)}),a.pop()),d.b('			<a class="feed-toggler-btn">'),d.b("\n"+c),d.b('				<span class="change-feed-text">CHANGE FEED &nbsp;</span>'),d.b("\n"+c),d.b('			<div class="feed-toggler-arrow">&#9662;</div></a>'),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.s(d.f("includeBranding",a,b,1),a,b,0,806,860,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="fgotd-branding fgotd-feedsel"></div>'),d.b("\n"+c)}),a.pop()),d.b("	</div>"),d.b("\n"),d.b("\n"+c),d.b("<!--"),d.b("\n"+c),d.b('		<div class="up"><span class="state"></span>Now Watching: <span class="video"><span class="icon"></span> : BAN-NANA </span></div>'),d.b("\n"+c),d.b('		<div class="down"><span class="state"></span>Your video feed is currently not working. <a href="#" class="helper">Troubleshoot ≫</a></div>'),d.b("\n"+c),d.b('		<div class="upsell"><span class="state"></span>To view more, upgrade your MLB.TV package.  <a href="#" class="helper"> Upgrade Now ≫</a></div>'),d.b("\n"+c),d.b("-->"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!feedSelector/templates/feed",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<li class="'),d.b(d.v(d.f("displayClass",a,b,0))),d.b('"'),d.b("\n"+c),d.b('    data-contentId="'),d.b(d.v(d.f("contentId",a,b,0))),d.b('"'),d.b("\n"+c),d.b('    data-channelId="'),d.b(d.v(d.f("channel",a,b,0))),d.b('">'),d.b("\n"+c),d.b('    <span class="icon"></span>'),d.b("\n"+c),d.b("    "),d.s(d.f("teamAbbr",a,b,1),a,b,0,146,166,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b(c.v(c.f("teamAbbr",a,b,0))),c.b("-&#8203;")}),a.pop()),d.b(d.v(d.f("callLetters",a,b,0))),d.b("\n"+c),d.b('    <span class="feedSecondaryLabel">'),d.b(d.v(d.f("secondaryLabel",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("</li>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!feedSelector/templates/highlightStatus",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="up">'),d.b("\n"+c),d.b('    <span class="feed-status">'),d.b("\n"+c),d.b('        <span class="state"></span>Now Watching:'),d.b("\n"+c),d.b('        <span class="feed-highlight-headline">'),d.b(d.v(d.f("headline",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('        <span class="feed-highlight-time">'),d.b("\n"+c),d.b('            <span class="feed-highlight-date">'),d.b(d.v(d.f("date",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('            <span class="feed-highlight-duration">'),d.b(d.v(d.f("duration",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("        </span>"),d.b("\n"+c),d.b("    </span>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!feedSelector/templates/feedUnavailable",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<li class="default"><span>'),d.b(d.v(d.f("message",a,b,0))),d.b("</span></li>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("feedSelector/scripts/shared-feed-selector",["require","exports","module","hgn!../templates/feedUnavailable","mlb-tv-app/app/tracking/TrackingManager","mlb-tv-app/app/util/MultiAngleFeedUtil"],function(a,b){"use strict";var c=a("hgn!../templates/feedUnavailable"),d=a("mlb-tv-app/app/tracking/TrackingManager"),e=a("mlb-tv-app/app/util/MultiAngleFeedUtil"),f=function(){return{ENHANCED_FEED_ID:"999",HIGHLIGHT_CLASS:"feed-highlight",FEED_SELECTOR_TOGGLE_COMPLETED:"feedSelectorToggleCompleted",FEED_SELECTOR_ANIMATION_DURATION:400,NO_FEEDS_AVAILABLE:"No feeds are available",NO_VIDEO_FEEDS_AVAILABLE:"There are no video feeds available for this game. Please select an audio feed to the right to listen live.",NO_AUDIO_ONLY_FEEDS_AVAILABLE:"No Audio Only available",NO_AUDIO_CHROMECAST:"No Audio Only available while Casting",AUDIO_ONLY_SELECTED:"Select a video feed to show audio overlay",VIDEO_SELECTED_ALT_AUDIO_DISABLED:"Alternate Audio is currently disabled",VIDEO_SELECTED_ALT_AUDIO_UNAVAILABLE:"Alternate Audio is not available for this video"}},g=function(a){var b=f(),c=$("#feeds-container");return a?c.slideUp(b.FEED_SELECTOR_ANIMATION_DURATION,function(){c.trigger(b.FEED_SELECTOR_TOGGLE_COMPLETED)}):(c.hide(),c.trigger(b.FEED_SELECTOR_TOGGLE_COMPLETED)),$(".feed-toggler-arrow").removeClass("rotate"),$(".icon-toggle, .feed-abbrev").css("opacity","1"),!1},h=function(a){var b=f(),c=$("#feeds-container");return a?c.slideDown(b.FEED_SELECTOR_ANIMATION_DURATION,function(){c.trigger(b.FEED_SELECTOR_TOGGLE_COMPLETED)}):(c.show(),c.trigger(b.FEED_SELECTOR_TOGGLE_COMPLETED)),$(".feed-toggler-arrow").addClass("rotate"),$(".icon-toggle, .feed-abbrev").css("opacity","0.4"),!0},i=function(a){return a?g(!0):h(!0)},j=function(a){return a.replace(/(\+|-).*$/g,"")},k=function(a,b,c){var d=c?e.getMediaFromAngle(a.angle):void 0;if(d&&d.source)return d.source;var g="";return g=a.teamId===f().ENHANCED_FEED_ID&&b&&b.feedLabelText?b.feedLabelText:j(a.callLetters)},l=function(a,b){if(a&&b){var c="",d=a.toString(),e=b&&b[d];return e&&(c=e.name_abbrev),c}},m=function(a,b,c){if(!a)return"";var d=l(a.teamId,b),e=d?d+"-":"";return": "+e+k(a,c)},n=function(a,b){var c;return $.each(b,function(b,d){d.contentId===a&&(c=d)}),c},o=function(a){var b="";return"in-market"===a.coverageType?"audio"===a.mediaType?b="ES"===a.language?" (ES-local)":" (local)":"video"===a.mediaType&&(b=" (local)"):("home"===a.feedAssociation||"away"===a.feedAssociation)&&("audio"===a.mediaType?"ES"===a.language&&(b=" (ES)"):"video"===a.mediaType&&(b=" ("+a.feedAssociation+")")),b},p=function(a){return a.removeClass("media-disabled").addClass("media-active")},q=function(a){return a.removeClass("media-active").addClass("media-disabled")},r=function(a){q(a.find("#feeds-container .audio#alt-audio-container, #feeds-container .video")),p(a.find("#feeds-container .audio-only"))},s=function(a){p(a.find("#feeds-container .audio#alt-audio-container, #feeds-container .video")),q(a.find("#feeds-container .audio-only"))},t=function(){return window.mp5Config&&window.mp5Config.app&&window.mp5Config.app.components&&window.mp5Config.app.components.sponsorship&&window.mp5Config.app.components.sponsorship.brandingEnabled},u=function(a,b,c){var e=!1;a.angle&&void 0!==a.angle.id&&(e=!0);try{var f=l(a.teamId,b),g=k(a,c,e),h=o(a),i=f+"-"+g+h;e?"multiangle":a.feedAssociation;d.trackByImpressionKeyWithFeedDetails(d.FEED_SELECTOR_CLICK,a.mediaType,a.feedAssociation,i)}catch(j){console.error("feedSelector feed click: error calling TrackingManager.trackByImpressionKeyWithFeedDetails()",j)}},v=function(a){return c({message:a})},w=function(a){var b;if($.each(a,function(a,c){"video"===c.mediaType&&c.teamId===f().ENHANCED_FEED_ID&&(b=a)}),b){var c=a.splice(b,1)[0];a.splice(0,0,c)}return a};b.getConstants=f,b.closeFeedSelector=g,b.openFeedSelector=h,b.toggleFeedSelector=i,b.stripHD=j,b.getCallLetters=k,b.getTeamAbbrById=l,b.getFeedDisplay=m,b.getFeedByContentId=n,b.getSecondaryLabel=o,b.activateMediaElem=p,b.deactivateMediaElem=q,b.switchToAudioOnly=r,b.switchFromAudioOnly=s,b.getBrandingEnabled=t,b.trackFeedSelectorClick=u,b.getFeedUnavailableTemplateObject=v,b.sortFeeds=w}),define("feedSelector/feedSelector",["require","exports","module","jquery","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/model/StateModel","hgn!./templates/feedSelector","hgn!./templates/status","hgn!./templates/feed","hgn!./templates/highlightStatus","./scripts/shared-feed-selector","mlb-tv-app/app/control/Dispatcher"],function(a,b){"use strict";var c,d,e=a("jquery"),f=a("mlb-tv-app/app/model/Playlist"),g=a("mlb-tv-app/app/model/StateModel"),h=a("hgn!./templates/feedSelector"),i=a("hgn!./templates/status"),j=a("hgn!./templates/feed"),k=a("hgn!./templates/highlightStatus"),l=a("./scripts/shared-feed-selector"),m=a("mlb-tv-app/app/control/Dispatcher"),n={},o={},p={},q=!0,r=!0,s=!1,t=!1,u=!1,v={enabled:!0,preferEnhancedGameMedia:!0,feedLabelText:"MLB PLUS",brandingLabelText:"MLB PLUS",enhanced:!1},w=l.getConstants(),x=!0,y=l.closeFeedSelector,z=l.openFeedSelector,A=l.toggleFeedSelector,B=l.stripHD,C=l.getCallLetters,D=l.getTeamAbbrById,E=l.getFeedDisplay,F=l.getFeedByContentId,G=l.getSecondaryLabel,H=l.switchToAudioOnly,I=l.switchFromAudioOnly,J=l.getBrandingEnabled,K=l.trackFeedSelectorClick,L=l.getFeedUnavailableTemplateObject,M=l.sortFeeds,N=function(){void 0!==d&&null!==d&&clearTimeout(d),d=null},O=function(a){var b=new Date(a.date);return{headline:a.headline,date:("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2)+"-"+b.getFullYear(),duration:"00"===a.duration.substr(0,2)?a.duration.slice(-5):a.duration}},P=function(a){return a.find("#feedStatus").find(".feed-highlight-status")},Q=function(a,b){a.addClass(w.HIGHLIGHT_CLASS),P(a).html(k(b))},R=function(a,b){if(a.isAlternateAudioAvailable&&a.alternateAudioOverlays&&a.alternateAudioOverlays.length>0){var c,d;for(c=0;c<a.alternateAudioOverlays.length;c++)if(d=a.alternateAudioOverlays[c],d.channel===b)return d}return null},S=function(a){if(a.isAlternateAudioAvailable&&a.alternateAudioOverlays&&a.alternateAudioOverlays.length>0){var b,c;for(b=0;b<a.alternateAudioOverlays.length;b++)if(c=a.alternateAudioOverlays[b],c.isSelected===!0)return c}return null},T=function(a){return B(a.description)},U=function(a){if(a){var b=S(a);if(b&&b.description)return T(b)}return""},V=function(a){var b=(new Date).getTime();x=a?!u:x;var d={status:"up",message:a&&a.isVisible?"Now Playing :":"Select a Game :",available:a?"true":"false",currentFeed:E(a,n,v),isEnhancedGame:u,currentAltAudio:U(a),mediaType:a?a.mediaType:"",timestampCacheBuster:b,includeBranding:x,isEnhancedFeed:u,brandingLabelText:v.brandingLabelText};c.find(".status").html(i(d)),a||e(".feed-status").css("cursor","default")},W=function(a){a.html(h()),V(null)},X=function(a){var b="upsell";return a.isAuthorized&&(a.isSelected?b="selected":a.isBlackout?b="blackout":a.isVisible&&(b="visible")),b},Y=function(a){var b=X(a);"selected"===b&&V(a);var c=G(a),d=D(a.teamId,n)||null,e={contentId:a.contentId,callLetters:C(a),displayClass:b,mediaType:a.mediaType,teamId:a.teamId,teamAbbr:d,channel:"",secondaryLabel:c,feed:a};return a.isAlternateAudioAvailable&&a.alternateAudioOverlays&&(e.altAudio=a.alternateAudioOverlays),e},Z=function(a){var b=c.find(".selected");a?s&&(s=!1):b.removeClass("selected")},$=function(){var a=e(this),b=a.attr("data-contentId"),g=a.attr("data-channelId");if(!a.hasClass("selected")){e("#feeds-container").trigger(w.FEED_SELECTOR_TOGGLE_COMPLETED);var h=F(b,o);if(console.log("feedSelector feed click: "+h),g){if(!window.VPM.model.feedSelectionModel.supportsHlsAltAudio)return void m.trigger("errormessage:show",{error:"upgradeFlashVersion"});console.log("feedSelector feed click: this will only pass in correctly if you have a video feed selected right now I think");var i=R(h,g);window.VPM.model.currentMediaItem.feedSelectionModel.changeAudioOverlay(h,i),Z(!0),s||(e(this).addClass("selected"),s=!0),h.isAuthorized?I(c):t=y(!0)}else{if(void 0!==d&&null!==d)return;d=setTimeout(N,8e3);var j=h.isAuthorized;j&&(Z(),a.addClass("selected")),console.log("feedSelector feed click: changing feed"),f.set({content_id:null,type:null},{silent:!0}),f.set({content_id:h.contentId,type:h.mediaType,calendar_event_id:h.mediaCatalog.calendarEventId}),j&&("audio"===h.mediaType?H(c):I(c)),h&&K(h,n,v)}}},aa=function(a){"false"!==e(this).attr("available")&&(t=A(t)),a.preventDefault()},ba=function(){e(".feed-status, .feed-toggler-btn").on("click",aa),e("li",c).on("click",$);var a=window.VPM,b=[a.events.PLAYBACK_STARTED,a.events.SELECTED_MEDIA_SLOT_CHANGED,a.events.ERROR_MESSAGE];_.each(b,function(a){m.off(a,N),m.on(a,N)})};b.create=function(a,b,d){c=e(a),o=b&&b.contentFeeds,n=d.teamsConfig,v=d.egotdConfig||v,u=v.enhanced,x=J(),q=b&&b.audioOverlaySupported,r=d&&d.audioOnlySupported;var f=!1,i=!1,k=g.get("isCasting")||!1;if(o){c.removeClass(w.HIGHLIGHT_CLASS),a.html(h());var l;o=M(o),e.each(o,function(a,b){var d=Y(b);switch(d.mediaType){case"video":b.isSelected&&(l=b),f=!0,c.find("#video-feeds").append(j(d));break;case"audio":i=!0,c.find("#audio-feeds").append(j(d))}});var m=c.find("#alt-audio-feeds");if(q===!1)m.empty().append(L(w.VIDEO_SELECTED_ALT_AUDIO_DISABLED));else if(l){var p=Y(l);l.isAlternateAudioAvailable&&p.altAudio?(m.empty(),e.each(p.altAudio,function(a,b){b.mediaType="audio",b.teamId=p.teamId,b.teamAbbr=p.teamAbbr,b.callLetters=T(b),b.displayClass=b.isSelected?"selected":"",b.secondaryLabel="ES"===b.language?"(ES)":"",b.contentId=l.contentId,b.feed=l,m.append(j(b))})):m.empty().append(L(w.VIDEO_SELECTED_ALT_AUDIO_UNAVAILABLE))}else m.empty().append(L(w.AUDIO_ONLY_SELECTED)),H(c);e("#feeds-container").removeClass("mlbtv-audio-mode"),f!==!1||i!==!1&&r?f===!1?(c.find("#video-feeds").empty().append(L(w.NO_VIDEO_FEEDS_AVAILABLE)),c.find("#video-feeds").find("li").css("width","426px").css("height","100px"),H(c),e("#feeds-container").addClass("mlbtv-audio-mode"),c.find("#alt-audio-container").empty()):i===!1?c.find("#audio-feeds").empty().append(L(w.NO_AUDIO_ONLY_FEEDS_AVAILABLE)):!r&&k?c.find("#audio-feeds").empty().append(L(w.NO_AUDIO_CHROMECAST)):r||c.find("#audio-feeds").empty().append(L(w.NO_AUDIO_ONLY_FEEDS_AVAILABLE)):c.find("#video-feeds").empty().append(L(w.NO_FEEDS_AVAILABLE)),e(".feed-toggler-div").show(),t=t?z(!1):y(!1)}else W(a),e(".feed-toggler-div").hide(),t=y(!1);ba()},b.loadHighlight=function(a,b){console.log("Feed Selector: Load Highlight"),p=b,Q(a,O(b))},b.updateForHighlight=function(a){W(a)}}),define("hgn!feedSelector/templates/multi-angle/multi-angle",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){
var d=this;return d.b(c=c||""),d.b('<div id="feedStatus" class="multi-angle">'),d.b("\n"+c),d.b('	<div class="status"></div>'),d.b("\n"+c),d.b('	<a href="#" class="preferences"><!--Preferences--></a>'),d.b("\n"+c),d.b("</div>"),d.b("\n"+c),d.b('<div id="feeds-container" class="multi-angle">'),d.b("\n"+c),d.b('    <div class="selectorWindow">'),d.b("\n"+c),d.b("        <div>"),d.b("\n"+c),d.b('            <span class="label">Camera Angles</span>'),d.b("\n"+c),d.b("        </div>"),d.b("\n"+c),d.b('        <div class="ballpark">'),d.b("\n"+c),d.b('            <img class="ballpark-map" src="/shared/flash/mediaplayer/v4.5/shared/images/stadiums/fieldgraphics/'),d.b(d.v(d.f("venueId",a,b,0))),d.b('.png" />'),d.b("\n"+c),d.b('            <ul class="pin-list"></ul>'),d.b("\n"+c),d.b("        </div>"),d.b("\n"+c),d.b('        <div class="video">'),d.b("\n"+c),d.b('            <ul id="video-feeds"></ul>'),d.b("\n"+c),d.b("        </div>"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!feedSelector/templates/multi-angle/multi-angle-status",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="'),d.b(d.v(d.f("status",a,b,0))),d.b('">'),d.b("\n"+c),d.b('    <a href="#" class="feed-status" available="'),d.b(d.v(d.f("available",a,b,0))),d.b('">'),d.b("\n"+c),d.b('        <span class="state"></span>'),d.b("\n"+c),d.b("        "),d.b(d.v(d.f("message",a,b,0))),d.b("\n"+c),d.b('        <span class="'),d.b(d.v(d.f("mediaType",a,b,0))),d.b('">'),d.b("\n"+c),d.b('            <span class="icon icon-toggle"></span>'),d.b("\n"+c),d.b("        </span>"),d.b("\n"+c),d.b('        <span class="feed-abbrev">'),d.b(d.v(d.f("currentFeed",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("    </a>"),d.b("\n"+c),d.b('    <div class="feed-toggler-div">'),d.b("\n"+c),d.s(d.f("isEnhancedFeed",a,b,1),a,b,0,376,448,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('        <span class="egotd-label">'),d.b(d.v(d.f("brandingLabelText",a,b,0))),d.b("</span>"),d.b("\n"+c)}),a.pop()),d.b('        <a class="feed-toggler-btn">'),d.b("\n"+c),d.b('            <span class="change-feed-text">CHANGE FEED &nbsp;</span>'),d.b("\n"+c),d.b('        <div class="feed-toggler-arrow">&#9662;</div></a>'),d.b("\n"+c),d.b("    </div>"),d.b("\n"+c),d.s(d.f("includeBranding",a,b,1),a,b,0,667,725,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('    <div class="fgotd-branding fgotd-feedsel"></div>'),d.b("\n"+c)}),a.pop()),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!feedSelector/templates/multi-angle/angle",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<li class="'),d.s(d.f("isSelected",a,b,1),a,b,0,26,34,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("selected")}),a.pop()),d.b(" "),d.s(d.f("isVisible",a,b,1),a,b,0,64,71,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("visible")}),a.pop()),d.b('"'),d.b("\n"+c),d.b('    data-contentId="'),d.b(d.v(d.f("contentId",a,b,0))),d.b('">'),d.b("\n"+c),d.b('    <span class="icon"></span>'),d.b("\n"+c),d.b('    <span class="angle-name">'),d.b(d.v(d.d("angle.name",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("</li>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!feedSelector/templates/multi-angle/pin",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<li class="angle-pin '),d.s(d.f("isSelected",a,b,1),a,b,0,36,44,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("selected")}),a.pop()),d.b(" "),d.s(d.f("isVisible",a,b,1),a,b,0,74,81,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b("visible")}),a.pop()),d.b('"'),d.b("\n"+c),d.b('    style="left: '),d.b(d.v(d.d("angle.plot_x",a,b,0))),d.b("px; top: "),d.b(d.v(d.d("angle.plot_y",a,b,0))),d.b('px;"'),d.b("\n"+c),d.b('    data-contentId="'),d.b(d.v(d.f("contentId",a,b,0))),d.b('"'),d.b("\n"+c),d.b('    data-channelId="'),d.b(d.v(d.f("channel",a,b,0))),d.b('">'),d.b("\n"+c),d.b('    <span class="pin-img" title="'),d.b(d.v(d.d("angle.name",a,b,0))),d.b('" />'),d.b("\n"+c),d.b("</li>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("feedSelector/multiAngleFeedSelector",["require","exports","module","jquery","underscore","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/util/MultiAngleFeedUtil","hgn!./templates/multi-angle/multi-angle","hgn!./templates/multi-angle/multi-angle-status","hgn!./templates/multi-angle/angle","hgn!./templates/multi-angle/pin","./scripts/shared-feed-selector"],function(a,b){"use strict";var c,d,e=a("jquery"),f=a("underscore"),g=a("mlb-tv-app/app/model/Playlist"),h=a("mlb-tv-app/app/control/Dispatcher"),i=a("mlb-tv-app/app/util/MultiAngleFeedUtil"),j=a("hgn!./templates/multi-angle/multi-angle"),k=a("hgn!./templates/multi-angle/multi-angle-status"),l=a("hgn!./templates/multi-angle/angle"),m=a("hgn!./templates/multi-angle/pin"),n=a("./scripts/shared-feed-selector"),o={},p=[],q=!1,r=!1,s={enabled:!0,preferEnhancedGameMedia:!0,feedLabelText:"MLB PLUS",brandingLabelText:"MLB PLUS",enhanced:!1},t=n.getConstants(),u=!0,v=n.closeFeedSelector,w=n.openFeedSelector,x=n.toggleFeedSelector,y=n.getFeedByContentId,z=n.getBrandingEnabled,A=n.trackFeedSelectorClick,B=n.getFeedUnavailableTemplateObject,C=function(){void 0!==d&&null!==d&&clearTimeout(d),d=null},D=function(a){var b=(new Date).getTime();u=a?!r:u;var d={status:"up",message:a?"Now Playing :":"Select a Game :",available:a?"true":"false",currentFeed:a&&a.angle?a.angle.name:"",isEnhancedGame:r,mediaType:a?a.mediaType:"",timestampCacheBuster:b,includeBranding:u,isEnhancedFeed:r,brandingLabelText:s.brandingLabelText};c.find(".status").html(k(d)),a||e(".feed-status").css("cursor","default")},E=function(a){a.html(j()),D(null)},F=function(){c.find(".selected").removeClass("selected")},G=function(){if(void 0===d||null===d){d=setTimeout(C,8e3);var a=e(this);if(!a.hasClass("selected")){e("#feeds-container").trigger(t.FEED_SELECTOR_TOGGLE_COMPLETED);var b=a.attr("data-contentId"),f=y(b,p);console.log("feedSelector feed click: "+f),f.isAuthorized?(F(),c.find('[data-contentId="'+b+'"]').addClass("selected")):q=v(!0),console.log("feedSelector feed click: changing feed"),g.set({content_id:null,type:null},{silent:!0}),g.set({content_id:f.contentId,type:f.mediaType,calendar_event_id:f.mediaCatalog.calendarEventId}),f&&A(f,o,s)}}},H=function(a){"false"!==e(this).attr("available")&&(q=x(q)),a.preventDefault()},I=function(){e(".feed-status, .feed-toggler-btn").on("click",H),e("li",c).on("click",G);var a=window.VPM,b=[a.events.PLAYBACK_STARTED,a.events.SELECTED_MEDIA_SLOT_CHANGED,a.events.ERROR_MESSAGE];f.each(b,function(a){h.off(a,C),h.on(a,C)})},J=function(a){var b=c.find("#video-feeds");b.empty(),f.each(a,function(a){b.append(l(a))})},K=function(a){var b=c.find(".ballpark").find(".pin-list");b.empty(),f.each(a,function(a){b.append(m(a))})};b.create=function(a,b,d){if(c=e(a),o=d.teamsConfig,s=d.egotdConfig||s,r=s.enhanced,u=z(),b.contentFeeds){var g=i.findGame(b.calendarEventId);p=i.sortByAngle(i.matchFeedsWithAngles(b.contentFeeds,i.getAnglesFromGame(g))),c.removeClass(t.HIGHLIGHT_CLASS),a.html(j({venueId:g.get("venue_id")})),J(p),K(p),D(f.find(p,function(a){return a.isSelected})),0===p.length&&c.find("#video-feeds").empty().append(B(t.NO_FEEDS_AVAILABLE)),e(".feed-toggler-div").show(),q=q?w(!1):v(!1)}else E(a),e(".feed-toggler-div").hide(),q=v(!1);I()}}),define("mlb-tv-app/app/view/components/FeedSelector",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","feedSelector/feedSelector","feedSelector/multiAngleFeedSelector","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/marketing/SponsorshipDisplayManager","mlb-tv-app/app/enums/events/VideoPlayerEvents"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=c.extend({viewName:"FeedSelectorWidget",tagName:"div",teamsConfig:window.teamsConfig?window.teamsConfig:{},previousGameId:void 0,events:{},initialize:function(){console.log("FeedSelector.initialize()"),this.initListeners(),this.deviceType=getStartupDeviceTypeString()},initListeners:function(){this.listenTo(d,k.FEED_SELECTOR_CREATE,this.render),this.listenTo(d,k.FEED_SELECTOR_LOAD_HIGHLIGHT,this.loadHighlight),this.listenTo(d,k.HIGHLIGHT_PLAYING,this.updateForHighlight),this.listenTo(i,"change",this.handleMetaDataChange)},render:function(b){console.log("FeedSelector.render()");var c=h.getSelectedSlot(),d=c?c.calendarEventId:"n/a",i=c?c.contentId:"";if(""===i||d===b.calendarEventId){var j=g.getEgotdConfig();j&&(j.enhanced=g.get("isEnhancedGame"));var k={teamsConfig:this.teamsConfig,egotdConfig:j,audioOnlySupported:!g.get("isCasting")},l=b&&b.isMultiAngle?f.create:e.create;l(a("#feedSelector"),b,k)}},loadHighlight:function(b){e.loadHighlight(a("#feedSelector"),b)},updateForHighlight:function(){e.updateForHighlight(a("#feedSelector"))},handleMetaDataChange:function(){j.renderAds()},onClickTagListItem:function(){}});return l}),define("hgn!mlb-tv-app/app/templates/video-share",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="share-container">'),d.b("\n"+c),d.b('	<div id="facebook-link" class="share-link"></div>'),d.b("\n"+c),d.b('	<div id="twitter-link" class="share-link"></div>'),d.b("\n"+c),d.b('	<div id="google-link" class="share-link"></div>'),d.b("\n"+c),d.b('	<div id="link-link" class="share-link"></div>'),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/VideoShare",["backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MetaData","bam.url/url","hgn!mlb-tv-app/app/templates/video-share"],function(a,b,c,d,e,f,g){var h=b.extend({viewName:"VideoShare",tagName:"div",segmentID:void 0,base:"/video/v",markup:"",facebookSharingURL:void 0,twitterSharingURL:void 0,gplusSharingURL:void 0,embedSharingURL:void 0,urlToShare:void 0,liveSegment:void 0,params:void 0,events:{"click #facebook-link":"onFacebookClick","click #twitter-link":"onTwitterClick","click #google-link":"onGoogleClick","click #link-link":"onEmailClick","click #embed-link":"onEmbedClick"},initialize:function(a){this.params=a||{},this.initListeners()},initListeners:function(){e.listenTo(e,"change",this.render)},render:function(){if(this.params||(this.params={}),this.segmentID=e.get("content_id"),this.segmentID){this.urlToShare="http://"+window.location.host+this.base+this.segmentID,this.liveSegment=d.isLive()&&"live"===e.get("type"),this.liveSegment?(this.urlToShare="http://"+window.location.host+this.base+"live",this.params.notLiveSegment=!1):this.params.notLiveSegment=!0,this.twitterSharingURL="http://twitter.com/intent/tweet?text="+e.get("title")+"&url="+escape(this.urlToShare),this.facebookSharingURL="http://www.facebook.com/sharer.php?u="+escape(this.urlToShare),this.gplusSharingURL="https://plus.google.com/share?url="+escape(this.urlToShare),this.embedSharingURL="http://"+window.location.host+"/embedCode/video/"+this.segmentID;var a=this.params;this.$el&&(this.$el.html(g(a)),d.get("isEmbed")&&this.$el.addClass("share-container-embed"))}else this.$el.hide();return this},onFacebookClick:function(a){window.open(this.facebookSharingURL,"_blank","width=500,height=400")},onGoogleClick:function(a){window.open(this.gplusSharingURL,"_blank","width=500,height=400")},onTwitterClick:function(a){window.open(this.twitterSharingURL,"_blank","width=500,height=500")},onEmailClick:function(a){window.open("mailto:?to=&subject="+escape("120 Sports: "+e.get("title"))+"&body="+escape("Check out this video on 120Sports.com: ")+"%0A%0A"+escape("120 Sports: "+e.get("title"))+"%0A"+escape(this.urlToShare),"_self")},onEmbedClick:function(a){!this.liveSegment}});return h}),define("hgn!mlb-tv-app/app/templates/title",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="video-title">'),d.b("\n"+c),d.b('	<div id="video-share"></div>'),d.b("\n"+c),d.b('	<div class="video-title-text">'),d.b(d.v(d.f("videoTitle",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b('	<div class="video-description-text">'),d.b(d.v(d.f("videoDescription",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b('	<ul class="tag-list">'),d.b("\n"),d.b("\n"+c),d.b("	</ul>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/VideoTitleView",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/view/components/VideoPlayer","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/view/components/VideoShare","hgn!mlb-tv-app/app/templates/title"],function(a,b,c,d,e,f,g,h,i){var j=c.extend({viewName:"VideoTitleView",tagName:"div",videoShare:void 0,deviceType:void 0,events:{"click .tag-list-item":"onClickTagListItem"},initialize:function(){this.initListeners(),this.deviceType=getStartupDeviceTypeString()},initListeners:function(){this.listenTo(g,"change",this.render)},render:function(){var a;a=f.toJSON(),a.videoTitle=g.get("title"),a.videoDescription=g.get("description");f.get("initialSegment");return this.$el.html(i(a)),this},buildVideoShare:function(){this.videoShare=this.registerView(new h),this.assign("#video-share",this.videoShare,!0)},onClickTagListItem:function(b){var c=a(b.target).data();console.log(c.tagtype,c.tagvalue,c.tagdisplay),e.trigger("navigate:searchtag",c.tagvalue,c.tagtype)}});return j}),define("hgn!mlb-tv-app/app/templates/noVideo",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="message-box alert-container">'),d.b("\n"+c),d.b('	<p class="flash">To watch MLB.TV, select a game above.</p>'),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/video",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/get-flash",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="getFlashMessage">'),d.b("\n"+c),d.b("    <p>To view this video, you must be using a current version of Adobe's&reg; Flash Player.</p>"),d.b("\n"+c),d.b('    <p><a href="http://www.adobe.com/go/getflashplayer">Download the Adobe&reg; Flash Player</a></p>'),d.b("\n"+c),d.b("    <p>"),d.b("\n"+c),d.b('        <a href="http://www.adobe.com/go/getflashplayer">'),d.b("\n"+c),d.b('            <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player">'),d.b("\n"+c),d.b("        </a>"),d.b("\n"+c),d.b("    </p>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/get-android-app",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="get-android-app">'),d.b("\n"+c),d.b('	<a id="play-store-button" class="get-app-button" href="https://play.google.com/store/apps/details?id=com.bamnetworks.mobile.android.sports120">Get The App Now</a>'),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/VideoView",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/view/WidgetsView","bam.cookies/cookies","bandwagon/bandwagon","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/enums/events/MlbtvAppEvents","mlb-tv-app/app/view/components/VideoCompanionView","mlb-tv-app/app/view/components/VideoPlayer","mlb-tv-app/app/view/components/Scoreboard","mlb-tv-app/app/view/components/Ticker","mlb-tv-app/app/view/components/FeedSelector","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/Configuration","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/view/components/VideoTitleView","hgn!mlb-tv-app/app/templates/noVideo","hgn!mlb-tv-app/app/templates/video","hgn!mlb-tv-app/app/templates/get-flash","hgn!mlb-tv-app/app/templates/get-android-app"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=c.extend({viewName:"VideoView",tagName:"div",el:"#mlb-tv-container",model:o,videoCompanion:void 0,videoPlayer:void 0,endOfVideo:void 0,videoTitle:void 0,deviceType:void 0,mute:!1,bandwagonBus:void 0,initialize:function(){this.initListeners(),this.deviceType=getStartupDeviceTypeString()},initListeners:function(){this.bandwagonBus=g.getDispatcher(),n.on("display:eov",this.checkState,this),n.on("display:no-video",this.onNoVideo,this),n.on("display:init-video",this.onInitVideo,this),n.on("capability:noflash",this.onNoFlash,this),n.on("mobile:showGetAndroidApp",this.onShowGetAndroidApp,this)},initTrendingCarousel:function(){this.dataCards&&this.dataCards.cards&&a("#video-carousel").als({visible_items:Math.min(this.dataCards.cards.length,3),scrolling_items:3,start_from:0})},checkLogin:function(){var b=e.get("fprt");b?a("body").addClass("logged-in"):a("body").addClass("logged-out")},determineMute:function(){this.mute=Boolean(p.param("mute"))&&"false"!==String(p.param("mute")).toLowerCase(),window.mp5Config.videocore.volume=this.mute?0:window.mp5Config.videocore.volume},initScoreboard:function(){this.Scoreboard=new k},initTicker:function(){this.Ticker=new l},initFeedSelector:function(){this.feedSelector=new m},render:function(){return this.determineMute(),this.videoPlayer=new j({}),window.initialPlaylist?(console.log("video mode"),this.$el.html(t())):(console.log("novideo mode"),console.log(this.$el),o.set("noVideoMode",!0),this.$el.html(s()),n.trigger("appstate:initComplete")),this.checkLogin(),this.initScoreboard(),o.get("isEmbed")||(this.initTicker(),this.initFeedSelector(),this.buildWidgets()),this},buildEndOfVideo:function(){console.log("building eov"),this.$el.html(s())},buildNoVideo:function(a){},buildVideoTitle:function(){this.videoTitle=new r,this.assign("#video-title-container",this.videoTitle,!0)},buildWidgets:function(){this.widgets=new d},checkState:function(){this.noSupportedVideo||this.buildEndOfVideo()},onShowGetAndroidApp:function(){a("#video-title-container").hide(),a("#videoContainer").html(v())},onNoFlash:function(a){n.trigger("errormessage:show",{error:"downloadFlash"})},onNoVideo:function(a){this.noSupportedVideo=!0,this.buildNoVideo(a)},onInitVideo:function(){this.$el.html(t()),o.beginVideoModeInit()}});return w}),define("mlb-tv-app/app/control/Router",["backbone","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/view/VideoView"],function(a,b,c,d){var e=a.Router.extend({routes:{tv:"onTv","*path":"default"},initialize:function(){console.log("Router::initialize()"),this.initListeners(),this.deviceType=window.getStartupDeviceTypeString()},initListeners:function(){b.on("navigate:video",this.onTv,this),c.on("change:appInitialized",this.onAppInitializedChanged,this)},"default":function(){var a=c.get("view");a||this.onTv()},onTv:function(){if(c.get("appInitialized")){var a=new d;c.set("location","video"),c.set("view",a)}},onAppInitializedChanged:function(a,b,d){c.get("appInitialized")&&this.onTv()}});return e}),define("hgn!mlb-tv-app/app/templates/overlay/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="mlb-tv-concealer" style="position: relative">'),d.b("\n"+c),d.s(d.f("imageUrl",a,b,1),a,b,0,69,168,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="concealer-bg overlay-bg-image" style="background-image: url('),d.b(d.v(d.f("imageUrl",a,b,0))),d.b(');"></div>'),d.b("\n"+c)}),a.pop()),d.s(d.f("imageUrl",a,b,1),a,b,1,0,0,"")||(d.b('		<div class="concealer-bg" style="width: 960px; height: 540px; background-color: #333; position: absolute; top: 0; left: 0;"></div>'),d.b("\n"+c)),d.b('	<div id="concealer-container" style="width: 960px; height: 540px; position: relative;"></div>'),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/OverlayView",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/model/StateModel","hgn!mlb-tv-app/app/templates/overlay/container"],function(a,b,c,d,e){var f=c.extend({viewName:"OverlayView",el:"#mlb-tv-container",overlayElement:void 0,showOverlay:function(b){this.ensureElement();var c={};b&&(c.imageUrl=b);var f=e(c);return a("#flashPlayerContainer").removeClass("default"),d.get("isEmbed")&&a(".mlbtv-app-loading").css("top",0),this.overlayElement=a(f).appendTo(this.$el),this.$el.find(".message-box").hide(),d.set("videoHidden",!0),this.overlayElement},hideOverlay:function(){this.ensureElement(),a("#flashPlayerContainer").addClass("default"),this.overlayElement&&(this.overlayElement.remove(),this.overlayElement=void 0),this.$el.find(".message-box").show(),d.set("videoHidden",!1)}});return new f}),define("hgn!mlb-tv-app/app/templates/overlay/modalmessage",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="modal-panel">'),d.b("\n"+c),d.b('	<div class="message-pane '),d.b(d.v(d.f("type",a,b,0))),d.b('">'),d.b("\n"+c),d.b('		<div class="message">'),d.b("\n"+c),d.b('			<span class="message-text">'),d.b(d.t(d.f("message",a,b,0))),d.b("</span>"),d.b("\n"+c),d.s(d.f("url",a,b,1),a,b,0,146,255,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('			<a class="message-link-label" href="'),d.b(d.v(d.f("url",a,b,0))),d.b('">'),d.b("\n"+c),d.b("				"),d.b(d.v(d.f("label",a,b,0))),d.b('<span class="raquo">&raquo;</span>'),d.b("\n"+c),d.b("			</a>"),d.b("\n"+c)}),a.pop()),d.b("		</div>"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b('	<div class="matchup-pane">'),d.b("\n"+c),d.s(d.f("awayTeam",a,b,1),a,b,0,324,385,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="matchup">'),d.b(d.v(d.f("awayTeam",a,b,0))),d.b(" vs "),d.b(d.v(d.f("homeTeam",a,b,0))),d.b("</div>"),d.b("\n"+c)}),a.pop()),d.s(d.f("venue",a,b,1),a,b,0,411,454,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('		<div class="venue">at '),d.b(d.v(d.f("venue",a,b,0))),d.b("</div>"),d.b("\n"+c)}),a.pop()),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/overlay/modalMessageUnsupported",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="modal-panel" class="modal-unsupported">'),d.b("\n"+c),d.b('	<div class="message-pane">'),d.b("\n"+c),d.b('		<div class="title">'),d.b("\n"+c),d.b('			<span class="message-text">'),d.b(d.t(d.f("title",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b('		<div class="message">'),d.b("\n"+c),d.b("			<span>"),d.b(d.t(d.f("message",a,b,0))),d.b("\n"+c),d.s(d.f("url",a,b,1),a,b,0,216,329,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('				<a class="message-link-label" href="'),d.b(d.v(d.f("url",a,b,0))),d.b('">'),d.b("\n"+c),d.b("					"),d.b(d.v(d.f("label",a,b,0))),d.b('<span class="raquo">&raquo;</span>'),d.b("\n"+c),d.b("				</a>"),d.b("\n"+c)}),a.pop()),d.b("			</span>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/messaging/ModalMessagingView",["jquery","backbone","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/view/components/OverlayView","hgn!mlb-tv-app/app/templates/overlay/modalmessage","hgn!mlb-tv-app/app/templates/overlay/modalMessageUnsupported","bandwagon/bandwagon","mlb-tv-app/app/util/RedirectUtil","mlb-tv-app/app/tracking/TrackingManager"],function(a,b,c,d,e,f,g,h,i,j){var k=d.extend({viewName:"ModalMessagingView",bandwagonBus:void 0,modal:null,modalMessageModel:null,modalMessageVisible:!1,initialize:function(){this.bandwagonBus=h.getInstanceByKey(window.mp5Config.videocore.container)},showMessage:function(b){var d=c.get("selectedMatchup"),e=a.extend(d||{},b);this.modalMessageModel=e,i.setCommerceRedirectUrlCookie(),this.restoreMessage(e)},restoreMessage:function(b){this.ensureElement(),b||(b=this.modalMessageModel),this.bandwagonBus.publish("closePreferences"),this.modalMessageVisible&&this.hideModalMessage();var c=e.showOverlay(b.imageUrl),d=b.unsupported,h=d?g:f,i=d?"mlbtv-app-unsupported":"mlbtv-app-loading",k=a(d?".app-web.wrapper-tv":".mlbtv-video-only");this.modal=a(h(b)).appendTo(c.find("#concealer-container")),k.addClass(i),this.modalMessageVisible=!0,j.trackByImpressionKeyWithError(j.PLAYER_LAUNCH_ERROR,b.key)},hideModalMessage:function(){this.modalMessageVisible&&(this.modal.remove(),e.hideOverlay(),c.get("fatalError")||a(".mlbtv-app-loading").removeClass("mlbtv-app-loading")),this.modalMessageVisible=!1}});return new k}),define("hgn!mlb-tv-app/app/templates/error",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="alert banner-message '),d.b(d.v(d.f("type",a,b,0))),d.b('">'),d.b("\n"+c),d.b('	<button type="button" class="alert-close banner-message-close"></button>'),d.b("\n"+c),d.b("	<span>"),d.b(d.t(d.f("message",a,b,0))),d.b("</span>"),d.b("\n"+c),d.s(d.f("url",a,b,1),a,b,0,155,289,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b("		<span>"),d.b("\n"+c),d.b('			<a href="'),d.b(d.v(d.f("url",a,b,0))),d.b('" target="_blank" class="cta-link">'),d.b("\n"+c),d.b("				"),d.b(d.t(d.f("label",a,b,0))),d.b('<span class="raquo">&raquo;</span>'),d.b("\n"+c),d.b("			</a>"),d.b("\n"+c),d.b("		</span>"),d.b("\n"+c)}),a.pop()),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/messaging/PassiveMessagingView",["jquery","backbone","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/util/RedirectUtil","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/tracking/TrackingManager","mlb-tv-app/app/control/EventRegistry","hgn!mlb-tv-app/app/templates/error"],function(a,b,c,d,e,f,g,h,i,j){var k=i.getVideoPlayerEvents(),l=c.extend({viewName:"PassiveMessagingView",el:"#alert-container",passiveMessageQueue:[],currentPassiveMessage:null,clearBannerMessages:function(){this.ensureElement();var b=this;b.messageFeed!==g.get("selectedGame")&&(b.currentPassiveMessage=null,b.passiveMessageQueue=[],this.$el.find(".banner-message").fadeOut(function(){a(this).remove(),b.adjustPreloaderOffset(),d.trigger(k.MESSAGES_CHANGE)}))},onPassiveMessage:function(a){e.setCommerceRedirectUrlCookie(),this.queuePassiveMessage(a),this.nextPassiveMessage()},passiveMessagesMatch:function(a,b){return a&&b&&(!a.message&&a===b||a.message&&a.message===b.message)},queuePassiveMessage:function(a){if(!this.passiveMessagesMatch(a,this.currentPassiveMessage)){for(var b=0,c=this.passiveMessageQueue.length;c>b;b++){var d=this.passiveMessageQueue[b];if(this.passiveMessagesMatch(a,d))return}this.passiveMessageQueue.unshift(a)}},nextPassiveMessage:function(){if(!this.currentPassiveMessage&&this.passiveMessageQueue.length>0){var a=this.passiveMessageQueue.pop();this.showPassiveMessage(j,a),this.currentPassiveMessage=a}},showPassiveMessage:function(b,c,e){this.ensureElement();var f=this;setTimeout(function(){f.$el.append(b(c)).fadeIn();var i=f.$el.add(".banner-message-close");i.on("click",function(b){a(this).closest(".banner-message").fadeOut(function(){a(this).remove(),f.adjustPreloaderOffset(),d.trigger(k.MESSAGES_CHANGE)}),e&&d.trigger(e),"marketing"!==c.type&&(f.currentPassiveMessage=null,f.nextPassiveMessage())}),c.autoClose&&(console.log("AUTO CLOSE ENABLED: ",c.autoClose),setTimeout(function(){console.log("CLOSING: "),i.trigger("click")},c.autoClose)),f.messageFeed=g.get("selectedGame"),f.adjustPreloaderOffset(),h.trackByImpressionKeyWithError(h.PLAYER_LAUNCH_ERROR,c.key)},400)},adjustPreloaderOffset:function(){f.get("initComplete")||a("#mlb-tv-overlay").css("top",a("#top-widgets").height()+"px")}});return new l}),define("hgn!mlb-tv-app/app/templates/alertMessage",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<span class="game-alerts__body">'),d.b(d.t(d.f("message",a,b,0))),d.b("</span>"),d.b("\n"+c),d.b('<span class="game-alerts__label" data-calendar-event-id="'),d.b(d.v(d.f("calendarEventId",a,b,0))),d.b('">'),d.b(d.t(d.f("label",a,b,0))),d.b("</span>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/messaging/GameAlertItem",["jquery","backbone","bandwagon/bandwagon","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/model/Preferences","mlb-tv-app/app/model/MediaMetrics","hgn!mlb-tv-app/app/templates/alertMessage","mlb-tv-app/app/tracking/TrackingManager"],function(a,b,c,d,e,f,g,h,i){var j=d.extend({viewName:"GameAlertItem",tagName:"div",className:"game-alerts__item",events:{"click .game-alerts__label":"labelClicked"},bandwagonBus:void 0,template:h,initialize:function(a){this.initListeners(),this.model={alert:a,visible:!0},this.$el.addClass("alert-status--"+a.status),this.bandwagonBus=c.getInstanceByKey(window.mp5Config.videocore.container)},initListeners:function(){this.listenTo(g,"change",this.onMediaMetricsChanged)},render:function(){return this.checkWatchingGame(),this.$el.html(this.template(this.model.alert)),this.model.visible?this.$el.show():this.$el.hide(),this},getAlert:function(){return this.model.alert},labelClicked:function(b){i.trackByImpressionKey(i.FANTASY_ALERT_CLICKTHRU);var c=a(b.target).data();!this.isWatchingCalendarEventId(c.calendarEventId)&&c.calendarEventId&&this.bandwagonBus.publish("WATCH_NOW_CLICKED",_.extend({isWatchNow:!0},c))},isWatchingCalendarEventId:function(a){return g.isSelectedSlotEvent(a)&&g.isSelectedSlotVideo()},showAlert:function(a){this.model.visible=!!a,this.render()},checkWatchingGame:function(){var a=this.$el.find("span[data-calendar-event-id]").data();a&&a.calendarEventId&&this.isWatchingCalendarEventId(a.calendarEventId)?this.model.alert.label="Watching":this.model.alert.label="Watch Now &raquo;"},onMediaMetricsChanged:function(a,b){this.render()}});return j}),define("mlb-tv-app/app/view/components/messaging/FantasyAlertItem",["jquery","backbone","mlb-tv-app/app/view/components/messaging/GameAlertItem"],function(a,b,c){var d=c.extend({viewName:"FantasyAlertItem",className:"game-alerts__item game-alerts__item--fantasy"});return d}),define("mlb-tv-app/app/view/components/messaging/GameAlertsView",["jquery","backbone","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/Preferences","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/view/components/messaging/GameAlertItem","mlb-tv-app/app/view/components/messaging/FantasyAlertItem","mlb-tv-app/app/tracking/TrackingManager"],function(a,b,c,d,e,f,g,h,i){var j={"at-bat":3,"on-deck":2,"in-hole":1,pitching:0},k=f.extend({viewName:"GameAlertsView",el:"#game-alerts-container",alertItems:[],currentAlertItem:void 0,playerLoaded:!1,trackAlerts:void 0,debouncedResetAlertItems:void 0,events:{"click .game-alerts__close":"closeCurrentAlert","click .game-alerts__arrow--left":"previousAlert","click .game-alerts__arrow--right":"nextAlert"
},initialize:function(){console.log("GameAlertsView initialize"),this.initListeners(),this.trackAlerts=_.debounce(function(){i.trackByImpressionKey(i.FANTASY_ALERT_SHOW)},250),this.debouncedResetAlertItems=_.debounce(this.resetAlertItems.bind(this),100)},initListeners:function(){this.listenTo(d,"change:isCasting",this.onIsCastingChanged),this.listenTo(c,"userprofile:update",this.onPreferenceChanged),this.listenTo(c,"userpreference:update",this.onPreferenceChanged),this.listenTo(c,"player:loaded",this.onPlayerLoaded)},onPlayerLoaded:function(){this.playerLoaded=!0,this.updateVisibility(this.checkForHiding())},onPreferenceChanged:function(a){a&&!_.isUndefined(a.playerTrackerAlert)&&this.updateVisibility(this.checkForHiding())},onIsCastingChanged:function(a,b,c){this.updateVisibility(this.checkForHiding())},checkForHiding:function(){var a=e.get("playerTrackerAlert");return!this.playerLoaded||0===this.alertItems.length||a||_.isUndefined(a)||_.isNull(a)||d.get("isCasting")},updateVisibility:function(a){return this.ensureElement(),a===!0?void this.$el.hide():void(this.alertItems.length>0&&this.$el.show())},addAlert:function(a){var b=new h(a);this.alertItems.push(b),b.showAlert(!1),this.currentAlertItem=void 0,this.debouncedResetAlertItems()},removeAlert:function(a){if(this.currentAlertItem&&this.currentAlertItem.getAlert().fantasyAlertId===a)return void this.closeCurrentAlert();var b=_.find(this.alertItems,function(b){return b.getAlert().fantasyAlertId===a});b&&(this.alertItems=_.without(this.alertItems,b),b.remove(),this.updateArrows())},closeCurrentAlert:function(a){if(this.currentAlertItem){var b=this.getPreviousAlert();this.alertItems=_.without(this.alertItems,this.currentAlertItem),this.currentAlertItem=b,this.debouncedResetAlertItems(b)}},switchActive:function(a){a&&(this.currentAlertItem&&this.currentAlertItem.showAlert(!1),a.showAlert(!0),this.currentAlertItem=a,e.get("playerTrackerAlert")===!1&&this.trackAlerts(),this.updateArrows())},getPreviousAlert:function(){var a=this.alertItems.indexOf(this.currentAlertItem);return 0>=a?void 0:this.alertItems[a-1]},previousAlert:function(a){this.switchActive(this.getPreviousAlert())},getNextAlert:function(){var a=this.alertItems.indexOf(this.currentAlertItem);return 0>a||a===this.alertItems.length-1?void 0:this.alertItems[a+1]},nextAlert:function(a){this.switchActive(this.getNextAlert())},updateArrows:function(){this.ensureElement();var a=this.$el.find(".game-alerts__arrow--left"),b=this.$el.find(".game-alerts__arrow--right");this.alertItems[0]===this.currentAlertItem?a.addClass("disabled"):a.removeClass("disabled"),this.alertItems[this.alertItems.length-1]===this.currentAlertItem?b.addClass("disabled"):b.removeClass("disabled")},resetAlertItemElements:function(){this.ensureElement();var a=this.$el.find(".game-alerts__list");a.empty(),_.forEach(this.alertItems,function(b){a.append(b.$el)})},sortAlerts:function(a){return a.sort(function(a,b){var c=a.getAlert(),d=b.getAlert(),e=j[c.status.toLowerCase()]-j[d.status.toLowerCase()];return 0!==e?e:(e=c.timestamp-d.timestamp,0!==e?e:c.fantasyAlertId.locale(d.fantasyAlertId))})},resetAlertItems:function(a){this.alertItems=this.sortAlerts(this.alertItems),this.resetAlertItemElements(),this.switchActive(a||_.last(this.alertItems)),this.updateVisibility(this.checkForHiding())}});return new k}),define("hgn!mlb-tv-app/app/templates/marketingMessage",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="marketing-message banner-message">'),d.b("\n"+c),d.b('	<div class="group">'),d.b("\n"+c),d.b('		<div class="marketing-bgimage" style="background-image: url('),d.b(d.v(d.f("image",a,b,0))),d.b(')">'),d.b("\n"+c),d.s(d.f("url",a,b,1),a,b,0,154,303,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('			<div class="marketing-button marketing-fader '),d.b(d.v(d.f("style",a,b,0))),d.b('">'),d.b("\n"+c),d.b('				<a href="'),d.b(d.v(d.f("url",a,b,0))),d.b('" target="_blank" class="marketing-link">'),d.b(d.v(d.f("label",a,b,0))),d.b("</a>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c)}),a.pop()),d.b("		</div>"),d.b("\n"+c),d.b('		<div class="marketing-textwrapper">'),d.b("\n"+c),d.b('			<div class="marketing-text">'),d.b("\n"+c),d.b('				<p class="marketing-title">'),d.b(d.v(d.f("title",a,b,0))),d.b("</p>"),d.b("\n"+c),d.b('				<p class="marketing-body">'),d.b(d.t(d.f("body",a,b,0))),d.b("</p>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b('	<div class="marketing-close marketing-fader banner-message-close">&times;</div>'),d.b("\n"+c),d.b("</div>"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("text!mp5/vpm/json/messages.json",[],function(){return'{\n  "error":"An error has occurred.",\n  "invalidCalendarEventId":{"type": "warning", "isModal": true, "message": "There was a problem with the data retrieved for this stream."},\n  "downloadFlash":{"type": "warning", "isModal":true, "unsupported":true, "title":"You have launched an event that is only accessible with Adobe Flash Player.", "message":"To watch this event, please install the latest version. <a class=\'message-link-label\' href=\'http://get.adobe.com/flashplayer\'>Download<span class=\'raquo\'>»</span></a><br/>If Flash is installed, please enable the Adobe Flash plugin in your browser settings. For instructions, please click <a class=\'message-link-label\' href=\'https://helpx.adobe.com/flash-player.html\'>here<span class=\'raquo\'>»</span></a>."}\n}\n'}),define("mlb-tv-app/app/view/components/messaging/MessagingCompanionView",["jquery","backbone","bandwagon/bandwagon","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/util/RedirectUtil","mlb-tv-app/app/model/UserSession","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/marketing/MarketingMessagingManager","mlb-tv-app/app/marketing/FreeGameBrandingManager","mlb-tv-app/app/view/components/OverlayView","mlb-tv-app/app/view/components/messaging/ModalMessagingView","mlb-tv-app/app/view/components/messaging/PassiveMessagingView","mlb-tv-app/app/view/components/messaging/GameAlertsView","hgn!mlb-tv-app/app/templates/marketingMessage","text!mp5/vpm/json/messages.json","mlb-tv-app/app/model/Configuration"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=f.getVideoPlayerEvents(),u=f.getMarketingEvents(),v=function(){"mini"!=j.get("mode")&&e.trigger(t.MESSAGES_CHANGE)},w=d.extend({viewName:"MessagingCompanionView",el:"#alerts-container",messagesJson:null,marketingMessagesJson:null,messagesJsonRequested:!1,messagesJsonRequestComplete:!1,marketingMessagingBeginCalled:!1,defaultMessagesJson:JSON.parse(r),messageQueue:[],bandwagonBus:void 0,initialize:function(){this.bandwagonBus=c.getInstanceByKey(window.mp5Config.videocore.container),e.on("errormessage:show",this.onErrorMessage,this),i.on("change",this.clearBannerMessages,this),e.on("init:mp5config",this.onMp5config,this),e.on("appstate:initComplete",this.onAppInitComplete,this),e.on("videoplayer:selectedMediaSlotChangedWithContent",this.clearBannerMessages,this),e.on(u.MESSAGE_BEGIN,this.onMarketingMessagingBegin,this),e.on(u.MESSAGE_SHOW,this.onMarketingMessageShow,this),e.on(u.MESSAGE_AUTO_CLOSE,this.onMarketingMessageAutoClose,this),this.FantasyEvents=f.getFantasyEvents(),this.bandwagonBus.on.call(this,this.FantasyEvents.ACTIVE_PLAYERS,this.onFantasyPlayersActive),this.bandwagonBus.on.call(this,this.FantasyEvents.DISMISS_PLAYERS,this.onFantasyPlayersDismiss),this.initMarketingMessaging()},onAppInitComplete:function(){n.modalMessageVisible?n.hideModalMessage():m.hideOverlay()},onMp5config:function(a){if(a){var b=s.param("toasterMessageSource"),c=b&&b.match(/^https?\:\/\/([a-zA-Z0-9\/.]+\.bamstatic\.com|localhost(:\d+)?)\/[a-zA-Z0-9\/.]+/i)?b:mp5Config.global.toasterMessagesJson;this.initJsons(c)}},initJsons:function(b){this.requestMessagesJson();var c=this;a.getJSON(b).done(function(a){c.marketingMessagesJson=a,c.initMarketingMessaging()})},onMarketingMessagingBegin:function(){this.marketingMessagingBeginCalled=!0,this.initMarketingMessaging(),this.initFreeGameBranding()},initFreeGameBranding:function(){window.mp5Config.app.components.sponsorship.brandingEnabled&&l.initialize(h.get("userType"))},initMarketingMessaging:function(){this.marketingMessagingBeginCalled&&this.messagesJson&&k.initialize(h.get("userType"),h.get("features"),this.marketingMessagesJson)},onMarketingMessageShow:function(b){v();var c=a.extend({},b);c.body=g.replaceRedirectTokens(b.body),b.url&&(c.url=g.appendRedirectUrl(b.url)),g.setCommerceRedirectUrlCookie(),o.showPassiveMessage(q,c,u.MESSAGE_CLOSE)},onMarketingMessageAutoClose:function(b){this.$el.find(".marketing-message").fadeOut(function(){a(this).remove(),v()})},hideModal:function(){n.hideModalMessage()},restoreErrorModal:function(){j.get("fatalError")&&n.restoreMessage()},requestMessagesJson:function(){var b=this,c=(s.param("env"),this.getMessagesUrl(s.param("env")));a.ajax({url:c,dataType:"json",success:function(a){b.messagesJson=a},error:function(){b.messagesJson=null},complete:function(){b.messagesJsonRequestComplete=!0,b.processQueuedMessages()},timeout:3e3}),this.messagesJsonRequested=!0,this.messagesJsonRequestComplete=!1},getMessagesUrl:function(a){var b="http://ui.qa.bamstatic.com/",c="http://ui.beta.bamstatic.com/",d=window.mp5Config.global.messagesJson,e=/(http:\/\/ui(\.qa|\.beta|)\.bamstatic.com\/)/gi;switch(a){case"qa":d=d.replace(e,b);break;case"beta":d=d.replace(e,c)}return d},onErrorMessage:function(a){this.messageQueue.push(a),null!==this.messagesJson?this.processQueuedMessages():this.messagesJsonRequestComplete?(this.processQueuedMessages(),this.messagesJsonRequested=!1,this.messagesJsonRequestComplete=!1):this.messagesJsonRequested||window.mp5Config&&this.requestMessagesJson()},processQueuedMessages:function(){for(var a=this.messageQueue.length,b=0;a>b;b++){var c=this.messageQueue[b],d=this.messagesJson?this.messagesJson[c.error]:void 0;!d&&c.errorMsg&&(d=c.errorMsg),d?_.defer(_(this.displayMessage).bind(this),d,c):this.processFallbackMessage(c)}this.messageQueue=[]},processFallbackMessage:function(a){var b=this.defaultMessagesJson,c=b?b[a.error]:void 0;c||(console.error("ApplicationView processFallbackMessage: could not find an error message to use (data.error = "+a.error+")."),c="An error has occurred."),_.defer(_(this.displayMessage).bind(this),c,a)},replaceMessageTokens:function(a,b){return a?(_.each(b,function(b,c){a=a.split("@@"+c.toUpperCase()+"@@").join(b)},this),a):a},getQueryString:function(a){var b=window.location.search;return a&&b.indexOf("?")>-1&&(b="&"+b.split("?")[1]),b},displayMessage:function(a,b){var c=b.error,d=!0,b=b.messageData,e=a.url&&a.url.indexOf("?")>-1;b&&(d=void 0!==b.appendRedirectUrl?b.appendRedirectUrl:!0,a.message=this.replaceMessageTokens(a.message,b),a.url=this.replaceMessageTokens(a.url,b)+this.getQueryString(e),a.title=this.replaceMessageTokens(a.title,b),a.label=this.replaceMessageTokens(a.label,b));var f={type:a.type||"message",message:g.replaceRedirectTokens(a.message||a),url:d?g.appendRedirectUrl(a.url||null):a.url,label:a.label||null,title:g.replaceRedirectTokens(a.title),unsupported:a.unsupported||!1,key:c,autoClose:a.autoClose||null};a.isModal?this.onModalMessage(f):o.onPassiveMessage(f)},onModalMessage:function(a){j.set("fatalError",!0),j.get("initComplete")||e.trigger("appstate:initComplete"),n.showMessage(a)},onFantasyPlayersActive:function(b){if(console.log("onFantasyPlayersActive"),console.log(b),!window.mp5Config.app.components.fantasy.enabled)return!1;var c=this.messagesJson?this.messagesJson.fantasyActivePlayer||{}:{};_.each(b,function(b){var d=a.extend({},c);d.fantasyAlertId=b.status_key,d.status=b.status,d.calendarEventId=b.calendar_event_id,d.timestamp=b.timestamp,d.message=this.replaceFantasyTokens(d.message,{"@@PLAYER_NAME@@":b.player_name,"@@TEAM_ABBREV@@":b.team_abbrev}),p.addAlert(d)}.bind(this))},onFantasyPlayersDismiss:function(a){return console.log("onFantasyPlayersDismiss"),console.log(a),window.mp5Config.app.components.fantasy.enabled?void _.each(a,function(a){p.removeAlert(a.status_key)}):!1},replaceFantasyTokens:function(a,b){for(var c in b)a&&a.indexOf(c)>-1&&(a=a.split(c).join(b[c]));return a},testErrorKey:function(b){if(this.marketingMessagesJson&&this.marketingMessagesJson[b]){var c=a.extend({},this.marketingMessagesJson[b]);c.ignoreLastDisplay=!0,e.trigger(u.MESSAGE_TRIGGER,c)}else this.onErrorMessage({error:b});return'Displaying message for key: "'+b+'"'}});return new w}),define("hgn!mlb-tv-app/app/templates/navigation",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b("\n"+c),d.b("<ul>"),d.b("\n"+c),d.b('	<li class="daypicker-item">'),d.b("\n"+c),d.b("		"),d.b("\n"+c),d.b("	</li>"),d.b("\n"),d.b("\n"+c),d.s(d.f("signedIn",a,b,1),a,b,0,60,228,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<li class="signedin">'),d.b("\n"+c),d.b('		<div class="label">#UserName</div>'),d.b("\n"+c),d.b("		<ul>"),d.b("\n"+c),d.b("			<li>Dropdown Item 1</li>"),d.b("\n"+c),d.b("			<li>Dropdown Item 2</li>"),d.b("\n"+c),d.b("			<li>Dropdown Item 3</li>"),d.b("\n"+c),d.b("		</ul>"),d.b("\n"+c),d.b("	</li>"),d.b("\n"+c)}),a.pop()),d.b("\n"+c),d.b('	<li class="prefs-item">'),d.b("\n"+c),d.b("		<div>"),d.b("\n"+c),d.b('			<a href="#" title="Preferences" class="nav-icon gear" id="tv-preferences">'),d.b("\n"+c),d.b('				<div class="icon"></div>'),d.b("\n"+c),d.b("			</a>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</li>"),d.b("\n"+c),d.b("	<li>"),d.b("\n"+c),d.b("		<div>"),d.b("\n"+c),d.b('			<a href="#" title="Help" class="help" id="tv-help">Help</a>'),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</li>"),d.b("\n"+c),d.b("</ul>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/overlay/matchup",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div class="matchup-container">'),d.b("\n"+c),d.s(d.f("imageUrl",a,b,1),a,b,0,46,131,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('	<div class="overlay-bg-image" style="background-image: url('),d.b(d.v(d.f("imageUrl",a,b,0))),d.b(');"></div>'),d.b("\n"+c)}),a.pop()),d.b('	<div class="matchup-pane">'),d.b("\n"+c),d.b('		<div class="matchup-panel">'),d.b("\n"+c),d.b('			<div class="matchup">'),d.b(d.v(d.f("awayTeam",a,b,0))),d.b(" vs "),d.b(d.v(d.f("homeTeam",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b('			<div class="venue">at '),d.b(d.v(d.f("venue",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b('            <div class="venue">'),d.b(d.v(d.f("gameDate",a,b,0))),d.b("</div>"),d.b("\n"+c),d.b('			<div class="spinner">'),d.b("\n"+c),d.b('				<img src="/sections/tv/images/spinner.gif" alt="">'),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("hgn!mlb-tv-app/app/templates/preferences/container",["hogan"],function(a){function b(){return c.render.apply(c,arguments)}var c=new a.Template({code:function(a,b,c){var d=this;return d.b(c=c||""),d.b('<div id="preferencesPane">'),d.b("\n"+c),d.b('	<div class="header">'),d.b("\n"+c),d.b("		<nav>"),d.b("\n"+c),d.b('			<ul class="tabs">'),d.b("\n"+c),d.b('				<li class="active">General</li>'),d.b("\n"+c),d.b("				<li>Alerts</li>"),d.b("\n"+c),d.b("				<li>Teams</li>"),d.b("\n"+c),d.b("			</ul>"),d.b("\n"+c),d.b("		</nav>"),d.b("\n"+c),d.b('		<div class="close-button">&#215;</div>'),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b('	<ul id="general-view" class="tab-content active">'),d.b("\n"+c),d.b("		<li>"),d.b("\n"+c),d.b('			<div class="setting-name">Spoilers</div>'),d.b("\n"+c),d.b('			<div class="form-field">'),d.b("\n"+c),d.b('				<label><input id="spoilers-checkbox" type="checkbox" '),d.s(d.f("spoilersPref",a,b,1),a,b,0,424,441,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('checked="checked"')}),a.pop()),d.b("><span>Hide scores, highlights and final timecodes for all games</span></label>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</li>"),d.b("\n"+c),d.b("		<li>"),d.b("\n"+c),d.b('			<div class="setting-name">Game Start Time Spoiler</div>'),d.b("\n"+c),d.b('			<div class="form-field">'),d.b("\n"+c),d.b('				<label><input id="live-games-from-start-checkbox" type="checkbox" '),d.s(d.f("playLiveGameFromStartPref",a,b,1),a,b,0,750,767,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('checked="checked"')}),a.pop()),d.b("><span>Play live games from the start</span></label>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</li>"),d.b("\n"+c),d.b("		<li>"),d.b("\n"+c),d.b('			<div class="setting-name">Closed Captioning</div>'),d.b("\n"+c),d.b('			<div class="form-field">'),d.b("\n"+c),d.b('				<label><input id="cc-checkbox" type="checkbox" '),d.s(d.f("closedCaptionPref",a,b,1),a,b,0,1029,1046,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('checked="checked"')}),a.pop()),d.b("><span>Enable closed captioning</span></label>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</li>"),d.b("\n"+c),d.b("		<li>"),d.b("\n"+c),d.b('			<div class="setting-name">Standard Video'),d.b("\n"+c),d.b("				<span>(<i>LIVE DVR functionality not available</i>)</span>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b('			<div class="form-field">'),d.b("\n"+c),d.b('				<label><input id="standard-video-checkbox" type="checkbox" '),d.s(d.f("standardVideoPref",a,b,1),a,b,0,1370,1387,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('checked="checked"')}),a.pop()),d.b("><span>Launch games in standard video</span></label>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</li>"),d.b("\n"+c),d.b("	</ul>"),d.b("\n"+c),d.b('    <ul id="alerts-view" class="tab-content">'),d.b("\n"+c),d.b("		<li>"),d.b("\n"+c),d.b('			<div class="setting-name">Fantasy Tracker Alerts</div>'),d.b("\n"+c),d.b('			<div class="form-field">'),d.b("\n"+c),d.b('				<label><input id="fantasy-tracker-checkbox" type="checkbox" '),d.s(d.f("playerTrackerAlert",a,b,1),a,b,0,2321,2338,"{{ }}")&&(d.rs(a,b,function(a,b,c){c.b('checked="checked"')}),a.pop()),d.b("><span>Hide Fantasy Tracker alerts</span></label>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</li>"),d.b("\n"+c),d.b("    </ul>"),d.b("\n"+c),d.b('	<div id="teams-view" class="tab-content">'),d.b("\n"+c),d.b('		<div class="left-teams">'),d.b("\n"+c),d.b('			<div class="my-teams">My Teams</div>'),d.b("\n"+c),d.b("			<span>To change your favorite teams</br> you must edit your</span>"),d.b("\n"+c),d.b("			</br>"),d.b("\n"+c),d.b('			<a href="https://secure.mlb.com/account/profile.jsp" target="_blank">mlb.com preferences</a>'),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b('		<div class="right-teams">'),d.b("\n"+c),d.b('			<div class="teams-list-container">'),d.b("\n"+c),d.b('				<ul id="fav-teams">'),d.b("\n"+c),d.s(d.f("favTeamData",a,b,1),a,b,0,2859,2956,"{{ }}")&&(d.rs(a,b,function(a,b,d){d.b('                        <li><img src="'),d.b(d.v(d.f("logo",a,b,0))),d.b('"/><span>'),d.b(d.v(d.f("name",a,b,0))),d.b("</span></li>"),d.b("\n"+c)}),a.pop()),d.s(d.f("favTeamData",a,b,1),a,b,1,0,0,"")||(d.b("                        <li><span>No Teams Selected...</span></li>"),d.b("\n"+c)),d.b("				</ul>"),d.b("\n"+c),d.b("			</div>"),d.b("\n"+c),d.b("		</div>"),d.b("\n"+c),d.b("	</div>"),d.b("\n"+c),d.b("</div>"),d.b("\n"),d.fl()},partials:{},subs:{}},"",a);return b.template=c,b}),define("mlb-tv-app/app/view/components/Preferences",["jquery","backbone","mlb-tv-app/app/view/BaseView","hgn!mlb-tv-app/app/templates/preferences/container","mlb-tv-app/app/model/Preferences","mlb-tv-app/app/control/Dispatcher"],function(a,b,c,d,e,f){var g=c.extend({viewName:"PreferencesView",tagName:"div",el:"#preferencesView",events:{},favTeamData:void 0,spoilersPref:void 0,playLiveGameFromStartPref:void 0,closedCaptionPref:void 0,standardVideoPref:void 0,playerTrackerAlert:void 0,spoilersCheckbox:void 0,liveGamesFrontStartCheckbox:void 0,ccCheckbox:void 0,standardVideoCheckbox:void 0,fantasyAlertsCheckbox:void 0,tabs:void 0,closeButton:void 0,initialize:function(){e.updateModel(),this.render(),this.storeReferences(),this.initListeners()},storeReferences:function(){this.tabs=a(e.get("tabSelector")),this.closeButton=a(e.get("closeButtonSelector")),this.spoilersCheckbox=a("#spoilers-checkbox"),this.liveGamesFrontStartCheckbox=a("#live-games-from-start-checkbox"),this.ccCheckbox=a("#cc-checkbox"),this.standardVideoCheckbox=a("#standard-video-checkbox"),this.fantasyAlertsCheckbox=a("#fantasy-tracker-checkbox")},initListeners:function(){this.closeButton.on("click",a.proxy(this.onClickCloseButton,this)),this.tabs.on("click",a.proxy(this.onClickTab,this)),this.spoilersCheckbox.on("change",a.proxy(this.onClickSpoilersCheckbox,this)),this.liveGamesFrontStartCheckbox.on("change",a.proxy(this.onClickLiveGamesFromStartCheckbox,this)),this.ccCheckbox.on("click",a.proxy(this.onClickCloseCaptionCheckbox,this)),this.standardVideoCheckbox.on("click",a.proxy(this.onClickStandardVideoCheckbox,this)),this.fantasyAlertsCheckbox.on("click",a.proxy(this.onClickFantasyTrackerCheckbox,this))},render:function(){var b={spoilersPref:e.get("spoilersPref"),playLiveGameFromStartPref:e.get("playLiveGameFromStartPref"),closedCaptionPref:e.get("closedCaptionPref"),standardVideoPref:e.get("standardVideoPref"),playerTrackerAlert:e.get("playerTrackerAlert"),hideGameAlerts:!1,hideVideoHighlightAlerts:!1,favTeamData:e.get("favTeamData")},c=d(b);return a(c).appendTo(a(e.get("parentSelector"))),this},remove:function(){this.$el.remove()},onClickCloseButton:function(a){this.remove(),f.trigger("preferences:close")},onClickTab:function(b){this.selectTabAtIndex(a(b.target).index())},onClickSpoilersCheckbox:function(a){var b={};b.hideScores=this.spoilersCheckbox.prop("checked"),f.trigger("userpreference:update",b),e.set("spoilersPref",b.hideScores),f.trigger("preferences:spoilerschange")},onClickLiveGamesFromStartCheckbox:function(a){var b={};b.playLiveGameFromStart=this.liveGamesFrontStartCheckbox.prop("checked"),f.trigger("userpreference:update",b),e.set("playLiveGameFromStartPref",b.playLiveGameFromStart),f.trigger("preferences:livegameschange")},onClickCloseCaptionCheckbox:function(a){var b={};b.showClosedCaptions=this.ccCheckbox.prop("checked"),f.trigger("userpreference:update",b),e.set("closedCaptionPref",b.showClosedCaptions)},onClickStandardVideoCheckbox:function(a){var b={};b.preferStandardVideo=this.standardVideoCheckbox.prop("checked"),f.trigger("userpreference:update",b),e.set("standardVideoPref",b.preferStandardVideo)},onClickFantasyTrackerCheckbox:function(a){var b={};b.playerTrackerAlert=this.fantasyAlertsCheckbox.prop("checked"),f.trigger("userpreference:update",b),e.set("playerTrackerAlert",b.playerTrackerAlert)},selectTabAtIndex:function(b){var c=a(e.get("tabSelector")),d=a(e.get("tabContentSelector"));c.removeClass("active").eq(b).addClass("active"),d.removeClass("active").eq(b).addClass("active")}});return g}),define("mlb-tv-app/app/view/ApplicationView",["jquery","backbone","bam.url/url","bam.cookies/cookies","jquery.daypicker/jquery.daypicker","flipDate/flipDate","bandwagon/bandwagon","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/enums/events/MlbtvAppEvents","mlb-tv-app/app/view/BaseView","mlb-tv-app/app/view/components/VideoCompanionView","mlb-tv-app/app/view/components/OverlayView","mlb-tv-app/app/view/components/messaging/MessagingCompanionView","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/AppConfig","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/model/Configuration","mlb-tv-app/app/tracking/TrackingManager","hgn!mlb-tv-app/app/templates/navigation","hgn!mlb-tv-app/app/templates/overlay/matchup","mlb-tv-app/app/view/components/Preferences","mlb-tv-app/app/model/Preferences","mlb-tv-app/app/util/RedirectUtil"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=(h.getVideoPlayerEvents(),b.View.extend({showBetaHeader:!1,viewName:"ApplicationView",el:"#app",views:[],date:"",appLoadingClass:"mlbtv-app-loading",preferences:null,preferencesVisible:!1,monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],videoCompanion:void 0,events:{},bandwagonBus:void 0,initialize:function(){s.removeParam("forwardUrl"),this.bandwagonBus=g.getInstanceByKey(window.mp5Config.videocore.container),this.initApplication()},setDate:function(){var a=r.get("calendar_event_id");if(a){console.log("parse calendar event id for date",a);var b=a.split("-");b.slice(2).join("-");date=new Date(b[2],b[3]-1,b[4]),isNaN(date.getTime())&&this.setDate()}else{var c=s.param("date");c?date=c:date=f.today()}return o.set("date",date),date},closePreferences:function(){return this.preferencesVisible?(this.preferences.remove(),l.hideOverlay(),m.restoreErrorModal(),this.preferencesVisible=!1,!0):!1},togglePreferences:function(){if(m.hideModal(),!this.closePreferences()){var a=o.get("selectedMatchup"),b=a?a.imageUrl:void 0;l.showOverlay(b),x.set("parentSelector","#mlb-tv-concealer #concealer-container"),this.preferences=new w,this.preferencesVisible=!0}},isPreferencesVisible:function(){return this.preferencesVisible},onInitComplete:function(){var b=a("."+this.appLoadingClass).not(function(b,c){return o.get("noVideoMode")&&a(c).hasClass("mlbtv-video-only")});b.removeClass(this.appLoadingClass),a("#mlb-tv-overlay").empty(),o.completeVideoModeInit()},onMatchupData:function(b){if(o.set("selectedMatchup",b),!o.get("initComplete")){var c=a("#mlb-tv-overlay");o.get("isEmbed")&&(a(".mlbtv-app-loading").css("top",0),a("#primary_content_container #mlb-tv-container").css({padding:0,margin:0})),a("#mlb-tv-container").removeClass(this.appLoadingClass),c.addClass(this.appLoadingClass),c.empty();var d=new Date(b.gameDate),e=""+this.padZero(d.getMonth()+1)+"/"+this.padZero(d.getDate())+"/"+d.getFullYear().toString().substr(2,2);b.gameDate=e,a(v(b)).appendTo(c)}},padZero:function(a){return 10>a&&(a="0"+a),a},getTimezoneString:function(a){var b=a.getTimezoneOffset(),c=function(a,b){for(var c=""+a;c.length<b;)c="0"+c;return c};return(0>b?"+":"-")+c(parseInt(Math.abs(b/60)),2)+c(Math.abs(b%60),2)},checkLogin:function(){var b=d.get("fprt");return b?a("body").addClass("logged-in"):a("body").addClass("logged-out"),o.set("isLoggedIn",b),b},setEnv:function(){var a=s.param("env");a||(a=window.location.hostname.indexOf("beta")>=0?"beta":window.location.hostname.indexOf("qa")>=0||window.location.hostname.indexOf("dev")>=0||window.location.hostname.indexOf("local")>=0?"dev":"prod"),console.log(a),o.set("env",a)},renderNav:function(){var b='<p style="text-align:center;color:#FFF;font-size:12px;width:990px;margin:auto">Welcome to the New MLB.TV Media Player. <a href="http://mlb.mlb.com/mediacenter/index.jsp?mp4=true" target="_blank" style="text-decoration:underline;color:#999;font-size:12px;">Return to the old media player</a></p>';try{this.showBetaHeader=window.mp5Config.app.components.header.showBetaHeader===!0}catch(c){}try{window.mp5Config.app.components.header.headerMessage&&(b=window.mp5Config.app.components.header.headerMessage)}catch(c){}if(this.showBetaHeader){var d='<div id="beta-div" style="width:100%;height:24px;background-color:#222;padding-top:12px">'+b+"</div>";a("body").prepend(d)}a("#tv-sub-nav").html(u())},initApplication:function(){if(p.set("data",window.mp5Config),o.set("isEmbed",p.getValue("global.isEmbed")),o.set("isPSTV",p.getValue("global.isPSTV")),o.set("dayPickerEnabled",p.getValue("app.dayPicker.enabled")&&!o.get("isPSTV")),this.bandwagonBus.publish(i.GET_CLIENT_IP_COMMAND),this.setEnabledComponents(),n.on("preferences:close",this.togglePreferences,this),n.on("togglePreferences",this.togglePreferences,this),n.on("show:gameData",this.onMatchupData,this),n.on("appstate:initComplete",this.onInitComplete,this),n.on("destroy:view",this.onViewDestroy,this),n.on("userprofile:update",this.onUserProfileAvailable,this),o.on("change:view",this.onViewChange,this),this.bandwagonBus.on.call(this,"closePreferences",this.closePreferences),window.initialPlaylist){var a=window.initialPlaylist;r.set("calendar_event_id",a.calendar_event_id),r.set("content_id",a.content_id),r.set("type",a.type),o.set("initialPlay",!0)}this.setDate(),this.setEnv(),this.renderNav(),this.videoCompanion=new k,_.defer(function(){b.history.start()})},setEnabledComponents:function(){var a=c.Location(),b=a.getParam("gamedayComponent");null!==b&&(window.mp5Config.app.components.gameday.enabled="true"===b),b=a.getParam("scoreboardComponent"),null!==b&&(window.mp5Config.app.components.scoreboard.enabled="true"===b),b=a.getParam("highlightsComponent"),null!==b&&(window.mp5Config.app.components.highlights.enabled="true"===b),b=a.getParam("fantasyComponent"),null!==b&&(window.mp5Config.app.components.fantasy.enabled="true"===b),b=a.getParam("socialComponent"),null!==b&&(window.mp5Config.app.components.social.enabled="true"===b)},onUserProfileAvailable:function(){a("#tv-sub-nav .prefs-item div").show()},updateNavSelection:function(b){a("a").removeClass("active");var c="#"+b.viewName.toLowerCase();a(c).addClass("active")},onViewChange:function(b,c){console.log("ViewChange");for(var d=this.views.length-1;d>=0;d--)this.views[d].destroy();this.views.length=0,this.views.push(c),a(".primary-content").append(c.render().el),this.updateNavSelection(c)},onViewDestroy:function(a){this.views.pop().destroy()},testErrorKey:m.testErrorKey.bind(m)}));return z}),define("mlb-tv-app/app/control/commands/ParseMetaData",["backbone","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MetaData"],function(a,b,c,d){function e(a){if(console.log("command:parsemetadata",a),a){g(a.content_id),g(a.calendar_event_id);a.metaData||a?(f(a.metaData||a),d.set({isAudioOnly:a.isAudioOnly||!1,isLive:a.isLive||!1})):console.log("!!Parse MetaData Error!!")}}function f(a){d.set({advisory_rating:a.advisory_rating,authflow_required:a.authflow_required,authorization:a.authorization,away_team_id:a.away_team_id,bigBlurb:a.bigBlurb,blurb:a.blurb,calendar_event_id:a.calendar_event_id,call_letters:a.call_letters,closed_captioned:a.closed_captioned,closed_captions_location_ttml:a.closed_captions_location_ttml,combined_media_state:a.combined_media_state,content_id:a.content_id,coverage_association:a.coverage_association,coverage_type:a.coverage_type,currentPlaybackScenario:a.currentPlaybackScenario,date:a.date,default_dam_view_key:a.default_dam_view_key,duration:a.duration,embeddable:a.embeddable,event_date:a.event_date,game_id:a.game_id,game_pk:a.game_pk,headline:a.headline,home_team_id:a.home_team_id,imagesByType:a.imagesByType,inning_index_location_xml:a.inning_index_location_xml,keywords:a.keywords,kicker:a.kicker,login:a.login,milestones_xml:a.milestones_xml,notEmbeddable:a.notEmbeddable,notShareable:a.notShareable,shareable:a.shareable,size:a.size,start_time:a.start_time,thumb:a.thumb,tv_rating:a.tv_rating,twitterInline:a.twitterInline})}function g(a){return void 0===a||isNaN(a)||(a=a.toString()),a}console.log("parse listener set"),b.on("service:parsemetadata",e)}),define("mlb-tv-app/app/model/AdsModel",["jquery","backbone"],function(a,b){var c=b.Model.extend({NETWORK_ID:"/2605",INVENTORY_HIERARCHY:"/mlb.mlb/tv",defaults:{networkId:void 0,inventoryHierarchy:"MLB",ads:void 0,outOfPageAd:void 0,skinElement:void 0},initialize:function(){this.set("networkId",this.NETWORK_ID),this.set("inventoryHierarchy",this.INVENTORY_HIERARCHY),this.set("ads",[])},addAd:function(a){var b=this.get("ads"),c=b.indexOf(a);-1===c&&this.get("ads").push(a)},removeAd:function(a){var b=this.get("ads"),c=b.indexOf(a),d=b.splice(c,1);return this.set("ads",b),d.length?d[0]:void 0},clearAds:function(){this.set("ads",[])}});return new c}),define("doubleclick/gpt",["require","exports","module","jquery","bam.url/url"],function(a,b,c){"use strict";function d(){var a=h,b=a.split("/").slice(0,3).join("/");
return b}function e(a){for(var b=k.thresholds.length;b;)if(b-=1,a>k.thresholds[b])return b}var f=a("jquery"),g=a("bam.url/url");window.googletag=window.googletag||{},window.gptadslots=window.gptadslots||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().enableAsyncRendering(),window.googletag.pubads().collapseEmptyDivs()}),function(){var a="https:"===document.location.protocol,b=document.createElement("script");b.async=!0,b.type="text/javascript",b.src=(a?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}(),window.setTakeover=function(a){var b=a.bgColor||"#000000",c=a.bgImage?"url("+a.bgImage+")":"none",d=a.bgPosition||"center top",e=a.bgRepeat||"no-repeat",g=a.bgAttachment||"scroll";if(m.addClass("sponsored-takeover"),i.css({"background-color":b,"background-image":c,"background-position":d,"background-repeat":e,"background-attachment":g}),a.clickHref){var h=a.clickHref,j=a.clickTarget||"_blank",k=a.clickHeight||"900px",l=a.clickTop||"0";f("<a></a>").attr({id:"sponsored-takeover-link",target:j,href:h}).css({display:"block",position:"absolute","z-index":"0",width:"100%",height:k,top:l}).prependTo(i)}f("#sidebar-takeover-news").insertAfter(f("#sidebar-takeover-ad"))};var h,i,j,k={networkId:"/2605/",inventoryHierarchy:"mlb.mlb/",skinElement:"body",enableSingleRequest:!1,responsive:!1,thresholds:[0,480,670,768,980,1024]},l=g.Location().getParam("adtest"),m=f("html"),n=f(window),o=f(".ad-responsive-slot");b.responsiveRefresh=function(){o.each(function(){var a=f(this);a.find(".ad-responsive-size").hide().each(function(){var c=f(this),d=c.data("thresholds"),e=f.inArray(j,d)>-1;if(e){var g=a.data("targeting"),i=c.data("targeting"),k=f.extend({},g,i),l=c.attr("id"),m=c.data("sizes");if(c.show(),!(l in window.gptadslots)){var n=a.hasClass("ad-outofpage");n?(b.queue(function(){window.gptadslots[l]=window.googletag.defineOutOfPageSlot(h,l).addService(window.googletag.pubads())}),f.isEmptyObject(k)||b.setTargeting(l,k),b.display(l)):(b.queue(function(){window.gptadslots[l]=window.googletag.defineSlot(h,m,l).addService(window.googletag.pubads())}),f.isEmptyObject(k)||b.setTargeting(l,k),b.display(l))}}return!e})})},b.responsiveInit=function(){j=e(n.width()),b.responsiveRefresh(),n.on("resize",function(){var a=e(n.width());a!==j&&(j=a,b.responsiveRefresh())})},b.queue=function(a){window.googletag.cmd.push(a)},b.enableSingleRequest=function(){b.queue(function(){window.googletag.pubads().enableSingleRequest()})},b.defineOutOfPageSlot=function(a){var c=a.container,e=a.targeting,f=h;a.inventoryHierarchy&&(f=d()+a.inventoryHierarchy),b.queue(function(){window.gptadslots[c]=window.googletag.defineOutOfPageSlot(f,c).addService(window.googletag.pubads()),b.setTargeting(c,e)})},b.defineSlot=function(a){var c=a.container,e=a.sizes,f=a.targeting,g=h;a.inventoryHierarchy&&(g=d()+a.inventoryHierarchy),b.queue(function(){window.gptadslots[c]=window.googletag.defineSlot(g,e,c).addService(window.googletag.pubads()),b.setTargeting(c,f)})},b.defineAndDisplaySlot=function(a){var b=a.container,c=a.sizes,e=h;a.inventoryHierarchy&&(e=d()+a.inventoryHierarchy),window.gptadslots[b]=window.googletag.pubads().display(e,c,b)},b.setPageTargeting=function(a){for(var c in a)if(a.hasOwnProperty(c)){var d=window.googletag.pubads();b.queue(d.setTargeting.bind(d,c,a[c]))}},b.setTargeting=function(a,c){for(var d in c)c.hasOwnProperty(d)&&b.queue(window.gptadslots[a].setTargeting.bind(window.gptadslots[a],d,c[d]))},b.enableServices=function(){b.queue(function(){window.googletag.enableServices()})},b.display=function(a){document.getElementById(a).style.display="block",b.queue(function(){window.googletag.display(a)})},b.refresh=function(a){for(var b=f.isArray(a)?a:"undefined"!=typeof a?[a]:[],c=window.googletag.pubads(),d=[],e=0;e<b.length;e++)d.push(window.gptadslots[b[e]]);c.refresh(d)},b.init=function(a){if(f.extend(k,a),i=f(k.skinElement),h=k.networkId+k.inventoryHierarchy,k.enableSingleRequest&&b.enableSingleRequest(),k.hasOwnProperty("outOfPageAd")&&b.defineOutOfPageSlot(k.outOfPageAd),k.hasOwnProperty("ads"))for(var c=0;c<k.ads.length;c++)b.defineSlot(k.ads[c]);if(window.DeviceType&&b.setPageTargeting({devicetype:window.DeviceType.device}),l&&b.setPageTargeting({adtest:l}),b.enableServices(),k.hasOwnProperty("outOfPageAd")&&b.display(k.outOfPageAd.container),k.hasOwnProperty("ads"))for(var d=0;d<k.ads.length;d++)b.display(k.ads[d].container);k.responsive&&b.responsiveInit()}}),define("mlb-tv-app/app/control/commands/RenderDFPAdsCommand",["jquery","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/AdsModel","doubleclick/gpt"],function(a,b,c,d){function e(){window.getStartupDeviceTypeString();c.clearAds(),c.set("networkId",c.NETWORK_ID),c.set("inventoryHierarchy",c.INVENTORY_HIERARCHY),c.set("outOfPageAd",{container:"rails-canvas",sizes:g}),d.setPageTargeting({usertype:"free"}),c.set("skinElement","#rails-canvas"),f("#rails-canvas")}function f(b){var e=a(b).children();0===e.length&&d.init(c.toJSON())}var g=[1,1];b.on("doubleclick:render",e)}),define("mlb-tv-app/app/control/commands/GetClientIPCommand",["jquery","backbone","bandwagon/bandwagon","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/enums/events/MlbtvAppEvents","mlb-tv-app/app/model/UserSession","mlb-tv-app/app/model/StateModel"],function(a,b,c,d,e,f,g){"use strict";function h(){a.ajax({url:"https://api.ipify.org?format=json",success:j,error:k,complete:i})}function i(a,b){g.set("appInitialized",!0)}function j(a,b,c){"string"==typeof a&&(a=JSON.parse(a)),f.set("clientIP",a.ip)}function k(a,b,c){console.error("There was an error retrieving the client's IP address",b,c)}var l=void 0;l=d.getDispatcher(),l.on(e.GET_CLIENT_IP_COMMAND,h)}),define("mlb-tv-app/app/control/commands/HandleSlotChangeCommand",["backbone","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MetaData","mlb-tv-app/app/model/MediaMetrics","bandwagon/bandwagon","mlb-tv-app/app/control/EventRegistry","mlb-tv-app/app/model/GamedayUpdate","mlb-tv-app/app/util/GameIdUtil","mlb-tv-app/app/marketing/SponsorshipDisplayManager","mlb-tv-app/app/util/ContentUrlUtil","mlb-tv-app/app/model/Configuration"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var a,f,g,i,k=e.getSelectedSlot(),l=e.get("previouslySelectedSlot");if(!k)return void console.log("Selected Slot invalid");if(h.set("minisetup",!1),a=k.currentPlayheadTimecode,g=k.mediaSlotState,f=e.setGameIdOnModels(),i=e.get("unformattedSelectedGame"),c.set("selectedGame",f),d.set("game_id",i),"EMPTY"===k.mediaSlotState||k.isHighlight||n(k.calendarEventId,k.contentId,""),k&&k.slotIndex!==l||k.isHighlight){if(k.isHighlight)o();else if(k.isHighlight||"EMPTY"!==g)void 0!==f&&""!==f&&(""!=e.get("previousGameId")&&b.trigger("videoplayer:selectedMediaSlotChangedWithContent"),a&&(b.trigger("hotswapGameday",{gameId:i,timecode:a}),o()),$("li.game").removeClass("selected"),c.get("videoAreaLayoutState")!==c.LAYOUT_STATE_STANDARD&&$("#"+f).addClass("selected"),b.trigger("minimode:updateMiniModePanel"));else{var m=c.get("scoreboardState");"scoreboard"!=m&&b.trigger("scoreboard:show")}j.onSelectedSlotChange(k)}b.trigger("updateGamestripButtonState"),b.trigger("render:scoreboardCarousel"),b.trigger("highlights:updateSelectedHighlights")}function n(a,b,c){if(history.replaceState){var d={calendarEventId:a,contentId:b,title:c},e=k.formatContentUrl(d),f="Video: "+c+" | "+l.PARTNERNAME;history.replaceState("",f,e)}}function o(){b.trigger("mediametrics:fetch"),$("li.game").removeClass("selected")}var p=void 0,q=g.getMlbtvAppEvents();console.log("parse listener set"),p=g.getDispatcher(),p.on(q.HANDLE_SLOT_CHANGE,m)}),define("mlb-tv-app/app/control/commands/UpdateBroadcasterLogoCommand",["jquery","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/Playlist","mlb-tv-app/app/enums/Broadcasters"],function(a,b,c,d){"use strict";function e(){var a,c=f(b.get("currentBroadcaster")),d="/sections/tv/images/header/{broadcaster}.png";b.get("isPSTV")===!0&&("DEFAULT"!==c&&void 0!==c&&null!==c?(a="pstv-"+c.toLowerCase(),d=d.split("{broadcaster}").join(a),console.log("broadcaster detected: setting logo to: ",a)):(a="pstv",d=d.split("{broadcaster}").join("pstv-2016@2x"),console.log("no broadcaster detected, keeping default logo")),g(a,d))}function f(a){return a&&(a=a.toLowerCase(),a=a.indexOf(d.TBS.toLowerCase())>-1?d.TBS:a.indexOf(d.FOX.toLowerCase())>-1?d.FOX:a.indexOf(d.FS1.toLowerCase())>-1?d.FS1:a.indexOf(d.ESPN.toLowerCase())>-1?d.ESPN:a.indexOf(d.TNT.toLowerCase())>-1?d.TNT:a.indexOf(d.MLBN.toLowerCase())>-1?d.MLBN:a.indexOf(d.SN.toLowerCase())>-1?d.SN:d.DEFAULT),a}function g(b,c){var d=a(".logo"),e=a(".logo img");d.attr("class","logo "+b),e.attr("src",c)}b.on("change:currentBroadcaster",e)}),define("mlb-tv-app/app/control/commands/HandleFeedSelectorChangeCommand",["underscore","mlb-tv-app/app/control/Dispatcher","mlb-tv-app/app/model/AppConfig","mlb-tv-app/app/model/StateModel","mlb-tv-app/app/model/MediaMetrics","mlb-tv-app/app/enums/events/VideoPlayerEvents","mlb-tv-app/app/util/MultiAngleFeedUtil"],function(a,b,c,d,e,f,g){function h(){return d.get("isPSTV")}function i(){return c.get("videocore").flash.enableEventMultiContent}function j(a){d.set("currentBroadcaster",a)}function k(){j("DEFAULT")}function l(b){if(!b)return void k();var c=a.find(b.contentFeeds,function(a){return a.isSelected});if(c&&c.angle){var d=g.getMediaFromAngle(c.angle);j(d&&d.source||"DEFAULT")}else k()}function m(b,c){a.each(b,function(b){b.isVisible=a.contains(c,b.contentId)})}function n(a){b.trigger(f.FEED_SELECTOR_CREATE,a)}function o(){h()&&window.VPM&&a.each(window.VPM.mediaInstances,function(a){var b=a.feedSelectionModel.streamSelectionOptions;b.contentFeeds=g.mergeFeedsAndAngles(b.contentFeeds,g.filterAnglesByAngleMedia(g.getAnglesFromGame(g.findGame(b.calendarEventId))))}),r&&(l(r),m(r.contentFeeds,e.getPlayingContentIds())),n(r)}function p(b){!i()||b?(r=b,r&&(r.audioOverlaySupported=!0)):r.audioOverlaySupported=!1,!b&&r&&a.each(r.contentFeeds,function(a){a.isSelected=!1}),o()}function q(){b.trigger(f.FEED_SELECTOR_UPDATE)}var r=null;b.on(f.FEED_SELECTOR_LOAD,p),b.on(f.FEED_SELECTOR_UPDATE,o),e.on("change:currentSlots",q),d.on("change:isCasting",q)}),define("mlb-tv-app/app/control/Commands",["mlb-tv-app/app/control/commands/ParseMetaData","mlb-tv-app/app/control/commands/RenderDFPAdsCommand","mlb-tv-app/app/control/commands/GetClientIPCommand","mlb-tv-app/app/control/commands/HandleSlotChangeCommand","mlb-tv-app/app/control/commands/UpdateBroadcasterLogoCommand","mlb-tv-app/app/control/commands/HandleFeedSelectorChangeCommand"],function(){}),define("mlb-tv-app/app/application",["console.wrapper/console.wrapper","bam.url/url","backbone","mlb-tv-app/app/control/Router","mlb-tv-app/app/view/ApplicationView","mlb-tv-app/app/control/Commands"],function(a,b,c,d,e,f){a.disable();var g=b.Location(window.location).getParam("logEnabled");return"string"==typeof g&&"true"===g.toLowerCase()&&a.enable(),{init:function(){var a=new e;window.testMessage=function(b){return a.testErrorKey(b)};new d}}}),define("mlbtv-startup",["require","exports","module","bam.url/url","mlb-tv-app/app/application"],function(a,b,c){function d(){e()&&f();var b=a("mlb-tv-app/app/application");b.init()}function e(){var a=g.Location(window.location),b=a.getParam("embed");return b="true"===b||b===!0}function f(){$(".navbar, #global-footer-container, #top-widgets, #mlbtv-epg, #feedSelector").hide()}var g=a("bam.url/url");d()}),require(["mlbtv-startup"]);